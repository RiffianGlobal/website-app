import{ap as O,aq as en,ar as _t,as as tn,at as xe,au as Hl,av as Ei,aw as rn,ax as ki,ay as Xi,az as mt,aA as Ul,aB as Wl,aC as Vl,aD as wa,aE as ql}from"./vendor-AsFy8gcr.js";var va={},ar={},nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.walletLogo=void 0;const zl=(e,t)=>{let r;switch(e){case"standard":return r=t,`data:image/svg+xml,%3Csvg width='${t}' height='${r}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return r=t,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${t}' height='${r}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return r=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return r=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return r=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return r=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;default:return r=t,`data:image/svg+xml,%3Csvg width='${t}' height='${r}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `}};nn.walletLogo=zl;var sn={};Object.defineProperty(sn,"__esModule",{value:!0});sn.LINK_API_URL=void 0;sn.LINK_API_URL="https://www.walletlink.org";var P={},dr={},$e={};Object.defineProperty($e,"__esModule",{value:!0});$e.errorValues=$e.standardErrorCodes=void 0;$e.standardErrorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}};$e.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}};var on={},an={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serialize=e.getErrorCode=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=$e,r="Unspecified error message.";e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function n(f,g=r){if(f&&Number.isInteger(f)){const w=f.toString();if(d(t.errorValues,w))return t.errorValues[w].message;if(l(f))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return g}e.getMessageFromCode=n;function s(f){if(!Number.isInteger(f))return!1;const g=f.toString();return!!(t.errorValues[g]||l(f))}e.isValidCode=s;function i(f){var g;if(typeof f=="number")return f;if(o(f))return(g=f.code)!==null&&g!==void 0?g:f.errorCode}e.getErrorCode=i;function o(f){return typeof f=="object"&&f!==null&&(typeof f.code=="number"||typeof f.errorCode=="number")}function a(f,{shouldIncludeStack:g=!1}={}){const w={};if(f&&typeof f=="object"&&!Array.isArray(f)&&d(f,"code")&&s(f.code)){const m=f;w.code=m.code,m.message&&typeof m.message=="string"?(w.message=m.message,d(m,"data")&&(w.data=m.data)):(w.message=n(w.code),w.data={originalError:c(f)})}else w.code=t.standardErrorCodes.rpc.internal,w.message=u(f,"message")?f.message:r,w.data={originalError:c(f)};return g&&(w.stack=u(f,"stack")?f.stack:void 0),w}e.serialize=a;function l(f){return f>=-32099&&f<=-32e3}function c(f){return f&&typeof f=="object"&&!Array.isArray(f)?Object.assign({},f):f}function d(f,g){return Object.prototype.hasOwnProperty.call(f,g)}function u(f,g){return typeof f=="object"&&f!==null&&g in f&&typeof f[g]=="string"}})(an);Object.defineProperty(on,"__esModule",{value:!0});on.standardErrors=void 0;const oe=$e,Ea=an;on.standardErrors={rpc:{parse:e=>we(oe.standardErrorCodes.rpc.parse,e),invalidRequest:e=>we(oe.standardErrorCodes.rpc.invalidRequest,e),invalidParams:e=>we(oe.standardErrorCodes.rpc.invalidParams,e),methodNotFound:e=>we(oe.standardErrorCodes.rpc.methodNotFound,e),internal:e=>we(oe.standardErrorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return we(t,e)},invalidInput:e=>we(oe.standardErrorCodes.rpc.invalidInput,e),resourceNotFound:e=>we(oe.standardErrorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>we(oe.standardErrorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>we(oe.standardErrorCodes.rpc.transactionRejected,e),methodNotSupported:e=>we(oe.standardErrorCodes.rpc.methodNotSupported,e),limitExceeded:e=>we(oe.standardErrorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>Rt(oe.standardErrorCodes.provider.userRejectedRequest,e),unauthorized:e=>Rt(oe.standardErrorCodes.provider.unauthorized,e),unsupportedMethod:e=>Rt(oe.standardErrorCodes.provider.unsupportedMethod,e),disconnected:e=>Rt(oe.standardErrorCodes.provider.disconnected,e),chainDisconnected:e=>Rt(oe.standardErrorCodes.provider.chainDisconnected,e),unsupportedChain:e=>Rt(oe.standardErrorCodes.provider.unsupportedChain,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new Ca(t,r,n)}}};function we(e,t){const[r,n]=ka(t);return new Sa(e,r||(0,Ea.getMessageFromCode)(e),n)}function Rt(e,t){const[r,n]=ka(t);return new Ca(e,r||(0,Ea.getMessageFromCode)(e),n)}function ka(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}let Sa=class extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||typeof t!="string")throw new Error('"message" must be a nonempty string.');super(t),this.code=e,r!==void 0&&(this.data=r)}},Ca=class extends Sa{constructor(e,t,r){if(!Jl(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}};function Jl(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}var cn={},Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.isErrorResponse=void 0;function $l(e){return e.errorMessage!==void 0}Jt.isErrorResponse=$l;var $t={};Object.defineProperty($t,"__esModule",{value:!0});$t.LIB_VERSION=void 0;$t.LIB_VERSION="3.9.1";Object.defineProperty(cn,"__esModule",{value:!0});cn.serializeError=void 0;const Gl=Jt,Zl=$t,Ql=$e,Yl=an;function Kl(e,t){const r=(0,Yl.serialize)(Xl(e),{shouldIncludeStack:!0}),n=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");n.searchParams.set("version",Zl.LIB_VERSION),n.searchParams.set("code",r.code.toString());const s=eu(r.data,t);return s&&n.searchParams.set("method",s),n.searchParams.set("message",r.message),Object.assign(Object.assign({},r),{docUrl:n.href})}cn.serializeError=Kl;function Xl(e){return typeof e=="string"?{message:e,code:Ql.standardErrorCodes.rpc.internal}:(0,Gl.isErrorResponse)(e)?Object.assign(Object.assign({},e),{message:e.errorMessage,code:e.errorCode,data:{method:e.method}}):e}function eu(e,t){const r=e==null?void 0:e.method;if(r)return r;if(t!==void 0){if(typeof t=="string")return t;if(Array.isArray(t)){if(t.length>0)return t[0].method}else return t.method}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.standardErrors=e.standardErrorCodes=e.serializeError=e.getMessageFromCode=e.getErrorCode=void 0;const t=$e;Object.defineProperty(e,"standardErrorCodes",{enumerable:!0,get:function(){return t.standardErrorCodes}});const r=on;Object.defineProperty(e,"standardErrors",{enumerable:!0,get:function(){return r.standardErrors}});const n=cn;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return n.serializeError}});const s=an;Object.defineProperty(e,"getErrorCode",{enumerable:!0,get:function(){return s.getErrorCode}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return s.getMessageFromCode}})})(dr);var te={};Object.defineProperty(te,"__esModule",{value:!0});te.ProviderType=te.RegExpString=te.IntNumber=te.BigIntString=te.AddressString=te.HexString=te.OpaqueType=void 0;function hr(){return e=>e}te.OpaqueType=hr;te.HexString=hr();te.AddressString=hr();te.BigIntString=hr();function tu(e){return Math.floor(e)}te.IntNumber=tu;te.RegExpString=hr();var eo;(function(e){e.CoinbaseWallet="CoinbaseWallet",e.MetaMask="MetaMask",e.Unselected=""})(eo||(te.ProviderType=eo={}));var ru=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(P,"__esModule",{value:!0});P.isMobileWeb=P.getLocation=P.isInIFrame=P.createQrUrl=P.getFavicon=P.range=P.isBigNumber=P.ensureParsedJSONObject=P.ensureBN=P.ensureRegExpString=P.ensureIntNumber=P.ensureBuffer=P.ensureAddressString=P.ensureEvenLengthHexString=P.ensureHexString=P.isHexString=P.prepend0x=P.strip0x=P.has0xPrefix=P.hexStringFromIntNumber=P.intNumberFromHexString=P.bigIntStringFromBN=P.hexStringFromBuffer=P.hexStringToUint8Array=P.uint8ArrayToHex=P.randomBytesHex=void 0;const tt=ru(en),bt=dr,Se=te,Ra=/^[0-9]*$/,Ia=/^[a-f0-9]*$/;function nu(e){return xa(crypto.getRandomValues(new Uint8Array(e)))}P.randomBytesHex=nu;function xa(e){return[...e].map(t=>t.toString(16).padStart(2,"0")).join("")}P.uint8ArrayToHex=xa;function su(e){return new Uint8Array(e.match(/.{1,2}/g).map(t=>parseInt(t,16)))}P.hexStringToUint8Array=su;function iu(e,t=!1){const r=e.toString("hex");return(0,Se.HexString)(t?`0x${r}`:r)}P.hexStringFromBuffer=iu;function ou(e){return(0,Se.BigIntString)(e.toString(10))}P.bigIntStringFromBN=ou;function au(e){return(0,Se.IntNumber)(new tt.default(pr(e,!1),16).toNumber())}P.intNumberFromHexString=au;function cu(e){return(0,Se.HexString)(`0x${new tt.default(e).toString(16)}`)}P.hexStringFromIntNumber=cu;function Si(e){return e.startsWith("0x")||e.startsWith("0X")}P.has0xPrefix=Si;function ln(e){return Si(e)?e.slice(2):e}P.strip0x=ln;function Ma(e){return Si(e)?`0x${e.slice(2)}`:`0x${e}`}P.prepend0x=Ma;function fr(e){if(typeof e!="string")return!1;const t=ln(e).toLowerCase();return Ia.test(t)}P.isHexString=fr;function Aa(e,t=!1){if(typeof e=="string"){const r=ln(e).toLowerCase();if(Ia.test(r))return(0,Se.HexString)(t?`0x${r}`:r)}throw bt.standardErrors.rpc.invalidParams(`"${String(e)}" is not a hexadecimal string`)}P.ensureHexString=Aa;function pr(e,t=!1){let r=Aa(e,!1);return r.length%2===1&&(r=(0,Se.HexString)(`0${r}`)),t?(0,Se.HexString)(`0x${r}`):r}P.ensureEvenLengthHexString=pr;function lu(e){if(typeof e=="string"){const t=ln(e).toLowerCase();if(fr(t)&&t.length===40)return(0,Se.AddressString)(Ma(t))}throw bt.standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(e)}`)}P.ensureAddressString=lu;function uu(e){if(Buffer.isBuffer(e))return e;if(typeof e=="string"){if(fr(e)){const t=pr(e,!1);return Buffer.from(t,"hex")}return Buffer.from(e,"utf8")}throw bt.standardErrors.rpc.invalidParams(`Not binary data: ${String(e)}`)}P.ensureBuffer=uu;function Pa(e){if(typeof e=="number"&&Number.isInteger(e))return(0,Se.IntNumber)(e);if(typeof e=="string"){if(Ra.test(e))return(0,Se.IntNumber)(Number(e));if(fr(e))return(0,Se.IntNumber)(new tt.default(pr(e,!1),16).toNumber())}throw bt.standardErrors.rpc.invalidParams(`Not an integer: ${String(e)}`)}P.ensureIntNumber=Pa;function du(e){if(e instanceof RegExp)return(0,Se.RegExpString)(e.toString());throw bt.standardErrors.rpc.invalidParams(`Not a RegExp: ${String(e)}`)}P.ensureRegExpString=du;function hu(e){if(e!==null&&(tt.default.isBN(e)||Ta(e)))return new tt.default(e.toString(10),10);if(typeof e=="number")return new tt.default(Pa(e));if(typeof e=="string"){if(Ra.test(e))return new tt.default(e,10);if(fr(e))return new tt.default(pr(e,!1),16)}throw bt.standardErrors.rpc.invalidParams(`Not an integer: ${String(e)}`)}P.ensureBN=hu;function fu(e){if(typeof e=="string")return JSON.parse(e);if(typeof e=="object")return e;throw bt.standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(e)}`)}P.ensureParsedJSONObject=fu;function Ta(e){if(e==null||typeof e.constructor!="function")return!1;const{constructor:t}=e;return typeof t.config=="function"&&typeof t.EUCLID=="number"}P.isBigNumber=Ta;function pu(e,t){return Array.from({length:t-e},(r,n)=>e+n)}P.range=pu;function gu(){const e=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:t,host:r}=document.location,n=e?e.getAttribute("href"):null;return!n||n.startsWith("javascript:")||n.startsWith("vbscript:")?null:n.startsWith("http://")||n.startsWith("https://")||n.startsWith("data:")?n:n.startsWith("//")?t+n:`${t}//${r}${n}`}P.getFavicon=gu;function _u(e,t,r,n,s,i){const o=n?"parent-id":"id",a=new URLSearchParams({[o]:e,secret:t,server:r,v:s,chainId:i.toString()}).toString();return`${r}/#/link?${a}`}P.createQrUrl=_u;function Oa(){try{return window.frameElement!==null}catch{return!1}}P.isInIFrame=Oa;function mu(){try{return Oa()&&window.top?window.top.location:window.location}catch{return window.location}}P.getLocation=mu;function bu(){var e;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((e=window==null?void 0:window.navigator)===null||e===void 0?void 0:e.userAgent)}P.isMobileWeb=bu;var un={};Object.defineProperty(un,"__esModule",{value:!0});un.ScopedLocalStorage=void 0;class yu{constructor(t){this.scope=t}setItem(t,r){localStorage.setItem(this.scopedKey(t),r)}getItem(t){return localStorage.getItem(this.scopedKey(t))}removeItem(t){localStorage.removeItem(this.scopedKey(t))}clear(){const t=this.scopedKey(""),r=[];for(let n=0;n<localStorage.length;n++){const s=localStorage.key(n);typeof s=="string"&&s.startsWith(t)&&r.push(s)}r.forEach(n=>localStorage.removeItem(n))}scopedKey(t){return`${this.scope}:${t}`}}un.ScopedLocalStorage=yu;var Bt={},gr={},_r={},Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.EVENTS=void 0;Gt.EVENTS={STARTED_CONNECTING:"walletlink_sdk.started.connecting",CONNECTED_STATE_CHANGE:"walletlink_sdk.connected",DISCONNECTED:"walletlink_sdk.disconnected",METADATA_DESTROYED:"walletlink_sdk_metadata_destroyed",LINKED:"walletlink_sdk.linked",FAILURE:"walletlink_sdk.generic_failure",SESSION_CONFIG_RECEIVED:"walletlink_sdk.session_config_event_received",ETH_ACCOUNTS_STATE:"walletlink_sdk.eth_accounts_state",SESSION_STATE_CHANGE:"walletlink_sdk.session_state_change",UNLINKED_ERROR_STATE:"walletlink_sdk.unlinked_error_state",SKIPPED_CLEARING_SESSION:"walletlink_sdk.skipped_clearing_session",GENERAL_ERROR:"walletlink_sdk.general_error",WEB3_REQUEST:"walletlink_sdk.web3.request",WEB3_REQUEST_PUBLISHED:"walletlink_sdk.web3.request_published",WEB3_RESPONSE:"walletlink_sdk.web3.response",METHOD_NOT_IMPLEMENTED:"walletlink_sdk.method_not_implemented",UNKNOWN_ADDRESS_ENCOUNTERED:"walletlink_sdk.unknown_address_encountered"};var ke={};Object.defineProperty(ke,"__esModule",{value:!0});ke.RelayAbstract=ke.APP_VERSION_KEY=ke.LOCAL_STORAGE_ADDRESSES_KEY=ke.WALLET_USER_NAME_KEY=void 0;const to=dr;ke.WALLET_USER_NAME_KEY="walletUsername";ke.LOCAL_STORAGE_ADDRESSES_KEY="Addresses";ke.APP_VERSION_KEY="AppVersion";class wu{async makeEthereumJSONRPCRequest(t,r){if(!r)throw new Error("Error: No jsonRpcUrl provided");return window.fetch(r,{method:"POST",body:JSON.stringify(t),mode:"cors",headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>{if(!n)throw to.standardErrors.rpc.parse({});const s=n,{error:i}=s;if(i)throw(0,to.serializeError)(i,t.method);return s})}}ke.RelayAbstract=wu;var Zt={},Na={exports:{}},La=_t.Buffer;function dn(e,t){this._block=La.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}dn.prototype.update=function(e,t){typeof e=="string"&&(t=t||"utf8",e=La.from(e,t));for(var r=this._block,n=this._blockSize,s=e.length,i=this._len,o=0;o<s;){for(var a=i%n,l=Math.min(s-o,n-a),c=0;c<l;c++)r[a+c]=e[o+c];i+=l,o+=l,i%n===0&&this._update(r)}return this._len+=s,this};dn.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,s=(r-n)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var i=this._hash();return e?i.toString(e):i};dn.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var Qt=dn,vu=xe,Ba=Qt,Eu=_t.Buffer,ku=[1518500249,1859775393,-1894007588,-899497514],Su=new Array(80);function mr(){this.init(),this._w=Su,Ba.call(this,64,56)}vu(mr,Ba);mr.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Cu(e){return e<<5|e>>>27}function Ru(e){return e<<30|e>>>2}function Iu(e,t,r,n){return e===0?t&r|~t&n:e===2?t&r|t&n|r&n:t^r^n}mr.prototype._update=function(e){for(var t=this._w,r=this._a|0,n=this._b|0,s=this._c|0,i=this._d|0,o=this._e|0,a=0;a<16;++a)t[a]=e.readInt32BE(a*4);for(;a<80;++a)t[a]=t[a-3]^t[a-8]^t[a-14]^t[a-16];for(var l=0;l<80;++l){var c=~~(l/20),d=Cu(r)+Iu(c,n,s,i)+o+t[l]+ku[c]|0;o=i,i=s,s=Ru(n),n=r,r=d}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=i+this._d|0,this._e=o+this._e|0};mr.prototype._hash=function(){var e=Eu.allocUnsafe(20);return e.writeInt32BE(this._a|0,0),e.writeInt32BE(this._b|0,4),e.writeInt32BE(this._c|0,8),e.writeInt32BE(this._d|0,12),e.writeInt32BE(this._e|0,16),e};var xu=mr,Mu=xe,ja=Qt,Au=_t.Buffer,Pu=[1518500249,1859775393,-1894007588,-899497514],Tu=new Array(80);function br(){this.init(),this._w=Tu,ja.call(this,64,56)}Mu(br,ja);br.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Ou(e){return e<<1|e>>>31}function Nu(e){return e<<5|e>>>27}function Lu(e){return e<<30|e>>>2}function Bu(e,t,r,n){return e===0?t&r|~t&n:e===2?t&r|t&n|r&n:t^r^n}br.prototype._update=function(e){for(var t=this._w,r=this._a|0,n=this._b|0,s=this._c|0,i=this._d|0,o=this._e|0,a=0;a<16;++a)t[a]=e.readInt32BE(a*4);for(;a<80;++a)t[a]=Ou(t[a-3]^t[a-8]^t[a-14]^t[a-16]);for(var l=0;l<80;++l){var c=~~(l/20),d=Nu(r)+Bu(c,n,s,i)+o+t[l]+Pu[c]|0;o=i,i=s,s=Lu(n),n=r,r=d}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=i+this._d|0,this._e=o+this._e|0};br.prototype._hash=function(){var e=Au.allocUnsafe(20);return e.writeInt32BE(this._a|0,0),e.writeInt32BE(this._b|0,4),e.writeInt32BE(this._c|0,8),e.writeInt32BE(this._d|0,12),e.writeInt32BE(this._e|0,16),e};var ju=br,Du=xe,Da=Qt,Fu=_t.Buffer,Hu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Uu=new Array(64);function yr(){this.init(),this._w=Uu,Da.call(this,64,56)}Du(yr,Da);yr.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function Wu(e,t,r){return r^e&(t^r)}function Vu(e,t,r){return e&t|r&(e|t)}function qu(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function zu(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function Ju(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function $u(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}yr.prototype._update=function(e){for(var t=this._w,r=this._a|0,n=this._b|0,s=this._c|0,i=this._d|0,o=this._e|0,a=this._f|0,l=this._g|0,c=this._h|0,d=0;d<16;++d)t[d]=e.readInt32BE(d*4);for(;d<64;++d)t[d]=$u(t[d-2])+t[d-7]+Ju(t[d-15])+t[d-16]|0;for(var u=0;u<64;++u){var f=c+zu(o)+Wu(o,a,l)+Hu[u]+t[u]|0,g=qu(r)+Vu(r,n,s)|0;c=l,l=a,a=o,o=i+f|0,i=s,s=n,n=r,r=f+g|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=i+this._d|0,this._e=o+this._e|0,this._f=a+this._f|0,this._g=l+this._g|0,this._h=c+this._h|0};yr.prototype._hash=function(){var e=Fu.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e};var Fa=yr,Gu=xe,Zu=Fa,Qu=Qt,Yu=_t.Buffer,Ku=new Array(64);function hn(){this.init(),this._w=Ku,Qu.call(this,64,56)}Gu(hn,Zu);hn.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};hn.prototype._hash=function(){var e=Yu.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e};var Xu=hn,ed=xe,Ha=Qt,td=_t.Buffer,ro=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],rd=new Array(160);function wr(){this.init(),this._w=rd,Ha.call(this,128,112)}ed(wr,Ha);wr.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function no(e,t,r){return r^e&(t^r)}function so(e,t,r){return e&t|r&(e|t)}function io(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function oo(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function nd(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function sd(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function id(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function od(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function ne(e,t){return e>>>0<t>>>0?1:0}wr.prototype._update=function(e){for(var t=this._w,r=this._ah|0,n=this._bh|0,s=this._ch|0,i=this._dh|0,o=this._eh|0,a=this._fh|0,l=this._gh|0,c=this._hh|0,d=this._al|0,u=this._bl|0,f=this._cl|0,g=this._dl|0,w=this._el|0,m=this._fl|0,E=this._gl|0,v=this._hl|0,k=0;k<32;k+=2)t[k]=e.readInt32BE(k*4),t[k+1]=e.readInt32BE(k*4+4);for(;k<160;k+=2){var y=t[k-30],C=t[k-15*2+1],S=nd(y,C),x=sd(C,y);y=t[k-2*2],C=t[k-2*2+1];var j=id(y,C),T=od(C,y),M=t[k-7*2],Q=t[k-7*2+1],re=t[k-16*2],$=t[k-16*2+1],Z=x+Q|0,ie=S+M+ne(Z,x)|0;Z=Z+T|0,ie=ie+j+ne(Z,T)|0,Z=Z+$|0,ie=ie+re+ne(Z,$)|0,t[k]=ie,t[k+1]=Z}for(var le=0;le<160;le+=2){ie=t[le],Z=t[le+1];var Me=so(r,n,s),be=so(d,u,f),Fe=io(r,d),ye=io(d,r),He=oo(o,w),Qe=oo(w,o),Ue=ro[le],pe=ro[le+1],Ye=no(o,a,l),We=no(w,m,E),_=v+Qe|0,b=c+He+ne(_,v)|0;_=_+We|0,b=b+Ye+ne(_,We)|0,_=_+pe|0,b=b+Ue+ne(_,pe)|0,_=_+Z|0,b=b+ie+ne(_,Z)|0;var I=ye+be|0,N=Fe+Me+ne(I,ye)|0;c=l,v=E,l=a,E=m,a=o,m=w,w=g+_|0,o=i+b+ne(w,g)|0,i=s,g=f,s=n,f=u,n=r,u=d,d=_+I|0,r=b+N+ne(d,_)|0}this._al=this._al+d|0,this._bl=this._bl+u|0,this._cl=this._cl+f|0,this._dl=this._dl+g|0,this._el=this._el+w|0,this._fl=this._fl+m|0,this._gl=this._gl+E|0,this._hl=this._hl+v|0,this._ah=this._ah+r+ne(this._al,d)|0,this._bh=this._bh+n+ne(this._bl,u)|0,this._ch=this._ch+s+ne(this._cl,f)|0,this._dh=this._dh+i+ne(this._dl,g)|0,this._eh=this._eh+o+ne(this._el,w)|0,this._fh=this._fh+a+ne(this._fl,m)|0,this._gh=this._gh+l+ne(this._gl,E)|0,this._hh=this._hh+c+ne(this._hl,v)|0};wr.prototype._hash=function(){var e=td.allocUnsafe(64);function t(r,n,s){e.writeInt32BE(r,s),e.writeInt32BE(n,s+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e};var Ua=wr,ad=xe,cd=Ua,ld=Qt,ud=_t.Buffer,dd=new Array(160);function fn(){this.init(),this._w=dd,ld.call(this,128,112)}ad(fn,cd);fn.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};fn.prototype._hash=function(){var e=ud.allocUnsafe(48);function t(r,n,s){e.writeInt32BE(r,s),e.writeInt32BE(n,s+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e};var hd=fn,yt=Na.exports=function(e){e=e.toLowerCase();var t=yt[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};yt.sha=xu;yt.sha1=ju;yt.sha224=Xu;yt.sha256=Fa;yt.sha384=hd;yt.sha512=Ua;var fd=Na.exports;Object.defineProperty(Zt,"__esModule",{value:!0});Zt.Session=void 0;const ao=fd,co=P,lo="session:id",uo="session:secret",ho="session:linked";class Ci{constructor(t,r,n,s){this._storage=t,this._id=r||(0,co.randomBytesHex)(16),this._secret=n||(0,co.randomBytesHex)(32),this._key=new ao.sha256().update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!s}static load(t){const r=t.getItem(lo),n=t.getItem(ho),s=t.getItem(uo);return r&&s?new Ci(t,r,s,n==="1"):null}static hash(t){return new ao.sha256().update(t).digest("hex")}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(t){this._linked=t,this.persistLinked()}save(){return this._storage.setItem(lo,this._id),this._storage.setItem(uo,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(ho,this._linked?"1":"0")}}Zt.Session=Ci;var pn={},gn={};Object.defineProperty(gn,"__esModule",{value:!0});gn.Cipher=void 0;const Br=P;class pd{constructor(t){this.secret=t}async encrypt(t){const r=this.secret;if(r.length!==64)throw Error("secret must be 256 bits");const n=crypto.getRandomValues(new Uint8Array(12)),s=await crypto.subtle.importKey("raw",(0,Br.hexStringToUint8Array)(r),{name:"aes-gcm"},!1,["encrypt","decrypt"]),i=new TextEncoder,o=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,i.encode(t)),a=16,l=o.slice(o.byteLength-a),c=o.slice(0,o.byteLength-a),d=new Uint8Array(l),u=new Uint8Array(c),f=new Uint8Array([...n,...d,...u]);return(0,Br.uint8ArrayToHex)(f)}async decrypt(t){const r=this.secret;if(r.length!==64)throw Error("secret must be 256 bits");return new Promise((n,s)=>{(async function(){const i=await crypto.subtle.importKey("raw",(0,Br.hexStringToUint8Array)(r),{name:"aes-gcm"},!1,["encrypt","decrypt"]),o=(0,Br.hexStringToUint8Array)(t),a=o.slice(0,12),l=o.slice(12,28),c=o.slice(28),d=new Uint8Array([...c,...l]),u={name:"AES-GCM",iv:new Uint8Array(a)};try{const f=await window.crypto.subtle.decrypt(u,i,d),g=new TextDecoder;n(g.decode(f))}catch(f){s(f)}})()})}}gn.Cipher=pd;var _n={};Object.defineProperty(_n,"__esModule",{value:!0});_n.WalletLinkHTTP=void 0;class gd{constructor(t,r,n){this.linkAPIUrl=t,this.sessionId=r;const s=`${r}:${n}`;this.auth=`Basic ${btoa(s)}`}async markUnseenEventsAsSeen(t){return Promise.all(t.map(r=>fetch(`${this.linkAPIUrl}/events/${r.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(r=>console.error("Unabled to mark event as failed:",r))}async fetchUnseenEvents(){var t;const r=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(r.ok){const{events:n,error:s}=await r.json();if(s)throw new Error(`Check unseen events failed: ${s}`);const i=(t=n==null?void 0:n.filter(o=>o.event==="Web3Response").map(o=>({type:"Event",sessionId:this.sessionId,eventId:o.id,event:o.event,data:o.data})))!==null&&t!==void 0?t:[];return this.markUnseenEventsAsSeen(i),i}throw new Error(`Check unseen events failed: ${r.status}`)}}_n.WalletLinkHTTP=gd;var jt={};Object.defineProperty(jt,"__esModule",{value:!0});jt.WalletLinkWebSocket=jt.ConnectionState=void 0;var Tt;(function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED"})(Tt||(jt.ConnectionState=Tt={}));class _d{setConnectionStateListener(t){this.connectionStateListener=t}setIncomingDataListener(t){this.incomingDataListener=t}constructor(t,r=WebSocket){this.WebSocketClass=r,this.webSocket=null,this.pendingData=[],this.url=t.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw new Error("webSocket object is not null");return new Promise((t,r)=>{var n;let s;try{this.webSocket=s=new this.WebSocketClass(this.url)}catch(i){r(i);return}(n=this.connectionStateListener)===null||n===void 0||n.call(this,Tt.CONNECTING),s.onclose=i=>{var o;this.clearWebSocket(),r(new Error(`websocket error ${i.code}: ${i.reason}`)),(o=this.connectionStateListener)===null||o===void 0||o.call(this,Tt.DISCONNECTED)},s.onopen=i=>{var o;t(),(o=this.connectionStateListener)===null||o===void 0||o.call(this,Tt.CONNECTED),this.pendingData.length>0&&([...this.pendingData].forEach(a=>this.sendData(a)),this.pendingData=[])},s.onmessage=i=>{var o,a;if(i.data==="h")(o=this.incomingDataListener)===null||o===void 0||o.call(this,{type:"Heartbeat"});else try{const l=JSON.parse(i.data);(a=this.incomingDataListener)===null||a===void 0||a.call(this,l)}catch{}}})}disconnect(){var t;const{webSocket:r}=this;if(r){this.clearWebSocket(),(t=this.connectionStateListener)===null||t===void 0||t.call(this,Tt.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{r.close()}catch{}}}sendData(t){const{webSocket:r}=this;if(!r){this.pendingData.push(t),this.connect();return}r.send(t)}clearWebSocket(){const{webSocket:t}=this;t&&(this.webSocket=null,t.onclose=null,t.onerror=null,t.onmessage=null,t.onopen=null)}}jt.WalletLinkWebSocket=_d;Object.defineProperty(pn,"__esModule",{value:!0});pn.WalletLinkConnection=void 0;const It=te,md=gn,Pe=Gt,fo=ke,xt=Zt,bd=_n,jr=jt,po=1e4,yd=6e4;class wd{constructor({session:t,linkAPIUrl:r,listener:n,diagnostic:s,WebSocketClass:i=WebSocket}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,It.IntNumber)(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=a=>{a&&new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",l=>a.JsonRpcUrl&&this.handleChainUpdated(l,a.JsonRpcUrl)]]).forEach((l,c)=>{const d=a[c];d!==void 0&&l(d)})},this.handleDestroyed=a=>{var l,c;a==="1"&&((l=this.listener)===null||l===void 0||l.resetAndReload(),(c=this.diagnostic)===null||c===void 0||c.log(Pe.EVENTS.METADATA_DESTROYED,{alreadyDestroyed:this.isDestroyed,sessionIdHash:xt.Session.hash(this.session.id)}))},this.handleAccountUpdated=async a=>{var l,c;try{const d=await this.cipher.decrypt(a);(l=this.listener)===null||l===void 0||l.accountUpdated(d)}catch{(c=this.diagnostic)===null||c===void 0||c.log(Pe.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"selectedAddress"})}},this.handleMetadataUpdated=async(a,l)=>{var c,d;try{const u=await this.cipher.decrypt(l);(c=this.listener)===null||c===void 0||c.metadataUpdated(a,u)}catch{(d=this.diagnostic)===null||d===void 0||d.log(Pe.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:a})}},this.handleWalletUsernameUpdated=async a=>{this.handleMetadataUpdated(fo.WALLET_USER_NAME_KEY,a)},this.handleAppVersionUpdated=async a=>{this.handleMetadataUpdated(fo.APP_VERSION_KEY,a)},this.handleChainUpdated=async(a,l)=>{var c,d;try{const u=await this.cipher.decrypt(a),f=await this.cipher.decrypt(l);(c=this.listener)===null||c===void 0||c.chainUpdated(u,f)}catch{(d=this.diagnostic)===null||d===void 0||d.log(Pe.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"chainId|jsonRpcUrl"})}},this.session=t,this.cipher=new md.Cipher(t.secret),this.diagnostic=s,this.listener=n;const o=new jr.WalletLinkWebSocket(`${r}/rpc`,i);o.setConnectionStateListener(async a=>{var l;(l=this.diagnostic)===null||l===void 0||l.log(Pe.EVENTS.CONNECTED_STATE_CHANGE,{state:a,sessionIdHash:xt.Session.hash(t.id)});let c=!1;switch(a){case jr.ConnectionState.DISCONNECTED:if(!this.destroyed){const d=async()=>{await new Promise(u=>setTimeout(u,5e3)),this.destroyed||o.connect().catch(()=>{d()})};d()}break;case jr.ConnectionState.CONNECTED:try{await this.authenticate(),this.sendIsLinked(),this.sendGetSessionConfig(),c=!0}catch{}this.updateLastHeartbeat(),setInterval(()=>{this.heartbeat()},po),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();break;case jr.ConnectionState.CONNECTING:break}this.connected!==c&&(this.connected=c)}),o.setIncomingDataListener(a=>{var l,c,d;switch(a.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{const u=a.type==="IsLinkedOK"?a.linked:void 0;(l=this.diagnostic)===null||l===void 0||l.log(Pe.EVENTS.LINKED,{sessionIdHash:xt.Session.hash(t.id),linked:u,type:a.type,onlineGuests:a.onlineGuests}),this.linked=u||a.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":{(c=this.diagnostic)===null||c===void 0||c.log(Pe.EVENTS.SESSION_CONFIG_RECEIVED,{sessionIdHash:xt.Session.hash(t.id),metadata_keys:a&&a.metadata?Object.keys(a.metadata):void 0}),this.handleSessionMetadataUpdated(a.metadata);break}case"Event":{this.handleIncomingEvent(a);break}}a.id!==void 0&&((d=this.requestResolutions.get(a.id))===null||d===void 0||d(a))}),this.ws=o,this.http=new bd.WalletLinkHTTP(r,t.id,t.key)}connect(){var t;if(this.destroyed)throw new Error("instance is destroyed");(t=this.diagnostic)===null||t===void 0||t.log(Pe.EVENTS.STARTED_CONNECTING,{sessionIdHash:xt.Session.hash(this.session.id)}),this.ws.connect()}destroy(){var t;this.destroyed=!0,this.ws.disconnect(),(t=this.diagnostic)===null||t===void 0||t.log(Pe.EVENTS.DISCONNECTED,{sessionIdHash:xt.Session.hash(this.session.id)}),this.listener=void 0}get isDestroyed(){return this.destroyed}get connected(){return this._connected}set connected(t){var r,n;this._connected=t,t&&((r=this.onceConnected)===null||r===void 0||r.call(this)),(n=this.listener)===null||n===void 0||n.connectedUpdated(t)}setOnceConnected(t){return new Promise(r=>{this.connected?t().then(r):this.onceConnected=()=>{t().then(r),this.onceConnected=void 0}})}get linked(){return this._linked}set linked(t){var r,n;this._linked=t,t&&((r=this.onceLinked)===null||r===void 0||r.call(this)),(n=this.listener)===null||n===void 0||n.linkedUpdated(t)}setOnceLinked(t){return new Promise(r=>{this.linked?t().then(r):this.onceLinked=()=>{t().then(r),this.onceLinked=void 0}})}async handleIncomingEvent(t){var r,n;if(!(t.type!=="Event"||t.event!=="Web3Response"))try{const s=await this.cipher.decrypt(t.data),i=JSON.parse(s);if(i.type!=="WEB3_RESPONSE")return;(r=this.listener)===null||r===void 0||r.handleWeb3ResponseMessage(i)}catch{(n=this.diagnostic)===null||n===void 0||n.log(Pe.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"incomingEvent"})}}async checkUnseenEvents(){if(!this.connected){this.shouldFetchUnseenEventsOnConnect=!0;return}await new Promise(t=>setTimeout(t,250));try{await this.fetchUnseenEventsAPI()}catch(t){console.error("Unable to check for unseen events",t)}}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1,(await this.http.fetchUnseenEvents()).forEach(t=>this.handleIncomingEvent(t))}async setSessionMetadata(t,r){const n={type:"SetSessionConfig",id:(0,It.IntNumber)(this.nextReqId++),sessionId:this.session.id,metadata:{[t]:r}};return this.setOnceConnected(async()=>{const s=await this.makeRequest(n);if(s.type==="Fail")throw new Error(s.error||"failed to set session metadata")})}async publishEvent(t,r,n=!1){const s=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},r),{origin:location.origin,relaySource:window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),i={type:"PublishEvent",id:(0,It.IntNumber)(this.nextReqId++),sessionId:this.session.id,event:t,data:s,callWebhook:n};return this.setOnceLinked(async()=>{const o=await this.makeRequest(i);if(o.type==="Fail")throw new Error(o.error||"failed to publish event");return o.eventId})}sendData(t){this.ws.sendData(JSON.stringify(t))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>po*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}async makeRequest(t,r=yd){const n=t.id;this.sendData(t);let s;return Promise.race([new Promise((i,o)=>{s=window.setTimeout(()=>{o(new Error(`request ${n} timed out`))},r)}),new Promise(i=>{this.requestResolutions.set(n,o=>{clearTimeout(s),i(o),this.requestResolutions.delete(n)})})])}async authenticate(){const t={type:"HostSession",id:(0,It.IntNumber)(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key},r=await this.makeRequest(t);if(r.type==="Fail")throw new Error(r.error||"failed to authentcate")}sendIsLinked(){const t={type:"IsLinked",id:(0,It.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(t)}sendGetSessionConfig(){const t={type:"GetSessionConfig",id:(0,It.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(t)}}pn.WalletLinkConnection=wd;var vr={},Er={},Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';var vd=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Er,"__esModule",{value:!0});Er.injectCssReset=void 0;const Ed=vd(Ri);function kd(){const e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(Ed.default)),document.documentElement.appendChild(e)}Er.injectCssReset=kd;var mn={},kr,L,Wa,Va,ut,go,qa,fi,za,cr={},Ja=[],Sd=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,bn=Array.isArray;function Je(e,t){for(var r in t)e[r]=t[r];return e}function $a(e){var t=e.parentNode;t&&t.removeChild(e)}function pi(e,t,r){var n,s,i,o={};for(i in t)i=="key"?n=t[i]:i=="ref"?s=t[i]:o[i]=t[i];if(arguments.length>2&&(o.children=arguments.length>3?kr.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)o[i]===void 0&&(o[i]=e.defaultProps[i]);return sr(e,o,n,s,null)}function sr(e,t,r,n,s){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s??++Wa,__i:-1,__u:0};return s==null&&L.vnode!=null&&L.vnode(i),i}function Cd(){return{current:null}}function Sr(e){return e.children}function ir(e,t){this.props=e,this.context=t}function Dt(e,t){if(t==null)return e.__?Dt(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Dt(e):null}function Ga(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return Ga(e)}}function gi(e){(!e.__d&&(e.__d=!0)&&ut.push(e)&&!Zr.__r++||go!==L.debounceRendering)&&((go=L.debounceRendering)||qa)(Zr)}function Zr(){var e,t,r,n,s,i,o,a,l;for(ut.sort(fi);e=ut.shift();)e.__d&&(t=ut.length,n=void 0,i=(s=(r=e).__v).__e,a=[],l=[],(o=r.__P)&&((n=Je({},s)).__v=s.__v+1,L.vnode&&L.vnode(n),Ii(o,n,s,r.__n,o.ownerSVGElement!==void 0,32&s.__u?[i]:null,a,i??Dt(s),!!(32&s.__u),l),n.__.__k[n.__i]=n,Ka(a,n,l),n.__e!=i&&Ga(n)),ut.length>t&&ut.sort(fi));Zr.__r=0}function Za(e,t,r,n,s,i,o,a,l,c,d){var u,f,g,w,m,E=n&&n.__k||Ja,v=t.length;for(r.__d=l,Rd(r,t,E),l=r.__d,u=0;u<v;u++)(g=r.__k[u])!=null&&typeof g!="boolean"&&typeof g!="function"&&(f=g.__i===-1?cr:E[g.__i]||cr,g.__i=u,Ii(e,g,f,s,i,o,a,l,c,d),w=g.__e,g.ref&&f.ref!=g.ref&&(f.ref&&xi(f.ref,null,g),d.push(g.ref,g.__c||w,g)),m==null&&w!=null&&(m=w),65536&g.__u||f.__k===g.__k?l=Qa(g,l,e):typeof g.type=="function"&&g.__d!==void 0?l=g.__d:w&&(l=w.nextSibling),g.__d=void 0,g.__u&=-196609);r.__d=l,r.__e=m}function Rd(e,t,r){var n,s,i,o,a,l=t.length,c=r.length,d=c,u=0;for(e.__k=[],n=0;n<l;n++)(s=e.__k[n]=(s=t[n])==null||typeof s=="boolean"||typeof s=="function"?null:typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?sr(null,s,null,null,s):bn(s)?sr(Sr,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?sr(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)!=null?(s.__=e,s.__b=e.__b+1,a=Id(s,r,o=n+u,d),s.__i=a,i=null,a!==-1&&(d--,(i=r[a])&&(i.__u|=131072)),i==null||i.__v===null?(a==-1&&u--,typeof s.type!="function"&&(s.__u|=65536)):a!==o&&(a===o+1?u++:a>o?d>l-o?u+=a-o:u--:u=a<o&&a==o-1?a-o:0,a!==n+u&&(s.__u|=65536))):(i=r[n])&&i.key==null&&i.__e&&(i.__e==e.__d&&(e.__d=Dt(i)),_i(i,i,!1),r[n]=null,d--);if(d)for(n=0;n<c;n++)(i=r[n])!=null&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=Dt(i)),_i(i,i))}function Qa(e,t,r){var n,s;if(typeof e.type=="function"){for(n=e.__k,s=0;n&&s<n.length;s++)n[s]&&(n[s].__=e,t=Qa(n[s],t,r));return t}return e.__e!=t&&(r.insertBefore(e.__e,t||null),t=e.__e),t&&t.nextSibling}function Ya(e,t){return t=t||[],e==null||typeof e=="boolean"||(bn(e)?e.some(function(r){Ya(r,t)}):t.push(e)),t}function Id(e,t,r,n){var s=e.key,i=e.type,o=r-1,a=r+1,l=t[r];if(l===null||l&&s==l.key&&i===l.type)return r;if(n>(l!=null&&!(131072&l.__u)?1:0))for(;o>=0||a<t.length;){if(o>=0){if((l=t[o])&&!(131072&l.__u)&&s==l.key&&i===l.type)return o;o--}if(a<t.length){if((l=t[a])&&!(131072&l.__u)&&s==l.key&&i===l.type)return a;a++}}return-1}function _o(e,t,r){t[0]==="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||Sd.test(t)?r:r+"px"}function Dr(e,t,r,n,s){var i;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||_o(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||_o(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n?r.u=n.u:(r.u=Date.now(),e.addEventListener(t,i?bo:mo,i)):e.removeEventListener(t,i?bo:mo,i);else{if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,r))}}function mo(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(L.event?L.event(e):e)}function bo(e){return this.l[e.type+!0](L.event?L.event(e):e)}function Ii(e,t,r,n,s,i,o,a,l,c){var d,u,f,g,w,m,E,v,k,y,C,S,x,j,T,M=t.type;if(t.constructor!==void 0)return null;128&r.__u&&(l=!!(32&r.__u),i=[a=t.__e=r.__e]),(d=L.__b)&&d(t);e:if(typeof M=="function")try{if(v=t.props,k=(d=M.contextType)&&n[d.__c],y=d?k?k.props.value:d.__:n,r.__c?E=(u=t.__c=r.__c).__=u.__E:("prototype"in M&&M.prototype.render?t.__c=u=new M(v,y):(t.__c=u=new ir(v,y),u.constructor=M,u.render=Md),k&&k.sub(u),u.props=v,u.state||(u.state={}),u.context=y,u.__n=n,f=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),M.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Je({},u.__s)),Je(u.__s,M.getDerivedStateFromProps(v,u.__s))),g=u.props,w=u.state,u.__v=t,f)M.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(M.getDerivedStateFromProps==null&&v!==g&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(v,y),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(v,u.__s,y)===!1||t.__v===r.__v)){for(t.__v!==r.__v&&(u.props=v,u.state=u.__s,u.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(Q){Q&&(Q.__=t)}),C=0;C<u._sb.length;C++)u.__h.push(u._sb[C]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(v,u.__s,y),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(g,w,m)})}if(u.context=y,u.props=v,u.__P=e,u.__e=!1,S=L.__r,x=0,"prototype"in M&&M.prototype.render){for(u.state=u.__s,u.__d=!1,S&&S(t),d=u.render(u.props,u.state,u.context),j=0;j<u._sb.length;j++)u.__h.push(u._sb[j]);u._sb=[]}else do u.__d=!1,S&&S(t),d=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++x<25);u.state=u.__s,u.getChildContext!=null&&(n=Je(Je({},n),u.getChildContext())),f||u.getSnapshotBeforeUpdate==null||(m=u.getSnapshotBeforeUpdate(g,w)),Za(e,bn(T=d!=null&&d.type===Sr&&d.key==null?d.props.children:d)?T:[T],t,r,n,s,i,o,a,l,c),u.base=t.__e,t.__u&=-161,u.__h.length&&o.push(u),E&&(u.__E=u.__=null)}catch(Q){t.__v=null,l||i!=null?(t.__e=a,t.__u|=l?160:32,i[i.indexOf(a)]=null):(t.__e=r.__e,t.__k=r.__k),L.__e(Q,t,r)}else i==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=xd(r.__e,t,r,n,s,i,o,l,c);(d=L.diffed)&&d(t)}function Ka(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)xi(r[n],r[++n],r[++n]);L.__c&&L.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(i){i.call(s)})}catch(i){L.__e(i,s.__v)}})}function xd(e,t,r,n,s,i,o,a,l){var c,d,u,f,g,w,m,E=r.props,v=t.props,k=t.type;if(k==="svg"&&(s=!0),i!=null){for(c=0;c<i.length;c++)if((g=i[c])&&"setAttribute"in g==!!k&&(k?g.localName===k:g.nodeType===3)){e=g,i[c]=null;break}}if(e==null){if(k===null)return document.createTextNode(v);e=s?document.createElementNS("http://www.w3.org/2000/svg",k):document.createElement(k,v.is&&v),i=null,a=!1}if(k===null)E===v||a&&e.data===v||(e.data=v);else{if(i=i&&kr.call(e.childNodes),E=r.props||cr,!a&&i!=null)for(E={},c=0;c<e.attributes.length;c++)E[(g=e.attributes[c]).name]=g.value;for(c in E)g=E[c],c=="children"||(c=="dangerouslySetInnerHTML"?u=g:c==="key"||c in v||Dr(e,c,null,g,s));for(c in v)g=v[c],c=="children"?f=g:c=="dangerouslySetInnerHTML"?d=g:c=="value"?w=g:c=="checked"?m=g:c==="key"||a&&typeof g!="function"||E[c]===g||Dr(e,c,g,E[c],s);if(d)a||u&&(d.__html===u.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(u&&(e.innerHTML=""),Za(e,bn(f)?f:[f],t,r,n,s&&k!=="foreignObject",i,o,i?i[0]:r.__k&&Dt(r,0),a,l),i!=null)for(c=i.length;c--;)i[c]!=null&&$a(i[c]);a||(c="value",w!==void 0&&(w!==e[c]||k==="progress"&&!w||k==="option"&&w!==E[c])&&Dr(e,c,w,E[c],!1),c="checked",m!==void 0&&m!==e[c]&&Dr(e,c,m,E[c],!1))}return e}function xi(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(n){L.__e(n,r)}}function _i(e,t,r){var n,s;if(L.unmount&&L.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||xi(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){L.__e(i,t)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(s=0;s<n.length;s++)n[s]&&_i(n[s],t,r||typeof e.type!="function");r||e.__e==null||$a(e.__e),e.__=e.__e=e.__d=void 0}function Md(e,t,r){return this.constructor(e,r)}function Xa(e,t,r){var n,s,i,o;L.__&&L.__(e,t),s=(n=typeof r=="function")?null:r&&r.__k||t.__k,i=[],o=[],Ii(t,e=(!n&&r||t).__k=pi(Sr,null,[e]),s||cr,cr,t.ownerSVGElement!==void 0,!n&&r?[r]:s?null:t.firstChild?kr.call(t.childNodes):null,i,!n&&r?r:s?s.__e:t.firstChild,n,o),Ka(i,e,o)}function ec(e,t){Xa(e,t,ec)}function Ad(e,t,r){var n,s,i,o,a=Je({},e.props);for(i in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),t)i=="key"?n=t[i]:i=="ref"?s=t[i]:a[i]=t[i]===void 0&&o!==void 0?o[i]:t[i];return arguments.length>2&&(a.children=arguments.length>3?kr.call(arguments,2):r),sr(e.type,a,n||e.key,s||e.ref,null)}function Pd(e,t){var r={__c:t="__cC"+za++,__:e,Consumer:function(n,s){return n.children(s)},Provider:function(n){var s,i;return this.getChildContext||(s=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&s.some(function(a){a.__e=!0,gi(a)})},this.sub=function(o){s.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){s.splice(s.indexOf(o),1),a&&a.call(o)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r}kr=Ja.slice,L={__e:function(e,t,r,n){for(var s,i,o;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,n||{}),o=s.__d),o)return s.__E=s}catch(a){e=a}throw e}},Wa=0,Va=function(e){return e!=null&&e.constructor==null},ir.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Je({},this.state),typeof e=="function"&&(e=e(Je({},r),this.props)),e&&Je(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),gi(this))},ir.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),gi(this))},ir.prototype.render=Sr,ut=[],qa=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,fi=function(e,t){return e.__v.__b-t.__v.__b},Zr.__r=0,za=0;const Td=Object.freeze(Object.defineProperty({__proto__:null,Component:ir,Fragment:Sr,cloneElement:Ad,createContext:Pd,createElement:pi,createRef:Cd,h:pi,hydrate:ec,get isValidElement(){return Va},get options(){return L},render:Xa,toChildArray:Ya},Symbol.toStringTag,{value:"Module"})),fe=rn(Td);var yn={};function tc(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=tc(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function yo(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=tc(e))&&(n&&(n+=" "),n+=t);return n}const Od=Object.freeze(Object.defineProperty({__proto__:null,clsx:yo,default:yo},Symbol.toStringTag,{value:"Module"})),Cr=rn(Od);var Ge,J,zs,wo,Ft=0,rc=[],zr=[],vo=L.__b,Eo=L.__r,ko=L.diffed,So=L.__c,Co=L.unmount;function wt(e,t){L.__h&&L.__h(J,e,Ft||t),Ft=0;var r=J.__H||(J.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({__V:zr}),r.__[e]}function nc(e){return Ft=1,sc(oc,e)}function sc(e,t,r){var n=wt(Ge++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):oc(void 0,t),function(a){var l=n.__N?n.__N[0]:n.__[0],c=n.t(l,a);l!==c&&(n.__N=[c,n.__[1]],n.__c.setState({}))}],n.__c=J,!J.u)){var s=function(a,l,c){if(!n.__c.__H)return!0;var d=n.__c.__H.__.filter(function(f){return f.__c});if(d.every(function(f){return!f.__N}))return!i||i.call(this,a,l,c);var u=!1;return d.forEach(function(f){if(f.__N){var g=f.__[0];f.__=f.__N,f.__N=void 0,g!==f.__[0]&&(u=!0)}}),!(!u&&n.__c.props===a)&&(!i||i.call(this,a,l,c))};J.u=!0;var i=J.shouldComponentUpdate,o=J.componentWillUpdate;J.componentWillUpdate=function(a,l,c){if(this.__e){var d=i;i=void 0,s(a,l,c),i=d}o&&o.call(this,a,l,c)},J.shouldComponentUpdate=s}return n.__N||n.__}function Nd(e,t){var r=wt(Ge++,3);!L.__s&&Ai(r.__H,t)&&(r.__=e,r.i=t,J.__H.__h.push(r))}function ic(e,t){var r=wt(Ge++,4);!L.__s&&Ai(r.__H,t)&&(r.__=e,r.i=t,J.__h.push(r))}function Ld(e){return Ft=5,Mi(function(){return{current:e}},[])}function Bd(e,t,r){Ft=6,ic(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},r==null?r:r.concat(e))}function Mi(e,t){var r=wt(Ge++,7);return Ai(r.__H,t)?(r.__V=e(),r.i=t,r.__h=e,r.__V):r.__}function jd(e,t){return Ft=8,Mi(function(){return e},t)}function Dd(e){var t=J.context[e.__c],r=wt(Ge++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(J)),t.props.value):e.__}function Fd(e,t){L.useDebugValue&&L.useDebugValue(t?t(e):e)}function Hd(e){var t=wt(Ge++,10),r=nc();return t.__=e,J.componentDidCatch||(J.componentDidCatch=function(n,s){t.__&&t.__(n,s),r[1](n)}),[r[0],function(){r[1](void 0)}]}function Ud(){var e=wt(Ge++,11);if(!e.__){for(var t=J.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function Wd(){for(var e;e=rc.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Jr),e.__H.__h.forEach(mi),e.__H.__h=[]}catch(t){e.__H.__h=[],L.__e(t,e.__v)}}L.__b=function(e){J=null,vo&&vo(e)},L.__r=function(e){Eo&&Eo(e),Ge=0;var t=(J=e.__c).__H;t&&(zs===J?(t.__h=[],J.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=zr,r.__N=r.i=void 0})):(t.__h.forEach(Jr),t.__h.forEach(mi),t.__h=[],Ge=0)),zs=J},L.diffed=function(e){ko&&ko(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(rc.push(t)!==1&&wo===L.requestAnimationFrame||((wo=L.requestAnimationFrame)||Vd)(Wd)),t.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==zr&&(r.__=r.__V),r.i=void 0,r.__V=zr})),zs=J=null},L.__c=function(e,t){t.some(function(r){try{r.__h.forEach(Jr),r.__h=r.__h.filter(function(n){return!n.__||mi(n)})}catch(n){t.some(function(s){s.__h&&(s.__h=[])}),t=[],L.__e(n,r.__v)}}),So&&So(e,t)},L.unmount=function(e){Co&&Co(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{Jr(n)}catch(s){t=s}}),r.__H=void 0,t&&L.__e(t,r.__v))};var Ro=typeof requestAnimationFrame=="function";function Vd(e){var t,r=function(){clearTimeout(n),Ro&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);Ro&&(t=requestAnimationFrame(r))}function Jr(e){var t=J,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),J=t}function mi(e){var t=J;e.__c=e.__(),J=t}function Ai(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function oc(e,t){return typeof t=="function"?t(e):t}const qd=Object.freeze(Object.defineProperty({__proto__:null,useCallback:jd,useContext:Dd,useDebugValue:Fd,useEffect:Nd,useErrorBoundary:Hd,useId:Ud,useImperativeHandle:Bd,useLayoutEffect:ic,useMemo:Mi,useReducer:sc,useRef:Ld,useState:nc},Symbol.toStringTag,{value:"Module"})),wn=rn(qd);var Ht={},vn={};Object.defineProperty(vn,"__esModule",{value:!0});vn.CloseIcon=void 0;const Io=fe;function zd(e){return(0,Io.h)("svg",Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),(0,Io.h)("path",{d:"M13.7677 13L12.3535 14.4142L18.3535 20.4142L12.3535 26.4142L13.7677 27.8284L19.7677 21.8284L25.7677 27.8284L27.1819 26.4142L21.1819 20.4142L27.1819 14.4142L25.7677 13L19.7677 19L13.7677 13Z"}))}vn.CloseIcon=zd;var En={};Object.defineProperty(En,"__esModule",{value:!0});En.CoinbaseWalletRound=void 0;const Fr=fe;function Jd(e){return(0,Fr.h)("svg",Object.assign({width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),(0,Fr.h)("circle",{cx:"14",cy:"14",r:"14",fill:"#0052FF"}),(0,Fr.h)("path",{d:"M23.8521 14.0003C23.8521 19.455 19.455 23.8521 14.0003 23.8521C8.54559 23.8521 4.14844 19.455 4.14844 14.0003C4.14844 8.54559 8.54559 4.14844 14.0003 4.14844C19.455 4.14844 23.8521 8.54559 23.8521 14.0003Z",fill:"white"}),(0,Fr.h)("path",{d:"M11.1855 12.5042C11.1855 12.0477 11.1855 11.7942 11.2835 11.642C11.3814 11.4899 11.4793 11.3377 11.6261 11.287C11.8219 11.1855 12.0178 11.1855 12.5073 11.1855H15.4934C15.983 11.1855 16.1788 11.1855 16.3746 11.287C16.5215 11.3884 16.6683 11.4899 16.7173 11.642C16.8152 11.8449 16.8152 12.0477 16.8152 12.5042V15.4965C16.8152 15.953 16.8152 16.2066 16.7173 16.3587C16.6194 16.5109 16.5215 16.663 16.3746 16.7137C16.1788 16.8152 15.983 16.8152 15.4934 16.8152H12.5073C12.0178 16.8152 11.8219 16.8152 11.6261 16.7137C11.4793 16.6123 11.3324 16.5109 11.2835 16.3587C11.1855 16.1558 11.1855 15.953 11.1855 15.4965V12.5042Z",fill:"#0052FF"}))}En.CoinbaseWalletRound=Jd;var kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.QRCodeIcon=void 0;const tr=fe;function $d(e){return(0,tr.h)("svg",Object.assign({width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),(0,tr.h)("path",{d:"M3 3V8.99939L5 8.99996V5H9V3H3Z"}),(0,tr.h)("path",{d:"M15 21L21 21V15.0006L19 15V19L15 19V21Z"}),(0,tr.h)("path",{d:"M21 9H19V5H15.0006L15 3H21V9Z"}),(0,tr.h)("path",{d:"M3 15V21H8.99939L8.99996 19H5L5 15H3Z"}))}kn.QRCodeIcon=$d;var Sn={};function ac(e){this.mode=_e.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,r=this.data.length;t<r;t++){var n=[],s=this.data.charCodeAt(t);s>65536?(n[0]=240|(s&1835008)>>>18,n[1]=128|(s&258048)>>>12,n[2]=128|(s&4032)>>>6,n[3]=128|s&63):s>2048?(n[0]=224|(s&61440)>>>12,n[1]=128|(s&4032)>>>6,n[2]=128|s&63):s>128?(n[0]=192|(s&1984)>>>6,n[1]=128|s&63):n[0]=s,this.parsedData.push(n)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}ac.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,r=this.parsedData.length;t<r;t++)e.put(this.parsedData[t],8)}};function Be(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}Be.prototype={addData:function(e){var t=new ac(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=Be.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[e+r][t+n]=!0:this.modules[e+r][t+n]=!1)},getBestMaskPattern:function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=K.getLostPoint(this);(r==0||e>n)&&(e=n,t=r)}return t},createMovieClip:function(e,t,r){var n=e.createEmptyMovieClip(t,r),s=1;this.make();for(var i=0;i<this.modules.length;i++)for(var o=i*s,a=0;a<this.modules[i].length;a++){var l=a*s,c=this.modules[i][a];c&&(n.beginFill(0,100),n.moveTo(l,o),n.lineTo(l+s,o),n.lineTo(l+s,o+s),n.lineTo(l,o+s),n.endFill())}return n},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=K.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var n=e[t],s=e[r];if(this.modules[n][s]==null)for(var i=-2;i<=2;i++)for(var o=-2;o<=2;o++)i==-2||i==2||o==-2||o==2||i==0&&o==0?this.modules[n+i][s+o]=!0:this.modules[n+i][s+o]=!1}},setupTypeNumber:function(e){for(var t=K.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}},setupTypeInfo:function(e,t){for(var r=this.errorCorrectLevel<<3|t,n=K.getBCHTypeInfo(r),s=0;s<15;s++){var i=!e&&(n>>s&1)==1;s<6?this.modules[s][8]=i:s<8?this.modules[s+1][8]=i:this.modules[this.moduleCount-15+s][8]=i}for(var s=0;s<15;s++){var i=!e&&(n>>s&1)==1;s<8?this.modules[8][this.moduleCount-s-1]=i:s<9?this.modules[8][15-s-1+1]=i:this.modules[8][15-s-1]=i}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var r=-1,n=this.moduleCount-1,s=7,i=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var a=0;a<2;a++)if(this.modules[n][o-a]==null){var l=!1;i<e.length&&(l=(e[i]>>>s&1)==1);var c=K.getMask(t,n,o-a);c&&(l=!l),this.modules[n][o-a]=l,s--,s==-1&&(i++,s=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}}};Be.PAD0=236;Be.PAD1=17;Be.createData=function(e,t,r){for(var n=Le.getRSBlocks(e,t),s=new cc,i=0;i<r.length;i++){var o=r[i];s.put(o.mode,4),s.put(o.getLength(),K.getLengthInBits(o.mode,e)),o.write(s)}for(var a=0,i=0;i<n.length;i++)a+=n[i].dataCount;if(s.getLengthInBits()>a*8)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+a*8+")");for(s.getLengthInBits()+4<=a*8&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=a*8||(s.put(Be.PAD0,8),s.getLengthInBits()>=a*8));)s.put(Be.PAD1,8);return Be.createBytes(s,n)};Be.createBytes=function(e,t){for(var r=0,n=0,s=0,i=new Array(t.length),o=new Array(t.length),a=0;a<t.length;a++){var l=t[a].dataCount,c=t[a].totalCount-l;n=Math.max(n,l),s=Math.max(s,c),i[a]=new Array(l);for(var d=0;d<i[a].length;d++)i[a][d]=255&e.buffer[d+r];r+=l;var u=K.getErrorCorrectPolynomial(c),f=new Ot(i[a],u.getLength()-1),g=f.mod(u);o[a]=new Array(u.getLength()-1);for(var d=0;d<o[a].length;d++){var w=d+g.getLength()-o[a].length;o[a][d]=w>=0?g.get(w):0}}for(var m=0,d=0;d<t.length;d++)m+=t[d].totalCount;for(var E=new Array(m),v=0,d=0;d<n;d++)for(var a=0;a<t.length;a++)d<i[a].length&&(E[v++]=i[a][d]);for(var d=0;d<s;d++)for(var a=0;a<t.length;a++)d<o[a].length&&(E[v++]=o[a][d]);return E};var _e={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},rt={L:1,M:0,Q:3,H:2},Xe={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},K={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;K.getBCHDigit(t)-K.getBCHDigit(K.G15)>=0;)t^=K.G15<<K.getBCHDigit(t)-K.getBCHDigit(K.G15);return(e<<10|t)^K.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;K.getBCHDigit(t)-K.getBCHDigit(K.G18)>=0;)t^=K.G18<<K.getBCHDigit(t)-K.getBCHDigit(K.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return K.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case Xe.PATTERN000:return(t+r)%2==0;case Xe.PATTERN001:return t%2==0;case Xe.PATTERN010:return r%3==0;case Xe.PATTERN011:return(t+r)%3==0;case Xe.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case Xe.PATTERN101:return t*r%2+t*r%3==0;case Xe.PATTERN110:return(t*r%2+t*r%3)%2==0;case Xe.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new Ot([1],0),r=0;r<e;r++)t=t.multiply(new Ot([1,se.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case _e.MODE_NUMBER:return 10;case _e.MODE_ALPHA_NUM:return 9;case _e.MODE_8BIT_BYTE:return 8;case _e.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case _e.MODE_NUMBER:return 12;case _e.MODE_ALPHA_NUM:return 11;case _e.MODE_8BIT_BYTE:return 16;case _e.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case _e.MODE_NUMBER:return 14;case _e.MODE_ALPHA_NUM:return 13;case _e.MODE_8BIT_BYTE:return 16;case _e.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,n=0;n<t;n++)for(var s=0;s<t;s++){for(var i=0,o=e.isDark(n,s),a=-1;a<=1;a++)if(!(n+a<0||t<=n+a))for(var l=-1;l<=1;l++)s+l<0||t<=s+l||a==0&&l==0||o==e.isDark(n+a,s+l)&&i++;i>5&&(r+=3+i-5)}for(var n=0;n<t-1;n++)for(var s=0;s<t-1;s++){var c=0;e.isDark(n,s)&&c++,e.isDark(n+1,s)&&c++,e.isDark(n,s+1)&&c++,e.isDark(n+1,s+1)&&c++,(c==0||c==4)&&(r+=3)}for(var n=0;n<t;n++)for(var s=0;s<t-6;s++)e.isDark(n,s)&&!e.isDark(n,s+1)&&e.isDark(n,s+2)&&e.isDark(n,s+3)&&e.isDark(n,s+4)&&!e.isDark(n,s+5)&&e.isDark(n,s+6)&&(r+=40);for(var s=0;s<t;s++)for(var n=0;n<t-6;n++)e.isDark(n,s)&&!e.isDark(n+1,s)&&e.isDark(n+2,s)&&e.isDark(n+3,s)&&e.isDark(n+4,s)&&!e.isDark(n+5,s)&&e.isDark(n+6,s)&&(r+=40);for(var d=0,s=0;s<t;s++)for(var n=0;n<t;n++)e.isDark(n,s)&&d++;var u=Math.abs(100*d/t/t-50)/5;return r+=u*10,r}},se={glog:function(e){if(e<1)throw new Error("glog("+e+")");return se.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return se.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var ae=0;ae<8;ae++)se.EXP_TABLE[ae]=1<<ae;for(var ae=8;ae<256;ae++)se.EXP_TABLE[ae]=se.EXP_TABLE[ae-4]^se.EXP_TABLE[ae-5]^se.EXP_TABLE[ae-6]^se.EXP_TABLE[ae-8];for(var ae=0;ae<255;ae++)se.LOG_TABLE[se.EXP_TABLE[ae]]=ae;function Ot(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&e[r]==0;)r++;this.num=new Array(e.length-r+t);for(var n=0;n<e.length-r;n++)this.num[n]=e[n+r]}Ot.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<e.getLength();n++)t[r+n]^=se.gexp(se.glog(this.get(r))+se.glog(e.get(n)));return new Ot(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=se.glog(this.get(0))-se.glog(e.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<e.getLength();n++)r[n]^=se.gexp(se.glog(e.get(n))+t);return new Ot(r,0).mod(e)}};function Le(e,t){this.totalCount=e,this.dataCount=t}Le.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Le.getRSBlocks=function(e,t){var r=Le.getRsBlockTable(e,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=r.length/3,s=[],i=0;i<n;i++)for(var o=r[i*3+0],a=r[i*3+1],l=r[i*3+2],c=0;c<o;c++)s.push(new Le(a,l));return s};Le.getRsBlockTable=function(e,t){switch(t){case rt.L:return Le.RS_BLOCK_TABLE[(e-1)*4+0];case rt.M:return Le.RS_BLOCK_TABLE[(e-1)*4+1];case rt.Q:return Le.RS_BLOCK_TABLE[(e-1)*4+2];case rt.H:return Le.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};function cc(){this.buffer=[],this.length=0}cc.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Js=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function lc(e){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M",image:{svg:"",width:0,height:0}},typeof e=="string"&&(e={content:e}),e)for(var t in e)this.options[t]=e[t];if(typeof this.options.content!="string")throw new Error("Expected 'content' as string!");if(this.options.content.length===0)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0)||!(this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");function r(l){switch(l){case"L":return rt.L;case"M":return rt.M;case"Q":return rt.Q;case"H":return rt.H;default:throw new Error("Unknwon error correction level: "+l)}}function n(l,c){for(var d=s(l),u=1,f=0,g=0,w=Js.length;g<=w;g++){var m=Js[g];if(!m)throw new Error("Content too long: expected "+f+" but got "+d);switch(c){case"L":f=m[0];break;case"M":f=m[1];break;case"Q":f=m[2];break;case"H":f=m[3];break;default:throw new Error("Unknwon error correction level: "+c)}if(d<=f)break;u++}if(u>Js.length)throw new Error("Content too long");return u}function s(l){var c=encodeURI(l).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return c.length+(c.length!=l?3:0)}var i=this.options.content,o=n(i,this.options.ecl),a=r(this.options.ecl);this.qrcode=new Be(o,a),this.qrcode.addData(i),this.qrcode.make()}lc.prototype.svg=function(e){var t=this.options||{},r=this.qrcode.modules;typeof e>"u"&&(e={container:t.container||"svg"});for(var n=typeof t.pretty<"u"?!!t.pretty:!0,s=n?"  ":"",i=n?`\r
`:"",o=t.width,a=t.height,l=r.length,c=o/(l+2*t.padding),d=a/(l+2*t.padding),u=typeof t.join<"u"?!!t.join:!1,f=typeof t.swap<"u"?!!t.swap:!1,g=typeof t.xmlDeclaration<"u"?!!t.xmlDeclaration:!0,w=typeof t.predefined<"u"?!!t.predefined:!1,m=w?s+'<defs><path id="qrmodule" d="M0 0 h'+d+" v"+c+' H0 z" style="fill:'+t.color+';shape-rendering:crispEdges;" /></defs>'+i:"",E=s+'<rect x="0" y="0" width="'+o+'" height="'+a+'" style="fill:'+t.background+';shape-rendering:crispEdges;"/>'+i,v="",k="",y=0;y<l;y++)for(var C=0;C<l;C++){var S=r[C][y];if(S){var x=C*c+t.padding*c,j=y*d+t.padding*d;if(f){var T=x;x=j,j=T}if(u){var M=c+x,Q=d+j;x=Number.isInteger(x)?Number(x):x.toFixed(2),j=Number.isInteger(j)?Number(j):j.toFixed(2),M=Number.isInteger(M)?Number(M):M.toFixed(2),Q=Number.isInteger(Q)?Number(Q):Q.toFixed(2),k+="M"+x+","+j+" V"+Q+" H"+M+" V"+j+" H"+x+" Z "}else w?v+=s+'<use x="'+x.toString()+'" y="'+j.toString()+'" href="#qrmodule" />'+i:v+=s+'<rect x="'+x.toString()+'" y="'+j.toString()+'" width="'+c+'" height="'+d+'" style="fill:'+t.color+';shape-rendering:crispEdges;"/>'+i}}u&&(v=s+'<path x="0" y="0" style="fill:'+t.color+';shape-rendering:crispEdges;" d="'+k+'" />');let re="";if(this.options.image!==void 0&&this.options.image.svg){const Z=o*this.options.image.width/100,ie=a*this.options.image.height/100,le=o/2-Z/2,Me=a/2-ie/2;re+=`<svg x="${le}" y="${Me}" width="${Z}" height="${ie}" viewBox="0 0 100 100" preserveAspectRatio="xMinYMin meet">`,re+=this.options.image.svg+i,re+="</svg>"}var $="";switch(e.container){case"svg":g&&($+='<?xml version="1.0" standalone="yes"?>'+i),$+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+o+'" height="'+a+'">'+i,$+=m+E+v,$+=re,$+="</svg>";break;case"svg-viewbox":g&&($+='<?xml version="1.0" standalone="yes"?>'+i),$+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+o+" "+a+'">'+i,$+=m+E+v,$+=re,$+="</svg>";break;case"g":$+='<g width="'+o+'" height="'+a+'">'+i,$+=m+E+v,$+=re,$+="</g>";break;default:$+=(m+E+v+re).replace(/^\s+/,"");break}return $};var Gd=lc,Zd=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.QRCode=void 0;const Qd=fe,xo=wn,Yd=Zd(Gd),Kd=e=>{const[t,r]=(0,xo.useState)("");return(0,xo.useEffect)(()=>{var n,s;const i=new Yd.default({content:e.content,background:e.bgColor||"#ffffff",color:e.fgColor||"#000000",container:"svg",ecl:"M",width:(n=e.width)!==null&&n!==void 0?n:256,height:(s=e.height)!==null&&s!==void 0?s:256,padding:0,image:e.image}),o=Buffer.from(i.svg(),"utf8").toString("base64");r(`data:image/svg+xml;base64,${o}`)},[e.bgColor,e.content,e.fgColor,e.height,e.image,e.width]),t?(0,Qd.h)("img",{src:t,alt:"QR Code"}):null};Sn.QRCode=Kd;var Cn={},Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.default=".-cbwsdk-css-reset .-cbwsdk-spinner{display:inline-block}.-cbwsdk-css-reset .-cbwsdk-spinner svg{display:inline-block;animation:2s linear infinite -cbwsdk-spinner-svg}.-cbwsdk-css-reset .-cbwsdk-spinner svg circle{animation:1.9s ease-in-out infinite both -cbwsdk-spinner-circle;display:block;fill:rgba(0,0,0,0);stroke-dasharray:283;stroke-dashoffset:280;stroke-linecap:round;stroke-width:10px;transform-origin:50% 50%}@keyframes -cbwsdk-spinner-svg{0%{transform:rotateZ(0deg)}100%{transform:rotateZ(360deg)}}@keyframes -cbwsdk-spinner-circle{0%,25%{stroke-dashoffset:280;transform:rotate(0)}50%,75%{stroke-dashoffset:75;transform:rotate(45deg)}100%{stroke-dashoffset:280;transform:rotate(360deg)}}";var Xd=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.Spinner=void 0;const Hr=fe,eh=Xd(Pi),th=e=>{var t;const r=(t=e.size)!==null&&t!==void 0?t:64,n=e.color||"#000";return(0,Hr.h)("div",{class:"-cbwsdk-spinner"},(0,Hr.h)("style",null,eh.default),(0,Hr.h)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{width:r,height:r}},(0,Hr.h)("circle",{style:{cx:50,cy:50,r:45,stroke:n}})))};Cn.Spinner=th;var Ti={};Object.defineProperty(Ti,"__esModule",{value:!0});Ti.default=".-cbwsdk-css-reset .-cbwsdk-connect-content{height:430px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-connect-content.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-header{display:flex;align-items:center;justify-content:space-between;margin:0 0 30px}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading{font-style:normal;font-weight:500;font-size:28px;line-height:36px;margin:0}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-layout{display:flex;flex-direction:row}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-left{margin-right:30px;display:flex;flex-direction:column;justify-content:space-between}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-right{flex:25%;margin-right:34px}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-wrapper{width:220px;height:220px;border-radius:12px;display:flex;justify-content:center;align-items:center;background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light{background-color:rgba(255,255,255,.95)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light>p{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark{background-color:rgba(10,11,13,.9)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark>p{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting>p{font-size:12px;font-weight:bold;margin-top:16px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app{border-radius:8px;font-size:14px;line-height:20px;padding:12px;width:339px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.light{background:#eef0f3;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.dark{background:#1e2025;color:#8a919e}.-cbwsdk-css-reset .-cbwsdk-cancel-button{-webkit-appearance:none;border:none;background:none;cursor:pointer;padding:0;margin:0}.-cbwsdk-css-reset .-cbwsdk-cancel-button-x{position:relative;display:block;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-wallet-steps{padding:0 0 0 16px;margin:0;width:100%;list-style:decimal}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item{list-style-type:decimal;display:list-item;font-style:normal;font-weight:400;font-size:16px;line-height:24px;margin-top:20px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item-wrapper{display:flex;align-items:center}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-pad-left{margin-left:6px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon{display:flex;border-radius:50%;height:24px;width:24px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.light{background:#0052ff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.dark{background:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item{align-items:center;display:flex;flex-direction:row;padding:16px 24px;gap:12px;cursor:pointer;border-radius:100px;font-weight:600}.-cbwsdk-css-reset .-cbwsdk-connect-item.light{background:#f5f8ff;color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark{background:#001033;color:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item-copy-wrapper{margin:0 4px 0 8px}.-cbwsdk-css-reset .-cbwsdk-connect-item-title{margin:0 0 0;font-size:16px;line-height:24px;font-weight:500}.-cbwsdk-css-reset .-cbwsdk-connect-item-description{font-weight:400;font-size:14px;line-height:20px;margin:0}";var uc=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.CoinbaseWalletSteps=Ht.ConnectContent=void 0;const pt=uc(Cr),V=fe,rh=P,nh=$t,sh=vn,ih=En,oh=kn,ah=Sn,ch=Cn,lh=uc(Ti),$s={title:"Coinbase Wallet app",description:"Connect with your self-custody wallet",steps:dc},uh=e=>e==="light"?"#FFFFFF":"#0A0B0D";function dh(e){const{theme:t}=e,r=(0,rh.createQrUrl)(e.sessionId,e.sessionSecret,e.linkAPIUrl,e.isParentConnection,e.version,e.chainId),n=$s.steps;return(0,V.h)("div",{"data-testid":"connect-content",className:(0,pt.default)("-cbwsdk-connect-content",t)},(0,V.h)("style",null,lh.default),(0,V.h)("div",{className:"-cbwsdk-connect-content-header"},(0,V.h)("h2",{className:(0,pt.default)("-cbwsdk-connect-content-heading",t)},"Scan to connect with our mobile app"),e.onCancel&&(0,V.h)("button",{type:"button",className:"-cbwsdk-cancel-button",onClick:e.onCancel},(0,V.h)(sh.CloseIcon,{fill:t==="light"?"#0A0B0D":"#FFFFFF"}))),(0,V.h)("div",{className:"-cbwsdk-connect-content-layout"},(0,V.h)("div",{className:"-cbwsdk-connect-content-column-left"},(0,V.h)(hh,{title:$s.title,description:$s.description,theme:t})),(0,V.h)("div",{className:"-cbwsdk-connect-content-column-right"},(0,V.h)("div",{className:"-cbwsdk-connect-content-qr-wrapper"},(0,V.h)(ah.QRCode,{content:r,width:200,height:200,fgColor:"#000",bgColor:"transparent"}),(0,V.h)("input",{type:"hidden",name:"cbw-cbwsdk-version",value:nh.LIB_VERSION}),(0,V.h)("input",{type:"hidden",value:r})),(0,V.h)(n,{theme:t}),!e.isConnected&&(0,V.h)("div",{"data-testid":"connecting-spinner",className:(0,pt.default)("-cbwsdk-connect-content-qr-connecting",t)},(0,V.h)(ch.Spinner,{size:36,color:t==="dark"?"#FFF":"#000"}),(0,V.h)("p",null,"Connecting...")))))}Ht.ConnectContent=dh;function hh({title:e,description:t,theme:r}){return(0,V.h)("div",{className:(0,pt.default)("-cbwsdk-connect-item",r)},(0,V.h)("div",null,(0,V.h)(ih.CoinbaseWalletRound,null)),(0,V.h)("div",{className:"-cbwsdk-connect-item-copy-wrapper"},(0,V.h)("h3",{className:"-cbwsdk-connect-item-title"},e),(0,V.h)("p",{className:"-cbwsdk-connect-item-description"},t)))}function dc({theme:e}){return(0,V.h)("ol",{className:"-cbwsdk-wallet-steps"},(0,V.h)("li",{className:(0,pt.default)("-cbwsdk-wallet-steps-item",e)},(0,V.h)("div",{className:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase Wallet app")),(0,V.h)("li",{className:(0,pt.default)("-cbwsdk-wallet-steps-item",e)},(0,V.h)("div",{className:"-cbwsdk-wallet-steps-item-wrapper"},(0,V.h)("span",null,"Tap ",(0,V.h)("strong",null,"Scan")," "),(0,V.h)("span",{className:(0,pt.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",e)},(0,V.h)(oh.QRCodeIcon,{fill:uh(e)})))))}Ht.CoinbaseWalletSteps=dc;var Rn={},In={};Object.defineProperty(In,"__esModule",{value:!0});In.ArrowLeftIcon=void 0;const Mo=fe;function fh(e){return(0,Mo.h)("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e),(0,Mo.h)("path",{d:"M8.60675 0.155884L7.37816 1.28209L12.7723 7.16662H0V8.83328H12.6548L6.82149 14.6666L8 15.8451L15.8201 8.02501L8.60675 0.155884Z"}))}In.ArrowLeftIcon=fh;var xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.LaptopIcon=void 0;const Gs=fe;function ph(e){return(0,Gs.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},e),(0,Gs.h)("path",{d:"M1.8001 2.2002H12.2001V9.40019H1.8001V2.2002ZM3.4001 3.8002V7.80019H10.6001V3.8002H3.4001Z"}),(0,Gs.h)("path",{d:"M13.4001 10.2002H0.600098C0.600098 11.0838 1.31644 11.8002 2.2001 11.8002H11.8001C12.6838 11.8002 13.4001 11.0838 13.4001 10.2002Z"}))}xn.LaptopIcon=ph;var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.SafeIcon=void 0;const Ao=fe;function gh(e){return(0,Ao.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},e),(0,Ao.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.600098 0.600098V11.8001H13.4001V0.600098H0.600098ZM7.0001 9.2001C5.3441 9.2001 4.0001 7.8561 4.0001 6.2001C4.0001 4.5441 5.3441 3.2001 7.0001 3.2001C8.6561 3.2001 10.0001 4.5441 10.0001 6.2001C10.0001 7.8561 8.6561 9.2001 7.0001 9.2001ZM0.600098 12.6001H3.8001V13.4001H0.600098V12.6001ZM10.2001 12.6001H13.4001V13.4001H10.2001V12.6001ZM8.8001 6.2001C8.8001 7.19421 7.99421 8.0001 7.0001 8.0001C6.00598 8.0001 5.2001 7.19421 5.2001 6.2001C5.2001 5.20598 6.00598 4.4001 7.0001 4.4001C7.99421 4.4001 8.8001 5.20598 8.8001 6.2001Z"}))}Mn.SafeIcon=gh;var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.default=".-cbwsdk-css-reset .-cbwsdk-try-extension{display:flex;margin-top:12px;height:202px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-try-extension.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-column-half{flex:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading{font-style:normal;font-weight:500;font-size:25px;line-height:32px;margin:0;max-width:204px}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta{appearance:none;border:none;background:none;color:#0052ff;cursor:pointer;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.light{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.dark{color:#588af5}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-wrapper{display:flex;align-items:center;margin-top:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-icon{display:block;margin-left:4px;height:14px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;padding:0;list-style:none;height:100%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item{display:flex;align-items:center;flex-flow:nowrap;margin-top:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item:first-of-type{margin-top:0}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon-wrapper{display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon{display:flex;height:32px;width:32px;border-radius:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.light{background:#eef0f3}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.dark{background:#1e2025}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy{display:block;font-weight:400;font-size:14px;line-height:20px;padding-left:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.light{color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.dark{color:#8a919e}";var hc=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.TryExtensionContent=void 0;const ot=hc(Cr),ee=fe,Zs=wn,_h=In,mh=xn,bh=Mn,yh=hc(Oi);function wh({theme:e}){const[t,r]=(0,Zs.useState)(!1),n=(0,Zs.useCallback)(()=>{window.open("https://api.wallet.coinbase.com/rpc/v2/desktop/chrome","_blank")},[]),s=(0,Zs.useCallback)(()=>{t?window.location.reload():(n(),r(!0))},[n,t]);return(0,ee.h)("div",{class:(0,ot.default)("-cbwsdk-try-extension",e)},(0,ee.h)("style",null,yh.default),(0,ee.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,ee.h)("h3",{class:(0,ot.default)("-cbwsdk-try-extension-heading",e)},"Or try the Coinbase Wallet browser extension"),(0,ee.h)("div",{class:"-cbwsdk-try-extension-cta-wrapper"},(0,ee.h)("button",{class:(0,ot.default)("-cbwsdk-try-extension-cta",e),onClick:s},t?"Refresh":"Install"),(0,ee.h)("div",null,!t&&(0,ee.h)(_h.ArrowLeftIcon,{class:"-cbwsdk-try-extension-cta-icon",fill:e==="light"?"#0052FF":"#588AF5"})))),(0,ee.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,ee.h)("ul",{class:"-cbwsdk-try-extension-list"},(0,ee.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,ee.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,ee.h)("span",{class:(0,ot.default)("-cbwsdk-try-extension-list-item-icon",e)},(0,ee.h)(mh.LaptopIcon,{fill:e==="light"?"#0A0B0D":"#FFFFFF"}))),(0,ee.h)("div",{class:(0,ot.default)("-cbwsdk-try-extension-list-item-copy",e)},"Connect with dapps with just one click on your desktop browser")),(0,ee.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,ee.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,ee.h)("span",{class:(0,ot.default)("-cbwsdk-try-extension-list-item-icon",e)},(0,ee.h)(bh.SafeIcon,{fill:e==="light"?"#0A0B0D":"#FFFFFF"}))),(0,ee.h)("div",{class:(0,ot.default)("-cbwsdk-try-extension-list-item-copy",e)},"Add an additional layer of security by using a supported Ledger hardware wallet")))))}Rn.TryExtensionContent=wh;var Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.default=".-cbwsdk-css-reset .-cbwsdk-connect-dialog{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.light{background-color:rgba(0,0,0,.5)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.dark{background-color:rgba(50,53,61,.4)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box{display:flex;position:relative;flex-direction:column;transform:scale(1);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box-hidden{opacity:0;transform:scale(0.85)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container{display:block}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container-hidden{display:none}";var fc=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yn,"__esModule",{value:!0});yn.ConnectDialog=void 0;const Qs=fc(Cr),at=fe,Ys=wn,vh=Ht,Eh=Rn,kh=fc(Ni),Sh=e=>{const{isOpen:t,darkMode:r}=e,[n,s]=(0,Ys.useState)(!t),[i,o]=(0,Ys.useState)(!t);(0,Ys.useEffect)(()=>{const l=[window.setTimeout(()=>{o(!t)},10)];return t?s(!1):l.push(window.setTimeout(()=>{s(!0)},360)),()=>{l.forEach(window.clearTimeout)}},[t]);const a=r?"dark":"light";return(0,at.h)("div",{class:(0,Qs.default)("-cbwsdk-connect-dialog-container",n&&"-cbwsdk-connect-dialog-container-hidden")},(0,at.h)("style",null,kh.default),(0,at.h)("div",{class:(0,Qs.default)("-cbwsdk-connect-dialog-backdrop",a,i&&"-cbwsdk-connect-dialog-backdrop-hidden")}),(0,at.h)("div",{class:"-cbwsdk-connect-dialog"},(0,at.h)("div",{class:(0,Qs.default)("-cbwsdk-connect-dialog-box",i&&"-cbwsdk-connect-dialog-box-hidden")},e.connectDisabled?null:(0,at.h)(vh.ConnectContent,{theme:a,version:e.version,sessionId:e.sessionId,sessionSecret:e.sessionSecret,linkAPIUrl:e.linkAPIUrl,isConnected:e.isConnected,isParentConnection:e.isParentConnection,chainId:e.chainId,onCancel:e.onCancel}),(0,at.h)(Eh.TryExtensionContent,{theme:a}))))};yn.ConnectDialog=Sh;Object.defineProperty(mn,"__esModule",{value:!0});mn.LinkFlow=void 0;const Ks=fe,Ch=yn;class Rh{constructor(t){this.connected=!1,this.chainId=1,this.isOpen=!1,this.onCancel=null,this.root=null,this.connectDisabled=!1,this.darkMode=t.darkMode,this.version=t.version,this.sessionId=t.sessionId,this.sessionSecret=t.sessionSecret,this.linkAPIUrl=t.linkAPIUrl,this.isParentConnection=t.isParentConnection}attach(t){this.root=document.createElement("div"),this.root.className="-cbwsdk-link-flow-root",t.appendChild(this.root),this.render()}setConnected(t){this.connected!==t&&(this.connected=t,this.render())}setChainId(t){this.chainId!==t&&(this.chainId=t,this.render())}detach(){var t;this.root&&((0,Ks.render)(null,this.root),(t=this.root.parentElement)===null||t===void 0||t.removeChild(this.root))}setConnectDisabled(t){this.connectDisabled=t}open(t){this.isOpen=!0,this.onCancel=t.onCancel,this.render()}close(){this.isOpen=!1,this.onCancel=null,this.render()}render(){this.root&&(0,Ks.render)((0,Ks.h)(Ch.ConnectDialog,{darkMode:this.darkMode,version:this.version,sessionId:this.sessionId,sessionSecret:this.sessionSecret,linkAPIUrl:this.linkAPIUrl,isOpen:this.isOpen,isConnected:this.connected,isParentConnection:this.isParentConnection,chainId:this.chainId,onCancel:this.onCancel,connectDisabled:this.connectDisabled}),this.root)}}mn.LinkFlow=Rh;var Li={},Bi={};Object.defineProperty(Bi,"__esModule",{value:!0});Bi.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}";(function(e){var t=O&&O.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.SnackbarInstance=e.SnackbarContainer=e.Snackbar=void 0;const r=t(Cr),n=fe,s=wn,i=t(Bi),o="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",a="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";class l{constructor(f){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=f.darkMode}attach(f){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",f.appendChild(this.root),this.render()}presentItem(f){const g=this.nextItemKey++;return this.items.set(g,f),this.render(),()=>{this.items.delete(g),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,n.render)((0,n.h)("div",null,(0,n.h)(e.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([f,g])=>(0,n.h)(e.SnackbarInstance,Object.assign({},g,{key:f}))))),this.root)}}e.Snackbar=l;const c=u=>(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-container")},(0,n.h)("style",null,i.default),(0,n.h)("div",{class:"-cbwsdk-snackbar"},u.children));e.SnackbarContainer=c;const d=({autoExpand:u,message:f,menuItems:g})=>{const[w,m]=(0,s.useState)(!0),[E,v]=(0,s.useState)(u??!1);(0,s.useEffect)(()=>{const y=[window.setTimeout(()=>{m(!1)},1),window.setTimeout(()=>{v(!0)},1e4)];return()=>{y.forEach(window.clearTimeout)}});const k=()=>{v(!E)};return(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-instance",w&&"-cbwsdk-snackbar-instance-hidden",E&&"-cbwsdk-snackbar-instance-expanded")},(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:k},(0,n.h)("img",{src:o,class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},f),(0,n.h)("div",{class:"-gear-container"},!E&&(0,n.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,n.h)("img",{src:a,class:"-gear-icon",title:"Expand"}))),g&&g.length>0&&(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},g.map((y,C)=>(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-instance-menu-item",y.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:y.onClick,key:C},(0,n.h)("svg",{width:y.svgWidth,height:y.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("path",{"fill-rule":y.defaultFillRule,"clip-rule":y.defaultClipRule,d:y.path,fill:"#AAAAAA"})),(0,n.h)("span",{class:(0,r.default)("-cbwsdk-snackbar-instance-menu-item-info",y.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},y.info)))))};e.SnackbarInstance=d})(Li);Object.defineProperty(vr,"__esModule",{value:!0});vr.WalletLinkRelayUI=void 0;const Ih=Er,xh=mn,Mh=Li;class Ah{constructor(t){this.standalone=null,this.attached=!1,this.snackbar=new Mh.Snackbar({darkMode:t.darkMode}),this.linkFlow=new xh.LinkFlow({darkMode:t.darkMode,version:t.version,sessionId:t.session.id,sessionSecret:t.session.secret,linkAPIUrl:t.linkAPIUrl,isParentConnection:!1})}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const t=document.documentElement,r=document.createElement("div");r.className="-cbwsdk-css-reset",t.appendChild(r),this.linkFlow.attach(r),this.snackbar.attach(r),this.attached=!0,(0,Ih.injectCssReset)()}setConnected(t){this.linkFlow.setConnected(t)}setChainId(t){this.linkFlow.setChainId(t)}setConnectDisabled(t){this.linkFlow.setConnectDisabled(t)}addEthereumChain(){}watchAsset(){}switchEthereumChain(){}requestEthereumAccounts(t){this.linkFlow.open({onCancel:t.onCancel})}hideRequestEthereumAccounts(){this.linkFlow.close()}signEthereumMessage(){}signEthereumTransaction(){}submitEthereumTransaction(){}ethereumAddressFromSignedMessage(){}showConnecting(t){let r;return t.isUnlinkedErrorState?r={autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:t.onResetConnection}]}:r={message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:t.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:t.onResetConnection}]},this.snackbar.presentItem(r)}reloadUI(){document.location.reload()}inlineAccountsResponse(){return!1}inlineAddEthereumChain(){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}setStandalone(t){this.standalone=t}isStandalone(){var t;return(t=this.standalone)!==null&&t!==void 0?t:!1}}vr.WalletLinkRelayUI=Ah;Object.defineProperty(_r,"__esModule",{value:!0});_r.WalletLinkRelay=void 0;const Mt=dr,Ph=te,Y=P,ct=Gt,Po=ke,et=Zt,Th=pn,lt=Jt,Oh=vr;class ze extends Po.RelayAbstract{constructor(t){var r;super(),this.accountsCallback=null,this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.chainCallback=null,this.dappDefaultChain=1,this.appName="",this.appLogoUrl=null,this.linkedUpdated=o=>{var a;this.isLinked=o;const l=this.storage.getItem(Po.LOCAL_STORAGE_ADDRESSES_KEY);if(o&&(this.session.linked=o),this.isUnlinkedErrorState=!1,l){const c=l.split(" "),d=this.storage.getItem("IsStandaloneSigning")==="true";if(c[0]!==""&&!o&&this.session.linked&&!d){this.isUnlinkedErrorState=!0;const u=this.getSessionIdHash();(a=this.diagnostic)===null||a===void 0||a.log(ct.EVENTS.UNLINKED_ERROR_STATE,{sessionIdHash:u})}}},this.metadataUpdated=(o,a)=>{this.storage.setItem(o,a)},this.chainUpdated=(o,a)=>{this.chainCallbackParams.chainId===o&&this.chainCallbackParams.jsonRpcUrl===a||(this.chainCallbackParams={chainId:o,jsonRpcUrl:a},this.chainCallback&&this.chainCallback(o,a))},this.accountUpdated=o=>{this.accountsCallback&&this.accountsCallback([o]),ze.accountRequestCallbackIds.size>0&&(Array.from(ze.accountRequestCallbackIds.values()).forEach(a=>{const l={type:"WEB3_RESPONSE",id:a,response:{method:"requestEthereumAccounts",result:[o]}};this.invokeCallback(Object.assign(Object.assign({},l),{id:a}))}),ze.accountRequestCallbackIds.clear())},this.connectedUpdated=o=>{this.ui.setConnected(o)},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=t.linkAPIUrl,this.storage=t.storage,this.options=t;const{session:n,ui:s,connection:i}=this.subscribe();this._session=n,this.connection=i,this.relayEventManager=t.relayEventManager,this.diagnostic=t.diagnosticLogger,this._reloadOnDisconnect=(r=t.reloadOnDisconnect)!==null&&r!==void 0?r:!0,this.ui=s}subscribe(){const t=et.Session.load(this.storage)||new et.Session(this.storage).save(),{linkAPIUrl:r,diagnostic:n}=this,s=new Th.WalletLinkConnection({session:t,linkAPIUrl:r,diagnostic:n,listener:this}),{version:i,darkMode:o}=this.options,a=this.options.uiConstructor({linkAPIUrl:r,version:i,darkMode:o,session:t});return s.connect(),{session:t,ui:a,connection:s}}attachUI(){this.ui.attach()}resetAndReload(){Promise.race([this.connection.setSessionMetadata("__destroyed","1"),new Promise(t=>setTimeout(()=>t(null),1e3))]).then(()=>{var t,r;const n=this.ui.isStandalone();(t=this.diagnostic)===null||t===void 0||t.log(ct.EVENTS.SESSION_STATE_CHANGE,{method:"relay::resetAndReload",sessionMetadataChange:"__destroyed, 1",sessionIdHash:this.getSessionIdHash()}),this.connection.destroy();const s=et.Session.load(this.storage);if((s==null?void 0:s.id)===this._session.id?this.storage.clear():s&&((r=this.diagnostic)===null||r===void 0||r.log(ct.EVENTS.SKIPPED_CLEARING_SESSION,{sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:et.Session.hash(s.id)})),this._reloadOnDisconnect){this.ui.reloadUI();return}this.accountsCallback&&this.accountsCallback([],!0);const{session:i,ui:o,connection:a}=this.subscribe();this._session=i,this.connection=a,this.ui=o,n&&this.ui.setStandalone&&this.ui.setStandalone(!0),this.attachUI()}).catch(t=>{var r;(r=this.diagnostic)===null||r===void 0||r.log(ct.EVENTS.FAILURE,{method:"relay::resetAndReload",message:`failed to reset and reload with ${t}`,sessionIdHash:this.getSessionIdHash()})})}setAppInfo(t,r){this.appName=t,this.appLogoUrl=r}getStorageItem(t){return this.storage.getItem(t)}get session(){return this._session}setStorageItem(t,r){this.storage.setItem(t,r)}signEthereumMessage(t,r,n,s){return this.sendRequest({method:"signEthereumMessage",params:{message:(0,Y.hexStringFromBuffer)(t,!0),address:r,addPrefix:n,typedDataJson:s||null}})}ethereumAddressFromSignedMessage(t,r,n){return this.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:(0,Y.hexStringFromBuffer)(t,!0),signature:(0,Y.hexStringFromBuffer)(r,!0),addPrefix:n}})}signEthereumTransaction(t){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:t.fromAddress,toAddress:t.toAddress,weiValue:(0,Y.bigIntStringFromBN)(t.weiValue),data:(0,Y.hexStringFromBuffer)(t.data,!0),nonce:t.nonce,gasPriceInWei:t.gasPriceInWei?(0,Y.bigIntStringFromBN)(t.gasPriceInWei):null,maxFeePerGas:t.gasPriceInWei?(0,Y.bigIntStringFromBN)(t.gasPriceInWei):null,maxPriorityFeePerGas:t.gasPriceInWei?(0,Y.bigIntStringFromBN)(t.gasPriceInWei):null,gasLimit:t.gasLimit?(0,Y.bigIntStringFromBN)(t.gasLimit):null,chainId:t.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(t){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:t.fromAddress,toAddress:t.toAddress,weiValue:(0,Y.bigIntStringFromBN)(t.weiValue),data:(0,Y.hexStringFromBuffer)(t.data,!0),nonce:t.nonce,gasPriceInWei:t.gasPriceInWei?(0,Y.bigIntStringFromBN)(t.gasPriceInWei):null,maxFeePerGas:t.maxFeePerGas?(0,Y.bigIntStringFromBN)(t.maxFeePerGas):null,maxPriorityFeePerGas:t.maxPriorityFeePerGas?(0,Y.bigIntStringFromBN)(t.maxPriorityFeePerGas):null,gasLimit:t.gasLimit?(0,Y.bigIntStringFromBN)(t.gasLimit):null,chainId:t.chainId,shouldSubmit:!0}})}submitEthereumTransaction(t,r){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:(0,Y.hexStringFromBuffer)(t,!0),chainId:r}})}scanQRCode(t){return this.sendRequest({method:"scanQRCode",params:{regExp:t}})}getQRCodeUrl(){return(0,Y.createQrUrl)(this._session.id,this._session.secret,this.linkAPIUrl,!1,this.options.version,this.dappDefaultChain)}genericRequest(t,r){return this.sendRequest({method:"generic",params:{action:r,data:t}})}sendGenericMessage(t){return this.sendRequest(t)}sendRequest(t){let r=null;const n=(0,Y.randomBytesHex)(8),s=i=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,t.method,i),r==null||r()};return{promise:new Promise((i,o)=>{this.ui.isStandalone()||(r=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:s,onResetConnection:this.resetAndReload})),this.relayEventManager.callbacks.set(n,a=>{if(r==null||r(),(0,lt.isErrorResponse)(a))return o(new Error(a.errorMessage));i(a)}),this.ui.isStandalone()?this.sendRequestStandalone(n,t):this.publishWeb3RequestEvent(n,t)}),cancel:s}}setConnectDisabled(t){this.ui.setConnectDisabled(t)}setAccountsCallback(t){this.accountsCallback=t}setChainCallback(t){this.chainCallback=t}setDappDefaultChainCallback(t){this.dappDefaultChain=t,this.ui instanceof Oh.WalletLinkRelayUI&&this.ui.setChainId(t)}publishWeb3RequestEvent(t,r){var n;const s={type:"WEB3_REQUEST",id:t,request:r},i=et.Session.load(this.storage);(n=this.diagnostic)===null||n===void 0||n.log(ct.EVENTS.WEB3_REQUEST,{eventId:s.id,method:`relay::${r.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:i?et.Session.hash(i.id):"",isSessionMismatched:((i==null?void 0:i.id)!==this._session.id).toString()}),this.publishEvent("Web3Request",s,!0).then(o=>{var a;(a=this.diagnostic)===null||a===void 0||a.log(ct.EVENTS.WEB3_REQUEST_PUBLISHED,{eventId:s.id,method:`relay::${r.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:i?et.Session.hash(i.id):"",isSessionMismatched:((i==null?void 0:i.id)!==this._session.id).toString()})}).catch(o=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:s.id,response:{method:r.method,errorMessage:o.message}})})}publishWeb3RequestCanceledEvent(t){const r={type:"WEB3_REQUEST_CANCELED",id:t};this.publishEvent("Web3RequestCanceled",r,!1).then()}publishEvent(t,r,n){return this.connection.publishEvent(t,r,n)}handleWeb3ResponseMessage(t){var r;const{response:n}=t;if((r=this.diagnostic)===null||r===void 0||r.log(ct.EVENTS.WEB3_RESPONSE,{eventId:t.id,method:`relay::${n.method}`,sessionIdHash:this.getSessionIdHash()}),n.method==="requestEthereumAccounts"){ze.accountRequestCallbackIds.forEach(s=>this.invokeCallback(Object.assign(Object.assign({},t),{id:s}))),ze.accountRequestCallbackIds.clear();return}this.invokeCallback(t)}handleErrorResponse(t,r,n,s){var i;const o=(i=n==null?void 0:n.message)!==null&&i!==void 0?i:(0,Mt.getMessageFromCode)(s);this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:t,response:{method:r,errorMessage:o,errorCode:s}})}invokeCallback(t){const r=this.relayEventManager.callbacks.get(t.id);r&&(r(t.response),this.relayEventManager.callbacks.delete(t.id))}requestEthereumAccounts(){const t={method:"requestEthereumAccounts",params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},r=(0,Y.randomBytesHex)(8),n=s=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,t.method,s)};return{promise:new Promise((s,i)=>{if(this.relayEventManager.callbacks.set(r,o=>{if(this.ui.hideRequestEthereumAccounts(),(0,lt.isErrorResponse)(o))return i(new Error(o.errorMessage));s(o)}),this.ui.inlineAccountsResponse()){const o=a=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:r,response:{method:"requestEthereumAccounts",result:a}})};this.ui.requestEthereumAccounts({onCancel:n,onAccounts:o})}else{const o=Mt.standardErrors.provider.userRejectedRequest("User denied account authorization");this.ui.requestEthereumAccounts({onCancel:()=>n(o)})}ze.accountRequestCallbackIds.add(r),!this.ui.inlineAccountsResponse()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(r,t)}),cancel:n}}selectProvider(t){const r={method:"selectProvider",params:{providerOptions:t}},n=(0,Y.randomBytesHex)(8),s=o=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,r.method,o)},i=new Promise((o,a)=>{this.relayEventManager.callbacks.set(n,d=>{if((0,lt.isErrorResponse)(d))return a(new Error(d.errorMessage));o(d)});const l=d=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:n,response:{method:"selectProvider",result:Ph.ProviderType.Unselected}})},c=d=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:n,response:{method:"selectProvider",result:d}})};this.ui.selectProvider&&this.ui.selectProvider({onApprove:c,onCancel:l,providerOptions:t})});return{cancel:s,promise:i}}watchAsset(t,r,n,s,i,o){const a={method:"watchAsset",params:{type:t,options:{address:r,symbol:n,decimals:s,image:i},chainId:o}};let l=null;const c=(0,Y.randomBytesHex)(8),d=f=>{this.publishWeb3RequestCanceledEvent(c),this.handleErrorResponse(c,a.method,f),l==null||l()};this.ui.inlineWatchAsset()||(l=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:d,onResetConnection:this.resetAndReload}));const u=new Promise((f,g)=>{this.relayEventManager.callbacks.set(c,E=>{if(l==null||l(),(0,lt.isErrorResponse)(E))return g(new Error(E.errorMessage));f(E)});const w=E=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:c,response:{method:"watchAsset",result:!1}})},m=()=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:c,response:{method:"watchAsset",result:!0}})};this.ui.inlineWatchAsset()&&this.ui.watchAsset({onApprove:m,onCancel:w,type:t,address:r,symbol:n,decimals:s,image:i,chainId:o}),!this.ui.inlineWatchAsset()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(c,a)});return{cancel:d,promise:u}}addEthereumChain(t,r,n,s,i,o){const a={method:"addEthereumChain",params:{chainId:t,rpcUrls:r,blockExplorerUrls:s,chainName:i,iconUrls:n,nativeCurrency:o}};let l=null;const c=(0,Y.randomBytesHex)(8),d=u=>{this.publishWeb3RequestCanceledEvent(c),this.handleErrorResponse(c,a.method,u),l==null||l()};return this.ui.inlineAddEthereumChain(t)||(l=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:d,onResetConnection:this.resetAndReload})),{promise:new Promise((u,f)=>{this.relayEventManager.callbacks.set(c,m=>{if(l==null||l(),(0,lt.isErrorResponse)(m))return f(new Error(m.errorMessage));u(m)});const g=m=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:c,response:{method:"addEthereumChain",result:{isApproved:!1,rpcUrl:""}}})},w=m=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:c,response:{method:"addEthereumChain",result:{isApproved:!0,rpcUrl:m}}})};this.ui.inlineAddEthereumChain(t)&&this.ui.addEthereumChain({onCancel:g,onApprove:w,chainId:a.params.chainId,rpcUrls:a.params.rpcUrls,blockExplorerUrls:a.params.blockExplorerUrls,chainName:a.params.chainName,iconUrls:a.params.iconUrls,nativeCurrency:a.params.nativeCurrency}),!this.ui.inlineAddEthereumChain(t)&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(c,a)}),cancel:d}}switchEthereumChain(t,r){const n={method:"switchEthereumChain",params:Object.assign({chainId:t},{address:r})},s=(0,Y.randomBytesHex)(8),i=o=>{this.publishWeb3RequestCanceledEvent(s),this.handleErrorResponse(s,n.method,o)};return{promise:new Promise((o,a)=>{this.relayEventManager.callbacks.set(s,d=>{if((0,lt.isErrorResponse)(d)&&d.errorCode)return a(Mt.standardErrors.provider.custom({code:d.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if((0,lt.isErrorResponse)(d))return a(new Error(d.errorMessage));o(d)});const l=d=>{var u;if(d){const f=(u=(0,Mt.getErrorCode)(d))!==null&&u!==void 0?u:Mt.standardErrorCodes.provider.unsupportedChain;this.handleErrorResponse(s,"switchEthereumChain",d instanceof Error?d:Mt.standardErrors.provider.unsupportedChain(t),f)}else this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:s,response:{method:"switchEthereumChain",result:{isApproved:!1,rpcUrl:""}}})},c=d=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:s,response:{method:"switchEthereumChain",result:{isApproved:!0,rpcUrl:d}}})};this.ui.switchEthereumChain({onCancel:l,onApprove:c,chainId:n.params.chainId,address:n.params.address}),!this.ui.inlineSwitchEthereumChain()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(s,n)}),cancel:i}}inlineAddEthereumChain(t){return this.ui.inlineAddEthereumChain(t)}getSessionIdHash(){return et.Session.hash(this._session.id)}sendRequestStandalone(t,r){const n=i=>{this.handleErrorResponse(t,r.method,i)},s=i=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:t,response:i})};switch(r.method){case"signEthereumMessage":this.ui.signEthereumMessage({request:r,onSuccess:s,onCancel:n});break;case"signEthereumTransaction":this.ui.signEthereumTransaction({request:r,onSuccess:s,onCancel:n});break;case"submitEthereumTransaction":this.ui.submitEthereumTransaction({request:r,onSuccess:s,onCancel:n});break;case"ethereumAddressFromSignedMessage":this.ui.ethereumAddressFromSignedMessage({request:r,onSuccess:s});break;default:n();break}}}_r.WalletLinkRelay=ze;ze.accountRequestCallbackIds=new Set;var Rr={},An={},pc={};(function(e){var t=O&&O.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=O&&O.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(Li,e)})(pc);var ji={};Object.defineProperty(ji,"__esModule",{value:!0});ji.default=".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}";var gc=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(An,"__esModule",{value:!0});An.RedirectDialog=void 0;const Nh=gc(Cr),Ne=fe,Lh=Er,Bh=pc,jh=gc(ji);class Dh{constructor(){this.root=null}attach(){const t=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",t.appendChild(this.root),(0,Lh.injectCssReset)()}present(t){this.render(t)}clear(){this.render(null)}render(t){this.root&&((0,Ne.render)(null,this.root),t&&(0,Ne.render)((0,Ne.h)(Fh,Object.assign({},t,{onDismiss:()=>{this.clear()}})),this.root))}}An.RedirectDialog=Dh;const Fh=({title:e,buttonText:t,darkMode:r,onButtonClick:n,onDismiss:s})=>{const i=r?"dark":"light";return(0,Ne.h)(Bh.SnackbarContainer,{darkMode:r},(0,Ne.h)("div",{class:"-cbwsdk-redirect-dialog"},(0,Ne.h)("style",null,jh.default),(0,Ne.h)("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:s}),(0,Ne.h)("div",{class:(0,Nh.default)("-cbwsdk-redirect-dialog-box",i)},(0,Ne.h)("p",null,e),(0,Ne.h)("button",{onClick:n},t))))};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.MobileRelayUI=void 0;const Hh=An;class Uh{constructor(t){this.attached=!1,this.darkMode=!1,this.openedWindow=null,this.redirectDialog=new Hh.RedirectDialog,this.darkMode=t.darkMode}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}setConnected(t){}closeOpenedWindow(){var t;(t=this.openedWindow)===null||t===void 0||t.close(),this.openedWindow=null}redirectToCoinbaseWallet(t){const r=new URL("https://go.cb-w.com/walletlink");r.searchParams.append("redirect_url",window.location.href),t&&r.searchParams.append("wl_url",t),this.openedWindow=window.open(r.href,"cbw-opener"),this.openedWindow&&setTimeout(()=>this.closeOpenedWindow(),5e3)}openCoinbaseWalletDeeplink(t){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",darkMode:this.darkMode,onButtonClick:()=>{this.redirectToCoinbaseWallet(t)}}),setTimeout(()=>{this.redirectToCoinbaseWallet(t)},99)}showConnecting(t){return()=>{this.closeOpenedWindow(),this.redirectDialog.clear()}}hideRequestEthereumAccounts(){this.closeOpenedWindow(),this.redirectDialog.clear()}requestEthereumAccounts(){}addEthereumChain(){}watchAsset(){}selectProvider(){}switchEthereumChain(){}signEthereumMessage(){}signEthereumTransaction(){}submitEthereumTransaction(){}ethereumAddressFromSignedMessage(){}reloadUI(){}setStandalone(){}setConnectDisabled(){}inlineAccountsResponse(){return!1}inlineAddEthereumChain(){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}isStandalone(){return!1}}Rr.MobileRelayUI=Uh;Object.defineProperty(gr,"__esModule",{value:!0});gr.MobileRelay=void 0;const Wh=P,Vh=_r,To=Rr;class qh extends Vh.WalletLinkRelay{constructor(t){var r;super(t),this._enableMobileWalletLink=(r=t.enableMobileWalletLink)!==null&&r!==void 0?r:!1}requestEthereumAccounts(){return this._enableMobileWalletLink?super.requestEthereumAccounts():{promise:new Promise(()=>{const t=(0,Wh.getLocation)();t.href=`https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(t.href)}`}),cancel:()=>{}}}publishWeb3RequestEvent(t,r){if(super.publishWeb3RequestEvent(t,r),!(this._enableMobileWalletLink&&this.ui instanceof To.MobileRelayUI))return;let n=!1;switch(r.method){case"requestEthereumAccounts":case"connectAndSignIn":n=!0,this.ui.openCoinbaseWalletDeeplink(this.getQRCodeUrl());break;case"switchEthereumChain":return;default:n=!0,this.ui.openCoinbaseWalletDeeplink();break}n&&window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0})}handleWeb3ResponseMessage(t){super.handleWeb3ResponseMessage(t),this._enableMobileWalletLink&&this.ui instanceof To.MobileRelayUI&&this.ui.closeOpenedWindow()}connectAndSignIn(t){if(!this._enableMobileWalletLink)throw new Error("connectAndSignIn is supported only when enableMobileWalletLink is on");return this.sendRequest({method:"connectAndSignIn",params:{appName:this.appName,appLogoUrl:this.appLogoUrl,domain:window.location.hostname,aud:window.location.href,version:"1",type:"eip4361",nonce:t.nonce,iat:new Date().toISOString(),chainId:`eip155:${this.dappDefaultChain}`,statement:t.statement,resources:t.resources}})}}gr.MobileRelay=qh;var _c={};const Oo=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];_c.p1600=function(e){for(let t=0;t<24;++t){const r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],i=e[3]^e[13]^e[23]^e[33]^e[43],o=e[4]^e[14]^e[24]^e[34]^e[44],a=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],c=e[7]^e[17]^e[27]^e[37]^e[47],d=e[8]^e[18]^e[28]^e[38]^e[48],u=e[9]^e[19]^e[29]^e[39]^e[49];let f=d^(s<<1|i>>>31),g=u^(i<<1|s>>>31);const w=e[0]^f,m=e[1]^g,E=e[10]^f,v=e[11]^g,k=e[20]^f,y=e[21]^g,C=e[30]^f,S=e[31]^g,x=e[40]^f,j=e[41]^g;f=r^(o<<1|a>>>31),g=n^(a<<1|o>>>31);const T=e[2]^f,M=e[3]^g,Q=e[12]^f,re=e[13]^g,$=e[22]^f,Z=e[23]^g,ie=e[32]^f,le=e[33]^g,Me=e[42]^f,be=e[43]^g;f=s^(l<<1|c>>>31),g=i^(c<<1|l>>>31);const Fe=e[4]^f,ye=e[5]^g,He=e[14]^f,Qe=e[15]^g,Ue=e[24]^f,pe=e[25]^g,Ye=e[34]^f,We=e[35]^g,_=e[44]^f,b=e[45]^g;f=o^(d<<1|u>>>31),g=a^(u<<1|d>>>31);const I=e[6]^f,N=e[7]^g,H=e[16]^f,h=e[17]^g,p=e[26]^f,R=e[27]^g,A=e[36]^f,G=e[37]^g,F=e[46]^f,z=e[47]^g;f=l^(r<<1|n>>>31),g=c^(n<<1|r>>>31);const it=e[8]^f,Et=e[9]^g,Xt=e[18]^f,Lr=e[19]^g,er=e[28]^f,kt=e[29]^g,St=e[38]^f,Ct=e[39]^g,Ke=e[48]^f,Ve=e[49]^g,Ae=w,Qn=m,Yn=v<<4|E>>>28,Kn=E<<4|v>>>28,Xn=k<<3|y>>>29,es=y<<3|k>>>29,ts=S<<9|C>>>23,rs=C<<9|S>>>23,ns=x<<18|j>>>14,ss=j<<18|x>>>14,is=T<<1|M>>>31,os=M<<1|T>>>31,as=re<<12|Q>>>20,cs=Q<<12|re>>>20,ls=$<<10|Z>>>22,us=Z<<10|$>>>22,ds=le<<13|ie>>>19,hs=ie<<13|le>>>19,fs=Me<<2|be>>>30,ps=be<<2|Me>>>30,gs=ye<<30|Fe>>>2,_s=Fe<<30|ye>>>2,ms=He<<6|Qe>>>26,bs=Qe<<6|He>>>26,ys=pe<<11|Ue>>>21,ws=Ue<<11|pe>>>21,vs=Ye<<15|We>>>17,Es=We<<15|Ye>>>17,ks=b<<29|_>>>3,Ss=_<<29|b>>>3,Cs=I<<28|N>>>4,Rs=N<<28|I>>>4,Is=h<<23|H>>>9,xs=H<<23|h>>>9,Ms=p<<25|R>>>7,As=R<<25|p>>>7,Ps=A<<21|G>>>11,Ts=G<<21|A>>>11,Os=z<<24|F>>>8,Ns=F<<24|z>>>8,Ls=it<<27|Et>>>5,Bs=Et<<27|it>>>5,js=Xt<<20|Lr>>>12,Ds=Lr<<20|Xt>>>12,Fs=kt<<7|er>>>25,Hs=er<<7|kt>>>25,Us=St<<8|Ct>>>24,Ws=Ct<<8|St>>>24,Vs=Ke<<14|Ve>>>18,qs=Ve<<14|Ke>>>18;e[0]=Ae^~as&ys,e[1]=Qn^~cs&ws,e[10]=Cs^~js&Xn,e[11]=Rs^~Ds&es,e[20]=is^~ms&Ms,e[21]=os^~bs&As,e[30]=Ls^~Yn&ls,e[31]=Bs^~Kn&us,e[40]=gs^~Is&Fs,e[41]=_s^~xs&Hs,e[2]=as^~ys&Ps,e[3]=cs^~ws&Ts,e[12]=js^~Xn&ds,e[13]=Ds^~es&hs,e[22]=ms^~Ms&Us,e[23]=bs^~As&Ws,e[32]=Yn^~ls&vs,e[33]=Kn^~us&Es,e[42]=Is^~Fs&ts,e[43]=xs^~Hs&rs,e[4]=ys^~Ps&Vs,e[5]=ws^~Ts&qs,e[14]=Xn^~ds&ks,e[15]=es^~hs&Ss,e[24]=Ms^~Us&ns,e[25]=As^~Ws&ss,e[34]=ls^~vs&Os,e[35]=us^~Es&Ns,e[44]=Fs^~ts&fs,e[45]=Hs^~rs&ps,e[6]=Ps^~Vs&Ae,e[7]=Ts^~qs&Qn,e[16]=ds^~ks&Cs,e[17]=hs^~Ss&Rs,e[26]=Us^~ns&is,e[27]=Ws^~ss&os,e[36]=vs^~Os&Ls,e[37]=Es^~Ns&Bs,e[46]=ts^~fs&gs,e[47]=rs^~ps&_s,e[8]=Vs^~Ae&as,e[9]=qs^~Qn&cs,e[18]=ks^~Cs&js,e[19]=Ss^~Rs&Ds,e[28]=ns^~is&ms,e[29]=ss^~os&bs,e[38]=Os^~Ls&Yn,e[39]=Ns^~Bs&Kn,e[48]=fs^~gs&Is,e[49]=ps^~_s&xs,e[0]^=Oo[t*2],e[1]^=Oo[t*2+1]}};const Qr=_c;function Yt(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}Yt.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};Yt.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(Qr.p1600(this.state),this.count=0)};Yt.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&Qr.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),Qr.p1600(this.state),this.count=0,this.squeezing=!0};Yt.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);const t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(Qr.p1600(this.state),this.count=0);return t};Yt.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};var zh=Yt,bi={exports:{}},mc=tn.EventEmitter,Xs,No;function Jh(){if(No)return Xs;No=1;function e(w,m){var E=Object.keys(w);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(w);m&&(v=v.filter(function(k){return Object.getOwnPropertyDescriptor(w,k).enumerable})),E.push.apply(E,v)}return E}function t(w){for(var m=1;m<arguments.length;m++){var E=arguments[m]!=null?arguments[m]:{};m%2?e(Object(E),!0).forEach(function(v){r(w,v,E[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(E)):e(Object(E)).forEach(function(v){Object.defineProperty(w,v,Object.getOwnPropertyDescriptor(E,v))})}return w}function r(w,m,E){return m=o(m),m in w?Object.defineProperty(w,m,{value:E,enumerable:!0,configurable:!0,writable:!0}):w[m]=E,w}function n(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function s(w,m){for(var E=0;E<m.length;E++){var v=m[E];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(w,o(v.key),v)}}function i(w,m,E){return m&&s(w.prototype,m),E&&s(w,E),Object.defineProperty(w,"prototype",{writable:!1}),w}function o(w){var m=a(w,"string");return typeof m=="symbol"?m:String(m)}function a(w,m){if(typeof w!="object"||w===null)return w;var E=w[Symbol.toPrimitive];if(E!==void 0){var v=E.call(w,m||"default");if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(w)}var l=ki,c=l.Buffer,d=wa,u=d.inspect,f=u&&u.custom||"inspect";function g(w,m,E){c.prototype.copy.call(w,m,E)}return Xs=function(){function w(){n(this,w),this.head=null,this.tail=null,this.length=0}return i(w,[{key:"push",value:function(m){var E={data:m,next:null};this.length>0?this.tail.next=E:this.head=E,this.tail=E,++this.length}},{key:"unshift",value:function(m){var E={data:m,next:this.head};this.length===0&&(this.tail=E),this.head=E,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var E=this.head,v=""+E.data;E=E.next;)v+=m+E.data;return v}},{key:"concat",value:function(m){if(this.length===0)return c.alloc(0);for(var E=c.allocUnsafe(m>>>0),v=this.head,k=0;v;)g(v.data,E,k),k+=v.data.length,v=v.next;return E}},{key:"consume",value:function(m,E){var v;return m<this.head.data.length?(v=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):m===this.head.data.length?v=this.shift():v=E?this._getString(m):this._getBuffer(m),v}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var E=this.head,v=1,k=E.data;for(m-=k.length;E=E.next;){var y=E.data,C=m>y.length?y.length:m;if(C===y.length?k+=y:k+=y.slice(0,m),m-=C,m===0){C===y.length?(++v,E.next?this.head=E.next:this.head=this.tail=null):(this.head=E,E.data=y.slice(C));break}++v}return this.length-=v,k}},{key:"_getBuffer",value:function(m){var E=c.allocUnsafe(m),v=this.head,k=1;for(v.data.copy(E),m-=v.data.length;v=v.next;){var y=v.data,C=m>y.length?y.length:m;if(y.copy(E,E.length-m,0,C),m-=C,m===0){C===y.length?(++k,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=y.slice(C));break}++k}return this.length-=k,E}},{key:f,value:function(m,E){return u(this,t(t({},E),{},{depth:0,customInspect:!1}))}}]),w}(),Xs}function $h(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return n||s?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(yi,this,e)):process.nextTick(yi,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(i){!t&&i?r._writableState?r._writableState.errorEmitted?process.nextTick($r,r):(r._writableState.errorEmitted=!0,process.nextTick(Lo,r,i)):process.nextTick(Lo,r,i):t?(process.nextTick($r,r),t(i)):process.nextTick($r,r)}),this)}function Lo(e,t){yi(e,t),$r(e)}function $r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function Gh(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function yi(e,t){e.emit("error",t)}function Zh(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var bc={destroy:$h,undestroy:Gh,errorOrDestroy:Zh},vt={};function Qh(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var yc={};function Ce(e,t,r){r||(r=Error);function n(i,o,a){return typeof t=="string"?t:t(i,o,a)}var s=function(i){Qh(o,i);function o(a,l,c){return i.call(this,n(a,l,c))||this}return o}(r);s.prototype.name=r.name,s.prototype.code=e,yc[e]=s}function Bo(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function Yh(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function Kh(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function Xh(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}Ce("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);Ce("ERR_INVALID_ARG_TYPE",function(e,t,r){var n;typeof t=="string"&&Yh(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var s;if(Kh(e," argument"))s="The ".concat(e," ").concat(n," ").concat(Bo(t,"type"));else{var i=Xh(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(i," ").concat(n," ").concat(Bo(t,"type"))}return s+=". Received type ".concat(typeof r),s},TypeError);Ce("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Ce("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});Ce("ERR_STREAM_PREMATURE_CLOSE","Premature close");Ce("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});Ce("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Ce("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Ce("ERR_STREAM_WRITE_AFTER_END","write after end");Ce("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ce("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);Ce("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");vt.codes=yc;var e0=vt.codes.ERR_INVALID_OPT_VALUE;function t0(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function r0(e,t,r,n){var s=t0(t,n,r);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var i=n?r:"highWaterMark";throw new e0(i,s)}return Math.floor(s)}return e.objectMode?16:16*1024}var wc={getHighWaterMark:r0},n0=s0;function s0(e,t){if(ei("noDeprecation"))return e;var r=!1;function n(){if(!r){if(ei("throwDeprecation"))throw new Error(t);ei("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}return n}function ei(e){try{if(!O.localStorage)return!1}catch{return!1}var t=O.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}var ti,jo;function vc(){if(jo)return ti;jo=1,ti=T;function e(_){var b=this;this.next=null,this.entry=null,this.finish=function(){We(b,_)}}var t;T.WritableState=x;var r={deprecate:n0},n=mc,s=ki.Buffer,i=(typeof O<"u"?O:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(_){return s.from(_)}function a(_){return s.isBuffer(_)||_ instanceof i}var l=bc,c=wc,d=c.getHighWaterMark,u=vt.codes,f=u.ERR_INVALID_ARG_TYPE,g=u.ERR_METHOD_NOT_IMPLEMENTED,w=u.ERR_MULTIPLE_CALLBACK,m=u.ERR_STREAM_CANNOT_PIPE,E=u.ERR_STREAM_DESTROYED,v=u.ERR_STREAM_NULL_VALUES,k=u.ERR_STREAM_WRITE_AFTER_END,y=u.ERR_UNKNOWN_ENCODING,C=l.errorOrDestroy;xe(T,n);function S(){}function x(_,b,I){t=t||Ut(),_=_||{},typeof I!="boolean"&&(I=b instanceof t),this.objectMode=!!_.objectMode,I&&(this.objectMode=this.objectMode||!!_.writableObjectMode),this.highWaterMark=d(this,_,"writableHighWaterMark",I),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var N=_.decodeStrings===!1;this.decodeStrings=!N,this.defaultEncoding=_.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(H){Me(b,H)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=_.emitClose!==!1,this.autoDestroy=!!_.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}x.prototype.getBuffer=function(){for(var _=this.bufferedRequest,b=[];_;)b.push(_),_=_.next;return b},function(){try{Object.defineProperty(x.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var j;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(j=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(_){return j.call(this,_)?!0:this!==T?!1:_&&_._writableState instanceof x}})):j=function(_){return _ instanceof this};function T(_){t=t||Ut();var b=this instanceof t;if(!b&&!j.call(T,this))return new T(_);this._writableState=new x(_,this,b),this.writable=!0,_&&(typeof _.write=="function"&&(this._write=_.write),typeof _.writev=="function"&&(this._writev=_.writev),typeof _.destroy=="function"&&(this._destroy=_.destroy),typeof _.final=="function"&&(this._final=_.final)),n.call(this)}T.prototype.pipe=function(){C(this,new m)};function M(_,b){var I=new k;C(_,I),process.nextTick(b,I)}function Q(_,b,I,N){var H;return I===null?H=new v:typeof I!="string"&&!b.objectMode&&(H=new f("chunk",["string","Buffer"],I)),H?(C(_,H),process.nextTick(N,H),!1):!0}T.prototype.write=function(_,b,I){var N=this._writableState,H=!1,h=!N.objectMode&&a(_);return h&&!s.isBuffer(_)&&(_=o(_)),typeof b=="function"&&(I=b,b=null),h?b="buffer":b||(b=N.defaultEncoding),typeof I!="function"&&(I=S),N.ending?M(this,I):(h||Q(this,N,_,I))&&(N.pendingcb++,H=$(this,N,h,_,b,I)),H},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var _=this._writableState;_.corked&&(_.corked--,!_.writing&&!_.corked&&!_.bufferProcessing&&_.bufferedRequest&&ye(this,_))},T.prototype.setDefaultEncoding=function(_){if(typeof _=="string"&&(_=_.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((_+"").toLowerCase())>-1))throw new y(_);return this._writableState.defaultEncoding=_,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function re(_,b,I){return!_.objectMode&&_.decodeStrings!==!1&&typeof b=="string"&&(b=s.from(b,I)),b}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function $(_,b,I,N,H,h){if(!I){var p=re(b,N,H);N!==p&&(I=!0,H="buffer",N=p)}var R=b.objectMode?1:N.length;b.length+=R;var A=b.length<b.highWaterMark;if(A||(b.needDrain=!0),b.writing||b.corked){var G=b.lastBufferedRequest;b.lastBufferedRequest={chunk:N,encoding:H,isBuf:I,callback:h,next:null},G?G.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest,b.bufferedRequestCount+=1}else Z(_,b,!1,R,N,H,h);return A}function Z(_,b,I,N,H,h,p){b.writelen=N,b.writecb=p,b.writing=!0,b.sync=!0,b.destroyed?b.onwrite(new E("write")):I?_._writev(H,b.onwrite):_._write(H,h,b.onwrite),b.sync=!1}function ie(_,b,I,N,H){--b.pendingcb,I?(process.nextTick(H,N),process.nextTick(pe,_,b),_._writableState.errorEmitted=!0,C(_,N)):(H(N),_._writableState.errorEmitted=!0,C(_,N),pe(_,b))}function le(_){_.writing=!1,_.writecb=null,_.length-=_.writelen,_.writelen=0}function Me(_,b){var I=_._writableState,N=I.sync,H=I.writecb;if(typeof H!="function")throw new w;if(le(I),b)ie(_,I,N,b,H);else{var h=He(I)||_.destroyed;!h&&!I.corked&&!I.bufferProcessing&&I.bufferedRequest&&ye(_,I),N?process.nextTick(be,_,I,h,H):be(_,I,h,H)}}function be(_,b,I,N){I||Fe(_,b),b.pendingcb--,N(),pe(_,b)}function Fe(_,b){b.length===0&&b.needDrain&&(b.needDrain=!1,_.emit("drain"))}function ye(_,b){b.bufferProcessing=!0;var I=b.bufferedRequest;if(_._writev&&I&&I.next){var N=b.bufferedRequestCount,H=new Array(N),h=b.corkedRequestsFree;h.entry=I;for(var p=0,R=!0;I;)H[p]=I,I.isBuf||(R=!1),I=I.next,p+=1;H.allBuffers=R,Z(_,b,!0,b.length,H,"",h.finish),b.pendingcb++,b.lastBufferedRequest=null,h.next?(b.corkedRequestsFree=h.next,h.next=null):b.corkedRequestsFree=new e(b),b.bufferedRequestCount=0}else{for(;I;){var A=I.chunk,G=I.encoding,F=I.callback,z=b.objectMode?1:A.length;if(Z(_,b,!1,z,A,G,F),I=I.next,b.bufferedRequestCount--,b.writing)break}I===null&&(b.lastBufferedRequest=null)}b.bufferedRequest=I,b.bufferProcessing=!1}T.prototype._write=function(_,b,I){I(new g("_write()"))},T.prototype._writev=null,T.prototype.end=function(_,b,I){var N=this._writableState;return typeof _=="function"?(I=_,_=null,b=null):typeof b=="function"&&(I=b,b=null),_!=null&&this.write(_,b),N.corked&&(N.corked=1,this.uncork()),N.ending||Ye(this,N,I),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function He(_){return _.ending&&_.length===0&&_.bufferedRequest===null&&!_.finished&&!_.writing}function Qe(_,b){_._final(function(I){b.pendingcb--,I&&C(_,I),b.prefinished=!0,_.emit("prefinish"),pe(_,b)})}function Ue(_,b){!b.prefinished&&!b.finalCalled&&(typeof _._final=="function"&&!b.destroyed?(b.pendingcb++,b.finalCalled=!0,process.nextTick(Qe,_,b)):(b.prefinished=!0,_.emit("prefinish")))}function pe(_,b){var I=He(b);if(I&&(Ue(_,b),b.pendingcb===0&&(b.finished=!0,_.emit("finish"),b.autoDestroy))){var N=_._readableState;(!N||N.autoDestroy&&N.endEmitted)&&_.destroy()}return I}function Ye(_,b,I){b.ending=!0,pe(_,b),I&&(b.finished?process.nextTick(I):_.once("finish",I)),b.ended=!0,_.writable=!1}function We(_,b,I){var N=_.entry;for(_.entry=null;N;){var H=N.callback;b.pendingcb--,H(I),N=N.next}b.corkedRequestsFree.next=_}return Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(_){this._writableState&&(this._writableState.destroyed=_)}}),T.prototype.destroy=l.destroy,T.prototype._undestroy=l.undestroy,T.prototype._destroy=function(_,b){b(_)},ti}var ri,Do;function Ut(){if(Do)return ri;Do=1;var e=Object.keys||function(c){var d=[];for(var u in c)d.push(u);return d};ri=o;var t=kc(),r=vc();xe(o,t);for(var n=e(r.prototype),s=0;s<n.length;s++){var i=n[s];o.prototype[i]||(o.prototype[i]=r.prototype[i])}function o(c){if(!(this instanceof o))return new o(c);t.call(this,c),r.call(this,c),this.allowHalfOpen=!0,c&&(c.readable===!1&&(this.readable=!1),c.writable===!1&&(this.writable=!1),c.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||process.nextTick(l,this)}function l(c){c.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(c){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=c,this._writableState.destroyed=c)}}),ri}var Fo=vt.codes.ERR_STREAM_PREMATURE_CLOSE;function i0(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];e.apply(this,n)}}}function o0(){}function a0(e){return e.setHeader&&typeof e.abort=="function"}function Ec(e,t,r){if(typeof t=="function")return Ec(e,null,t);t||(t={}),r=i0(r||o0);var n=t.readable||t.readable!==!1&&e.readable,s=t.writable||t.writable!==!1&&e.writable,i=function(){e.writable||a()},o=e._writableState&&e._writableState.finished,a=function(){s=!1,o=!0,n||r.call(e)},l=e._readableState&&e._readableState.endEmitted,c=function(){n=!1,l=!0,s||r.call(e)},d=function(g){r.call(e,g)},u=function(){var g;if(n&&!l)return(!e._readableState||!e._readableState.ended)&&(g=new Fo),r.call(e,g);if(s&&!o)return(!e._writableState||!e._writableState.ended)&&(g=new Fo),r.call(e,g)},f=function(){e.req.on("finish",a)};return a0(e)?(e.on("complete",a),e.on("abort",u),e.req?f():e.on("request",f)):s&&!e._writableState&&(e.on("end",i),e.on("close",i)),e.on("end",c),e.on("finish",a),t.error!==!1&&e.on("error",d),e.on("close",u),function(){e.removeListener("complete",a),e.removeListener("abort",u),e.removeListener("request",f),e.req&&e.req.removeListener("finish",a),e.removeListener("end",i),e.removeListener("close",i),e.removeListener("finish",a),e.removeListener("end",c),e.removeListener("error",d),e.removeListener("close",u)}}var Di=Ec,ni,Ho;function c0(){if(Ho)return ni;Ho=1;var e;function t(y,C,S){return C=r(C),C in y?Object.defineProperty(y,C,{value:S,enumerable:!0,configurable:!0,writable:!0}):y[C]=S,y}function r(y){var C=n(y,"string");return typeof C=="symbol"?C:String(C)}function n(y,C){if(typeof y!="object"||y===null)return y;var S=y[Symbol.toPrimitive];if(S!==void 0){var x=S.call(y,C||"default");if(typeof x!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(y)}var s=Di,i=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),d=Symbol("handlePromise"),u=Symbol("stream");function f(y,C){return{value:y,done:C}}function g(y){var C=y[i];if(C!==null){var S=y[u].read();S!==null&&(y[c]=null,y[i]=null,y[o]=null,C(f(S,!1)))}}function w(y){process.nextTick(g,y)}function m(y,C){return function(S,x){y.then(function(){if(C[l]){S(f(void 0,!0));return}C[d](S,x)},x)}}var E=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((e={get stream(){return this[u]},next:function(){var y=this,C=this[a];if(C!==null)return Promise.reject(C);if(this[l])return Promise.resolve(f(void 0,!0));if(this[u].destroyed)return new Promise(function(T,M){process.nextTick(function(){y[a]?M(y[a]):T(f(void 0,!0))})});var S=this[c],x;if(S)x=new Promise(m(S,this));else{var j=this[u].read();if(j!==null)return Promise.resolve(f(j,!1));x=new Promise(this[d])}return this[c]=x,x}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var y=this;return new Promise(function(C,S){y[u].destroy(null,function(x){if(x){S(x);return}C(f(void 0,!0))})})}),e),E),k=function(y){var C,S=Object.create(v,(C={},t(C,u,{value:y,writable:!0}),t(C,i,{value:null,writable:!0}),t(C,o,{value:null,writable:!0}),t(C,a,{value:null,writable:!0}),t(C,l,{value:y._readableState.endEmitted,writable:!0}),t(C,d,{value:function(x,j){var T=S[u].read();T?(S[c]=null,S[i]=null,S[o]=null,x(f(T,!1))):(S[i]=x,S[o]=j)},writable:!0}),C));return S[c]=null,s(y,function(x){if(x&&x.code!=="ERR_STREAM_PREMATURE_CLOSE"){var j=S[o];j!==null&&(S[c]=null,S[i]=null,S[o]=null,j(x)),S[a]=x;return}var T=S[i];T!==null&&(S[c]=null,S[i]=null,S[o]=null,T(f(void 0,!0))),S[l]=!0}),y.on("readable",w.bind(null,S)),S};return ni=k,ni}var Uo,Wo;function l0(){return Wo||(Wo=1,Uo=function(){throw new Error("Readable.from is not available in the browser")}),Uo}var si,Vo;function kc(){if(Vo)return si;Vo=1,si=M;var e;M.ReadableState=T,tn.EventEmitter;var t=function(h,p){return h.listeners(p).length},r=mc,n=ki.Buffer,s=(typeof O<"u"?O:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function i(h){return n.from(h)}function o(h){return n.isBuffer(h)||h instanceof s}var a=wa,l;a&&a.debuglog?l=a.debuglog("stream"):l=function(){};var c=Jh(),d=bc,u=wc,f=u.getHighWaterMark,g=vt.codes,w=g.ERR_INVALID_ARG_TYPE,m=g.ERR_STREAM_PUSH_AFTER_EOF,E=g.ERR_METHOD_NOT_IMPLEMENTED,v=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,k,y,C;xe(M,r);var S=d.errorOrDestroy,x=["error","close","destroy","pause","resume"];function j(h,p,R){if(typeof h.prependListener=="function")return h.prependListener(p,R);!h._events||!h._events[p]?h.on(p,R):Array.isArray(h._events[p])?h._events[p].unshift(R):h._events[p]=[R,h._events[p]]}function T(h,p,R){e=e||Ut(),h=h||{},typeof R!="boolean"&&(R=p instanceof e),this.objectMode=!!h.objectMode,R&&(this.objectMode=this.objectMode||!!h.readableObjectMode),this.highWaterMark=f(this,h,"readableHighWaterMark",R),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=h.emitClose!==!1,this.autoDestroy=!!h.autoDestroy,this.destroyed=!1,this.defaultEncoding=h.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,h.encoding&&(k||(k=Xi.StringDecoder),this.decoder=new k(h.encoding),this.encoding=h.encoding)}function M(h){if(e=e||Ut(),!(this instanceof M))return new M(h);var p=this instanceof e;this._readableState=new T(h,this,p),this.readable=!0,h&&(typeof h.read=="function"&&(this._read=h.read),typeof h.destroy=="function"&&(this._destroy=h.destroy)),r.call(this)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(h){this._readableState&&(this._readableState.destroyed=h)}}),M.prototype.destroy=d.destroy,M.prototype._undestroy=d.undestroy,M.prototype._destroy=function(h,p){p(h)},M.prototype.push=function(h,p){var R=this._readableState,A;return R.objectMode?A=!0:typeof h=="string"&&(p=p||R.defaultEncoding,p!==R.encoding&&(h=n.from(h,p),p=""),A=!0),Q(this,h,p,!1,A)},M.prototype.unshift=function(h){return Q(this,h,null,!0,!1)};function Q(h,p,R,A,G){l("readableAddChunk",p);var F=h._readableState;if(p===null)F.reading=!1,Me(h,F);else{var z;if(G||(z=$(F,p)),z)S(h,z);else if(F.objectMode||p&&p.length>0)if(typeof p!="string"&&!F.objectMode&&Object.getPrototypeOf(p)!==n.prototype&&(p=i(p)),A)F.endEmitted?S(h,new v):re(h,F,p,!0);else if(F.ended)S(h,new m);else{if(F.destroyed)return!1;F.reading=!1,F.decoder&&!R?(p=F.decoder.write(p),F.objectMode||p.length!==0?re(h,F,p,!1):ye(h,F)):re(h,F,p,!1)}else A||(F.reading=!1,ye(h,F))}return!F.ended&&(F.length<F.highWaterMark||F.length===0)}function re(h,p,R,A){p.flowing&&p.length===0&&!p.sync?(p.awaitDrain=0,h.emit("data",R)):(p.length+=p.objectMode?1:R.length,A?p.buffer.unshift(R):p.buffer.push(R),p.needReadable&&be(h)),ye(h,p)}function $(h,p){var R;return!o(p)&&typeof p!="string"&&p!==void 0&&!h.objectMode&&(R=new w("chunk",["string","Buffer","Uint8Array"],p)),R}M.prototype.isPaused=function(){return this._readableState.flowing===!1},M.prototype.setEncoding=function(h){k||(k=Xi.StringDecoder);var p=new k(h);this._readableState.decoder=p,this._readableState.encoding=this._readableState.decoder.encoding;for(var R=this._readableState.buffer.head,A="";R!==null;)A+=p.write(R.data),R=R.next;return this._readableState.buffer.clear(),A!==""&&this._readableState.buffer.push(A),this._readableState.length=A.length,this};var Z=1073741824;function ie(h){return h>=Z?h=Z:(h--,h|=h>>>1,h|=h>>>2,h|=h>>>4,h|=h>>>8,h|=h>>>16,h++),h}function le(h,p){return h<=0||p.length===0&&p.ended?0:p.objectMode?1:h!==h?p.flowing&&p.length?p.buffer.head.data.length:p.length:(h>p.highWaterMark&&(p.highWaterMark=ie(h)),h<=p.length?h:p.ended?p.length:(p.needReadable=!0,0))}M.prototype.read=function(h){l("read",h),h=parseInt(h,10);var p=this._readableState,R=h;if(h!==0&&(p.emittedReadable=!1),h===0&&p.needReadable&&((p.highWaterMark!==0?p.length>=p.highWaterMark:p.length>0)||p.ended))return l("read: emitReadable",p.length,p.ended),p.length===0&&p.ended?I(this):be(this),null;if(h=le(h,p),h===0&&p.ended)return p.length===0&&I(this),null;var A=p.needReadable;l("need readable",A),(p.length===0||p.length-h<p.highWaterMark)&&(A=!0,l("length less than watermark",A)),p.ended||p.reading?(A=!1,l("reading or ended",A)):A&&(l("do read"),p.reading=!0,p.sync=!0,p.length===0&&(p.needReadable=!0),this._read(p.highWaterMark),p.sync=!1,p.reading||(h=le(R,p)));var G;return h>0?G=b(h,p):G=null,G===null?(p.needReadable=p.length<=p.highWaterMark,h=0):(p.length-=h,p.awaitDrain=0),p.length===0&&(p.ended||(p.needReadable=!0),R!==h&&p.ended&&I(this)),G!==null&&this.emit("data",G),G};function Me(h,p){if(l("onEofChunk"),!p.ended){if(p.decoder){var R=p.decoder.end();R&&R.length&&(p.buffer.push(R),p.length+=p.objectMode?1:R.length)}p.ended=!0,p.sync?be(h):(p.needReadable=!1,p.emittedReadable||(p.emittedReadable=!0,Fe(h)))}}function be(h){var p=h._readableState;l("emitReadable",p.needReadable,p.emittedReadable),p.needReadable=!1,p.emittedReadable||(l("emitReadable",p.flowing),p.emittedReadable=!0,process.nextTick(Fe,h))}function Fe(h){var p=h._readableState;l("emitReadable_",p.destroyed,p.length,p.ended),!p.destroyed&&(p.length||p.ended)&&(h.emit("readable"),p.emittedReadable=!1),p.needReadable=!p.flowing&&!p.ended&&p.length<=p.highWaterMark,_(h)}function ye(h,p){p.readingMore||(p.readingMore=!0,process.nextTick(He,h,p))}function He(h,p){for(;!p.reading&&!p.ended&&(p.length<p.highWaterMark||p.flowing&&p.length===0);){var R=p.length;if(l("maybeReadMore read 0"),h.read(0),R===p.length)break}p.readingMore=!1}M.prototype._read=function(h){S(this,new E("_read()"))},M.prototype.pipe=function(h,p){var R=this,A=this._readableState;switch(A.pipesCount){case 0:A.pipes=h;break;case 1:A.pipes=[A.pipes,h];break;default:A.pipes.push(h);break}A.pipesCount+=1,l("pipe count=%d opts=%j",A.pipesCount,p);var G=(!p||p.end!==!1)&&h!==process.stdout&&h!==process.stderr,F=G?it:Ke;A.endEmitted?process.nextTick(F):R.once("end",F),h.on("unpipe",z);function z(Ve,Ae){l("onunpipe"),Ve===R&&Ae&&Ae.hasUnpiped===!1&&(Ae.hasUnpiped=!0,Lr())}function it(){l("onend"),h.end()}var Et=Qe(R);h.on("drain",Et);var Xt=!1;function Lr(){l("cleanup"),h.removeListener("close",St),h.removeListener("finish",Ct),h.removeListener("drain",Et),h.removeListener("error",kt),h.removeListener("unpipe",z),R.removeListener("end",it),R.removeListener("end",Ke),R.removeListener("data",er),Xt=!0,A.awaitDrain&&(!h._writableState||h._writableState.needDrain)&&Et()}R.on("data",er);function er(Ve){l("ondata");var Ae=h.write(Ve);l("dest.write",Ae),Ae===!1&&((A.pipesCount===1&&A.pipes===h||A.pipesCount>1&&H(A.pipes,h)!==-1)&&!Xt&&(l("false write response, pause",A.awaitDrain),A.awaitDrain++),R.pause())}function kt(Ve){l("onerror",Ve),Ke(),h.removeListener("error",kt),t(h,"error")===0&&S(h,Ve)}j(h,"error",kt);function St(){h.removeListener("finish",Ct),Ke()}h.once("close",St);function Ct(){l("onfinish"),h.removeListener("close",St),Ke()}h.once("finish",Ct);function Ke(){l("unpipe"),R.unpipe(h)}return h.emit("pipe",R),A.flowing||(l("pipe resume"),R.resume()),h};function Qe(h){return function(){var p=h._readableState;l("pipeOnDrain",p.awaitDrain),p.awaitDrain&&p.awaitDrain--,p.awaitDrain===0&&t(h,"data")&&(p.flowing=!0,_(h))}}M.prototype.unpipe=function(h){var p=this._readableState,R={hasUnpiped:!1};if(p.pipesCount===0)return this;if(p.pipesCount===1)return h&&h!==p.pipes?this:(h||(h=p.pipes),p.pipes=null,p.pipesCount=0,p.flowing=!1,h&&h.emit("unpipe",this,R),this);if(!h){var A=p.pipes,G=p.pipesCount;p.pipes=null,p.pipesCount=0,p.flowing=!1;for(var F=0;F<G;F++)A[F].emit("unpipe",this,{hasUnpiped:!1});return this}var z=H(p.pipes,h);return z===-1?this:(p.pipes.splice(z,1),p.pipesCount-=1,p.pipesCount===1&&(p.pipes=p.pipes[0]),h.emit("unpipe",this,R),this)},M.prototype.on=function(h,p){var R=r.prototype.on.call(this,h,p),A=this._readableState;return h==="data"?(A.readableListening=this.listenerCount("readable")>0,A.flowing!==!1&&this.resume()):h==="readable"&&!A.endEmitted&&!A.readableListening&&(A.readableListening=A.needReadable=!0,A.flowing=!1,A.emittedReadable=!1,l("on readable",A.length,A.reading),A.length?be(this):A.reading||process.nextTick(pe,this)),R},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(h,p){var R=r.prototype.removeListener.call(this,h,p);return h==="readable"&&process.nextTick(Ue,this),R},M.prototype.removeAllListeners=function(h){var p=r.prototype.removeAllListeners.apply(this,arguments);return(h==="readable"||h===void 0)&&process.nextTick(Ue,this),p};function Ue(h){var p=h._readableState;p.readableListening=h.listenerCount("readable")>0,p.resumeScheduled&&!p.paused?p.flowing=!0:h.listenerCount("data")>0&&h.resume()}function pe(h){l("readable nexttick read 0"),h.read(0)}M.prototype.resume=function(){var h=this._readableState;return h.flowing||(l("resume"),h.flowing=!h.readableListening,Ye(this,h)),h.paused=!1,this};function Ye(h,p){p.resumeScheduled||(p.resumeScheduled=!0,process.nextTick(We,h,p))}function We(h,p){l("resume",p.reading),p.reading||h.read(0),p.resumeScheduled=!1,h.emit("resume"),_(h),p.flowing&&!p.reading&&h.read(0)}M.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function _(h){var p=h._readableState;for(l("flow",p.flowing);p.flowing&&h.read()!==null;);}M.prototype.wrap=function(h){var p=this,R=this._readableState,A=!1;h.on("end",function(){if(l("wrapped end"),R.decoder&&!R.ended){var z=R.decoder.end();z&&z.length&&p.push(z)}p.push(null)}),h.on("data",function(z){if(l("wrapped data"),R.decoder&&(z=R.decoder.write(z)),!(R.objectMode&&z==null)&&!(!R.objectMode&&(!z||!z.length))){var it=p.push(z);it||(A=!0,h.pause())}});for(var G in h)this[G]===void 0&&typeof h[G]=="function"&&(this[G]=function(z){return function(){return h[z].apply(h,arguments)}}(G));for(var F=0;F<x.length;F++)h.on(x[F],this.emit.bind(this,x[F]));return this._read=function(z){l("wrapped _read",z),A&&(A=!1,h.resume())},this},typeof Symbol=="function"&&(M.prototype[Symbol.asyncIterator]=function(){return y===void 0&&(y=c0()),y(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(h){this._readableState&&(this._readableState.flowing=h)}}),M._fromList=b,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function b(h,p){if(p.length===0)return null;var R;return p.objectMode?R=p.buffer.shift():!h||h>=p.length?(p.decoder?R=p.buffer.join(""):p.buffer.length===1?R=p.buffer.first():R=p.buffer.concat(p.length),p.buffer.clear()):R=p.buffer.consume(h,p.decoder),R}function I(h){var p=h._readableState;l("endReadable",p.endEmitted),p.endEmitted||(p.ended=!0,process.nextTick(N,p,h))}function N(h,p){if(l("endReadableNT",h.endEmitted,h.length),!h.endEmitted&&h.length===0&&(h.endEmitted=!0,p.readable=!1,p.emit("end"),h.autoDestroy)){var R=p._writableState;(!R||R.autoDestroy&&R.finished)&&p.destroy()}}typeof Symbol=="function"&&(M.from=function(h,p){return C===void 0&&(C=l0()),C(M,h,p)});function H(h,p){for(var R=0,A=h.length;R<A;R++)if(h[R]===p)return R;return-1}return si}var Sc=Ze,Pn=vt.codes,u0=Pn.ERR_METHOD_NOT_IMPLEMENTED,d0=Pn.ERR_MULTIPLE_CALLBACK,h0=Pn.ERR_TRANSFORM_ALREADY_TRANSFORMING,f0=Pn.ERR_TRANSFORM_WITH_LENGTH_0,Tn=Ut();xe(Ze,Tn);function p0(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new d0);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function Ze(e){if(!(this instanceof Ze))return new Ze(e);Tn.call(this,e),this._transformState={afterTransform:p0.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",g0)}function g0(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){qo(e,t,r)}):qo(this,null,null)}Ze.prototype.push=function(e,t){return this._transformState.needTransform=!1,Tn.prototype.push.call(this,e,t)};Ze.prototype._transform=function(e,t,r){r(new u0("_transform()"))};Ze.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var s=this._readableState;(n.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}};Ze.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Ze.prototype._destroy=function(e,t){Tn.prototype._destroy.call(this,e,function(r){t(r)})};function qo(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new f0;if(e._transformState.transforming)throw new h0;return e.push(null)}var _0=lr,Cc=Sc;xe(lr,Cc);function lr(e){if(!(this instanceof lr))return new lr(e);Cc.call(this,e)}lr.prototype._transform=function(e,t,r){r(null,e)};var ii;function m0(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var Rc=vt.codes,b0=Rc.ERR_MISSING_ARGS,y0=Rc.ERR_STREAM_DESTROYED;function w0(e){if(e)throw e}function v0(e){return e.setHeader&&typeof e.abort=="function"}function E0(e,t,r,n){n=m0(n);var s=!1;e.on("close",function(){s=!0}),ii===void 0&&(ii=Di),ii(e,{readable:t,writable:r},function(o){if(o)return n(o);s=!0,n()});var i=!1;return function(o){if(!s&&!i){if(i=!0,v0(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(o||new y0("pipe"))}}}function zo(e){e()}function k0(e,t){return e.pipe(t)}function S0(e){return!e.length||typeof e[e.length-1]!="function"?w0:e.pop()}function C0(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=S0(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new b0("streams");var s,i=t.map(function(o,a){var l=a<t.length-1,c=a>0;return E0(o,l,c,function(d){s||(s=d),d&&i.forEach(zo),!l&&(i.forEach(zo),n(s))})});return t.reduce(k0)}var R0=C0;(function(e,t){t=e.exports=kc(),t.Stream=t,t.Readable=t,t.Writable=vc(),t.Duplex=Ut(),t.Transform=Sc,t.PassThrough=_0,t.finished=Di,t.pipeline=R0})(bi,bi.exports);var Ic=bi.exports;const{Transform:I0}=Ic;var x0=e=>class xc extends I0{constructor(r,n,s,i,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=s,this._hashBitLength=i,this._options=o,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,s){let i=null;try{this.update(r,n)}catch(o){i=o}s(i)}_flush(r){let n=null;try{this.push(this.digest())}catch(s){n=s}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new xc(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const{Transform:M0}=Ic;var A0=e=>class Mc extends M0{constructor(r,n,s,i){super(i),this._rate=r,this._capacity=n,this._delimitedSuffix=s,this._options=i,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,s){let i=null;try{this.update(r,n)}catch(o){i=o}s(i)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let s=this._state.squeeze(r);return n!==void 0&&(s=s.toString(n)),s}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new Mc(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const P0=x0,T0=A0;var O0=function(e){const t=P0(e),r=T0(e);return function(n,s){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new t(1152,448,null,224,s);case"keccak256":return new t(1088,512,null,256,s);case"keccak384":return new t(832,768,null,384,s);case"keccak512":return new t(576,1024,null,512,s);case"sha3-224":return new t(1152,448,6,224,s);case"sha3-256":return new t(1088,512,6,256,s);case"sha3-384":return new t(832,768,6,384,s);case"sha3-512":return new t(576,1024,6,512,s);case"shake128":return new r(1344,256,31,s);case"shake256":return new r(1088,512,31,s);default:throw new Error("Invald algorithm: "+n)}}},N0=O0(zh);const L0=N0,B0=en;function Ac(e){return Buffer.allocUnsafe(e).fill(0)}function Pc(e,t,r){const n=Ac(t);return e=On(e),r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)}function j0(e,t){return Pc(e,t,!0)}function On(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")Tc(e)?e=Buffer.from(H0(Oc(e)),"hex"):e=Buffer.from(e);else if(typeof e=="number")e=intToBuffer(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(B0.isBN(e))e=e.toArrayLike(Buffer);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e}function D0(e){return e=On(e),"0x"+e.toString("hex")}function F0(e,t){return e=On(e),t||(t=256),L0("keccak"+t).update(e).digest()}function H0(e){return e.length%2?"0"+e:e}function Tc(e){return typeof e=="string"&&e.match(/^0x[0-9A-Fa-f]*$/)}function Oc(e){return typeof e=="string"&&e.startsWith("0x")?e.slice(2):e}var Nc={zeros:Ac,setLength:Pc,setLengthRight:j0,isHexString:Tc,stripHexPrefix:Oc,toBuffer:On,bufferToHex:D0,keccak:F0};const gt=Nc,ft=en;function Lc(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}function Nt(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function Jo(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function Bc(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}function dt(e){var t=typeof e;if(t==="string")return gt.isHexString(e)?new ft(gt.stripHexPrefix(e),16):new ft(e,10);if(t==="number")return new ft(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function Oe(e,t){var r,n,s,i;if(e==="address")return Oe("uint160",dt(t));if(e==="bool")return Oe("uint8",t?1:0);if(e==="string")return Oe("bytes",new Buffer(t,"utf8"));if(W0(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=Bc(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);s=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(i in t)s.push(Oe(e,t[i]));if(r==="dynamic"){var o=Oe("uint256",t.length);s.unshift(o)}return Buffer.concat(s)}else{if(e==="bytes")return t=new Buffer(t),s=Buffer.concat([Oe("uint256",t.length),t]),t.length%32!==0&&(s=Buffer.concat([s,gt.zeros(32-t.length%32)])),s;if(e.startsWith("bytes")){if(r=Nt(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return gt.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=Nt(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=dt(t),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(r=Nt(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=dt(t),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=Jo(e),n=dt(t),n<0)throw new Error("Supplied ufixed is negative");return Oe("uint256",n.mul(new ft(2).pow(new ft(r[1]))))}else if(e.startsWith("fixed"))return r=Jo(e),Oe("int256",dt(t).mul(new ft(2).pow(new ft(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}function U0(e){return e==="string"||e==="bytes"||Bc(e)==="dynamic"}function W0(e){return e.lastIndexOf("]")===e.length-1}function V0(e,t){var r=[],n=[],s=32*e.length;for(var i in e){var o=Lc(e[i]),a=t[i],l=Oe(o,a);U0(o)?(r.push(Oe("uint256",s)),n.push(l),s+=l.length):r.push(l)}return Buffer.concat(r.concat(n))}function jc(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r,n,s=[],i=0;i<e.length;i++){var o=Lc(e[i]),a=t[i];if(o==="bytes")s.push(a);else if(o==="string")s.push(new Buffer(a,"utf8"));else if(o==="bool")s.push(new Buffer(a?"01":"00","hex"));else if(o==="address")s.push(gt.setLength(a,20));else if(o.startsWith("bytes")){if(r=Nt(o),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);s.push(gt.setLengthRight(a,r))}else if(o.startsWith("uint")){if(r=Nt(o),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=dt(a),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());s.push(n.toArrayLike(Buffer,"be",r/8))}else if(o.startsWith("int")){if(r=Nt(o),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=dt(a),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());s.push(n.toTwos(r).toArrayLike(Buffer,"be",r/8))}else throw new Error("Unsupported or invalid type: "+o)}return Buffer.concat(s)}function q0(e,t){return gt.keccak(jc(e,t))}var z0={rawEncode:V0,solidityPack:jc,soliditySHA3:q0};const Ie=Nc,or=z0,Dc={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},oi={encodeData(e,t,r,n=!0){const s=["bytes32"],i=[this.hashType(e,r)];if(n){const o=(a,l,c)=>{if(r[l]!==void 0)return["bytes32",c==null?"0x0000000000000000000000000000000000000000000000000000000000000000":Ie.keccak(this.encodeData(l,c,r,n))];if(c===void 0)throw new Error(`missing value for field ${a} of type ${l}`);if(l==="bytes")return["bytes32",Ie.keccak(c)];if(l==="string")return typeof c=="string"&&(c=Buffer.from(c,"utf8")),["bytes32",Ie.keccak(c)];if(l.lastIndexOf("]")===l.length-1){const d=l.slice(0,l.lastIndexOf("[")),u=c.map(f=>o(a,d,f));return["bytes32",Ie.keccak(or.rawEncode(u.map(([f])=>f),u.map(([,f])=>f)))]}return[l,c]};for(const a of r[e]){const[l,c]=o(a.name,a.type,t[a.name]);s.push(l),i.push(c)}}else for(const o of r[e]){let a=t[o.name];if(a!==void 0)if(o.type==="bytes")s.push("bytes32"),a=Ie.keccak(a),i.push(a);else if(o.type==="string")s.push("bytes32"),typeof a=="string"&&(a=Buffer.from(a,"utf8")),a=Ie.keccak(a),i.push(a);else if(r[o.type]!==void 0)s.push("bytes32"),a=Ie.keccak(this.encodeData(o.type,a,r,n)),i.push(a);else{if(o.type.lastIndexOf("]")===o.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");s.push(o.type),i.push(a)}}return or.rawEncode(s,i)},encodeType(e,t){let r="",n=this.findTypeDependencies(e,t).filter(s=>s!==e);n=[e].concat(n.sort());for(const s of n){if(!t[s])throw new Error("No type definition specified: "+s);r+=s+"("+t[s].map(({name:i,type:o})=>o+" "+i).join(",")+")"}return r},findTypeDependencies(e,t,r=[]){if(e=e.match(/^\w*/)[0],r.includes(e)||t[e]===void 0)return r;r.push(e);for(const n of t[e])for(const s of this.findTypeDependencies(n.type,t,r))!r.includes(s)&&r.push(s);return r},hashStruct(e,t,r,n=!0){return Ie.keccak(this.encodeData(e,t,r,n))},hashType(e,t){return Ie.keccak(this.encodeType(e,t))},sanitizeData(e){const t={};for(const r in Dc.properties)e[r]&&(t[r]=e[r]);return t.types&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t},hash(e,t=!0){const r=this.sanitizeData(e),n=[Buffer.from("1901","hex")];return n.push(this.hashStruct("EIP712Domain",r.domain,r.types,t)),r.primaryType!=="EIP712Domain"&&n.push(this.hashStruct(r.primaryType,r.message,r.types,t)),Ie.keccak(Buffer.concat(n))}};var J0={TYPED_MESSAGE_SCHEMA:Dc,TypedDataUtils:oi,hashForSignTypedDataLegacy:function(e){return $0(e.data)},hashForSignTypedData_v3:function(e){return oi.hash(e.data,!1)},hashForSignTypedData_v4:function(e){return oi.hash(e.data)}};function $0(e){const t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!e.length)throw t;const r=e.map(function(i){return i.type==="bytes"?Ie.toBuffer(i.value):i.value}),n=e.map(function(i){return i.type}),s=e.map(function(i){if(!i.name)throw t;return i.type+" "+i.name});return or.soliditySHA3(["bytes32","bytes32"],[or.soliditySHA3(new Array(e.length).fill("string"),s),or.soliditySHA3(n,r)])}var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.filterFromParam=Wt.FilterPolyfill=void 0;const Pt=te,de=P,G0=5*60*1e3,ht={jsonrpc:"2.0",id:0};class Z0{constructor(t){this.logFilters=new Map,this.blockFilters=new Set,this.pendingTransactionFilters=new Set,this.cursors=new Map,this.timeouts=new Map,this.nextFilterId=(0,Pt.IntNumber)(1),this.REQUEST_THROTTLE_INTERVAL=1e3,this.lastFetchTimestamp=new Date(0),this.resolvers=[],this.provider=t}async newFilter(t){const r=Fc(t),n=this.makeFilterId(),s=await this.setInitialCursorPosition(n,r.fromBlock);return console.info(`Installing new log filter(${n}):`,r,"initial cursor position:",s),this.logFilters.set(n,r),this.setFilterTimeout(n),(0,de.hexStringFromIntNumber)(n)}async newBlockFilter(){const t=this.makeFilterId(),r=await this.setInitialCursorPosition(t,"latest");return console.info(`Installing new block filter (${t}) with initial cursor position:`,r),this.blockFilters.add(t),this.setFilterTimeout(t),(0,de.hexStringFromIntNumber)(t)}async newPendingTransactionFilter(){const t=this.makeFilterId(),r=await this.setInitialCursorPosition(t,"latest");return console.info(`Installing new block filter (${t}) with initial cursor position:`,r),this.pendingTransactionFilters.add(t),this.setFilterTimeout(t),(0,de.hexStringFromIntNumber)(t)}uninstallFilter(t){const r=(0,de.intNumberFromHexString)(t);return console.info(`Uninstalling filter (${r})`),this.deleteFilter(r),!0}getFilterChanges(t){const r=(0,de.intNumberFromHexString)(t);return this.timeouts.has(r)&&this.setFilterTimeout(r),this.logFilters.has(r)?this.getLogFilterChanges(r):this.blockFilters.has(r)?this.getBlockFilterChanges(r):this.pendingTransactionFilters.has(r)?this.getPendingTransactionFilterChanges(r):Promise.resolve(Ur())}async getFilterLogs(t){const r=(0,de.intNumberFromHexString)(t),n=this.logFilters.get(r);return n?this.sendAsyncPromise(Object.assign(Object.assign({},ht),{method:"eth_getLogs",params:[$o(n)]})):Ur()}makeFilterId(){return(0,Pt.IntNumber)(++this.nextFilterId)}sendAsyncPromise(t){return new Promise((r,n)=>{this.provider.sendAsync(t,(s,i)=>{if(s)return n(s);if(Array.isArray(i)||i==null)return n(new Error(`unexpected response received: ${JSON.stringify(i)}`));r(i)})})}deleteFilter(t){console.info(`Deleting filter (${t})`),this.logFilters.delete(t),this.blockFilters.delete(t),this.pendingTransactionFilters.delete(t),this.cursors.delete(t),this.timeouts.delete(t)}async getLogFilterChanges(t){const r=this.logFilters.get(t),n=this.cursors.get(t);if(!n||!r)return Ur();const s=await this.getCurrentBlockHeight(),i=r.toBlock==="latest"?s:r.toBlock;if(n>s||n>Number(r.toBlock))return ai();console.info(`Fetching logs from ${n} to ${i} for filter ${t}`);const o=await this.sendAsyncPromise(Object.assign(Object.assign({},ht),{method:"eth_getLogs",params:[$o(Object.assign(Object.assign({},r),{fromBlock:n,toBlock:i}))]}));if(Array.isArray(o.result)){const a=o.result.map(c=>(0,de.intNumberFromHexString)(c.blockNumber||"0x0")),l=Math.max(...a);if(l&&l>n){const c=(0,Pt.IntNumber)(l+1);console.info(`Moving cursor position for filter (${t}) from ${n} to ${c}`),this.cursors.set(t,c)}}return o}async getBlockFilterChanges(t){const r=this.cursors.get(t);if(!r)return Ur();const n=await this.getCurrentBlockHeight();if(r>n)return ai();console.info(`Fetching blocks from ${r} to ${n} for filter (${t})`);const s=(await Promise.all((0,de.range)(r,n+1).map(o=>this.getBlockHashByNumber((0,Pt.IntNumber)(o))))).filter(o=>!!o),i=(0,Pt.IntNumber)(r+s.length);return console.info(`Moving cursor position for filter (${t}) from ${r} to ${i}`),this.cursors.set(t,i),Object.assign(Object.assign({},ht),{result:s})}async getPendingTransactionFilterChanges(t){return Promise.resolve(ai())}async setInitialCursorPosition(t,r){const n=await this.getCurrentBlockHeight(),s=typeof r=="number"&&r>n?r:n;return this.cursors.set(t,s),s}setFilterTimeout(t){const r=this.timeouts.get(t);r&&window.clearTimeout(r);const n=window.setTimeout(()=>{console.info(`Filter (${t}) timed out`),this.deleteFilter(t)},G0);this.timeouts.set(t,n)}async getCurrentBlockHeight(){const t=new Date;if(t.getTime()-this.lastFetchTimestamp.getTime()>this.REQUEST_THROTTLE_INTERVAL){this.lastFetchTimestamp=t;const r=await this._getCurrentBlockHeight();this.currentBlockHeight=r,this.resolvers.forEach(n=>n(r)),this.resolvers=[]}return this.currentBlockHeight?this.currentBlockHeight:new Promise(r=>this.resolvers.push(r))}async _getCurrentBlockHeight(){const{result:t}=await this.sendAsyncPromise(Object.assign(Object.assign({},ht),{method:"eth_blockNumber",params:[]}));return(0,de.intNumberFromHexString)((0,de.ensureHexString)(t))}async getBlockHashByNumber(t){const r=await this.sendAsyncPromise(Object.assign(Object.assign({},ht),{method:"eth_getBlockByNumber",params:[(0,de.hexStringFromIntNumber)(t),!1]}));return r.result&&typeof r.result.hash=="string"?(0,de.ensureHexString)(r.result.hash):null}}Wt.FilterPolyfill=Z0;function Fc(e){return{fromBlock:Go(e.fromBlock),toBlock:Go(e.toBlock),addresses:e.address===void 0?null:Array.isArray(e.address)?e.address:[e.address],topics:e.topics||[]}}Wt.filterFromParam=Fc;function $o(e){const t={fromBlock:Zo(e.fromBlock),toBlock:Zo(e.toBlock),topics:e.topics};return e.addresses!==null&&(t.address=e.addresses),t}function Go(e){if(e===void 0||e==="latest"||e==="pending")return"latest";if(e==="earliest")return(0,Pt.IntNumber)(0);if((0,de.isHexString)(e))return(0,de.intNumberFromHexString)(e);throw new Error(`Invalid block option: ${String(e)}`)}function Zo(e){return e==="latest"?e:(0,de.hexStringFromIntNumber)(e)}function Ur(){return Object.assign(Object.assign({},ht),{error:{code:-32e3,message:"filter not found"}})}function ai(){return Object.assign(Object.assign({},ht),{result:[]})}var Nn={},Hc={},Ln={};const Qo=(e,t)=>function(){const r=t.promiseModule,n=new Array(arguments.length);for(let s=0;s<arguments.length;s++)n[s]=arguments[s];return new r((s,i)=>{t.errorFirst?n.push(function(o,a){if(t.multiArgs){const l=new Array(arguments.length-1);for(let c=1;c<arguments.length;c++)l[c-1]=arguments[c];o?(l.unshift(o),i(l)):s(l)}else o?i(o):s(a)}):n.push(function(o){if(t.multiArgs){const a=new Array(arguments.length-1);for(let l=0;l<arguments.length;l++)a[l]=arguments[l];s(a)}else s(o)}),e.apply(this,n)})};var Q0=(e,t)=>{t=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},t);const r=s=>{const i=o=>typeof o=="string"?s===o:o.test(s);return t.include?t.include.some(i):!t.exclude.some(i)};let n;typeof e=="function"?n=function(){return t.excludeMain?e.apply(this,arguments):Qo(e,t).apply(this,arguments)}:n=Object.create(Object.getPrototypeOf(e));for(const s in e){const i=e[s];n[s]=typeof i=="function"&&r(s)?Qo(i,t):i}return n},Ir={},xr={};Object.defineProperty(xr,"__esModule",{value:!0});const Y0=tn;function Yo(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout(()=>{throw n})}}function K0(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}let X0=class extends Y0.EventEmitter{emit(e,...t){let r=e==="error";const n=this._events;if(n!==void 0)r=r&&n.error===void 0;else if(!r)return!1;if(r){let i;if(t.length>0&&([i]=t),i instanceof Error)throw i;const o=new Error(`Unhandled error.${i?` (${i.message})`:""}`);throw o.context=i,o}const s=n[e];if(s===void 0)return!1;if(typeof s=="function")Yo(s,this,t);else{const i=s.length,o=K0(s);for(let a=0;a<i;a+=1)Yo(o[a],this,t)}return!0}};xr.default=X0;var ef=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.BaseBlockTracker=void 0;const tf=ef(xr),rf=1e3,nf=(e,t)=>e+t,Ko=["sync","latest"];class sf extends tf.default{constructor(t){super(),this._blockResetDuration=t.blockResetDuration||20*rf,this._usePastBlocks=t.usePastBlocks||!1,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}async destroy(){this._cancelBlockResetTimeout(),await this._maybeEnd(),super.removeAllListeners()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){return this._currentBlock?this._currentBlock:await new Promise(t=>this.once("latest",t))}removeAllListeners(t){return t?super.removeAllListeners(t):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener(),this}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(t){Ko.includes(t)&&this._maybeStart()}_onRemoveListener(){this._getBlockTrackerEventCount()>0||this._maybeEnd()}async _maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),await this._start(),this.emit("_started"))}async _maybeEnd(){this._isRunning&&(this._isRunning=!1,this._setupBlockResetTimeout(),await this._end(),this.emit("_ended"))}_getBlockTrackerEventCount(){return Ko.map(t=>this.listenerCount(t)).reduce(nf)}_shouldUseNewBlock(t){const r=this._currentBlock;if(!r)return!0;const n=Xo(t),s=Xo(r);return this._usePastBlocks&&n<s||n>s}_newPotentialLatest(t){this._shouldUseNewBlock(t)&&this._setCurrentBlock(t)}_setCurrentBlock(t){const r=this._currentBlock;this._currentBlock=t,this.emit("latest",t),this.emit("sync",{oldBlock:r,newBlock:t})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){this._blockResetTimeout&&clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}Ir.BaseBlockTracker=sf;function Xo(e){return Number.parseInt(e,16)}var Uc={},Wc={},ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.assertExhaustive=ce.assertStruct=ce.assert=ce.AssertionError=void 0;const of=mt;function af(e){return typeof e=="object"&&e!==null&&"message"in e}function cf(e){var t,r;return typeof((r=(t=e==null?void 0:e.prototype)===null||t===void 0?void 0:t.constructor)===null||r===void 0?void 0:r.name)=="string"}function lf(e){const t=af(e)?e.message:String(e);return t.endsWith(".")?t.slice(0,-1):t}function Vc(e,t){return cf(e)?new e({message:t}):e({message:t})}class Fi extends Error{constructor(t){super(t.message),this.code="ERR_ASSERTION"}}ce.AssertionError=Fi;function uf(e,t="Assertion failed.",r=Fi){if(!e)throw t instanceof Error?t:Vc(r,t)}ce.assert=uf;function df(e,t,r="Assertion failed",n=Fi){try{(0,of.assert)(e,t)}catch(s){throw Vc(n,`${r}: ${lf(s)}.`)}}ce.assertStruct=df;function hf(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}ce.assertExhaustive=hf;var Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.base64=void 0;const ff=mt,pf=ce,gf=(e,t={})=>{var r,n;const s=(r=t.paddingRequired)!==null&&r!==void 0?r:!1,i=(n=t.characterSet)!==null&&n!==void 0?n:"base64";let o;i==="base64"?o=String.raw`[A-Za-z0-9+\/]`:((0,pf.assert)(i==="base64url"),o=String.raw`[-_A-Za-z0-9]`);let a;return s?a=new RegExp(`^(?:${o}{4})*(?:${o}{3}=|${o}{2}==)?$`,"u"):a=new RegExp(`^(?:${o}{4})*(?:${o}{2,3}|${o}{3}=|${o}{2}==)?$`,"u"),(0,ff.pattern)(e,a)};Mr.base64=gf;var q={},Ar={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.remove0x=e.add0x=e.assertIsStrictHexString=e.assertIsHexString=e.isStrictHexString=e.isHexString=e.StrictHexStruct=e.HexStruct=void 0;const t=mt,r=ce;e.HexStruct=(0,t.pattern)((0,t.string)(),/^(?:0x)?[0-9a-f]+$/iu),e.StrictHexStruct=(0,t.pattern)((0,t.string)(),/^0x[0-9a-f]+$/iu);function n(c){return(0,t.is)(c,e.HexStruct)}e.isHexString=n;function s(c){return(0,t.is)(c,e.StrictHexStruct)}e.isStrictHexString=s;function i(c){(0,r.assert)(n(c),"Value must be a hexadecimal string.")}e.assertIsHexString=i;function o(c){(0,r.assert)(s(c),'Value must be a hexadecimal string, starting with "0x".')}e.assertIsStrictHexString=o;function a(c){return c.startsWith("0x")?c:c.startsWith("0X")?`0x${c.substring(2)}`:`0x${c}`}e.add0x=a;function l(c){return c.startsWith("0x")||c.startsWith("0X")?c.substring(2):c}e.remove0x=l})(Ar);Object.defineProperty(q,"__esModule",{value:!0});q.createDataView=q.concatBytes=q.valueToBytes=q.stringToBytes=q.numberToBytes=q.signedBigIntToBytes=q.bigIntToBytes=q.hexToBytes=q.bytesToString=q.bytesToNumber=q.bytesToSignedBigInt=q.bytesToBigInt=q.bytesToHex=q.assertIsBytes=q.isBytes=void 0;const me=ce,wi=Ar,ea=48,ta=58,ra=87;function _f(){const e=[];return()=>{if(e.length===0)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}const mf=_f();function Hi(e){return e instanceof Uint8Array}q.isBytes=Hi;function Kt(e){(0,me.assert)(Hi(e),"Value must be a Uint8Array.")}q.assertIsBytes=Kt;function qc(e){if(Kt(e),e.length===0)return"0x";const t=mf(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,wi.add0x)(r.join(""))}q.bytesToHex=qc;function zc(e){Kt(e);const t=qc(e);return BigInt(t)}q.bytesToBigInt=zc;function bf(e){Kt(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(e.length*8,t)}q.bytesToSignedBigInt=bf;function yf(e){Kt(e);const t=zc(e);return(0,me.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)}q.bytesToNumber=yf;function wf(e){return Kt(e),new TextDecoder().decode(e)}q.bytesToString=wf;function Bn(e){var t;if(((t=e==null?void 0:e.toLowerCase)===null||t===void 0?void 0:t.call(e))==="0x")return new Uint8Array;(0,wi.assertIsHexString)(e);const r=(0,wi.remove0x)(e).toLowerCase(),n=r.length%2===0?r:`0${r}`,s=new Uint8Array(n.length/2);for(let i=0;i<s.length;i++){const o=n.charCodeAt(i*2),a=n.charCodeAt(i*2+1),l=o-(o<ta?ea:ra),c=a-(a<ta?ea:ra);s[i]=l*16+c}return s}q.hexToBytes=Bn;function Jc(e){(0,me.assert)(typeof e=="bigint","Value must be a bigint."),(0,me.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");const t=e.toString(16);return Bn(t)}q.bigIntToBytes=Jc;function vf(e,t){(0,me.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(t*8+-1))}function Ef(e,t){(0,me.assert)(typeof e=="bigint","Value must be a bigint."),(0,me.assert)(typeof t=="number","Byte length must be a number."),(0,me.assert)(t>0,"Byte length must be greater than 0."),(0,me.assert)(vf(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let s=0;s<n.length;s++)n[s]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()}q.signedBigIntToBytes=Ef;function $c(e){(0,me.assert)(typeof e=="number","Value must be a number."),(0,me.assert)(e>=0,"Value must be a non-negative number."),(0,me.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");const t=e.toString(16);return Bn(t)}q.numberToBytes=$c;function Gc(e){return(0,me.assert)(typeof e=="string","Value must be a string."),new TextEncoder().encode(e)}q.stringToBytes=Gc;function Zc(e){if(typeof e=="bigint")return Jc(e);if(typeof e=="number")return $c(e);if(typeof e=="string")return e.startsWith("0x")?Bn(e):Gc(e);if(Hi(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}q.valueToBytes=Zc;function kf(e){const t=new Array(e.length);let r=0;for(let s=0;s<e.length;s++){const i=Zc(e[s]);t[s]=i,r+=i.length}const n=new Uint8Array(r);for(let s=0,i=0;s<t.length;s++)n.set(t[s],i),i+=t[s].length;return n}q.concatBytes=kf;function Sf(e){if(typeof Buffer<"u"&&e instanceof Buffer){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}q.createDataView=Sf;var jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.ChecksumStruct=void 0;const na=mt,Cf=Mr;jn.ChecksumStruct=(0,na.size)((0,Cf.base64)((0,na.string)(),{paddingRequired:!0}),44,44);var je={};Object.defineProperty(je,"__esModule",{value:!0});je.createHex=je.createBytes=je.createBigInt=je.createNumber=void 0;const X=mt,Rf=ce,Qc=q,Dn=Ar,Yc=(0,X.union)([(0,X.number)(),(0,X.bigint)(),(0,X.string)(),Dn.StrictHexStruct]),If=(0,X.coerce)((0,X.number)(),Yc,Number),xf=(0,X.coerce)((0,X.bigint)(),Yc,BigInt);(0,X.union)([Dn.StrictHexStruct,(0,X.instance)(Uint8Array)]);const Mf=(0,X.coerce)((0,X.instance)(Uint8Array),(0,X.union)([Dn.StrictHexStruct]),Qc.hexToBytes),Af=(0,X.coerce)(Dn.StrictHexStruct,(0,X.instance)(Uint8Array),Qc.bytesToHex);function Pf(e){try{const t=(0,X.create)(e,If);return(0,Rf.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){throw t instanceof X.StructError?new Error(`Expected a number-like value, got "${e}".`):t}}je.createNumber=Pf;function Tf(e){try{return(0,X.create)(e,xf)}catch(t){throw t instanceof X.StructError?new Error(`Expected a number-like value, got "${String(t.value)}".`):t}}je.createBigInt=Tf;function Of(e){if(typeof e=="string"&&e.toLowerCase()==="0x")return new Uint8Array;try{return(0,X.create)(e,Mf)}catch(t){throw t instanceof X.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}}je.createBytes=Of;function Nf(e){if(e instanceof Uint8Array&&e.length===0||typeof e=="string"&&e.toLowerCase()==="0x")return"0x";try{return(0,X.create)(e,Af)}catch(t){throw t instanceof X.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}}je.createHex=Nf;var Vt={},Kc=O&&O.__classPrivateFieldSet||function(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r},he=O&&O.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Re,Te;Object.defineProperty(Vt,"__esModule",{value:!0});Vt.FrozenSet=Vt.FrozenMap=void 0;class Ui{constructor(t){Re.set(this,void 0),Kc(this,Re,new Map(t),"f"),Object.freeze(this)}get size(){return he(this,Re,"f").size}[(Re=new WeakMap,Symbol.iterator)](){return he(this,Re,"f")[Symbol.iterator]()}entries(){return he(this,Re,"f").entries()}forEach(t,r){return he(this,Re,"f").forEach((n,s,i)=>t.call(r,n,s,this))}get(t){return he(this,Re,"f").get(t)}has(t){return he(this,Re,"f").has(t)}keys(){return he(this,Re,"f").keys()}values(){return he(this,Re,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([t,r])=>`${String(t)} => ${String(r)}`).join(", ")} `:""}}`}}Vt.FrozenMap=Ui;class Wi{constructor(t){Te.set(this,void 0),Kc(this,Te,new Set(t),"f"),Object.freeze(this)}get size(){return he(this,Te,"f").size}[(Te=new WeakMap,Symbol.iterator)](){return he(this,Te,"f")[Symbol.iterator]()}entries(){return he(this,Te,"f").entries()}forEach(t,r){return he(this,Te,"f").forEach((n,s,i)=>t.call(r,n,s,this))}has(t){return he(this,Te,"f").has(t)}keys(){return he(this,Te,"f").keys()}values(){return he(this,Te,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(t=>String(t)).join(", ")} `:""}}`}}Vt.FrozenSet=Wi;Object.freeze(Ui);Object.freeze(Ui.prototype);Object.freeze(Wi);Object.freeze(Wi.prototype);var Xc={};Object.defineProperty(Xc,"__esModule",{value:!0});var el={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getJsonRpcIdValidator=e.assertIsJsonRpcError=e.isJsonRpcError=e.assertIsJsonRpcFailure=e.isJsonRpcFailure=e.assertIsJsonRpcSuccess=e.isJsonRpcSuccess=e.assertIsJsonRpcResponse=e.isJsonRpcResponse=e.assertIsPendingJsonRpcResponse=e.isPendingJsonRpcResponse=e.JsonRpcResponseStruct=e.JsonRpcFailureStruct=e.JsonRpcSuccessStruct=e.PendingJsonRpcResponseStruct=e.assertIsJsonRpcRequest=e.isJsonRpcRequest=e.assertIsJsonRpcNotification=e.isJsonRpcNotification=e.JsonRpcNotificationStruct=e.JsonRpcRequestStruct=e.JsonRpcParamsStruct=e.JsonRpcErrorStruct=e.JsonRpcIdStruct=e.JsonRpcVersionStruct=e.jsonrpc2=e.getJsonSize=e.isValidJson=e.JsonStruct=e.UnsafeJsonStruct=void 0;const t=mt,r=ce,n=()=>(0,t.define)("finite number",S=>(0,t.is)(S,(0,t.number)())&&Number.isFinite(S));e.UnsafeJsonStruct=(0,t.union)([(0,t.literal)(null),(0,t.boolean)(),n(),(0,t.string)(),(0,t.array)((0,t.lazy)(()=>e.UnsafeJsonStruct)),(0,t.record)((0,t.string)(),(0,t.lazy)(()=>e.UnsafeJsonStruct))]),e.JsonStruct=(0,t.define)("Json",(S,x)=>{function j(T,M){const Q=[...M.validator(T,x)];return Q.length>0?Q:!0}try{const T=j(S,e.UnsafeJsonStruct);return T!==!0?T:j(JSON.parse(JSON.stringify(S)),e.UnsafeJsonStruct)}catch(T){return T instanceof RangeError?"Circular reference detected":!1}});function s(S){return(0,t.is)(S,e.JsonStruct)}e.isValidJson=s;function i(S){(0,r.assertStruct)(S,e.JsonStruct,"Invalid JSON value");const x=JSON.stringify(S);return new TextEncoder().encode(x).byteLength}e.getJsonSize=i,e.jsonrpc2="2.0",e.JsonRpcVersionStruct=(0,t.literal)(e.jsonrpc2),e.JsonRpcIdStruct=(0,t.nullable)((0,t.union)([(0,t.number)(),(0,t.string)()])),e.JsonRpcErrorStruct=(0,t.object)({code:(0,t.integer)(),message:(0,t.string)(),data:(0,t.optional)(e.JsonStruct),stack:(0,t.optional)((0,t.string)())}),e.JsonRpcParamsStruct=(0,t.optional)((0,t.union)([(0,t.record)((0,t.string)(),e.JsonStruct),(0,t.array)(e.JsonStruct)])),e.JsonRpcRequestStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,method:(0,t.string)(),params:e.JsonRpcParamsStruct}),e.JsonRpcNotificationStruct=(0,t.omit)(e.JsonRpcRequestStruct,["id"]);function o(S){return(0,t.is)(S,e.JsonRpcNotificationStruct)}e.isJsonRpcNotification=o;function a(S,x){(0,r.assertStruct)(S,e.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",x)}e.assertIsJsonRpcNotification=a;function l(S){return(0,t.is)(S,e.JsonRpcRequestStruct)}e.isJsonRpcRequest=l;function c(S,x){(0,r.assertStruct)(S,e.JsonRpcRequestStruct,"Invalid JSON-RPC request",x)}e.assertIsJsonRpcRequest=c,e.PendingJsonRpcResponseStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:(0,t.optional)((0,t.unknown)()),error:(0,t.optional)(e.JsonRpcErrorStruct)}),e.JsonRpcSuccessStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:e.JsonStruct}),e.JsonRpcFailureStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,error:e.JsonRpcErrorStruct}),e.JsonRpcResponseStruct=(0,t.union)([e.JsonRpcSuccessStruct,e.JsonRpcFailureStruct]);function d(S){return(0,t.is)(S,e.PendingJsonRpcResponseStruct)}e.isPendingJsonRpcResponse=d;function u(S,x){(0,r.assertStruct)(S,e.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",x)}e.assertIsPendingJsonRpcResponse=u;function f(S){return(0,t.is)(S,e.JsonRpcResponseStruct)}e.isJsonRpcResponse=f;function g(S,x){(0,r.assertStruct)(S,e.JsonRpcResponseStruct,"Invalid JSON-RPC response",x)}e.assertIsJsonRpcResponse=g;function w(S){return(0,t.is)(S,e.JsonRpcSuccessStruct)}e.isJsonRpcSuccess=w;function m(S,x){(0,r.assertStruct)(S,e.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",x)}e.assertIsJsonRpcSuccess=m;function E(S){return(0,t.is)(S,e.JsonRpcFailureStruct)}e.isJsonRpcFailure=E;function v(S,x){(0,r.assertStruct)(S,e.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",x)}e.assertIsJsonRpcFailure=v;function k(S){return(0,t.is)(S,e.JsonRpcErrorStruct)}e.isJsonRpcError=k;function y(S,x){(0,r.assertStruct)(S,e.JsonRpcErrorStruct,"Invalid JSON-RPC error",x)}e.assertIsJsonRpcError=y;function C(S){const{permitEmptyString:x,permitFractions:j,permitNull:T}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},S);return M=>!!(typeof M=="number"&&(j||Number.isInteger(M))||typeof M=="string"&&(x||M.length>0)||T&&M===null)}e.getJsonRpcIdValidator=C})(el);var tl={};Object.defineProperty(tl,"__esModule",{value:!0});var qt={},Lf=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qt,"__esModule",{value:!0});qt.createModuleLogger=qt.createProjectLogger=void 0;const Bf=Lf(Hl),jf=(0,Bf.default)("metamask");function Df(e){return jf.extend(e)}qt.createProjectLogger=Df;function Ff(e,t){return e.extend(t)}qt.createModuleLogger=Ff;var rl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.calculateNumberSize=e.calculateStringSize=e.isASCII=e.isPlainObject=e.ESCAPE_CHARACTERS_REGEXP=e.JsonSize=e.hasProperty=e.isObject=e.isNullOrUndefined=e.isNonEmptyArray=void 0;function t(c){return Array.isArray(c)&&c.length>0}e.isNonEmptyArray=t;function r(c){return c==null}e.isNullOrUndefined=r;function n(c){return!!c&&typeof c=="object"&&!Array.isArray(c)}e.isObject=n;const s=(c,d)=>Object.hasOwnProperty.call(c,d);e.hasProperty=s,function(c){c[c.Null=4]="Null",c[c.Comma=1]="Comma",c[c.Wrapper=1]="Wrapper",c[c.True=4]="True",c[c.False=5]="False",c[c.Quote=1]="Quote",c[c.Colon=1]="Colon",c[c.Date=24]="Date"}(e.JsonSize||(e.JsonSize={})),e.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function i(c){if(typeof c!="object"||c===null)return!1;try{let d=c;for(;Object.getPrototypeOf(d)!==null;)d=Object.getPrototypeOf(d);return Object.getPrototypeOf(c)===d}catch{return!1}}e.isPlainObject=i;function o(c){return c.charCodeAt(0)<=127}e.isASCII=o;function a(c){var d;return c.split("").reduce((u,f)=>o(f)?u+1:u+2,0)+((d=c.match(e.ESCAPE_CHARACTERS_REGEXP))!==null&&d!==void 0?d:[]).length}e.calculateStringSize=a;function l(c){return c.toString().length}e.calculateNumberSize=l})(rl);var De={};Object.defineProperty(De,"__esModule",{value:!0});De.hexToBigInt=De.hexToNumber=De.bigIntToHex=De.numberToHex=void 0;const Lt=ce,ur=Ar,Hf=e=>((0,Lt.assert)(typeof e=="number","Value must be a number."),(0,Lt.assert)(e>=0,"Value must be a non-negative number."),(0,Lt.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,ur.add0x)(e.toString(16)));De.numberToHex=Hf;const Uf=e=>((0,Lt.assert)(typeof e=="bigint","Value must be a bigint."),(0,Lt.assert)(e>=0,"Value must be a non-negative bigint."),(0,ur.add0x)(e.toString(16)));De.bigIntToHex=Uf;const Wf=e=>{(0,ur.assertIsHexString)(e);const t=parseInt(e,16);return(0,Lt.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};De.hexToNumber=Wf;const Vf=e=>((0,ur.assertIsHexString)(e),BigInt((0,ur.add0x)(e)));De.hexToBigInt=Vf;var nl={};Object.defineProperty(nl,"__esModule",{value:!0});var sl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeSince=e.inMilliseconds=e.Duration=void 0,function(i){i[i.Millisecond=1]="Millisecond",i[i.Second=1e3]="Second",i[i.Minute=6e4]="Minute",i[i.Hour=36e5]="Hour",i[i.Day=864e5]="Day",i[i.Week=6048e5]="Week",i[i.Year=31536e6]="Year"}(e.Duration||(e.Duration={}));const t=i=>Number.isInteger(i)&&i>=0,r=(i,o)=>{if(!t(i))throw new Error(`"${o}" must be a non-negative integer. Received: "${i}".`)};function n(i,o){return r(i,"count"),i*o}e.inMilliseconds=n;function s(i){return r(i,"timestamp"),Date.now()-i}e.timeSince=s})(sl);var il={};Object.defineProperty(il,"__esModule",{value:!0});var ol={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.satisfiesVersionRange=e.gtRange=e.gtVersion=e.assertIsSemVerRange=e.assertIsSemVerVersion=e.isValidSemVerRange=e.isValidSemVerVersion=e.VersionRangeStruct=e.VersionStruct=void 0;const t=Ul,r=mt,n=ce;e.VersionStruct=(0,r.refine)((0,r.string)(),"Version",u=>(0,t.valid)(u)===null?`Expected SemVer version, got "${u}"`:!0),e.VersionRangeStruct=(0,r.refine)((0,r.string)(),"Version range",u=>(0,t.validRange)(u)===null?`Expected SemVer range, got "${u}"`:!0);function s(u){return(0,r.is)(u,e.VersionStruct)}e.isValidSemVerVersion=s;function i(u){return(0,r.is)(u,e.VersionRangeStruct)}e.isValidSemVerRange=i;function o(u){(0,n.assertStruct)(u,e.VersionStruct)}e.assertIsSemVerVersion=o;function a(u){(0,n.assertStruct)(u,e.VersionRangeStruct)}e.assertIsSemVerRange=a;function l(u,f){return(0,t.gt)(u,f)}e.gtVersion=l;function c(u,f){return(0,t.gtr)(u,f)}e.gtRange=c;function d(u,f){return(0,t.satisfies)(u,f,{includePrerelease:!0})}e.satisfiesVersionRange=d})(ol);(function(e){var t=O&&O.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=O&&O.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(ce,e),r(Mr,e),r(q,e),r(jn,e),r(je,e),r(Vt,e),r(Xc,e),r(Ar,e),r(el,e),r(tl,e),r(qt,e),r(rl,e),r(De,e),r(nl,e),r(sl,e),r(il,e),r(ol,e)})(Wc);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createModuleLogger=e.projectLogger=void 0;const t=Wc;Object.defineProperty(e,"createModuleLogger",{enumerable:!0,get:function(){return t.createModuleLogger}}),e.projectLogger=(0,t.createProjectLogger)("eth-block-tracker")})(Uc);var al=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.PollingBlockTracker=void 0;const qf=al(Ei),zf=al(Q0),Jf=Ir,sa=Uc,ia=(0,sa.createModuleLogger)(sa.projectLogger,"polling-block-tracker"),$f=(0,qf.default)(),Gf=1e3;class Zf extends Jf.BaseBlockTracker{constructor(t={}){var r;if(!t.provider)throw new Error("PollingBlockTracker - no provider specified.");super(Object.assign(Object.assign({},t),{blockResetDuration:(r=t.blockResetDuration)!==null&&r!==void 0?r:t.pollingInterval})),this._provider=t.provider,this._pollingInterval=t.pollingInterval||20*Gf,this._retryTimeout=t.retryTimeout||this._pollingInterval/10,this._keepEventLoopActive=t.keepEventLoopActive===void 0?!0:t.keepEventLoopActive,this._setSkipCacheFlag=t.setSkipCacheFlag||!1}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}async _start(){this._synchronize()}async _end(){}async _synchronize(){for(var t;this._isRunning;)try{await this._updateLatestBlock();const r=oa(this._pollingInterval,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await r}catch(r){const n=new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:
${(t=r.stack)!==null&&t!==void 0?t:r}`);try{this.emit("error",n)}catch{console.error(n)}const s=oa(this._retryTimeout,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await s}}async _updateLatestBlock(){const t=await this._fetchLatestBlock();this._newPotentialLatest(t)}async _fetchLatestBlock(){const t={jsonrpc:"2.0",id:$f(),method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(t.skipCache=!0),ia("Making request",t);const r=await(0,zf.default)(n=>this._provider.sendAsync(t,n))();if(ia("Got response",r),r.error)throw new Error(`PollingBlockTracker - encountered error fetching block:
${r.error.message}`);return r.result}}Ln.PollingBlockTracker=Zf;function oa(e,t){return new Promise(r=>{const n=setTimeout(r,e);n.unref&&t&&n.unref()})}var Fn={},Qf=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.SubscribeBlockTracker=void 0;const Yf=Qf(Ei),Kf=Ir,Xf=(0,Yf.default)();class ep extends Kf.BaseBlockTracker{constructor(t={}){if(!t.provider)throw new Error("SubscribeBlockTracker - no provider specified.");super(t),this._provider=t.provider,this._subscriptionId=null}async checkForLatestBlock(){return await this.getLatestBlock()}async _start(){if(this._subscriptionId===void 0||this._subscriptionId===null)try{const t=await this._call("eth_blockNumber");this._subscriptionId=await this._call("eth_subscribe","newHeads"),this._provider.on("data",this._handleSubData.bind(this)),this._newPotentialLatest(t)}catch(t){this.emit("error",t)}}async _end(){if(this._subscriptionId!==null&&this._subscriptionId!==void 0)try{await this._call("eth_unsubscribe",this._subscriptionId),this._subscriptionId=null}catch(t){this.emit("error",t)}}_call(t,...r){return new Promise((n,s)=>{this._provider.sendAsync({id:Xf(),method:t,params:r,jsonrpc:"2.0"},(i,o)=>{i?s(i):n(o.result)})})}_handleSubData(t,r){var n;r.method==="eth_subscription"&&((n=r.params)===null||n===void 0?void 0:n.subscription)===this._subscriptionId&&this._newPotentialLatest(r.params.result.number)}}Fn.SubscribeBlockTracker=ep;(function(e){var t=O&&O.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i),Object.defineProperty(n,o,{enumerable:!0,get:function(){return s[i]}})}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=O&&O.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(Ln,e),r(Fn,e)})(Hc);var Vi={},Hn={},Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.getUniqueId=void 0;const cl=4294967295;let ci=Math.floor(Math.random()*cl);function tp(){return ci=(ci+1)%cl,ci}Pr.getUniqueId=tp;Object.defineProperty(Hn,"__esModule",{value:!0});Hn.createIdRemapMiddleware=void 0;const rp=Pr;function np(){return(e,t,r,n)=>{const s=e.id,i=rp.getUniqueId();e.id=i,t.id=i,r(o=>{e.id=s,t.id=s,o()})}}Hn.createIdRemapMiddleware=np;var Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.createAsyncMiddleware=void 0;function sp(e){return async(t,r,n,s)=>{let i;const o=new Promise(d=>{i=d});let a=null,l=!1;const c=async()=>{l=!0,n(d=>{a=d,i()}),await o};try{await e(t,r,c),l?(await o,a(null)):s(null)}catch(d){a?a(d):s(d)}}}Un.createAsyncMiddleware=sp;var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.createScaffoldMiddleware=void 0;function ip(e){return(t,r,n,s)=>{const i=e[t.method];return i===void 0?n():typeof i=="function"?i(t,r,n,s):(r.result=i,s())}}Wn.createScaffoldMiddleware=ip;var Tr={},qi={};Object.defineProperty(qi,"__esModule",{value:!0});const op=tn;function aa(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout(()=>{throw n})}}function ap(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}let cp=class extends op.EventEmitter{emit(e,...t){let r=e==="error";const n=this._events;if(n!==void 0)r=r&&n.error===void 0;else if(!r)return!1;if(r){let i;if(t.length>0&&([i]=t),i instanceof Error)throw i;const o=new Error(`Unhandled error.${i?` (${i.message})`:""}`);throw o.context=i,o}const s=n[e];if(s===void 0)return!1;if(typeof s=="function")aa(s,this,t);else{const i=s.length,o=ap(s);for(let a=0;a<i;a+=1)aa(o[a],this,t)}return!0}};qi.default=cp;var ll={},nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.EthereumProviderError=nt.EthereumRpcError=void 0;const lp=ql;class ul extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return lp.default(this.serialize(),hp,2)}}nt.EthereumRpcError=ul;class up extends ul{constructor(t,r,n){if(!dp(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,r,n)}}nt.EthereumProviderError=up;function dp(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function hp(e,t){if(t!=="[Circular]")return t}var zi={},st={};Object.defineProperty(st,"__esModule",{value:!0});st.errorValues=st.errorCodes=void 0;st.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};st.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=st,r=nt,n=t.errorCodes.rpc.internal,s="Unspecified error message. This is a bug, please report it.",i={code:n,message:o(n)};e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function o(f,g=s){if(Number.isInteger(f)){const w=f.toString();if(u(t.errorValues,w))return t.errorValues[w].message;if(c(f))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return g}e.getMessageFromCode=o;function a(f){if(!Number.isInteger(f))return!1;const g=f.toString();return!!(t.errorValues[g]||c(f))}e.isValidCode=a;function l(f,{fallbackError:g=i,shouldIncludeStack:w=!1}={}){var m,E;if(!g||!Number.isInteger(g.code)||typeof g.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(f instanceof r.EthereumRpcError)return f.serialize();const v={};if(f&&typeof f=="object"&&!Array.isArray(f)&&u(f,"code")&&a(f.code)){const y=f;v.code=y.code,y.message&&typeof y.message=="string"?(v.message=y.message,u(y,"data")&&(v.data=y.data)):(v.message=o(v.code),v.data={originalError:d(f)})}else{v.code=g.code;const y=(m=f)===null||m===void 0?void 0:m.message;v.message=y&&typeof y=="string"?y:g.message,v.data={originalError:d(f)}}const k=(E=f)===null||E===void 0?void 0:E.stack;return w&&f&&k&&typeof k=="string"&&(v.stack=k),v}e.serializeError=l;function c(f){return f>=-32099&&f<=-32e3}function d(f){return f&&typeof f=="object"&&!Array.isArray(f)?Object.assign({},f):f}function u(f,g){return Object.prototype.hasOwnProperty.call(f,g)}})(zi);var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.ethErrors=void 0;const Ji=nt,dl=zi,ue=st;Vn.ethErrors={rpc:{parse:e=>ve(ue.errorCodes.rpc.parse,e),invalidRequest:e=>ve(ue.errorCodes.rpc.invalidRequest,e),invalidParams:e=>ve(ue.errorCodes.rpc.invalidParams,e),methodNotFound:e=>ve(ue.errorCodes.rpc.methodNotFound,e),internal:e=>ve(ue.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return ve(t,e)},invalidInput:e=>ve(ue.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>ve(ue.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>ve(ue.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>ve(ue.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>ve(ue.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>ve(ue.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>rr(ue.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>rr(ue.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>rr(ue.errorCodes.provider.unsupportedMethod,e),disconnected:e=>rr(ue.errorCodes.provider.disconnected,e),chainDisconnected:e=>rr(ue.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new Ji.EthereumProviderError(t,r,n)}}};function ve(e,t){const[r,n]=hl(t);return new Ji.EthereumRpcError(e,r||dl.getMessageFromCode(e),n)}function rr(e,t){const[r,n]=hl(t);return new Ji.EthereumProviderError(e,r||dl.getMessageFromCode(e),n)}function hl(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=nt;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const r=zi;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=Vn;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const s=st;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return s.errorCodes}})})(ll);var fp=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.JsonRpcEngine=void 0;const pp=fp(qi),Ee=ll;class qe extends pp.default{constructor(){super(),this._middleware=[]}push(t){this._middleware.push(t)}handle(t,r){if(r&&typeof r!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(t)?r?this._handleBatch(t,r):this._handleBatch(t):r?this._handle(t,r):this._promiseHandle(t)}asMiddleware(){return async(t,r,n,s)=>{try{const[i,o,a]=await qe._runAllMiddleware(t,r,this._middleware);return o?(await qe._runReturnHandlers(a),s(i)):n(async l=>{try{await qe._runReturnHandlers(a)}catch(c){return l(c)}return l()})}catch(i){return s(i)}}}async _handleBatch(t,r){try{const n=await Promise.all(t.map(this._promiseHandle.bind(this)));return r?r(null,n):n}catch(n){if(r)return r(n);throw n}}_promiseHandle(t){return new Promise(r=>{this._handle(t,(n,s)=>{r(s)})})}async _handle(t,r){if(!t||Array.isArray(t)||typeof t!="object"){const o=new Ee.EthereumRpcError(Ee.errorCodes.rpc.invalidRequest,`Requests must be plain objects. Received: ${typeof t}`,{request:t});return r(o,{id:void 0,jsonrpc:"2.0",error:o})}if(typeof t.method!="string"){const o=new Ee.EthereumRpcError(Ee.errorCodes.rpc.invalidRequest,`Must specify a string method. Received: ${typeof t.method}`,{request:t});return r(o,{id:t.id,jsonrpc:"2.0",error:o})}const n=Object.assign({},t),s={id:n.id,jsonrpc:n.jsonrpc};let i=null;try{await this._processRequest(n,s)}catch(o){i=o}return i&&(delete s.result,s.error||(s.error=Ee.serializeError(i))),r(i,s)}async _processRequest(t,r){const[n,s,i]=await qe._runAllMiddleware(t,r,this._middleware);if(qe._checkForCompletion(t,r,s),await qe._runReturnHandlers(i),n)throw n}static async _runAllMiddleware(t,r,n){const s=[];let i=null,o=!1;for(const a of n)if([i,o]=await qe._runMiddleware(t,r,a,s),o)break;return[i,o,s.reverse()]}static _runMiddleware(t,r,n,s){return new Promise(i=>{const o=l=>{const c=l||r.error;c&&(r.error=Ee.serializeError(c)),i([c,!0])},a=l=>{r.error?o(r.error):(l&&(typeof l!="function"&&o(new Ee.EthereumRpcError(Ee.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof l}" for request:
${li(t)}`,{request:t})),s.push(l)),i([null,!1]))};try{n(t,r,a,o)}catch(l){o(l)}})}static async _runReturnHandlers(t){for(const r of t)await new Promise((n,s)=>{r(i=>i?s(i):n())})}static _checkForCompletion(t,r,n){if(!("result"in r)&&!("error"in r))throw new Ee.EthereumRpcError(Ee.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:
${li(t)}`,{request:t});if(!n)throw new Ee.EthereumRpcError(Ee.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:
${li(t)}`,{request:t})}}Tr.JsonRpcEngine=qe;function li(e){return JSON.stringify(e,null,2)}var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.mergeMiddleware=void 0;const gp=Tr;function _p(e){const t=new gp.JsonRpcEngine;return e.forEach(r=>t.push(r)),t.asMiddleware()}qn.mergeMiddleware=_p;(function(e){var t=O&&O.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i),Object.defineProperty(n,o,{enumerable:!0,get:function(){return s[i]}})}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=O&&O.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(Hn,e),r(Un,e),r(Wn,e),r(Pr,e),r(Tr,e),r(qn,e)})(Vi);var fl={},$i={},vi=function(e,t){return vi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},vi(e,t)};function pl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");vi(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Yr=function(){return Yr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Yr.apply(this,arguments)};function gl(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function _l(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function ml(e,t){return function(r,n){t(r,n,e)}}function mp(e,t,r,n,s,i){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var a=n.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!t&&e?n.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),u,f=!1,g=r.length-1;g>=0;g--){var w={};for(var m in n)w[m]=m==="access"?{}:n[m];for(var m in n.access)w.access[m]=n.access[m];w.addInitializer=function(v){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(v||null))};var E=(0,r[g])(a==="accessor"?{get:d.get,set:d.set}:d[l],w);if(a==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(u=o(E.get))&&(d.get=u),(u=o(E.set))&&(d.set=u),(u=o(E.init))&&s.unshift(u)}else(u=o(E))&&(a==="field"?s.unshift(u):d[l]=u)}c&&Object.defineProperty(c,n.name,d),f=!0}function bp(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function yp(e){return typeof e=="symbol"?e:"".concat(e)}function wp(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function bl(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function yl(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})}function wl(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var zn=Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function vl(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&zn(t,e,r)}function Kr(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gi(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function El(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Gi(arguments[t]));return e}function kl(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Sl(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function zt(e){return this instanceof zt?(this.v=e,this):new zt(e)}function Cl(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){n[f]&&(s[f]=function(g){return new Promise(function(w,m){i.push([f,g,w,m])>1||a(f,g)})})}function a(f,g){try{l(n[f](g))}catch(w){u(i[0][3],w)}}function l(f){f.value instanceof zt?Promise.resolve(f.value.v).then(c,d):u(i[0][2],f)}function c(f){a("next",f)}function d(f){a("throw",f)}function u(f,g){f(g),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Rl(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:zt(e[s](o)),done:!1}:i?i(o):o}:i}}function Il(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Kr=="function"?Kr(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,l){o=e[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function xl(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var vp=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function Ml(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&zn(t,e,r);return vp(t,e),t}function Al(e){return e&&e.__esModule?e:{default:e}}function Pl(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function Tl(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function Ol(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Nl(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var Ep=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function Ll(e){function t(n){e.error=e.hasError?new Ep(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}function r(){for(;e.stack.length;){var n=e.stack.pop();try{var s=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(s).then(r,function(i){return t(i),r()})}catch(i){t(i)}}if(e.hasError)throw e.error}return r()}const kp={__extends:pl,__assign:Yr,__rest:gl,__decorate:_l,__param:ml,__metadata:bl,__awaiter:yl,__generator:wl,__createBinding:zn,__exportStar:vl,__values:Kr,__read:Gi,__spread:El,__spreadArrays:kl,__spreadArray:Sl,__await:zt,__asyncGenerator:Cl,__asyncDelegator:Rl,__asyncValues:Il,__makeTemplateObject:xl,__importStar:Ml,__importDefault:Al,__classPrivateFieldGet:Pl,__classPrivateFieldSet:Tl,__classPrivateFieldIn:Ol,__addDisposableResource:Nl,__disposeResources:Ll},Sp=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Nl,get __assign(){return Yr},__asyncDelegator:Rl,__asyncGenerator:Cl,__asyncValues:Il,__await:zt,__awaiter:yl,__classPrivateFieldGet:Pl,__classPrivateFieldIn:Ol,__classPrivateFieldSet:Tl,__createBinding:zn,__decorate:_l,__disposeResources:Ll,__esDecorate:mp,__exportStar:vl,__extends:pl,__generator:wl,__importDefault:Al,__importStar:Ml,__makeTemplateObject:xl,__metadata:bl,__param:ml,__propKey:yp,__read:Gi,__rest:gl,__runInitializers:bp,__setFunctionName:wp,__spread:El,__spreadArray:Sl,__spreadArrays:kl,__values:Kr,default:kp},Symbol.toStringTag,{value:"Module"})),Zi=rn(Sp);var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});var ca=Zi,Cp=function(){function e(t){if(this._maxConcurrency=t,this._queue=[],t<=0)throw new Error("semaphore must be initialized to a positive value");this._value=t}return e.prototype.acquire=function(){var t=this,r=this.isLocked(),n=new Promise(function(s){return t._queue.push(s)});return r||this._dispatch(),n},e.prototype.runExclusive=function(t){return ca.__awaiter(this,void 0,void 0,function(){var r,n,s;return ca.__generator(this,function(i){switch(i.label){case 0:return[4,this.acquire()];case 1:r=i.sent(),n=r[0],s=r[1],i.label=2;case 2:return i.trys.push([2,,4,5]),[4,t(n)];case 3:return[2,i.sent()];case 4:return s(),[7];case 5:return[2]}})})},e.prototype.isLocked=function(){return this._value<=0},e.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var t=this._currentReleaser;this._currentReleaser=void 0,t()}},e.prototype._dispatch=function(){var t=this,r=this._queue.shift();if(r){var n=!1;this._currentReleaser=function(){n||(n=!0,t._value++,t._dispatch())},r([this._value--,this._currentReleaser])}},e}();Jn.default=Cp;Object.defineProperty($i,"__esModule",{value:!0});var la=Zi,Rp=Jn,Ip=function(){function e(){this._semaphore=new Rp.default(1)}return e.prototype.acquire=function(){return la.__awaiter(this,void 0,void 0,function(){var t,r;return la.__generator(this,function(n){switch(n.label){case 0:return[4,this._semaphore.acquire()];case 1:return t=n.sent(),r=t[1],[2,r]}})})},e.prototype.runExclusive=function(t){return this._semaphore.runExclusive(function(){return t()})},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.release=function(){this._semaphore.release()},e}();$i.default=Ip;var $n={};Object.defineProperty($n,"__esModule",{value:!0});$n.withTimeout=void 0;var Wr=Zi;function xp(e,t,r){var n=this;return r===void 0&&(r=new Error("timeout")),{acquire:function(){return new Promise(function(s,i){return Wr.__awaiter(n,void 0,void 0,function(){var o,a,l;return Wr.__generator(this,function(c){switch(c.label){case 0:return o=!1,setTimeout(function(){o=!0,i(r)},t),[4,e.acquire()];case 1:return a=c.sent(),o?(l=Array.isArray(a)?a[1]:a,l()):s(a),[2]}})})})},runExclusive:function(s){return Wr.__awaiter(this,void 0,void 0,function(){var i,o;return Wr.__generator(this,function(a){switch(a.label){case 0:i=function(){},a.label=1;case 1:return a.trys.push([1,,7,8]),[4,this.acquire()];case 2:return o=a.sent(),Array.isArray(o)?(i=o[1],[4,s(o[0])]):[3,4];case 3:return[2,a.sent()];case 4:return i=o,[4,s()];case 5:return[2,a.sent()];case 6:return[3,8];case 7:return i(),[7];case 8:return[2]}})})},release:function(){e.release()},isLocked:function(){return e.isLocked()}}}$n.withTimeout=xp;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.withTimeout=e.Semaphore=e.Mutex=void 0;var t=$i;Object.defineProperty(e,"Mutex",{enumerable:!0,get:function(){return t.default}});var r=Jn;Object.defineProperty(e,"Semaphore",{enumerable:!0,get:function(){return r.default}});var n=$n;Object.defineProperty(e,"withTimeout",{enumerable:!0,get:function(){return n.withTimeout}})})(fl);var Mp=Pp,Ap=Object.prototype.hasOwnProperty;function Pp(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)Ap.call(r,n)&&(e[n]=r[n])}return e}const Tp=Mp,Op=Ei();var Np=B;function B(e){const t=this;t.currentProvider=e}B.prototype.getBalance=Or(2,"eth_getBalance");B.prototype.getCode=Or(2,"eth_getCode");B.prototype.getTransactionCount=Or(2,"eth_getTransactionCount");B.prototype.getStorageAt=Or(3,"eth_getStorageAt");B.prototype.call=Or(2,"eth_call");B.prototype.protocolVersion=U("eth_protocolVersion");B.prototype.syncing=U("eth_syncing");B.prototype.coinbase=U("eth_coinbase");B.prototype.mining=U("eth_mining");B.prototype.hashrate=U("eth_hashrate");B.prototype.gasPrice=U("eth_gasPrice");B.prototype.accounts=U("eth_accounts");B.prototype.blockNumber=U("eth_blockNumber");B.prototype.getBlockTransactionCountByHash=U("eth_getBlockTransactionCountByHash");B.prototype.getBlockTransactionCountByNumber=U("eth_getBlockTransactionCountByNumber");B.prototype.getUncleCountByBlockHash=U("eth_getUncleCountByBlockHash");B.prototype.getUncleCountByBlockNumber=U("eth_getUncleCountByBlockNumber");B.prototype.sign=U("eth_sign");B.prototype.sendTransaction=U("eth_sendTransaction");B.prototype.sendRawTransaction=U("eth_sendRawTransaction");B.prototype.estimateGas=U("eth_estimateGas");B.prototype.getBlockByHash=U("eth_getBlockByHash");B.prototype.getBlockByNumber=U("eth_getBlockByNumber");B.prototype.getTransactionByHash=U("eth_getTransactionByHash");B.prototype.getTransactionByBlockHashAndIndex=U("eth_getTransactionByBlockHashAndIndex");B.prototype.getTransactionByBlockNumberAndIndex=U("eth_getTransactionByBlockNumberAndIndex");B.prototype.getTransactionReceipt=U("eth_getTransactionReceipt");B.prototype.getUncleByBlockHashAndIndex=U("eth_getUncleByBlockHashAndIndex");B.prototype.getUncleByBlockNumberAndIndex=U("eth_getUncleByBlockNumberAndIndex");B.prototype.getCompilers=U("eth_getCompilers");B.prototype.compileLLL=U("eth_compileLLL");B.prototype.compileSolidity=U("eth_compileSolidity");B.prototype.compileSerpent=U("eth_compileSerpent");B.prototype.newFilter=U("eth_newFilter");B.prototype.newBlockFilter=U("eth_newBlockFilter");B.prototype.newPendingTransactionFilter=U("eth_newPendingTransactionFilter");B.prototype.uninstallFilter=U("eth_uninstallFilter");B.prototype.getFilterChanges=U("eth_getFilterChanges");B.prototype.getFilterLogs=U("eth_getFilterLogs");B.prototype.getLogs=U("eth_getLogs");B.prototype.getWork=U("eth_getWork");B.prototype.submitWork=U("eth_submitWork");B.prototype.submitHashrate=U("eth_submitHashrate");B.prototype.sendAsync=function(e,t){this.currentProvider.sendAsync(Lp(e),function(r,n){if(!r&&n.error&&(r=new Error("EthQuery - RPC Error - "+n.error.message)),r)return t(r);t(null,n.result)})};function U(e){return function(){const t=this;var r=[].slice.call(arguments),n=r.pop();t.sendAsync({method:e,params:r},n)}}function Or(e,t){return function(){const r=this;var n=[].slice.call(arguments),s=n.pop();n.length<e&&n.push("latest"),r.sendAsync({method:t,params:n},s)}}function Lp(e){return Tp({id:Op(),jsonrpc:"2.0",params:[]},e)}const ua=(e,t,r,n)=>function(...s){const i=t.promiseModule;return new i((o,a)=>{t.multiArgs?s.push((...l)=>{t.errorFirst?l[0]?a(l):(l.shift(),o(l)):o(l)}):t.errorFirst?s.push((l,c)=>{l?a(l):o(c)}):s.push(o),Reflect.apply(e,this===r?n:this,s)})},da=new WeakMap;var Bp=(e,t)=>{t={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...t};const r=typeof e;if(!(e!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${e===null?"null":r}\``);const n=(o,a)=>{let l=da.get(o);if(l||(l={},da.set(o,l)),a in l)return l[a];const c=g=>typeof g=="string"||typeof a=="symbol"?a===g:g.test(a),d=Reflect.getOwnPropertyDescriptor(o,a),u=d===void 0||d.writable||d.configurable,f=(t.include?t.include.some(c):!t.exclude.some(c))&&u;return l[a]=f,f},s=new WeakMap,i=new Proxy(e,{apply(o,a,l){const c=s.get(o);if(c)return Reflect.apply(c,a,l);const d=t.excludeMain?o:ua(o,t,i,o);return s.set(o,d),Reflect.apply(d,a,l)},get(o,a){const l=o[a];if(!n(o,a)||l===Function.prototype[a])return l;const c=s.get(l);if(c)return c;if(typeof l=="function"){const d=ua(l,t,i,o);return s.set(l,d),d}return l}});return i};const jp=xr.default;let Dp=class extends jp{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach(t=>this.emit("update",t))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}};var Qi=Dp;const Fp=Qi;let Hp=class extends Fp{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}};var Up=Hp,Nr={minBlockRef:Wp,maxBlockRef:Vp,sortBlockRefs:Yi,bnToHex:qp,blockRefIsNumber:zp,hexToInt:Xr,incrementHexInt:Jp,intToHex:Bl,unsafeRandomBytes:$p};function Wp(...e){return Yi(e)[0]}function Vp(...e){const t=Yi(e);return t[t.length-1]}function Yi(e){return e.sort((t,r)=>t==="latest"||r==="earliest"?1:r==="latest"||t==="earliest"?-1:Xr(t)-Xr(r))}function qp(e){return"0x"+e.toString(16)}function zp(e){return e&&!["earliest","latest","pending"].includes(e)}function Xr(e){return e==null?e:Number.parseInt(e,16)}function Jp(e){if(e==null)return e;const t=Xr(e);return Bl(t+1)}function Bl(e){if(e==null)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function $p(e){let t="0x";for(let r=0;r<e;r++)t+=ha(),t+=ha();return t}function ha(){return Math.floor(Math.random()*16).toString(16)}const Gp=Np,Zp=Bp,Qp=Up,{bnToHex:rg,hexToInt:Vr,incrementHexInt:Yp,minBlockRef:Kp,blockRefIsNumber:Xp}=Nr;let e1=class extends Qp{constructor({provider:e,params:t}){super(),this.type="log",this.ethQuery=new Gp(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},t),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(r=>r.toLowerCase()))}async initialize({currentBlock:e}){let t=this.params.fromBlock;["latest","pending"].includes(t)&&(t=e),t==="earliest"&&(t="0x0"),this.params.fromBlock=t;const r=Kp(this.params.toBlock,e),n=Object.assign({},this.params,{toBlock:r}),s=await this._fetchLogs(n);this.addInitialResults(s)}async update({oldBlock:e,newBlock:t}){const r=t;let n;e?n=Yp(e):n=t;const s=Object.assign({},this.params,{fromBlock:n,toBlock:r}),i=(await this._fetchLogs(s)).filter(o=>this.matchLog(o));this.addResults(i)}async _fetchLogs(e){return await Zp(t=>this.ethQuery.getLogs(e,t))()}matchLog(e){if(Vr(this.params.fromBlock)>=Vr(e.blockNumber)||Xp(this.params.toBlock)&&Vr(this.params.toBlock)<=Vr(e.blockNumber))return!1;const t=e.address&&e.address.toLowerCase();return this.params.address&&t&&!this.params.address.includes(t)?!1:this.params.topics.every((r,n)=>{let s=e.topics[n];if(!s)return!1;s=s.toLowerCase();let i=Array.isArray(r)?r:[r];return i.includes(null)?!0:(i=i.map(o=>o.toLowerCase()),i.includes(s))})}};var t1=e1,Ki=r1;async function r1({provider:e,fromBlock:t,toBlock:r}){t||(t=r);const n=fa(t),s=fa(r)-n+1,i=Array(s).fill().map((a,l)=>n+l).map(n1);let o=await Promise.all(i.map(a=>i1(e,"eth_getBlockByNumber",[a,!1])));return o=o.filter(a=>a!==null),o}function fa(e){return e==null?e:Number.parseInt(e,16)}function n1(e){return e==null?e:"0x"+e.toString(16)}function s1(e,t){return new Promise((r,n)=>{e.sendAsync(t,(s,i)=>{s?n(s):i.error?n(i.error):i.result?r(i.result):n(new Error("Result was empty"))})})}async function i1(e,t,r){for(let n=0;n<3;n++)try{return await s1(e,{id:1,jsonrpc:"2.0",method:t,params:r})}catch(s){console.error(`provider.sendAsync failed: ${s.stack||s.message||s}`)}return null}const o1=Qi,a1=Ki,{incrementHexInt:c1}=Nr;let l1=class extends o1{constructor({provider:e,params:t}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:t}){const r=t,n=c1(e),s=(await a1({provider:this.provider,fromBlock:n,toBlock:r})).map(i=>i.hash);this.addResults(s)}};var u1=l1;const d1=Qi,h1=Ki,{incrementHexInt:f1}=Nr;let p1=class extends d1{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const t=e,r=f1(e),n=await h1({provider:this.provider,fromBlock:r,toBlock:t}),s=[];for(const i of n)s.push(...i.transactions);this.addResults(s)}};var g1=p1;const _1=fl.Mutex,{createAsyncMiddleware:m1,createScaffoldMiddleware:b1}=Vi,y1=t1,w1=u1,v1=g1,{intToHex:jl,hexToInt:ui}=Nr;var E1=k1;function k1({blockTracker:e,provider:t}){let r=0,n={};const s=new _1,i=S1({mutex:s}),o=b1({eth_newFilter:i(di(l)),eth_newBlockFilter:i(di(c)),eth_newPendingTransactionFilter:i(di(d)),eth_uninstallFilter:i(Gr(g)),eth_getFilterChanges:i(Gr(u)),eth_getFilterLogs:i(Gr(f))}),a=async({oldBlock:k,newBlock:y})=>{if(n.length===0)return;const C=await s.acquire();try{await Promise.all(At(n).map(async S=>{try{await S.update({oldBlock:k,newBlock:y})}catch(x){console.error(x)}}))}catch(S){console.error(S)}C()};return o.newLogFilter=l,o.newBlockFilter=c,o.newPendingTransactionFilter=d,o.uninstallFilter=g,o.getFilterChanges=u,o.getFilterLogs=f,o.destroy=()=>{E()},o;async function l(k){const y=new y1({provider:t,params:k});return await w(y),y}async function c(){const k=new w1({provider:t});return await w(k),k}async function d(){const k=new v1({provider:t});return await w(k),k}async function u(k){const y=ui(k),C=n[y];if(!C)throw new Error(`No filter for index "${y}"`);return C.getChangesAndClear()}async function f(k){const y=ui(k),C=n[y];if(!C)throw new Error(`No filter for index "${y}"`);let S=[];return C.type==="log"&&(S=C.getAllResults()),S}async function g(k){const y=ui(k),C=!!n[y];return C&&await m(y),C}async function w(k){const y=At(n).length,C=await e.getLatestBlock();await k.initialize({currentBlock:C}),r++,n[r]=k,k.id=r,k.idHex=jl(r);const S=At(n).length;return v({prevFilterCount:y,newFilterCount:S}),r}async function m(k){const y=At(n).length;delete n[k];const C=At(n).length;v({prevFilterCount:y,newFilterCount:C})}async function E(){const k=At(n).length;n={},v({prevFilterCount:k,newFilterCount:0})}function v({prevFilterCount:k,newFilterCount:y}){if(k===0&&y>0){e.on("sync",a);return}if(k>0&&y===0){e.removeListener("sync",a);return}}}function di(e){return Gr(async(...t)=>{const r=await e(...t);return jl(r.id)})}function Gr(e){return m1(async(t,r)=>{const n=await e.apply(null,t.params);r.result=n})}function S1({mutex:e}){return t=>async(r,n,s,i)=>{(await e.acquire())(),t(r,n,s,i)}}function At(e,t){const r=[];for(let n in e)r.push(e[n]);return r}const C1=xr.default,{createAsyncMiddleware:pa,createScaffoldMiddleware:R1}=Vi,I1=E1,{unsafeRandomBytes:x1,incrementHexInt:M1}=Nr,A1=Ki;var P1=T1;function T1({blockTracker:e,provider:t}){const r={},n=I1({blockTracker:e,provider:t});let s=!1;const i=new C1,o=R1({eth_subscribe:pa(a),eth_unsubscribe:pa(l)});return o.destroy=d,{events:i,middleware:o};async function a(u,f){if(s)throw new Error("SubscriptionManager - attempting to use after destroying");const g=u.params[0],w=x1(16);let m;switch(g){case"newHeads":m=E({subId:w});break;case"logs":const k=u.params[1],y=await n.newLogFilter(k);m=v({subId:w,filter:y});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${g}"`)}r[w]=m,f.result=w;return;function E({subId:k}){const y={type:g,destroy:async()=>{e.removeListener("sync",y.update)},update:async({oldBlock:C,newBlock:S})=>{const x=S,j=M1(C);(await A1({provider:t,fromBlock:j,toBlock:x})).map(O1).filter(T=>T!==null).forEach(T=>{c(k,T)})}};return e.on("sync",y.update),y}function v({subId:k,filter:y}){return y.on("update",C=>c(k,C)),{type:g,destroy:async()=>await n.uninstallFilter(y.idHex)}}}async function l(u,f){if(s)throw new Error("SubscriptionManager - attempting to use after destroying");const g=u.params[0],w=r[g];if(!w){f.result=!1;return}delete r[g],await w.destroy(),f.result=!0}function c(u,f){i.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:u,result:f}})}function d(){i.removeAllListeners();for(const u in r)r[u].destroy(),delete r[u];s=!0}}function O1(e){return e==null?null:{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}Object.defineProperty(Nn,"__esModule",{value:!0});Nn.SubscriptionManager=void 0;const N1=Hc,L1=P1,ga=()=>{};class B1{constructor(t){const r=new N1.PollingBlockTracker({provider:t,pollingInterval:15e3,setSkipCacheFlag:!0}),{events:n,middleware:s}=L1({blockTracker:r,provider:t});this.events=n,this.subscriptionMiddleware=s}async handleRequest(t){const r={};return await this.subscriptionMiddleware(t,r,ga,ga),r}destroy(){this.subscriptionMiddleware.destroy()}}Nn.SubscriptionManager=B1;var Dl=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.CoinbaseWalletProvider=void 0;const j1=Dl(en),D1=Wl,W=dr,D=P,F1=gr,_a=ke,qr=Zt,ge=Jt,hi=Dl(J0),nr=Gt,H1=Wt,U1=Nn,ma="DefaultChainId",ba="DefaultJsonRpcUrl";class W1 extends D1.EventEmitter{constructor(t){var r,n;super(),this._filterPolyfill=new H1.FilterPolyfill(this),this._subscriptionManager=new U1.SubscriptionManager(this),this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1,this.setProviderInfo=this.setProviderInfo.bind(this),this.updateProviderInfo=this.updateProviderInfo.bind(this),this.getChainId=this.getChainId.bind(this),this.setAppInfo=this.setAppInfo.bind(this),this.enable=this.enable.bind(this),this.close=this.close.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this.request=this.request.bind(this),this._setAddresses=this._setAddresses.bind(this),this.scanQRCode=this.scanQRCode.bind(this),this.genericRequest=this.genericRequest.bind(this),this._chainIdFromOpts=t.chainId,this._jsonRpcUrlFromOpts=t.jsonRpcUrl,this._overrideIsMetaMask=t.overrideIsMetaMask,this._relayProvider=t.relayProvider,this._storage=t.storage,this._relayEventManager=t.relayEventManager,this.diagnostic=t.diagnosticLogger,this.reloadOnDisconnect=!0,this.isCoinbaseWallet=(r=t.overrideIsCoinbaseWallet)!==null&&r!==void 0?r:!0,this.isCoinbaseBrowser=(n=t.overrideIsCoinbaseBrowser)!==null&&n!==void 0?n:!1,this.qrUrl=t.qrUrl;const s=this.getChainId(),i=(0,D.prepend0x)(s.toString(16));this.emit("connect",{chainIdStr:i});const o=this._storage.getItem(_a.LOCAL_STORAGE_ADDRESSES_KEY);if(o){const a=o.split(" ");a[0]!==""&&(this._addresses=a.map(l=>(0,D.ensureAddressString)(l)),this.emit("accountsChanged",a))}this._subscriptionManager.events.on("notification",a=>{this.emit("message",{type:a.method,data:a.params})}),this._isAuthorized()&&this.initializeRelay(),window.addEventListener("message",a=>{var l;if(!(a.origin!==location.origin||a.source!==window)&&a.data.type==="walletLinkMessage"&&a.data.data.action==="dappChainSwitched"){const c=a.data.data.chainId,d=(l=a.data.data.jsonRpcUrl)!==null&&l!==void 0?l:this.jsonRpcUrl;this.updateProviderInfo(d,Number(c))}})}get selectedAddress(){return this._addresses[0]||void 0}get networkVersion(){return this.getChainId().toString(10)}get chainId(){return(0,D.prepend0x)(this.getChainId().toString(16))}get isWalletLink(){return!0}get isMetaMask(){return this._overrideIsMetaMask}get host(){return this.jsonRpcUrl}get connected(){return!0}isConnected(){return!0}get jsonRpcUrl(){var t;return(t=this._storage.getItem(ba))!==null&&t!==void 0?t:this._jsonRpcUrlFromOpts}set jsonRpcUrl(t){this._storage.setItem(ba,t)}disableReloadOnDisconnect(){this.reloadOnDisconnect=!1}setProviderInfo(t,r){this.isCoinbaseBrowser||(this._chainIdFromOpts=r,this._jsonRpcUrlFromOpts=t),this.updateProviderInfo(this.jsonRpcUrl,this.getChainId())}updateProviderInfo(t,r){this.jsonRpcUrl=t;const n=this.getChainId();this._storage.setItem(ma,r.toString(10)),((0,D.ensureIntNumber)(r)!==n||!this.hasMadeFirstChainChangedEmission)&&(this.emit("chainChanged",this.getChainId()),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(t,r,n,s,i,o){const a=await(await this.initializeRelay()).watchAsset(t,r,n,s,i,o==null?void 0:o.toString()).promise;return(0,ge.isErrorResponse)(a)?!1:!!a.result}async addEthereumChain(t,r,n,s,i,o){var a,l;if((0,D.ensureIntNumber)(t)===this.getChainId())return!1;const c=await this.initializeRelay(),d=c.inlineAddEthereumChain(t.toString());!this._isAuthorized()&&!d&&await c.requestEthereumAccounts().promise;const u=await c.addEthereumChain(t.toString(),r,i,n,s,o).promise;return(0,ge.isErrorResponse)(u)?!1:(((a=u.result)===null||a===void 0?void 0:a.isApproved)===!0&&this.updateProviderInfo(r[0],t),((l=u.result)===null||l===void 0?void 0:l.isApproved)===!0)}async switchEthereumChain(t){const r=await(await this.initializeRelay()).switchEthereumChain(t.toString(10),this.selectedAddress||void 0).promise;if((0,ge.isErrorResponse)(r)){if(!r.errorCode)return;throw r.errorCode===W.standardErrorCodes.provider.unsupportedChain?W.standardErrors.provider.unsupportedChain():W.standardErrors.provider.custom({message:r.errorMessage,code:r.errorCode})}const n=r.result;n.isApproved&&n.rpcUrl.length>0&&this.updateProviderInfo(n.rpcUrl,t)}setAppInfo(t,r){this.initializeRelay().then(n=>n.setAppInfo(t,r))}async enable(){var t;return(t=this.diagnostic)===null||t===void 0||t.log(nr.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::enable",addresses_length:this._addresses.length,sessionIdHash:this._relay?qr.Session.hash(this._relay.session.id):void 0}),this._isAuthorized()?[...this._addresses]:await this.send("eth_requestAccounts")}async close(){(await this.initializeRelay()).resetAndReload()}send(t,r){try{const n=this._send(t,r);if(n instanceof Promise)return n.catch(s=>{throw(0,W.serializeError)(s,t)})}catch(n){throw(0,W.serializeError)(n,t)}}_send(t,r){if(typeof t=="string"){const s=t,i=Array.isArray(r)?r:r!==void 0?[r]:[],o={jsonrpc:"2.0",id:0,method:s,params:i};return this._sendRequestAsync(o).then(a=>a.result)}if(typeof r=="function"){const s=t,i=r;return this._sendAsync(s,i)}if(Array.isArray(t))return t.map(s=>this._sendRequest(s));const n=t;return this._sendRequest(n)}async sendAsync(t,r){try{return this._sendAsync(t,r).catch(n=>{throw(0,W.serializeError)(n,t)})}catch(n){return Promise.reject((0,W.serializeError)(n,t))}}async _sendAsync(t,r){if(typeof r!="function")throw new Error("callback is required");if(Array.isArray(t)){const s=r;this._sendMultipleRequestsAsync(t).then(i=>s(null,i)).catch(i=>s(i,null));return}const n=r;return this._sendRequestAsync(t).then(s=>n(null,s)).catch(s=>n(s,null))}async request(t){try{return this._request(t).catch(r=>{throw(0,W.serializeError)(r,t.method)})}catch(r){return Promise.reject((0,W.serializeError)(r,t.method))}}async _request(t){if(!t||typeof t!="object"||Array.isArray(t))throw W.standardErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:t});const{method:r,params:n}=t;if(typeof r!="string"||r.length===0)throw W.standardErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:t});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw W.standardErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:t});const s=n===void 0?[]:n,i=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:r,params:s,jsonrpc:"2.0",id:i})).result}async scanQRCode(t){const r=await(await this.initializeRelay()).scanQRCode((0,D.ensureRegExpString)(t)).promise;if((0,ge.isErrorResponse)(r))throw(0,W.serializeError)(r.errorMessage,"scanQRCode");if(typeof r.result!="string")throw(0,W.serializeError)("result was not a string","scanQRCode");return r.result}async genericRequest(t,r){const n=await(await this.initializeRelay()).genericRequest(t,r).promise;if((0,ge.isErrorResponse)(n))throw(0,W.serializeError)(n.errorMessage,"generic");if(typeof n.result!="string")throw(0,W.serializeError)("result was not a string","generic");return n.result}async connectAndSignIn(t){var r;(r=this.diagnostic)===null||r===void 0||r.log(nr.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::connectAndSignIn",sessionIdHash:this._relay?qr.Session.hash(this._relay.session.id):void 0});let n;try{const i=await this.initializeRelay();if(!(i instanceof F1.MobileRelay))throw new Error("connectAndSignIn is only supported on mobile");if(n=await i.connectAndSignIn(t).promise,(0,ge.isErrorResponse)(n))throw new Error(n.errorMessage)}catch(i){throw typeof i.message=="string"&&i.message.match(/(denied|rejected)/i)?W.standardErrors.provider.userRejectedRequest("User denied account authorization"):i}if(!n.result)throw new Error("accounts received is empty");const{accounts:s}=n.result;return this._setAddresses(s),this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),n.result}async selectProvider(t){const r=await(await this.initializeRelay()).selectProvider(t).promise;if((0,ge.isErrorResponse)(r))throw(0,W.serializeError)(r.errorMessage,"selectProvider");if(typeof r.result!="string")throw(0,W.serializeError)("result was not a string","selectProvider");return r.result}supportsSubscriptions(){return!1}subscribe(){throw new Error("Subscriptions are not supported")}unsubscribe(){throw new Error("Subscriptions are not supported")}disconnect(){return!0}_sendRequest(t){const r={jsonrpc:"2.0",id:t.id},{method:n}=t;if(r.result=this._handleSynchronousMethods(t),r.result===void 0)throw new Error(`Coinbase Wallet does not support calling ${n} synchronously without a callback. Please provide a callback parameter to call ${n} asynchronously.`);return r}_setAddresses(t,r){if(!Array.isArray(t))throw new Error("addresses is not an array");const n=t.map(s=>(0,D.ensureAddressString)(s));JSON.stringify(n)!==JSON.stringify(this._addresses)&&(this._addresses=n,this.emit("accountsChanged",this._addresses),this._storage.setItem(_a.LOCAL_STORAGE_ADDRESSES_KEY,n.join(" ")))}_sendRequestAsync(t){return new Promise((r,n)=>{try{const s=this._handleSynchronousMethods(t);if(s!==void 0)return r({jsonrpc:"2.0",id:t.id,result:s});const i=this._handleAsynchronousFilterMethods(t);if(i!==void 0){i.then(a=>r(Object.assign(Object.assign({},a),{id:t.id}))).catch(a=>n(a));return}const o=this._handleSubscriptionMethods(t);if(o!==void 0){o.then(a=>r({jsonrpc:"2.0",id:t.id,result:a.result})).catch(a=>n(a));return}}catch(s){return n(s)}this._handleAsynchronousMethods(t).then(s=>s&&r(Object.assign(Object.assign({},s),{id:t.id}))).catch(s=>n(s))})}_sendMultipleRequestsAsync(t){return Promise.all(t.map(r=>this._sendRequestAsync(r)))}_handleSynchronousMethods(t){const{method:r}=t,n=t.params||[];switch(r){case"eth_accounts":return this._eth_accounts();case"eth_coinbase":return this._eth_coinbase();case"eth_uninstallFilter":return this._eth_uninstallFilter(n);case"net_version":return this._net_version();case"eth_chainId":return this._eth_chainId();default:return}}async _handleAsynchronousMethods(t){const{method:r}=t,n=t.params||[];switch(r){case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_sign":return this._eth_sign(n);case"eth_ecRecover":return this._eth_ecRecover(n);case"personal_sign":return this._personal_sign(n);case"personal_ecRecover":return this._personal_ecRecover(n);case"eth_signTransaction":return this._eth_signTransaction(n);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(n);case"eth_sendTransaction":return this._eth_sendTransaction(n);case"eth_signTypedData_v1":return this._eth_signTypedData_v1(n);case"eth_signTypedData_v2":return this._throwUnsupportedMethodError();case"eth_signTypedData_v3":return this._eth_signTypedData_v3(n);case"eth_signTypedData_v4":case"eth_signTypedData":return this._eth_signTypedData_v4(n);case"cbWallet_arbitrary":return this._cbwallet_arbitrary(n);case"wallet_addEthereumChain":return this._wallet_addEthereumChain(n);case"wallet_switchEthereumChain":return this._wallet_switchEthereumChain(n);case"wallet_watchAsset":return this._wallet_watchAsset(n)}return(await this.initializeRelay()).makeEthereumJSONRPCRequest(t,this.jsonRpcUrl).catch(s=>{var i;throw(s.code===W.standardErrorCodes.rpc.methodNotFound||s.code===W.standardErrorCodes.rpc.methodNotSupported)&&((i=this.diagnostic)===null||i===void 0||i.log(nr.EVENTS.METHOD_NOT_IMPLEMENTED,{method:t.method,sessionIdHash:this._relay?qr.Session.hash(this._relay.session.id):void 0})),s})}_handleAsynchronousFilterMethods(t){const{method:r}=t,n=t.params||[];switch(r){case"eth_newFilter":return this._eth_newFilter(n);case"eth_newBlockFilter":return this._eth_newBlockFilter();case"eth_newPendingTransactionFilter":return this._eth_newPendingTransactionFilter();case"eth_getFilterChanges":return this._eth_getFilterChanges(n);case"eth_getFilterLogs":return this._eth_getFilterLogs(n)}}_handleSubscriptionMethods(t){switch(t.method){case"eth_subscribe":case"eth_unsubscribe":return this._subscriptionManager.handleRequest(t)}}_isKnownAddress(t){try{const r=(0,D.ensureAddressString)(t);return this._addresses.map(n=>(0,D.ensureAddressString)(n)).includes(r)}catch{}return!1}_ensureKnownAddress(t){var r;if(!this._isKnownAddress(t))throw(r=this.diagnostic)===null||r===void 0||r.log(nr.EVENTS.UNKNOWN_ADDRESS_ENCOUNTERED),new Error("Unknown Ethereum address")}_prepareTransactionParams(t){const r=t.from?(0,D.ensureAddressString)(t.from):this.selectedAddress;if(!r)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(r);const n=t.to?(0,D.ensureAddressString)(t.to):null,s=t.value!=null?(0,D.ensureBN)(t.value):new j1.default(0),i=t.data?(0,D.ensureBuffer)(t.data):Buffer.alloc(0),o=t.nonce!=null?(0,D.ensureIntNumber)(t.nonce):null,a=t.gasPrice!=null?(0,D.ensureBN)(t.gasPrice):null,l=t.maxFeePerGas!=null?(0,D.ensureBN)(t.maxFeePerGas):null,c=t.maxPriorityFeePerGas!=null?(0,D.ensureBN)(t.maxPriorityFeePerGas):null,d=t.gas!=null?(0,D.ensureBN)(t.gas):null,u=t.chainId?(0,D.ensureIntNumber)(t.chainId):this.getChainId();return{fromAddress:r,toAddress:n,weiValue:s,data:i,nonce:o,gasPriceInWei:a,maxFeePerGas:l,maxPriorityFeePerGas:c,gasLimit:d,chainId:u}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw W.standardErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw W.standardErrors.provider.unsupportedMethod({})}async _signEthereumMessage(t,r,n,s){this._ensureKnownAddress(r);try{const i=await(await this.initializeRelay()).signEthereumMessage(t,r,n,s).promise;if((0,ge.isErrorResponse)(i))throw new Error(i.errorMessage);return{jsonrpc:"2.0",id:0,result:i.result}}catch(i){throw typeof i.message=="string"&&i.message.match(/(denied|rejected)/i)?W.standardErrors.provider.userRejectedRequest("User denied message signature"):i}}async _ethereumAddressFromSignedMessage(t,r,n){const s=await(await this.initializeRelay()).ethereumAddressFromSignedMessage(t,r,n).promise;if((0,ge.isErrorResponse)(s))throw new Error(s.errorMessage);return{jsonrpc:"2.0",id:0,result:s.result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,D.hexStringFromIntNumber)(this.getChainId())}getChainId(){const t=this._storage.getItem(ma);if(!t)return(0,D.ensureIntNumber)(this._chainIdFromOpts);const r=parseInt(t,10);return(0,D.ensureIntNumber)(r)}async _eth_requestAccounts(){var t;if((t=this.diagnostic)===null||t===void 0||t.log(nr.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::_eth_requestAccounts",addresses_length:this._addresses.length,sessionIdHash:this._relay?qr.Session.hash(this._relay.session.id):void 0}),this._isAuthorized())return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});let r;try{if(r=await(await this.initializeRelay()).requestEthereumAccounts().promise,(0,ge.isErrorResponse)(r))throw new Error(r.errorMessage)}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?W.standardErrors.provider.userRejectedRequest("User denied account authorization"):n}if(!r.result)throw new Error("accounts received is empty");return this._setAddresses(r.result),this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(t){this._requireAuthorization();const r=(0,D.ensureAddressString)(t[0]),n=(0,D.ensureBuffer)(t[1]);return this._signEthereumMessage(n,r,!1)}_eth_ecRecover(t){const r=(0,D.ensureBuffer)(t[0]),n=(0,D.ensureBuffer)(t[1]);return this._ethereumAddressFromSignedMessage(r,n,!1)}_personal_sign(t){this._requireAuthorization();const r=(0,D.ensureBuffer)(t[0]),n=(0,D.ensureAddressString)(t[1]);return this._signEthereumMessage(r,n,!0)}_personal_ecRecover(t){const r=(0,D.ensureBuffer)(t[0]),n=(0,D.ensureBuffer)(t[1]);return this._ethereumAddressFromSignedMessage(r,n,!0)}async _eth_signTransaction(t){this._requireAuthorization();const r=this._prepareTransactionParams(t[0]||{});try{const n=await(await this.initializeRelay()).signEthereumTransaction(r).promise;if((0,ge.isErrorResponse)(n))throw new Error(n.errorMessage);return{jsonrpc:"2.0",id:0,result:n.result}}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?W.standardErrors.provider.userRejectedRequest("User denied transaction signature"):n}}async _eth_sendRawTransaction(t){const r=(0,D.ensureBuffer)(t[0]),n=await(await this.initializeRelay()).submitEthereumTransaction(r,this.getChainId()).promise;if((0,ge.isErrorResponse)(n))throw new Error(n.errorMessage);return{jsonrpc:"2.0",id:0,result:n.result}}async _eth_sendTransaction(t){this._requireAuthorization();const r=this._prepareTransactionParams(t[0]||{});try{const n=await(await this.initializeRelay()).signAndSubmitEthereumTransaction(r).promise;if((0,ge.isErrorResponse)(n))throw new Error(n.errorMessage);return{jsonrpc:"2.0",id:0,result:n.result}}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?W.standardErrors.provider.userRejectedRequest("User denied transaction signature"):n}}async _eth_signTypedData_v1(t){this._requireAuthorization();const r=(0,D.ensureParsedJSONObject)(t[0]),n=(0,D.ensureAddressString)(t[1]);this._ensureKnownAddress(n);const s=hi.default.hashForSignTypedDataLegacy({data:r}),i=JSON.stringify(r,null,2);return this._signEthereumMessage(s,n,!1,i)}async _eth_signTypedData_v3(t){this._requireAuthorization();const r=(0,D.ensureAddressString)(t[0]),n=(0,D.ensureParsedJSONObject)(t[1]);this._ensureKnownAddress(r);const s=hi.default.hashForSignTypedData_v3({data:n}),i=JSON.stringify(n,null,2);return this._signEthereumMessage(s,r,!1,i)}async _eth_signTypedData_v4(t){this._requireAuthorization();const r=(0,D.ensureAddressString)(t[0]),n=(0,D.ensureParsedJSONObject)(t[1]);this._ensureKnownAddress(r);const s=hi.default.hashForSignTypedData_v4({data:n}),i=JSON.stringify(n,null,2);return this._signEthereumMessage(s,r,!1,i)}async _cbwallet_arbitrary(t){const r=t[0],n=t[1];if(typeof n!="string")throw new Error("parameter must be a string");if(typeof r!="object"||r===null)throw new Error("parameter must be an object");return{jsonrpc:"2.0",id:0,result:await this.genericRequest(r,n)}}async _wallet_addEthereumChain(t){var r,n,s,i;const o=t[0];if(((r=o.rpcUrls)===null||r===void 0?void 0:r.length)===0)return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!o.chainName||o.chainName.trim()==="")throw W.standardErrors.rpc.invalidParams("chainName is a required field");if(!o.nativeCurrency)throw W.standardErrors.rpc.invalidParams("nativeCurrency is a required field");const a=parseInt(o.chainId,16);return await this.addEthereumChain(a,(n=o.rpcUrls)!==null&&n!==void 0?n:[],(s=o.blockExplorerUrls)!==null&&s!==void 0?s:[],o.chainName,(i=o.iconUrls)!==null&&i!==void 0?i:[],o.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(t){const r=t[0];return await this.switchEthereumChain(parseInt(r.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(t){const r=Array.isArray(t)?t[0]:t;if(!r.type)throw W.standardErrors.rpc.invalidParams("Type is required");if((r==null?void 0:r.type)!=="ERC20")throw W.standardErrors.rpc.invalidParams(`Asset of type '${r.type}' is not supported`);if(!(r!=null&&r.options))throw W.standardErrors.rpc.invalidParams("Options are required");if(!(r!=null&&r.options.address))throw W.standardErrors.rpc.invalidParams("Address is required");const n=this.getChainId(),{address:s,symbol:i,image:o,decimals:a}=r.options;return{jsonrpc:"2.0",id:0,result:await this.watchAsset(r.type,s,i,a,o,n)}}_eth_uninstallFilter(t){const r=(0,D.ensureHexString)(t[0]);return this._filterPolyfill.uninstallFilter(r)}async _eth_newFilter(t){const r=t[0];return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newFilter(r)}}async _eth_newBlockFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newBlockFilter()}}async _eth_newPendingTransactionFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newPendingTransactionFilter()}}_eth_getFilterChanges(t){const r=(0,D.ensureHexString)(t[0]);return this._filterPolyfill.getFilterChanges(r)}_eth_getFilterLogs(t){const r=(0,D.ensureHexString)(t[0]);return this._filterPolyfill.getFilterLogs(r)}initializeRelay(){return this._relay?Promise.resolve(this._relay):this._relayProvider().then(t=>(t.setAccountsCallback((r,n)=>this._setAddresses(r,n)),t.setChainCallback((r,n)=>{this.updateProviderInfo(n,parseInt(r,10))}),t.setDappDefaultChainCallback(this._chainIdFromOpts),this._relay=t,t))}}Bt.CoinbaseWalletProvider=W1;var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.RelayEventManager=void 0;const V1=P;class q1{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const t=this._nextRequestId,r=(0,V1.prepend0x)(t.toString(16));return this.callbacks.get(r)&&this.callbacks.delete(r),t}}Gn.RelayEventManager=q1;Object.defineProperty(ar,"__esModule",{value:!0});ar.CoinbaseWalletSDK=void 0;const z1=nn,J1=sn,ya=P,$1=un,G1=Bt,Z1=gr,Q1=Rr,Y1=Gn,K1=vr,X1=_r,Fl=$t;class Zn{constructor(t){var r,n,s;this._appName="",this._appLogoUrl=null,this._relay=null,this._relayEventManager=null;const i=t.linkAPIUrl||J1.LINK_API_URL;typeof t.overrideIsMetaMask>"u"?this._overrideIsMetaMask=!1:this._overrideIsMetaMask=t.overrideIsMetaMask,this._overrideIsCoinbaseWallet=(r=t.overrideIsCoinbaseWallet)!==null&&r!==void 0?r:!0,this._overrideIsCoinbaseBrowser=(n=t.overrideIsCoinbaseBrowser)!==null&&n!==void 0?n:!1,this._diagnosticLogger=t.diagnosticLogger,this._reloadOnDisconnect=(s=t.reloadOnDisconnect)!==null&&s!==void 0?s:!0;const o=new URL(i),a=`${o.protocol}//${o.host}`;if(this._storage=new $1.ScopedLocalStorage(`-walletlink:${a}`),this._storage.setItem("version",Zn.VERSION),this.walletExtension||this.coinbaseBrowser)return;this._relayEventManager=new Y1.RelayEventManager;const l=(0,ya.isMobileWeb)(),c=t.uiConstructor||(u=>l?new Q1.MobileRelayUI(u):new K1.WalletLinkRelayUI(u)),d={linkAPIUrl:i,version:Fl.LIB_VERSION,darkMode:!!t.darkMode,uiConstructor:c,storage:this._storage,relayEventManager:this._relayEventManager,diagnosticLogger:this._diagnosticLogger,reloadOnDisconnect:this._reloadOnDisconnect,enableMobileWalletLink:t.enableMobileWalletLink};this._relay=l?new Z1.MobileRelay(d):new X1.WalletLinkRelay(d),this.setAppInfo(t.appName,t.appLogoUrl),!t.headlessMode&&this._relay.attachUI()}makeWeb3Provider(t="",r=1){const n=this.walletExtension;if(n)return this.isCipherProvider(n)||n.setProviderInfo(t,r),this._reloadOnDisconnect===!1&&typeof n.disableReloadOnDisconnect=="function"&&n.disableReloadOnDisconnect(),n;const s=this.coinbaseBrowser;if(s)return s;const i=this._relay;if(!i||!this._relayEventManager||!this._storage)throw new Error("Relay not initialized, should never happen");return t||i.setConnectDisabled(!0),new G1.CoinbaseWalletProvider({relayProvider:()=>Promise.resolve(i),relayEventManager:this._relayEventManager,storage:this._storage,jsonRpcUrl:t,chainId:r,qrUrl:this.getQrUrl(),diagnosticLogger:this._diagnosticLogger,overrideIsMetaMask:this._overrideIsMetaMask,overrideIsCoinbaseWallet:this._overrideIsCoinbaseWallet,overrideIsCoinbaseBrowser:this._overrideIsCoinbaseBrowser})}setAppInfo(t,r){var n;this._appName=t||"DApp",this._appLogoUrl=r||(0,ya.getFavicon)();const s=this.walletExtension;s?this.isCipherProvider(s)||s.setAppInfo(this._appName,this._appLogoUrl):(n=this._relay)===null||n===void 0||n.setAppInfo(this._appName,this._appLogoUrl)}disconnect(){var t;const r=this===null||this===void 0?void 0:this.walletExtension;r?r.close():(t=this._relay)===null||t===void 0||t.resetAndReload()}getQrUrl(){var t,r;return(r=(t=this._relay)===null||t===void 0?void 0:t.getQRCodeUrl())!==null&&r!==void 0?r:null}getCoinbaseWalletLogo(t,r=240){return(0,z1.walletLogo)(t,r)}get walletExtension(){var t;return(t=window.coinbaseWalletExtension)!==null&&t!==void 0?t:window.walletLinkExtension}get coinbaseBrowser(){var t,r;try{const n=(t=window.ethereum)!==null&&t!==void 0?t:(r=window.top)===null||r===void 0?void 0:r.ethereum;return n&&"isCoinbaseBrowser"in n&&n.isCoinbaseBrowser?n:void 0}catch{return}}isCipherProvider(t){return typeof t.isCipher=="boolean"&&t.isCipher}}ar.CoinbaseWalletSDK=Zn;Zn.VERSION=Fl.LIB_VERSION;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CoinbaseWalletProvider=e.CoinbaseWalletSDK=void 0;const t=ar,r=Bt;var n=ar;Object.defineProperty(e,"CoinbaseWalletSDK",{enumerable:!0,get:function(){return n.CoinbaseWalletSDK}});var s=Bt;Object.defineProperty(e,"CoinbaseWalletProvider",{enumerable:!0,get:function(){return s.CoinbaseWalletProvider}}),e.default=t.CoinbaseWalletSDK,typeof window<"u"&&(window.CoinbaseWalletSDK=t.CoinbaseWalletSDK,window.CoinbaseWalletProvider=r.CoinbaseWalletProvider,window.WalletLink=t.CoinbaseWalletSDK,window.WalletLinkProvider=r.CoinbaseWalletProvider)})(va);const eg=Vl(va),ng=Object.freeze(Object.defineProperty({__proto__:null,default:eg},Symbol.toStringTag,{value:"Module"}));export{ng as i};
