import{aF as tn,s as j,aG as yi,u as da,aH as tt,aI as _f,aJ as fa,aK as rl,aL as wf,aM as pa,aN as ba,aO as dc,aP as nn,aQ as Sf,S as Fn,a9 as Ef,aR as kf,aS as C}from"./index-sJz3qrJ4.js";import"./index-IIZuvEFS.js";import"./vendor-fjbkuLWx.js";var il={},hr={},mi={};Object.defineProperty(mi,"__esModule",{value:!0});mi.walletLogo=void 0;const xf=(e,t)=>{let n;switch(e){case"standard":return n=t,`data:image/svg+xml,%3Csvg width='${t}' height='${n}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return n=t,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${t}' height='${n}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return n=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return n=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return n=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return n=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;default:return n=t,`data:image/svg+xml,%3Csvg width='${t}' height='${n}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `}};mi.walletLogo=xf;var vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.LINK_API_URL=void 0;vi.LINK_API_URL="https://www.walletlink.org";var _i={};Object.defineProperty(_i,"__esModule",{value:!0});_i.ScopedLocalStorage=void 0;class Cf{constructor(t){this.scope=t}setItem(t,n){localStorage.setItem(this.scopedKey(t),n)}getItem(t){return localStorage.getItem(this.scopedKey(t))}removeItem(t){localStorage.removeItem(this.scopedKey(t))}clear(){const t=this.scopedKey(""),n=[];for(let r=0;r<localStorage.length;r++){const i=localStorage.key(r);typeof i=="string"&&i.startsWith(t)&&n.push(i)}n.forEach(r=>localStorage.removeItem(r))}scopedKey(t){return`${this.scope}:${t}`}}_i.ScopedLocalStorage=Cf;var En={},rn={};Object.defineProperty(rn,"__esModule",{value:!0});const Mf=da;function fc(e,t,n){try{Reflect.apply(e,t,n)}catch(r){setTimeout(()=>{throw r})}}function If(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}let Rf=class extends Mf.EventEmitter{emit(e,...t){let n=e==="error";const r=this._events;if(r!==void 0)n=n&&r.error===void 0;else if(!n)return!1;if(n){let s;if(t.length>0&&([s]=t),s instanceof Error)throw s;const o=new Error(`Unhandled error.${s?` (${s.message})`:""}`);throw o.context=s,o}const i=r[e];if(i===void 0)return!1;if(typeof i=="function")fc(i,this,t);else{const s=i.length,o=If(i);for(let a=0;a<s;a+=1)fc(o[a],this,t)}return!0}};rn.default=Rf;var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.EVENTS=void 0;Hn.EVENTS={STARTED_CONNECTING:"walletlink_sdk.started.connecting",CONNECTED_STATE_CHANGE:"walletlink_sdk.connected",DISCONNECTED:"walletlink_sdk.disconnected",METADATA_DESTROYED:"walletlink_sdk_metadata_destroyed",LINKED:"walletlink_sdk.linked",FAILURE:"walletlink_sdk.generic_failure",SESSION_CONFIG_RECEIVED:"walletlink_sdk.session_config_event_received",ETH_ACCOUNTS_STATE:"walletlink_sdk.eth_accounts_state",SESSION_STATE_CHANGE:"walletlink_sdk.session_state_change",UNLINKED_ERROR_STATE:"walletlink_sdk.unlinked_error_state",SKIPPED_CLEARING_SESSION:"walletlink_sdk.skipped_clearing_session",GENERAL_ERROR:"walletlink_sdk.general_error",WEB3_REQUEST:"walletlink_sdk.web3.request",WEB3_REQUEST_PUBLISHED:"walletlink_sdk.web3.request_published",WEB3_RESPONSE:"walletlink_sdk.web3.response",UNKNOWN_ADDRESS_ENCOUNTERED:"walletlink_sdk.unknown_address_encountered"};var mr={},ga={},Dt={};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.EthereumProviderError=Dt.EthereumRpcError=void 0;const Nf=kf;class sl extends Error{constructor(t,n,r){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=t,r!==void 0&&(this.data=r)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return Nf.default(this.serialize(),jf,2)}}Dt.EthereumRpcError=sl;class Af extends sl{constructor(t,n,r){if(!Tf(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,n,r)}}Dt.EthereumProviderError=Af;function Tf(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function jf(e,t){if(t!=="[Circular]")return t}var ya={},Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.errorValues=Bt.errorCodes=void 0;Bt.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};Bt.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=Bt,n=Dt,r=t.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",s={code:r,message:o(r)};e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function o(d,b=i){if(Number.isInteger(d)){const v=d.toString();if(l(t.errorValues,v))return t.errorValues[v].message;if(u(d))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return b}e.getMessageFromCode=o;function a(d){if(!Number.isInteger(d))return!1;const b=d.toString();return!!(t.errorValues[b]||u(d))}e.isValidCode=a;function c(d,{fallbackError:b=s,shouldIncludeStack:v=!1}={}){var m,w;if(!b||!Number.isInteger(b.code)||typeof b.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(d instanceof n.EthereumRpcError)return d.serialize();const y={};if(d&&typeof d=="object"&&!Array.isArray(d)&&l(d,"code")&&a(d.code)){const S=d;y.code=S.code,S.message&&typeof S.message=="string"?(y.message=S.message,l(S,"data")&&(y.data=S.data)):(y.message=o(y.code),y.data={originalError:h(d)})}else{y.code=b.code;const S=(m=d)===null||m===void 0?void 0:m.message;y.message=S&&typeof S=="string"?S:b.message,y.data={originalError:h(d)}}const E=(w=d)===null||w===void 0?void 0:w.stack;return v&&d&&E&&typeof E=="string"&&(y.stack=E),y}e.serializeError=c;function u(d){return d>=-32099&&d<=-32e3}function h(d){return d&&typeof d=="object"&&!Array.isArray(d)?Object.assign({},d):d}function l(d,b){return Object.prototype.hasOwnProperty.call(d,b)}})(ya);var wi={};Object.defineProperty(wi,"__esModule",{value:!0});wi.ethErrors=void 0;const ma=Dt,ol=ya,Ee=Bt;wi.ethErrors={rpc:{parse:e=>Fe(Ee.errorCodes.rpc.parse,e),invalidRequest:e=>Fe(Ee.errorCodes.rpc.invalidRequest,e),invalidParams:e=>Fe(Ee.errorCodes.rpc.invalidParams,e),methodNotFound:e=>Fe(Ee.errorCodes.rpc.methodNotFound,e),internal:e=>Fe(Ee.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Fe(t,e)},invalidInput:e=>Fe(Ee.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>Fe(Ee.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>Fe(Ee.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>Fe(Ee.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>Fe(Ee.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>Fe(Ee.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>Xn(Ee.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>Xn(Ee.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>Xn(Ee.errorCodes.provider.unsupportedMethod,e),disconnected:e=>Xn(Ee.errorCodes.provider.disconnected,e),chainDisconnected:e=>Xn(Ee.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:n,data:r}=e;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new ma.EthereumProviderError(t,n,r)}}};function Fe(e,t){const[n,r]=al(t);return new ma.EthereumRpcError(e,n||ol.getMessageFromCode(e),r)}function Xn(e,t){const[n,r]=al(t);return new ma.EthereumProviderError(e,n||ol.getMessageFromCode(e),r)}function al(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,n]}}return[]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=Dt;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const n=ya;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});const r=wi;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});const i=Bt;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(ga);var re={},Si={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Web3Method=void 0,function(t){t.requestEthereumAccounts="requestEthereumAccounts",t.signEthereumMessage="signEthereumMessage",t.signEthereumTransaction="signEthereumTransaction",t.submitEthereumTransaction="submitEthereumTransaction",t.ethereumAddressFromSignedMessage="ethereumAddressFromSignedMessage",t.scanQRCode="scanQRCode",t.generic="generic",t.childRequestEthereumAccounts="childRequestEthereumAccounts",t.addEthereumChain="addEthereumChain",t.switchEthereumChain="switchEthereumChain",t.makeEthereumJSONRPCRequest="makeEthereumJSONRPCRequest",t.watchAsset="watchAsset",t.selectProvider="selectProvider"}(e.Web3Method||(e.Web3Method={}))})(Si);Object.defineProperty(re,"__esModule",{value:!0});re.EthereumAddressFromSignedMessageResponse=re.SubmitEthereumTransactionResponse=re.SignEthereumTransactionResponse=re.SignEthereumMessageResponse=re.isRequestEthereumAccountsResponse=re.SelectProviderResponse=re.WatchAssetReponse=re.RequestEthereumAccountsResponse=re.SwitchEthereumChainResponse=re.AddEthereumChainResponse=re.isErrorResponse=void 0;const pt=Si;function Of(e){var t,n;return((t=e)===null||t===void 0?void 0:t.method)!==void 0&&((n=e)===null||n===void 0?void 0:n.errorMessage)!==void 0}re.isErrorResponse=Of;function Pf(e){return{method:pt.Web3Method.addEthereumChain,result:e}}re.AddEthereumChainResponse=Pf;function Lf(e){return{method:pt.Web3Method.switchEthereumChain,result:e}}re.SwitchEthereumChainResponse=Lf;function Df(e){return{method:pt.Web3Method.requestEthereumAccounts,result:e}}re.RequestEthereumAccountsResponse=Df;function Bf(e){return{method:pt.Web3Method.watchAsset,result:e}}re.WatchAssetReponse=Bf;function Ff(e){return{method:pt.Web3Method.selectProvider,result:e}}re.SelectProviderResponse=Ff;function Hf(e){return e&&e.method===pt.Web3Method.requestEthereumAccounts}re.isRequestEthereumAccountsResponse=Hf;function Vf(e){return{method:pt.Web3Method.signEthereumMessage,result:e}}re.SignEthereumMessageResponse=Vf;function zf(e){return{method:pt.Web3Method.signEthereumTransaction,result:e}}re.SignEthereumTransactionResponse=zf;function Wf(e){return{method:pt.Web3Method.submitEthereumTransaction,result:e}}re.SubmitEthereumTransactionResponse=Wf;function Uf(e){return{method:pt.Web3Method.ethereumAddressFromSignedMessage,result:e}}re.EthereumAddressFromSignedMessageResponse=Uf;var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.LIB_VERSION=void 0;Vn.LIB_VERSION="3.7.2";(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getErrorCode=e.serializeError=e.standardErrors=e.standardErrorMessage=e.standardErrorCodes=void 0;const t=ga,n=re,r=Vn;e.standardErrorCodes=Object.freeze(Object.assign(Object.assign({},t.errorCodes),{provider:Object.freeze(Object.assign(Object.assign({},t.errorCodes.provider),{unsupportedChain:4902}))}));function i(h){return h!==void 0?(0,t.getMessageFromCode)(h):"Unknown error"}e.standardErrorMessage=i,e.standardErrors=Object.freeze(Object.assign(Object.assign({},t.ethErrors),{provider:Object.freeze(Object.assign(Object.assign({},t.ethErrors.provider),{unsupportedChain:(h="")=>t.ethErrors.provider.custom({code:e.standardErrorCodes.provider.unsupportedChain,message:`Unrecognized chain ID ${h}. Try adding the chain using wallet_addEthereumChain first.`})}))}));function s(h,l){const d=(0,t.serializeError)(o(h),{shouldIncludeStack:!0}),b=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");b.searchParams.set("version",r.LIB_VERSION),b.searchParams.set("code",d.code.toString());const v=a(d.data,l);return v&&b.searchParams.set("method",v),b.searchParams.set("message",d.message),Object.assign(Object.assign({},d),{docUrl:b.href})}e.serializeError=s;function o(h){return typeof h=="string"?{message:h,code:e.standardErrorCodes.rpc.internal}:(0,n.isErrorResponse)(h)?Object.assign(Object.assign({},h),{message:h.errorMessage,code:h.errorCode,data:{method:h.method,result:h.result}}):h}function a(h,l){var d;const b=(d=h)===null||d===void 0?void 0:d.method;if(b)return b;if(l!==void 0)return typeof l=="string"?l:Array.isArray(l)?l.length>0?l[0].method:void 0:l.method}function c(h){var l;if(typeof h=="number")return h;if(u(h))return(l=h.code)!==null&&l!==void 0?l:h.errorCode}e.getErrorCode=c;function u(h){return typeof h=="object"&&h!==null&&(typeof h.code=="number"||typeof h.errorCode=="number")}})(mr);var zn={},cl={exports:{}},ul=tn.Buffer;function Ei(e,t){this._block=ul.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}Ei.prototype.update=function(e,t){typeof e=="string"&&(t=t||"utf8",e=ul.from(e,t));for(var n=this._block,r=this._blockSize,i=e.length,s=this._len,o=0;o<i;){for(var a=s%r,c=Math.min(i-o,r-a),u=0;u<c;u++)n[a+u]=e[o+u];s+=c,o+=c,s%r===0&&this._update(n)}return this._len+=i,this};Ei.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=this._len*8;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(n&4294967295)>>>0,i=(n-r)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var s=this._hash();return e?s.toString(e):s};Ei.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var Wn=Ei,qf=tt,ll=Wn,Jf=tn.Buffer,$f=[1518500249,1859775393,-1894007588,-899497514],Zf=new Array(80);function vr(){this.init(),this._w=Zf,ll.call(this,64,56)}qf(vr,ll);vr.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Gf(e){return e<<5|e>>>27}function Qf(e){return e<<30|e>>>2}function Yf(e,t,n,r){return e===0?t&n|~t&r:e===2?t&n|t&r|n&r:t^n^r}vr.prototype._update=function(e){for(var t=this._w,n=this._a|0,r=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)t[a]=e.readInt32BE(a*4);for(;a<80;++a)t[a]=t[a-3]^t[a-8]^t[a-14]^t[a-16];for(var c=0;c<80;++c){var u=~~(c/20),h=Gf(n)+Yf(u,r,i,s)+o+t[c]+$f[u]|0;o=s,s=i,i=Qf(r),r=n,n=h}this._a=n+this._a|0,this._b=r+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};vr.prototype._hash=function(){var e=Jf.allocUnsafe(20);return e.writeInt32BE(this._a|0,0),e.writeInt32BE(this._b|0,4),e.writeInt32BE(this._c|0,8),e.writeInt32BE(this._d|0,12),e.writeInt32BE(this._e|0,16),e};var Kf=vr,Xf=tt,hl=Wn,ep=tn.Buffer,tp=[1518500249,1859775393,-1894007588,-899497514],np=new Array(80);function _r(){this.init(),this._w=np,hl.call(this,64,56)}Xf(_r,hl);_r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rp(e){return e<<1|e>>>31}function ip(e){return e<<5|e>>>27}function sp(e){return e<<30|e>>>2}function op(e,t,n,r){return e===0?t&n|~t&r:e===2?t&n|t&r|n&r:t^n^r}_r.prototype._update=function(e){for(var t=this._w,n=this._a|0,r=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)t[a]=e.readInt32BE(a*4);for(;a<80;++a)t[a]=rp(t[a-3]^t[a-8]^t[a-14]^t[a-16]);for(var c=0;c<80;++c){var u=~~(c/20),h=ip(n)+op(u,r,i,s)+o+t[c]+tp[u]|0;o=s,s=i,i=sp(r),r=n,n=h}this._a=n+this._a|0,this._b=r+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};_r.prototype._hash=function(){var e=ep.allocUnsafe(20);return e.writeInt32BE(this._a|0,0),e.writeInt32BE(this._b|0,4),e.writeInt32BE(this._c|0,8),e.writeInt32BE(this._d|0,12),e.writeInt32BE(this._e|0,16),e};var ap=_r,cp=tt,dl=Wn,up=tn.Buffer,lp=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],hp=new Array(64);function wr(){this.init(),this._w=hp,dl.call(this,64,56)}cp(wr,dl);wr.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function dp(e,t,n){return n^e&(t^n)}function fp(e,t,n){return e&t|n&(e|t)}function pp(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function bp(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function gp(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function yp(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}wr.prototype._update=function(e){for(var t=this._w,n=this._a|0,r=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=this._f|0,c=this._g|0,u=this._h|0,h=0;h<16;++h)t[h]=e.readInt32BE(h*4);for(;h<64;++h)t[h]=yp(t[h-2])+t[h-7]+gp(t[h-15])+t[h-16]|0;for(var l=0;l<64;++l){var d=u+bp(o)+dp(o,a,c)+lp[l]+t[l]|0,b=pp(n)+fp(n,r,i)|0;u=c,c=a,a=o,o=s+d|0,s=i,i=r,r=n,n=d+b|0}this._a=n+this._a|0,this._b=r+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0,this._f=a+this._f|0,this._g=c+this._g|0,this._h=u+this._h|0};wr.prototype._hash=function(){var e=up.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e};var fl=wr,mp=tt,vp=fl,_p=Wn,wp=tn.Buffer,Sp=new Array(64);function ki(){this.init(),this._w=Sp,_p.call(this,64,56)}mp(ki,vp);ki.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};ki.prototype._hash=function(){var e=wp.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e};var Ep=ki,kp=tt,pl=Wn,xp=tn.Buffer,pc=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Cp=new Array(160);function Sr(){this.init(),this._w=Cp,pl.call(this,128,112)}kp(Sr,pl);Sr.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function bc(e,t,n){return n^e&(t^n)}function gc(e,t,n){return e&t|n&(e|t)}function yc(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function mc(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function Mp(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function Ip(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function Rp(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function Np(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function ge(e,t){return e>>>0<t>>>0?1:0}Sr.prototype._update=function(e){for(var t=this._w,n=this._ah|0,r=this._bh|0,i=this._ch|0,s=this._dh|0,o=this._eh|0,a=this._fh|0,c=this._gh|0,u=this._hh|0,h=this._al|0,l=this._bl|0,d=this._cl|0,b=this._dl|0,v=this._el|0,m=this._fl|0,w=this._gl|0,y=this._hl|0,E=0;E<32;E+=2)t[E]=e.readInt32BE(E*4),t[E+1]=e.readInt32BE(E*4+4);for(;E<160;E+=2){var S=t[E-30],k=t[E-15*2+1],x=Mp(S,k),N=Ip(k,S);S=t[E-2*2],k=t[E-2*2+1];var L=Rp(S,k),T=Np(k,S),M=t[E-7*2],$=t[E-7*2+1],K=t[E-16*2],V=t[E-16*2+1],Z=N+$|0,ne=x+M+ge(Z,N)|0;Z=Z+T|0,ne=ne+L+ge(Z,T)|0,Z=Z+V|0,ne=ne+K+ge(Z,V)|0,t[E]=ne,t[E+1]=Z}for(var oe=0;oe<160;oe+=2){ne=t[oe],Z=t[oe+1];var pe=gc(n,r,i),Ae=gc(h,l,d),Ze=yc(n,h),Te=yc(h,n),Ge=mc(o,v),Ct=mc(v,o),bt=pc[oe],Oe=pc[oe+1],Mt=bc(o,a,c),gt=bc(v,m,w),g=y+Ct|0,_=u+Ge+ge(g,y)|0;g=g+gt|0,_=_+Mt+ge(g,gt)|0,g=g+Oe|0,_=_+bt+ge(g,Oe)|0,g=g+Z|0,_=_+ne+ge(g,Z)|0;var R=Te+Ae|0,D=Ze+pe+ge(R,Te)|0;u=c,y=w,c=a,w=m,a=o,m=v,v=b+g|0,o=s+_+ge(v,b)|0,s=i,b=d,i=r,d=l,r=n,l=h,h=g+R|0,n=_+D+ge(h,g)|0}this._al=this._al+h|0,this._bl=this._bl+l|0,this._cl=this._cl+d|0,this._dl=this._dl+b|0,this._el=this._el+v|0,this._fl=this._fl+m|0,this._gl=this._gl+w|0,this._hl=this._hl+y|0,this._ah=this._ah+n+ge(this._al,h)|0,this._bh=this._bh+r+ge(this._bl,l)|0,this._ch=this._ch+i+ge(this._cl,d)|0,this._dh=this._dh+s+ge(this._dl,b)|0,this._eh=this._eh+o+ge(this._el,v)|0,this._fh=this._fh+a+ge(this._fl,m)|0,this._gh=this._gh+c+ge(this._gl,w)|0,this._hh=this._hh+u+ge(this._hl,y)|0};Sr.prototype._hash=function(){var e=xp.allocUnsafe(64);function t(n,r,i){e.writeInt32BE(n,i),e.writeInt32BE(r,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e};var bl=Sr,Ap=tt,Tp=bl,jp=Wn,Op=tn.Buffer,Pp=new Array(160);function xi(){this.init(),this._w=Pp,jp.call(this,128,112)}Ap(xi,Tp);xi.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};xi.prototype._hash=function(){var e=Op.allocUnsafe(48);function t(n,r,i){e.writeInt32BE(n,i),e.writeInt32BE(r,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e};var Lp=xi,sn=cl.exports=function(e){e=e.toLowerCase();var t=sn[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};sn.sha=Kf;sn.sha1=ap;sn.sha224=Ep;sn.sha256=fl;sn.sha384=Lp;sn.sha512=bl;var Dp=cl.exports,O={},gl=rl,yl=wf,Bp=yl(gl("String.prototype.indexOf")),Fp=function(e,t){var n=gl(e,!!t);return typeof n=="function"&&Bp(e,".prototype.")>-1?yl(n):n},va=typeof Map=="function"&&Map.prototype,fo=Object.getOwnPropertyDescriptor&&va?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,si=va&&fo&&typeof fo.get=="function"?fo.get:null,vc=va&&Map.prototype.forEach,_a=typeof Set=="function"&&Set.prototype,po=Object.getOwnPropertyDescriptor&&_a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,oi=_a&&po&&typeof po.get=="function"?po.get:null,_c=_a&&Set.prototype.forEach,Hp=typeof WeakMap=="function"&&WeakMap.prototype,ir=Hp?WeakMap.prototype.has:null,Vp=typeof WeakSet=="function"&&WeakSet.prototype,sr=Vp?WeakSet.prototype.has:null,zp=typeof WeakRef=="function"&&WeakRef.prototype,wc=zp?WeakRef.prototype.deref:null,Wp=Boolean.prototype.valueOf,Up=Object.prototype.toString,qp=Function.prototype.toString,Jp=String.prototype.match,wa=String.prototype.slice,Pt=String.prototype.replace,$p=String.prototype.toUpperCase,Sc=String.prototype.toLowerCase,ml=RegExp.prototype.test,Ec=Array.prototype.concat,ct=Array.prototype.join,Zp=Array.prototype.slice,kc=Math.floor,Uo=typeof BigInt=="function"?BigInt.prototype.valueOf:null,bo=Object.getOwnPropertySymbols,qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,kn=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ce=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===kn||!0)?Symbol.toStringTag:null,vl=Object.prototype.propertyIsEnumerable,xc=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function Cc(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||ml.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var r=e<0?-kc(-e):kc(e);if(r!==e){var i=String(r),s=wa.call(t,i.length+1);return Pt.call(i,n,"$&_")+"."+Pt.call(Pt.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Pt.call(t,n,"$&_")}var Jo=pa,Mc=Jo.custom,Ic=wl(Mc)?Mc:null,Gp=function e(t,n,r,i){var s=n||{};if(Tt(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Tt(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Tt(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Tt(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Tt(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return El(t,s);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var c=String(t);return a?Cc(t,c):c}if(typeof t=="bigint"){var u=String(t)+"n";return a?Cc(t,u):u}var h=typeof s.depth>"u"?5:s.depth;if(typeof r>"u"&&(r=0),r>=h&&h>0&&typeof t=="object")return $o(t)?"[Array]":"[Object]";var l=f0(s,r);if(typeof i>"u")i=[];else if(Sl(i,t)>=0)return"[Circular]";function d(Z,ne,oe){if(ne&&(i=Zp.call(i),i.push(ne)),oe){var pe={depth:s.depth};return Tt(s,"quoteStyle")&&(pe.quoteStyle=s.quoteStyle),e(Z,pe,r+1,i)}return e(Z,s,r+1,i)}if(typeof t=="function"&&!Rc(t)){var b=i0(t),v=zr(t,d);return"[Function"+(b?": "+b:" (anonymous)")+"]"+(v.length>0?" { "+ct.call(v,", ")+" }":"")}if(wl(t)){var m=kn?Pt.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):qo.call(t);return typeof t=="object"&&!kn?er(m):m}if(l0(t)){for(var w="<"+Sc.call(String(t.nodeName)),y=t.attributes||[],E=0;E<y.length;E++)w+=" "+y[E].name+"="+_l(Qp(y[E].value),"double",s);return w+=">",t.childNodes&&t.childNodes.length&&(w+="..."),w+="</"+Sc.call(String(t.nodeName))+">",w}if($o(t)){if(t.length===0)return"[]";var S=zr(t,d);return l&&!d0(S)?"["+Zo(S,l)+"]":"[ "+ct.call(S,", ")+" ]"}if(Kp(t)){var k=zr(t,d);return!("cause"in Error.prototype)&&"cause"in t&&!vl.call(t,"cause")?"{ ["+String(t)+"] "+ct.call(Ec.call("[cause]: "+d(t.cause),k),", ")+" }":k.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+ct.call(k,", ")+" }"}if(typeof t=="object"&&o){if(Ic&&typeof t[Ic]=="function"&&Jo)return Jo(t,{depth:h-r});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(s0(t)){var x=[];return vc&&vc.call(t,function(Z,ne){x.push(d(ne,t,!0)+" => "+d(Z,t))}),Nc("Map",si.call(t),x,l)}if(c0(t)){var N=[];return _c&&_c.call(t,function(Z){N.push(d(Z,t))}),Nc("Set",oi.call(t),N,l)}if(o0(t))return go("WeakMap");if(u0(t))return go("WeakSet");if(a0(t))return go("WeakRef");if(e0(t))return er(d(Number(t)));if(n0(t))return er(d(Uo.call(t)));if(t0(t))return er(Wp.call(t));if(Xp(t))return er(d(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===j)return"{ [object globalThis] }";if(!Yp(t)&&!Rc(t)){var L=zr(t,d),T=xc?xc(t)===Object.prototype:t instanceof Object||t.constructor===Object,M=t instanceof Object?"":"null prototype",$=!T&&Ce&&Object(t)===t&&Ce in t?wa.call(zt(t),8,-1):M?"Object":"",K=T||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",V=K+($||M?"["+ct.call(Ec.call([],$||[],M||[]),": ")+"] ":"");return L.length===0?V+"{}":l?V+"{"+Zo(L,l)+"}":V+"{ "+ct.call(L,", ")+" }"}return String(t)};function _l(e,t,n){var r=(n.quoteStyle||t)==="double"?'"':"'";return r+e+r}function Qp(e){return Pt.call(String(e),/"/g,"&quot;")}function $o(e){return zt(e)==="[object Array]"&&(!Ce||!(typeof e=="object"&&Ce in e))}function Yp(e){return zt(e)==="[object Date]"&&(!Ce||!(typeof e=="object"&&Ce in e))}function Rc(e){return zt(e)==="[object RegExp]"&&(!Ce||!(typeof e=="object"&&Ce in e))}function Kp(e){return zt(e)==="[object Error]"&&(!Ce||!(typeof e=="object"&&Ce in e))}function Xp(e){return zt(e)==="[object String]"&&(!Ce||!(typeof e=="object"&&Ce in e))}function e0(e){return zt(e)==="[object Number]"&&(!Ce||!(typeof e=="object"&&Ce in e))}function t0(e){return zt(e)==="[object Boolean]"&&(!Ce||!(typeof e=="object"&&Ce in e))}function wl(e){if(kn)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!qo)return!1;try{return qo.call(e),!0}catch{}return!1}function n0(e){if(!e||typeof e!="object"||!Uo)return!1;try{return Uo.call(e),!0}catch{}return!1}var r0=Object.prototype.hasOwnProperty||function(e){return e in this};function Tt(e,t){return r0.call(e,t)}function zt(e){return Up.call(e)}function i0(e){if(e.name)return e.name;var t=Jp.call(qp.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function Sl(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function s0(e){if(!si||!e||typeof e!="object")return!1;try{si.call(e);try{oi.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function o0(e){if(!ir||!e||typeof e!="object")return!1;try{ir.call(e,ir);try{sr.call(e,sr)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function a0(e){if(!wc||!e||typeof e!="object")return!1;try{return wc.call(e),!0}catch{}return!1}function c0(e){if(!oi||!e||typeof e!="object")return!1;try{oi.call(e);try{si.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function u0(e){if(!sr||!e||typeof e!="object")return!1;try{sr.call(e,sr);try{ir.call(e,ir)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function l0(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function El(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return El(wa.call(e,0,t.maxStringLength),t)+r}var i=Pt.call(Pt.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,h0);return _l(i,"single",t)}function h0(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+$p.call(t.toString(16))}function er(e){return"Object("+e+")"}function go(e){return e+" { ? }"}function Nc(e,t,n,r){var i=r?Zo(n,r):ct.call(n,", ");return e+" ("+t+") {"+i+"}"}function d0(e){for(var t=0;t<e.length;t++)if(Sl(e[t],`
`)>=0)return!1;return!0}function f0(e,t){var n;if(e.indent==="	")n="	";else if(typeof e.indent=="number"&&e.indent>0)n=ct.call(Array(e.indent+1)," ");else return null;return{base:n,prev:ct.call(Array(t+1),n)}}function Zo(e,t){if(e.length===0)return"";var n=`
`+t.prev+t.base;return n+ct.call(e,","+n)+`
`+t.prev}function zr(e,t){var n=$o(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=Tt(e,i)?t(e[i],e):""}var s=typeof bo=="function"?bo(e):[],o;if(kn){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var c in e)Tt(e,c)&&(n&&String(Number(c))===c&&c<e.length||kn&&o["$"+c]instanceof Symbol||(ml.call(/[^\w$]/,c)?r.push(t(c,e)+": "+t(e[c],e)):r.push(c+": "+t(e[c],e))));if(typeof bo=="function")for(var u=0;u<s.length;u++)vl.call(e,s[u])&&r.push("["+t(s[u])+"]: "+t(e[s[u]],e));return r}var Sa=rl,Un=Fp,p0=Gp,b0=Sa("%TypeError%"),Wr=Sa("%WeakMap%",!0),Ur=Sa("%Map%",!0),g0=Un("WeakMap.prototype.get",!0),y0=Un("WeakMap.prototype.set",!0),m0=Un("WeakMap.prototype.has",!0),v0=Un("Map.prototype.get",!0),_0=Un("Map.prototype.set",!0),w0=Un("Map.prototype.has",!0),Ea=function(e,t){for(var n=e,r;(r=n.next)!==null;n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r},S0=function(e,t){var n=Ea(e,t);return n&&n.value},E0=function(e,t,n){var r=Ea(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}},k0=function(e,t){return!!Ea(e,t)},x0=function(){var e,t,n,r={assert:function(i){if(!r.has(i))throw new b0("Side channel does not contain "+p0(i))},get:function(i){if(Wr&&i&&(typeof i=="object"||typeof i=="function")){if(e)return g0(e,i)}else if(Ur){if(t)return v0(t,i)}else if(n)return S0(n,i)},has:function(i){if(Wr&&i&&(typeof i=="object"||typeof i=="function")){if(e)return m0(e,i)}else if(Ur){if(t)return w0(t,i)}else if(n)return k0(n,i);return!1},set:function(i,s){Wr&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new Wr),y0(e,i,s)):Ur?(t||(t=new Ur),_0(t,i,s)):(n||(n={key:{},next:null}),E0(n,i,s))}};return r},C0=String.prototype.replace,M0=/%20/g,yo={RFC1738:"RFC1738",RFC3986:"RFC3986"},ka={default:yo.RFC3986,formatters:{RFC1738:function(e){return C0.call(e,M0,"+")},RFC3986:function(e){return String(e)}},RFC1738:yo.RFC1738,RFC3986:yo.RFC3986},I0=ka,mo=Object.prototype.hasOwnProperty,$t=Array.isArray,rt=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),R0=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if($t(n)){for(var r=[],i=0;i<n.length;++i)typeof n[i]<"u"&&r.push(n[i]);t.obj[t.prop]=r}}},kl=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)typeof e[r]<"u"&&(n[r]=e[r]);return n},N0=function e(t,n,r){if(!n)return t;if(typeof n!="object"){if($t(t))t.push(n);else if(t&&typeof t=="object")(r&&(r.plainObjects||r.allowPrototypes)||!mo.call(Object.prototype,n))&&(t[n]=!0);else return[t,n];return t}if(!t||typeof t!="object")return[t].concat(n);var i=t;return $t(t)&&!$t(n)&&(i=kl(t,r)),$t(t)&&$t(n)?(n.forEach(function(s,o){if(mo.call(t,o)){var a=t[o];a&&typeof a=="object"&&s&&typeof s=="object"?t[o]=e(a,s,r):t.push(s)}else t[o]=s}),t):Object.keys(n).reduce(function(s,o){var a=n[o];return mo.call(s,o)?s[o]=e(s[o],a,r):s[o]=a,s},i)},A0=function(e,t){return Object.keys(t).reduce(function(n,r){return n[r]=t[r],n},e)},T0=function(e,t,n){var r=e.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},j0=function(e,t,n,r,i){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var o="",a=0;a<s.length;++a){var c=s.charCodeAt(a);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||i===I0.RFC1738&&(c===40||c===41)){o+=s.charAt(a);continue}if(c<128){o=o+rt[c];continue}if(c<2048){o=o+(rt[192|c>>6]+rt[128|c&63]);continue}if(c<55296||c>=57344){o=o+(rt[224|c>>12]+rt[128|c>>6&63]+rt[128|c&63]);continue}a+=1,c=65536+((c&1023)<<10|s.charCodeAt(a)&1023),o+=rt[240|c>>18]+rt[128|c>>12&63]+rt[128|c>>6&63]+rt[128|c&63]}return o},O0=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],s=i.obj[i.prop],o=Object.keys(s),a=0;a<o.length;++a){var c=o[a],u=s[c];typeof u=="object"&&u!==null&&n.indexOf(u)===-1&&(t.push({obj:s,prop:c}),n.push(u))}return R0(t),e},P0=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},L0=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},D0=function(e,t){return[].concat(e,t)},B0=function(e,t){if($t(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},xl={arrayToObject:kl,assign:A0,combine:D0,compact:O0,decode:T0,encode:j0,isBuffer:L0,isRegExp:P0,maybeMap:B0,merge:N0},Cl=x0,Xr=xl,or=ka,F0=Object.prototype.hasOwnProperty,Ac={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},vt=Array.isArray,H0=Array.prototype.push,Ml=function(e,t){H0.apply(e,vt(t)?t:[t])},V0=Date.prototype.toISOString,Tc=or.default,xe={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Xr.encode,encodeValuesOnly:!1,format:Tc,formatter:or.formatters[Tc],indices:!1,serializeDate:function(e){return V0.call(e)},skipNulls:!1,strictNullHandling:!1},z0=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},vo={},W0=function e(t,n,r,i,s,o,a,c,u,h,l,d,b,v,m,w){for(var y=t,E=w,S=0,k=!1;(E=E.get(vo))!==void 0&&!k;){var x=E.get(t);if(S+=1,typeof x<"u"){if(x===S)throw new RangeError("Cyclic object value");k=!0}typeof E.get(vo)>"u"&&(S=0)}if(typeof c=="function"?y=c(n,y):y instanceof Date?y=l(y):r==="comma"&&vt(y)&&(y=Xr.maybeMap(y,function(pe){return pe instanceof Date?l(pe):pe})),y===null){if(s)return a&&!v?a(n,xe.encoder,m,"key",d):n;y=""}if(z0(y)||Xr.isBuffer(y)){if(a){var N=v?n:a(n,xe.encoder,m,"key",d);return[b(N)+"="+b(a(y,xe.encoder,m,"value",d))]}return[b(n)+"="+b(String(y))]}var L=[];if(typeof y>"u")return L;var T;if(r==="comma"&&vt(y))v&&a&&(y=Xr.maybeMap(y,a)),T=[{value:y.length>0?y.join(",")||null:void 0}];else if(vt(c))T=c;else{var M=Object.keys(y);T=u?M.sort(u):M}for(var $=i&&vt(y)&&y.length===1?n+"[]":n,K=0;K<T.length;++K){var V=T[K],Z=typeof V=="object"&&typeof V.value<"u"?V.value:y[V];if(!(o&&Z===null)){var ne=vt(y)?typeof r=="function"?r($,V):$:$+(h?"."+V:"["+V+"]");w.set(t,S);var oe=Cl();oe.set(vo,w),Ml(L,e(Z,ne,r,i,s,o,r==="comma"&&v&&vt(y)?null:a,c,u,h,l,d,b,v,m,oe))}}return L},U0=function(e){if(!e)return xe;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||xe.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=or.default;if(typeof e.format<"u"){if(!F0.call(or.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=or.formatters[n],i=xe.filter;return(typeof e.filter=="function"||vt(e.filter))&&(i=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:xe.addQueryPrefix,allowDots:typeof e.allowDots>"u"?xe.allowDots:!!e.allowDots,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:xe.charsetSentinel,delimiter:typeof e.delimiter>"u"?xe.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:xe.encode,encoder:typeof e.encoder=="function"?e.encoder:xe.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:xe.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:xe.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:xe.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:xe.strictNullHandling}},q0=function(e,t){var n=e,r=U0(t),i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):vt(r.filter)&&(s=r.filter,i=s);var o=[];if(typeof n!="object"||n===null)return"";var a;t&&t.arrayFormat in Ac?a=t.arrayFormat:t&&"indices"in t?a=t.indices?"indices":"repeat":a="indices";var c=Ac[a];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=c==="comma"&&t&&t.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);for(var h=Cl(),l=0;l<i.length;++l){var d=i[l];r.skipNulls&&n[d]===null||Ml(o,W0(n[d],d,c,u,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,h))}var b=o.join(r.delimiter),v=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),b.length>0?v+b:""},xn=xl,Go=Object.prototype.hasOwnProperty,J0=Array.isArray,ye={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:xn.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},$0=function(e){return e.replace(/&#(\d+);/g,function(t,n){return String.fromCharCode(parseInt(n,10))})},Il=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},Z0="utf8=%26%2310003%3B",G0="utf8=%E2%9C%93",Q0=function(e,t){var n={__proto__:null},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,s=r.split(t.delimiter,i),o=-1,a,c=t.charset;if(t.charsetSentinel)for(a=0;a<s.length;++a)s[a].indexOf("utf8=")===0&&(s[a]===G0?c="utf-8":s[a]===Z0&&(c="iso-8859-1"),o=a,a=s.length);for(a=0;a<s.length;++a)if(a!==o){var u=s[a],h=u.indexOf("]="),l=h===-1?u.indexOf("="):h+1,d,b;l===-1?(d=t.decoder(u,ye.decoder,c,"key"),b=t.strictNullHandling?null:""):(d=t.decoder(u.slice(0,l),ye.decoder,c,"key"),b=xn.maybeMap(Il(u.slice(l+1),t),function(v){return t.decoder(v,ye.decoder,c,"value")})),b&&t.interpretNumericEntities&&c==="iso-8859-1"&&(b=$0(b)),u.indexOf("[]=")>-1&&(b=J0(b)?[b]:b),Go.call(n,d)?n[d]=xn.combine(n[d],b):n[d]=b}return n},Y0=function(e,t,n,r){for(var i=r?t:Il(t,n),s=e.length-1;s>=0;--s){var o,a=e[s];if(a==="[]"&&n.parseArrays)o=[].concat(i);else{o=n.plainObjects?Object.create(null):{};var c=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=parseInt(c,10);!n.parseArrays&&c===""?o={0:i}:!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(o=[],o[u]=i):c!=="__proto__"&&(o[c]=i)}i=o}return i},K0=function(e,t,n,r){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,a=n.depth>0&&s.exec(i),c=a?i.slice(0,a.index):i,u=[];if(c){if(!n.plainObjects&&Go.call(Object.prototype,c)&&!n.allowPrototypes)return;u.push(c)}for(var h=0;n.depth>0&&(a=o.exec(i))!==null&&h<n.depth;){if(h+=1,!n.plainObjects&&Go.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+i.slice(a.index)+"]"),Y0(u,t,n,r)}},X0=function(e){if(!e)return ye;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?ye.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?ye.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:ye.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:ye.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:ye.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:ye.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:ye.comma,decoder:typeof e.decoder=="function"?e.decoder:ye.decoder,delimiter:typeof e.delimiter=="string"||xn.isRegExp(e.delimiter)?e.delimiter:ye.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:ye.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:ye.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:ye.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:ye.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:ye.strictNullHandling}},eb=function(e,t){var n=X0(t);if(e===""||e===null||typeof e>"u")return n.plainObjects?Object.create(null):{};for(var r=typeof e=="string"?Q0(e,n):e,i=n.plainObjects?Object.create(null):{},s=Object.keys(r),o=0;o<s.length;++o){var a=s[o],c=K0(a,r[a],n,typeof e=="string");i=xn.merge(i,c,n)}return n.allowSparse===!0?i:xn.compact(i)},tb=q0,nb=eb,rb=ka,ib={formats:rb,parse:nb,stringify:tb},Er={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProviderType=e.RegExpString=e.IntNumber=e.BigIntString=e.AddressString=e.HexString=e.OpaqueType=void 0;function t(){return r=>r}e.OpaqueType=t,e.HexString=t(),e.AddressString=t(),e.BigIntString=t();function n(r){return Math.floor(r)}e.IntNumber=n,e.RegExpString=t(),function(r){r.CoinbaseWallet="CoinbaseWallet",r.MetaMask="MetaMask",r.Unselected=""}(e.ProviderType||(e.ProviderType={}))})(Er);var sb=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(O,"__esModule",{value:!0});O.isInIFrame=O.createQrUrl=O.getFavicon=O.range=O.isBigNumber=O.ensureParsedJSONObject=O.ensureBN=O.ensureRegExpString=O.ensureIntNumber=O.ensureBuffer=O.ensureAddressString=O.ensureEvenLengthHexString=O.ensureHexString=O.isHexString=O.prepend0x=O.strip0x=O.has0xPrefix=O.hexStringFromIntNumber=O.intNumberFromHexString=O.bigIntStringFromBN=O.hexStringFromBuffer=O.hexStringToUint8Array=O.uint8ArrayToHex=O.randomBytesHex=void 0;const jt=sb(yi),ob=ib,on=mr,qe=Er,Rl=/^[0-9]*$/,Nl=/^[a-f0-9]*$/;function ab(e){return Al(crypto.getRandomValues(new Uint8Array(e)))}O.randomBytesHex=ab;function Al(e){return[...e].map(t=>t.toString(16).padStart(2,"0")).join("")}O.uint8ArrayToHex=Al;function cb(e){return new Uint8Array(e.match(/.{1,2}/g).map(t=>parseInt(t,16)))}O.hexStringToUint8Array=cb;function ub(e,t=!1){const n=e.toString("hex");return(0,qe.HexString)(t?"0x"+n:n)}O.hexStringFromBuffer=ub;function lb(e){return(0,qe.BigIntString)(e.toString(10))}O.bigIntStringFromBN=lb;function hb(e){return(0,qe.IntNumber)(new jt.default(xr(e,!1),16).toNumber())}O.intNumberFromHexString=hb;function db(e){return(0,qe.HexString)("0x"+new jt.default(e).toString(16))}O.hexStringFromIntNumber=db;function xa(e){return e.startsWith("0x")||e.startsWith("0X")}O.has0xPrefix=xa;function Ci(e){return xa(e)?e.slice(2):e}O.strip0x=Ci;function Tl(e){return xa(e)?"0x"+e.slice(2):"0x"+e}O.prepend0x=Tl;function kr(e){if(typeof e!="string")return!1;const t=Ci(e).toLowerCase();return Nl.test(t)}O.isHexString=kr;function jl(e,t=!1){if(typeof e=="string"){const n=Ci(e).toLowerCase();if(Nl.test(n))return(0,qe.HexString)(t?"0x"+n:n)}throw on.standardErrors.rpc.invalidParams(`"${String(e)}" is not a hexadecimal string`)}O.ensureHexString=jl;function xr(e,t=!1){let n=jl(e,!1);return n.length%2===1&&(n=(0,qe.HexString)("0"+n)),t?(0,qe.HexString)("0x"+n):n}O.ensureEvenLengthHexString=xr;function fb(e){if(typeof e=="string"){const t=Ci(e).toLowerCase();if(kr(t)&&t.length===40)return(0,qe.AddressString)(Tl(t))}throw on.standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(e)}`)}O.ensureAddressString=fb;function pb(e){if(Buffer.isBuffer(e))return e;if(typeof e=="string")if(kr(e)){const t=xr(e,!1);return Buffer.from(t,"hex")}else return Buffer.from(e,"utf8");throw on.standardErrors.rpc.invalidParams(`Not binary data: ${String(e)}`)}O.ensureBuffer=pb;function Ol(e){if(typeof e=="number"&&Number.isInteger(e))return(0,qe.IntNumber)(e);if(typeof e=="string"){if(Rl.test(e))return(0,qe.IntNumber)(Number(e));if(kr(e))return(0,qe.IntNumber)(new jt.default(xr(e,!1),16).toNumber())}throw on.standardErrors.rpc.invalidParams(`Not an integer: ${String(e)}`)}O.ensureIntNumber=Ol;function bb(e){if(e instanceof RegExp)return(0,qe.RegExpString)(e.toString());throw on.standardErrors.rpc.invalidParams(`Not a RegExp: ${String(e)}`)}O.ensureRegExpString=bb;function gb(e){if(e!==null&&(jt.default.isBN(e)||Pl(e)))return new jt.default(e.toString(10),10);if(typeof e=="number")return new jt.default(Ol(e));if(typeof e=="string"){if(Rl.test(e))return new jt.default(e,10);if(kr(e))return new jt.default(xr(e,!1),16)}throw on.standardErrors.rpc.invalidParams(`Not an integer: ${String(e)}`)}O.ensureBN=gb;function yb(e){if(typeof e=="string")return JSON.parse(e);if(typeof e=="object")return e;throw on.standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(e)}`)}O.ensureParsedJSONObject=yb;function Pl(e){if(e==null||typeof e.constructor!="function")return!1;const{constructor:t}=e;return typeof t.config=="function"&&typeof t.EUCLID=="number"}O.isBigNumber=Pl;function mb(e,t){return Array.from({length:t-e},(n,r)=>e+r)}O.range=mb;function vb(){const e=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:t,host:n}=document.location,r=e?e.getAttribute("href"):null;return!r||r.startsWith("javascript:")?null:r.startsWith("http://")||r.startsWith("https://")||r.startsWith("data:")?r:r.startsWith("//")?t+r:`${t}//${n}${r}`}O.getFavicon=vb;function _b(e,t,n,r,i,s){const o=r?"parent-id":"id",a=(0,ob.stringify)({[o]:e,secret:t,server:n,v:i,chainId:s});return`${n}/#/link?${a}`}O.createQrUrl=_b;function wb(){try{return window.frameElement!==null}catch{return!1}}O.isInIFrame=wb;Object.defineProperty(zn,"__esModule",{value:!0});zn.Session=void 0;const jc=Dp,Oc=O,Pc="session:id",Lc="session:secret",Dc="session:linked";class Ca{constructor(t,n,r,i){this._storage=t,this._id=n||(0,Oc.randomBytesHex)(16),this._secret=r||(0,Oc.randomBytesHex)(32),this._key=new jc.sha256().update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!i}static load(t){const n=t.getItem(Pc),r=t.getItem(Dc),i=t.getItem(Lc);return n&&i?new Ca(t,n,i,r==="1"):null}static hash(t){return new jc.sha256().update(t).digest("hex")}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(t){this._linked=t,this.persistLinked()}save(){return this._storage.setItem(Pc,this._id),this._storage.setItem(Lc,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(Dc,this._linked?"1":"0")}}zn.Session=Ca;var et={};Object.defineProperty(et,"__esModule",{value:!0});et.WalletSDKRelayAbstract=et.APP_VERSION_KEY=et.LOCAL_STORAGE_ADDRESSES_KEY=et.WALLET_USER_NAME_KEY=void 0;const Bc=mr;et.WALLET_USER_NAME_KEY="walletUsername";et.LOCAL_STORAGE_ADDRESSES_KEY="Addresses";et.APP_VERSION_KEY="AppVersion";class Sb{async makeEthereumJSONRPCRequest(t,n){if(!n)throw new Error("Error: No jsonRpcUrl provided");return window.fetch(n,{method:"POST",body:JSON.stringify(t),mode:"cors",headers:{"Content-Type":"application/json"}}).then(r=>r.json()).then(r=>{if(!r)throw Bc.standardErrors.rpc.parse({});const i=r,{error:s}=i;if(s)throw(0,Bc.serializeError)(s,t.method);return i})}}et.WalletSDKRelayAbstract=Sb;var Ll={};const Fc=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];Ll.p1600=function(e){for(let t=0;t<24;++t){const n=e[0]^e[10]^e[20]^e[30]^e[40],r=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],s=e[3]^e[13]^e[23]^e[33]^e[43],o=e[4]^e[14]^e[24]^e[34]^e[44],a=e[5]^e[15]^e[25]^e[35]^e[45],c=e[6]^e[16]^e[26]^e[36]^e[46],u=e[7]^e[17]^e[27]^e[37]^e[47],h=e[8]^e[18]^e[28]^e[38]^e[48],l=e[9]^e[19]^e[29]^e[39]^e[49];let d=h^(i<<1|s>>>31),b=l^(s<<1|i>>>31);const v=e[0]^d,m=e[1]^b,w=e[10]^d,y=e[11]^b,E=e[20]^d,S=e[21]^b,k=e[30]^d,x=e[31]^b,N=e[40]^d,L=e[41]^b;d=n^(o<<1|a>>>31),b=r^(a<<1|o>>>31);const T=e[2]^d,M=e[3]^b,$=e[12]^d,K=e[13]^b,V=e[22]^d,Z=e[23]^b,ne=e[32]^d,oe=e[33]^b,pe=e[42]^d,Ae=e[43]^b;d=i^(c<<1|u>>>31),b=s^(u<<1|c>>>31);const Ze=e[4]^d,Te=e[5]^b,Ge=e[14]^d,Ct=e[15]^b,bt=e[24]^d,Oe=e[25]^b,Mt=e[34]^d,gt=e[35]^b,g=e[44]^d,_=e[45]^b;d=o^(h<<1|l>>>31),b=a^(l<<1|h>>>31);const R=e[6]^d,D=e[7]^b,q=e[16]^d,f=e[17]^b,p=e[26]^d,I=e[27]^b,A=e[36]^d,ie=e[37]^b,z=e[46]^d,X=e[47]^b;d=c^(n<<1|r>>>31),b=u^(r<<1|n>>>31);const Wt=e[8]^d,ln=e[9]^b,Yn=e[18]^d,Vr=e[19]^b,Kn=e[28]^d,hn=e[29]^b,dn=e[38]^d,fn=e[39]^b,It=e[48]^d,yt=e[49]^b,nt=v,ys=m,ms=y<<4|w>>>28,vs=w<<4|y>>>28,_s=E<<3|S>>>29,ws=S<<3|E>>>29,Ss=x<<9|k>>>23,Es=k<<9|x>>>23,ks=N<<18|L>>>14,xs=L<<18|N>>>14,Cs=T<<1|M>>>31,Ms=M<<1|T>>>31,Is=K<<12|$>>>20,Rs=$<<12|K>>>20,Ns=V<<10|Z>>>22,As=Z<<10|V>>>22,Ts=oe<<13|ne>>>19,js=ne<<13|oe>>>19,Os=pe<<2|Ae>>>30,Ps=Ae<<2|pe>>>30,Ls=Te<<30|Ze>>>2,Ds=Ze<<30|Te>>>2,Bs=Ge<<6|Ct>>>26,Fs=Ct<<6|Ge>>>26,Hs=Oe<<11|bt>>>21,Vs=bt<<11|Oe>>>21,zs=Mt<<15|gt>>>17,Ws=gt<<15|Mt>>>17,Us=_<<29|g>>>3,qs=g<<29|_>>>3,Js=R<<28|D>>>4,$s=D<<28|R>>>4,Zs=f<<23|q>>>9,Gs=q<<23|f>>>9,Qs=p<<25|I>>>7,Ys=I<<25|p>>>7,Ks=A<<21|ie>>>11,Xs=ie<<21|A>>>11,eo=X<<24|z>>>8,to=z<<24|X>>>8,no=Wt<<27|ln>>>5,ro=ln<<27|Wt>>>5,io=Yn<<20|Vr>>>12,so=Vr<<20|Yn>>>12,oo=hn<<7|Kn>>>25,ao=Kn<<7|hn>>>25,co=dn<<8|fn>>>24,uo=fn<<8|dn>>>24,lo=It<<14|yt>>>18,ho=yt<<14|It>>>18;e[0]=nt^~Is&Hs,e[1]=ys^~Rs&Vs,e[10]=Js^~io&_s,e[11]=$s^~so&ws,e[20]=Cs^~Bs&Qs,e[21]=Ms^~Fs&Ys,e[30]=no^~ms&Ns,e[31]=ro^~vs&As,e[40]=Ls^~Zs&oo,e[41]=Ds^~Gs&ao,e[2]=Is^~Hs&Ks,e[3]=Rs^~Vs&Xs,e[12]=io^~_s&Ts,e[13]=so^~ws&js,e[22]=Bs^~Qs&co,e[23]=Fs^~Ys&uo,e[32]=ms^~Ns&zs,e[33]=vs^~As&Ws,e[42]=Zs^~oo&Ss,e[43]=Gs^~ao&Es,e[4]=Hs^~Ks&lo,e[5]=Vs^~Xs&ho,e[14]=_s^~Ts&Us,e[15]=ws^~js&qs,e[24]=Qs^~co&ks,e[25]=Ys^~uo&xs,e[34]=Ns^~zs&eo,e[35]=As^~Ws&to,e[44]=oo^~Ss&Os,e[45]=ao^~Es&Ps,e[6]=Ks^~lo&nt,e[7]=Xs^~ho&ys,e[16]=Ts^~Us&Js,e[17]=js^~qs&$s,e[26]=co^~ks&Cs,e[27]=uo^~xs&Ms,e[36]=zs^~eo&no,e[37]=Ws^~to&ro,e[46]=Ss^~Os&Ls,e[47]=Es^~Ps&Ds,e[8]=lo^~nt&Is,e[9]=ho^~ys&Rs,e[18]=Us^~Js&io,e[19]=qs^~$s&so,e[28]=ks^~Cs&Bs,e[29]=xs^~Ms&Fs,e[38]=eo^~no&ms,e[39]=to^~ro&vs,e[48]=Os^~Ls&Zs,e[49]=Ps^~Ds&Gs,e[0]^=Fc[t*2],e[1]^=Fc[t*2+1]}};const ai=Ll;function qn(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}qn.prototype.initialize=function(e,t){for(let n=0;n<50;++n)this.state[n]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};qn.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(ai.p1600(this.state),this.count=0)};qn.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&ai.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),ai.p1600(this.state),this.count=0,this.squeezing=!0};qn.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);const t=Buffer.alloc(e);for(let n=0;n<e;++n)t[n]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(ai.p1600(this.state),this.count=0);return t};qn.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};var Eb=qn,Qo={exports:{}},Dl=da.EventEmitter,_o,Hc;function kb(){if(Hc)return _o;Hc=1;function e(v,m){var w=Object.keys(v);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(v);m&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(v,E).enumerable})),w.push.apply(w,y)}return w}function t(v){for(var m=1;m<arguments.length;m++){var w=arguments[m]!=null?arguments[m]:{};m%2?e(Object(w),!0).forEach(function(y){n(v,y,w[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(w)):e(Object(w)).forEach(function(y){Object.defineProperty(v,y,Object.getOwnPropertyDescriptor(w,y))})}return v}function n(v,m,w){return m=o(m),m in v?Object.defineProperty(v,m,{value:w,enumerable:!0,configurable:!0,writable:!0}):v[m]=w,v}function r(v,m){if(!(v instanceof m))throw new TypeError("Cannot call a class as a function")}function i(v,m){for(var w=0;w<m.length;w++){var y=m[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,o(y.key),y)}}function s(v,m,w){return m&&i(v.prototype,m),w&&i(v,w),Object.defineProperty(v,"prototype",{writable:!1}),v}function o(v){var m=a(v,"string");return typeof m=="symbol"?m:String(m)}function a(v,m){if(typeof v!="object"||v===null)return v;var w=v[Symbol.toPrimitive];if(w!==void 0){var y=w.call(v,m||"default");if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(v)}var c=ba,u=c.Buffer,h=pa,l=h.inspect,d=l&&l.custom||"inspect";function b(v,m,w){u.prototype.copy.call(v,m,w)}return _o=function(){function v(){r(this,v),this.head=null,this.tail=null,this.length=0}return s(v,[{key:"push",value:function(m){var w={data:m,next:null};this.length>0?this.tail.next=w:this.head=w,this.tail=w,++this.length}},{key:"unshift",value:function(m){var w={data:m,next:this.head};this.length===0&&(this.tail=w),this.head=w,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var w=this.head,y=""+w.data;w=w.next;)y+=m+w.data;return y}},{key:"concat",value:function(m){if(this.length===0)return u.alloc(0);for(var w=u.allocUnsafe(m>>>0),y=this.head,E=0;y;)b(y.data,w,E),E+=y.data.length,y=y.next;return w}},{key:"consume",value:function(m,w){var y;return m<this.head.data.length?(y=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):m===this.head.data.length?y=this.shift():y=w?this._getString(m):this._getBuffer(m),y}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var w=this.head,y=1,E=w.data;for(m-=E.length;w=w.next;){var S=w.data,k=m>S.length?S.length:m;if(k===S.length?E+=S:E+=S.slice(0,m),m-=k,m===0){k===S.length?(++y,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=S.slice(k));break}++y}return this.length-=y,E}},{key:"_getBuffer",value:function(m){var w=u.allocUnsafe(m),y=this.head,E=1;for(y.data.copy(w),m-=y.data.length;y=y.next;){var S=y.data,k=m>S.length?S.length:m;if(S.copy(w,w.length-m,0,k),m-=k,m===0){k===S.length?(++E,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=S.slice(k));break}++E}return this.length-=E,w}},{key:d,value:function(m,w){return l(this,t(t({},w),{},{depth:0,customInspect:!1}))}}]),v}(),_o}function xb(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Yo,this,e)):process.nextTick(Yo,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(s){!t&&s?n._writableState?n._writableState.errorEmitted?process.nextTick(ei,n):(n._writableState.errorEmitted=!0,process.nextTick(Vc,n,s)):process.nextTick(Vc,n,s):t?(process.nextTick(ei,n),t(s)):process.nextTick(ei,n)}),this)}function Vc(e,t){Yo(e,t),ei(e)}function ei(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function Cb(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Yo(e,t){e.emit("error",t)}function Mb(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}var Bl={destroy:xb,undestroy:Cb,errorOrDestroy:Mb},an={};function Ib(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Fl={};function Je(e,t,n){n||(n=Error);function r(s,o,a){return typeof t=="string"?t:t(s,o,a)}var i=function(s){Ib(o,s);function o(a,c,u){return s.call(this,r(a,c,u))||this}return o}(n);i.prototype.name=n.name,i.prototype.code=e,Fl[e]=i}function zc(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(r){return String(r)}),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:n===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function Rb(e,t,n){return e.substr(!n||n<0?0:+n,t.length)===t}function Nb(e,t,n){return(n===void 0||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}function Ab(e,t,n){return typeof n!="number"&&(n=0),n+t.length>e.length?!1:e.indexOf(t,n)!==-1}Je("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);Je("ERR_INVALID_ARG_TYPE",function(e,t,n){var r;typeof t=="string"&&Rb(t,"not ")?(r="must not be",t=t.replace(/^not /,"")):r="must be";var i;if(Nb(e," argument"))i="The ".concat(e," ").concat(r," ").concat(zc(t,"type"));else{var s=Ab(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(s," ").concat(r," ").concat(zc(t,"type"))}return i+=". Received type ".concat(typeof n),i},TypeError);Je("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Je("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});Je("ERR_STREAM_PREMATURE_CLOSE","Premature close");Je("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});Je("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Je("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Je("ERR_STREAM_WRITE_AFTER_END","write after end");Je("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Je("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);Je("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");an.codes=Fl;var Tb=an.codes.ERR_INVALID_OPT_VALUE;function jb(e,t,n){return e.highWaterMark!=null?e.highWaterMark:t?e[n]:null}function Ob(e,t,n,r){var i=jb(t,r,n);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=r?n:"highWaterMark";throw new Tb(s,i)}return Math.floor(i)}return e.objectMode?16:16*1024}var Hl={getHighWaterMark:Ob},Pb=Lb;function Lb(e,t){if(wo("noDeprecation"))return e;var n=!1;function r(){if(!n){if(wo("throwDeprecation"))throw new Error(t);wo("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}return r}function wo(e){try{if(!j.localStorage)return!1}catch{return!1}var t=j.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}var So,Wc;function Vl(){if(Wc)return So;Wc=1,So=T;function e(g){var _=this;this.next=null,this.entry=null,this.finish=function(){gt(_,g)}}var t;T.WritableState=N;var n={deprecate:Pb},r=Dl,i=ba.Buffer,s=(typeof j<"u"?j:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(g){return i.from(g)}function a(g){return i.isBuffer(g)||g instanceof s}var c=Bl,u=Hl,h=u.getHighWaterMark,l=an.codes,d=l.ERR_INVALID_ARG_TYPE,b=l.ERR_METHOD_NOT_IMPLEMENTED,v=l.ERR_MULTIPLE_CALLBACK,m=l.ERR_STREAM_CANNOT_PIPE,w=l.ERR_STREAM_DESTROYED,y=l.ERR_STREAM_NULL_VALUES,E=l.ERR_STREAM_WRITE_AFTER_END,S=l.ERR_UNKNOWN_ENCODING,k=c.errorOrDestroy;tt(T,r);function x(){}function N(g,_,R){t=t||Cn(),g=g||{},typeof R!="boolean"&&(R=_ instanceof t),this.objectMode=!!g.objectMode,R&&(this.objectMode=this.objectMode||!!g.writableObjectMode),this.highWaterMark=h(this,g,"writableHighWaterMark",R),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var D=g.decodeStrings===!1;this.decodeStrings=!D,this.defaultEncoding=g.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(q){pe(_,q)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=g.emitClose!==!1,this.autoDestroy=!!g.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}N.prototype.getBuffer=function(){for(var g=this.bufferedRequest,_=[];g;)_.push(g),g=g.next;return _},function(){try{Object.defineProperty(N.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(g){return L.call(this,g)?!0:this!==T?!1:g&&g._writableState instanceof N}})):L=function(g){return g instanceof this};function T(g){t=t||Cn();var _=this instanceof t;if(!_&&!L.call(T,this))return new T(g);this._writableState=new N(g,this,_),this.writable=!0,g&&(typeof g.write=="function"&&(this._write=g.write),typeof g.writev=="function"&&(this._writev=g.writev),typeof g.destroy=="function"&&(this._destroy=g.destroy),typeof g.final=="function"&&(this._final=g.final)),r.call(this)}T.prototype.pipe=function(){k(this,new m)};function M(g,_){var R=new E;k(g,R),process.nextTick(_,R)}function $(g,_,R,D){var q;return R===null?q=new y:typeof R!="string"&&!_.objectMode&&(q=new d("chunk",["string","Buffer"],R)),q?(k(g,q),process.nextTick(D,q),!1):!0}T.prototype.write=function(g,_,R){var D=this._writableState,q=!1,f=!D.objectMode&&a(g);return f&&!i.isBuffer(g)&&(g=o(g)),typeof _=="function"&&(R=_,_=null),f?_="buffer":_||(_=D.defaultEncoding),typeof R!="function"&&(R=x),D.ending?M(this,R):(f||$(this,D,g,R))&&(D.pendingcb++,q=V(this,D,f,g,_,R)),q},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var g=this._writableState;g.corked&&(g.corked--,!g.writing&&!g.corked&&!g.bufferProcessing&&g.bufferedRequest&&Te(this,g))},T.prototype.setDefaultEncoding=function(g){if(typeof g=="string"&&(g=g.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((g+"").toLowerCase())>-1))throw new S(g);return this._writableState.defaultEncoding=g,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function K(g,_,R){return!g.objectMode&&g.decodeStrings!==!1&&typeof _=="string"&&(_=i.from(_,R)),_}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function V(g,_,R,D,q,f){if(!R){var p=K(_,D,q);D!==p&&(R=!0,q="buffer",D=p)}var I=_.objectMode?1:D.length;_.length+=I;var A=_.length<_.highWaterMark;if(A||(_.needDrain=!0),_.writing||_.corked){var ie=_.lastBufferedRequest;_.lastBufferedRequest={chunk:D,encoding:q,isBuf:R,callback:f,next:null},ie?ie.next=_.lastBufferedRequest:_.bufferedRequest=_.lastBufferedRequest,_.bufferedRequestCount+=1}else Z(g,_,!1,I,D,q,f);return A}function Z(g,_,R,D,q,f,p){_.writelen=D,_.writecb=p,_.writing=!0,_.sync=!0,_.destroyed?_.onwrite(new w("write")):R?g._writev(q,_.onwrite):g._write(q,f,_.onwrite),_.sync=!1}function ne(g,_,R,D,q){--_.pendingcb,R?(process.nextTick(q,D),process.nextTick(Oe,g,_),g._writableState.errorEmitted=!0,k(g,D)):(q(D),g._writableState.errorEmitted=!0,k(g,D),Oe(g,_))}function oe(g){g.writing=!1,g.writecb=null,g.length-=g.writelen,g.writelen=0}function pe(g,_){var R=g._writableState,D=R.sync,q=R.writecb;if(typeof q!="function")throw new v;if(oe(R),_)ne(g,R,D,_,q);else{var f=Ge(R)||g.destroyed;!f&&!R.corked&&!R.bufferProcessing&&R.bufferedRequest&&Te(g,R),D?process.nextTick(Ae,g,R,f,q):Ae(g,R,f,q)}}function Ae(g,_,R,D){R||Ze(g,_),_.pendingcb--,D(),Oe(g,_)}function Ze(g,_){_.length===0&&_.needDrain&&(_.needDrain=!1,g.emit("drain"))}function Te(g,_){_.bufferProcessing=!0;var R=_.bufferedRequest;if(g._writev&&R&&R.next){var D=_.bufferedRequestCount,q=new Array(D),f=_.corkedRequestsFree;f.entry=R;for(var p=0,I=!0;R;)q[p]=R,R.isBuf||(I=!1),R=R.next,p+=1;q.allBuffers=I,Z(g,_,!0,_.length,q,"",f.finish),_.pendingcb++,_.lastBufferedRequest=null,f.next?(_.corkedRequestsFree=f.next,f.next=null):_.corkedRequestsFree=new e(_),_.bufferedRequestCount=0}else{for(;R;){var A=R.chunk,ie=R.encoding,z=R.callback,X=_.objectMode?1:A.length;if(Z(g,_,!1,X,A,ie,z),R=R.next,_.bufferedRequestCount--,_.writing)break}R===null&&(_.lastBufferedRequest=null)}_.bufferedRequest=R,_.bufferProcessing=!1}T.prototype._write=function(g,_,R){R(new b("_write()"))},T.prototype._writev=null,T.prototype.end=function(g,_,R){var D=this._writableState;return typeof g=="function"?(R=g,g=null,_=null):typeof _=="function"&&(R=_,_=null),g!=null&&this.write(g,_),D.corked&&(D.corked=1,this.uncork()),D.ending||Mt(this,D,R),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Ge(g){return g.ending&&g.length===0&&g.bufferedRequest===null&&!g.finished&&!g.writing}function Ct(g,_){g._final(function(R){_.pendingcb--,R&&k(g,R),_.prefinished=!0,g.emit("prefinish"),Oe(g,_)})}function bt(g,_){!_.prefinished&&!_.finalCalled&&(typeof g._final=="function"&&!_.destroyed?(_.pendingcb++,_.finalCalled=!0,process.nextTick(Ct,g,_)):(_.prefinished=!0,g.emit("prefinish")))}function Oe(g,_){var R=Ge(_);if(R&&(bt(g,_),_.pendingcb===0&&(_.finished=!0,g.emit("finish"),_.autoDestroy))){var D=g._readableState;(!D||D.autoDestroy&&D.endEmitted)&&g.destroy()}return R}function Mt(g,_,R){_.ending=!0,Oe(g,_),R&&(_.finished?process.nextTick(R):g.once("finish",R)),_.ended=!0,g.writable=!1}function gt(g,_,R){var D=g.entry;for(g.entry=null;D;){var q=D.callback;_.pendingcb--,q(R),D=D.next}_.corkedRequestsFree.next=g}return Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(g){this._writableState&&(this._writableState.destroyed=g)}}),T.prototype.destroy=c.destroy,T.prototype._undestroy=c.undestroy,T.prototype._destroy=function(g,_){_(g)},So}var Eo,Uc;function Cn(){if(Uc)return Eo;Uc=1;var e=Object.keys||function(u){var h=[];for(var l in u)h.push(l);return h};Eo=o;var t=Wl(),n=Vl();tt(o,t);for(var r=e(n.prototype),i=0;i<r.length;i++){var s=r[i];o.prototype[s]||(o.prototype[s]=n.prototype[s])}function o(u){if(!(this instanceof o))return new o(u);t.call(this,u),n.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||process.nextTick(c,this)}function c(u){u.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(u){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=u,this._writableState.destroyed=u)}}),Eo}var qc=an.codes.ERR_STREAM_PREMATURE_CLOSE;function Db(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}function Bb(){}function Fb(e){return e.setHeader&&typeof e.abort=="function"}function zl(e,t,n){if(typeof t=="function")return zl(e,null,t);t||(t={}),n=Db(n||Bb);var r=t.readable||t.readable!==!1&&e.readable,i=t.writable||t.writable!==!1&&e.writable,s=function(){e.writable||a()},o=e._writableState&&e._writableState.finished,a=function(){i=!1,o=!0,r||n.call(e)},c=e._readableState&&e._readableState.endEmitted,u=function(){r=!1,c=!0,i||n.call(e)},h=function(b){n.call(e,b)},l=function(){var b;if(r&&!c)return(!e._readableState||!e._readableState.ended)&&(b=new qc),n.call(e,b);if(i&&!o)return(!e._writableState||!e._writableState.ended)&&(b=new qc),n.call(e,b)},d=function(){e.req.on("finish",a)};return Fb(e)?(e.on("complete",a),e.on("abort",l),e.req?d():e.on("request",d)):i&&!e._writableState&&(e.on("end",s),e.on("close",s)),e.on("end",u),e.on("finish",a),t.error!==!1&&e.on("error",h),e.on("close",l),function(){e.removeListener("complete",a),e.removeListener("abort",l),e.removeListener("request",d),e.req&&e.req.removeListener("finish",a),e.removeListener("end",s),e.removeListener("close",s),e.removeListener("finish",a),e.removeListener("end",u),e.removeListener("error",h),e.removeListener("close",l)}}var Ma=zl,ko,Jc;function Hb(){if(Jc)return ko;Jc=1;var e;function t(S,k,x){return k=n(k),k in S?Object.defineProperty(S,k,{value:x,enumerable:!0,configurable:!0,writable:!0}):S[k]=x,S}function n(S){var k=r(S,"string");return typeof k=="symbol"?k:String(k)}function r(S,k){if(typeof S!="object"||S===null)return S;var x=S[Symbol.toPrimitive];if(x!==void 0){var N=x.call(S,k||"default");if(typeof N!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(S)}var i=Ma,s=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),h=Symbol("handlePromise"),l=Symbol("stream");function d(S,k){return{value:S,done:k}}function b(S){var k=S[s];if(k!==null){var x=S[l].read();x!==null&&(S[u]=null,S[s]=null,S[o]=null,k(d(x,!1)))}}function v(S){process.nextTick(b,S)}function m(S,k){return function(x,N){S.then(function(){if(k[c]){x(d(void 0,!0));return}k[h](x,N)},N)}}var w=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((e={get stream(){return this[l]},next:function(){var S=this,k=this[a];if(k!==null)return Promise.reject(k);if(this[c])return Promise.resolve(d(void 0,!0));if(this[l].destroyed)return new Promise(function(T,M){process.nextTick(function(){S[a]?M(S[a]):T(d(void 0,!0))})});var x=this[u],N;if(x)N=new Promise(m(x,this));else{var L=this[l].read();if(L!==null)return Promise.resolve(d(L,!1));N=new Promise(this[h])}return this[u]=N,N}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var S=this;return new Promise(function(k,x){S[l].destroy(null,function(N){if(N){x(N);return}k(d(void 0,!0))})})}),e),w),E=function(S){var k,x=Object.create(y,(k={},t(k,l,{value:S,writable:!0}),t(k,s,{value:null,writable:!0}),t(k,o,{value:null,writable:!0}),t(k,a,{value:null,writable:!0}),t(k,c,{value:S._readableState.endEmitted,writable:!0}),t(k,h,{value:function(N,L){var T=x[l].read();T?(x[u]=null,x[s]=null,x[o]=null,N(d(T,!1))):(x[s]=N,x[o]=L)},writable:!0}),k));return x[u]=null,i(S,function(N){if(N&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"){var L=x[o];L!==null&&(x[u]=null,x[s]=null,x[o]=null,L(N)),x[a]=N;return}var T=x[s];T!==null&&(x[u]=null,x[s]=null,x[o]=null,T(d(void 0,!0))),x[c]=!0}),S.on("readable",v.bind(null,x)),x};return ko=E,ko}var $c,Zc;function Vb(){return Zc||(Zc=1,$c=function(){throw new Error("Readable.from is not available in the browser")}),$c}var xo,Gc;function Wl(){if(Gc)return xo;Gc=1,xo=M;var e;M.ReadableState=T,da.EventEmitter;var t=function(f,p){return f.listeners(p).length},n=Dl,r=ba.Buffer,i=(typeof j<"u"?j:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(f){return r.from(f)}function o(f){return r.isBuffer(f)||f instanceof i}var a=pa,c;a&&a.debuglog?c=a.debuglog("stream"):c=function(){};var u=kb(),h=Bl,l=Hl,d=l.getHighWaterMark,b=an.codes,v=b.ERR_INVALID_ARG_TYPE,m=b.ERR_STREAM_PUSH_AFTER_EOF,w=b.ERR_METHOD_NOT_IMPLEMENTED,y=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,E,S,k;tt(M,n);var x=h.errorOrDestroy,N=["error","close","destroy","pause","resume"];function L(f,p,I){if(typeof f.prependListener=="function")return f.prependListener(p,I);!f._events||!f._events[p]?f.on(p,I):Array.isArray(f._events[p])?f._events[p].unshift(I):f._events[p]=[I,f._events[p]]}function T(f,p,I){e=e||Cn(),f=f||{},typeof I!="boolean"&&(I=p instanceof e),this.objectMode=!!f.objectMode,I&&(this.objectMode=this.objectMode||!!f.readableObjectMode),this.highWaterMark=d(this,f,"readableHighWaterMark",I),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=f.emitClose!==!1,this.autoDestroy=!!f.autoDestroy,this.destroyed=!1,this.defaultEncoding=f.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,f.encoding&&(E||(E=dc.StringDecoder),this.decoder=new E(f.encoding),this.encoding=f.encoding)}function M(f){if(e=e||Cn(),!(this instanceof M))return new M(f);var p=this instanceof e;this._readableState=new T(f,this,p),this.readable=!0,f&&(typeof f.read=="function"&&(this._read=f.read),typeof f.destroy=="function"&&(this._destroy=f.destroy)),n.call(this)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(f){this._readableState&&(this._readableState.destroyed=f)}}),M.prototype.destroy=h.destroy,M.prototype._undestroy=h.undestroy,M.prototype._destroy=function(f,p){p(f)},M.prototype.push=function(f,p){var I=this._readableState,A;return I.objectMode?A=!0:typeof f=="string"&&(p=p||I.defaultEncoding,p!==I.encoding&&(f=r.from(f,p),p=""),A=!0),$(this,f,p,!1,A)},M.prototype.unshift=function(f){return $(this,f,null,!0,!1)};function $(f,p,I,A,ie){c("readableAddChunk",p);var z=f._readableState;if(p===null)z.reading=!1,pe(f,z);else{var X;if(ie||(X=V(z,p)),X)x(f,X);else if(z.objectMode||p&&p.length>0)if(typeof p!="string"&&!z.objectMode&&Object.getPrototypeOf(p)!==r.prototype&&(p=s(p)),A)z.endEmitted?x(f,new y):K(f,z,p,!0);else if(z.ended)x(f,new m);else{if(z.destroyed)return!1;z.reading=!1,z.decoder&&!I?(p=z.decoder.write(p),z.objectMode||p.length!==0?K(f,z,p,!1):Te(f,z)):K(f,z,p,!1)}else A||(z.reading=!1,Te(f,z))}return!z.ended&&(z.length<z.highWaterMark||z.length===0)}function K(f,p,I,A){p.flowing&&p.length===0&&!p.sync?(p.awaitDrain=0,f.emit("data",I)):(p.length+=p.objectMode?1:I.length,A?p.buffer.unshift(I):p.buffer.push(I),p.needReadable&&Ae(f)),Te(f,p)}function V(f,p){var I;return!o(p)&&typeof p!="string"&&p!==void 0&&!f.objectMode&&(I=new v("chunk",["string","Buffer","Uint8Array"],p)),I}M.prototype.isPaused=function(){return this._readableState.flowing===!1},M.prototype.setEncoding=function(f){E||(E=dc.StringDecoder);var p=new E(f);this._readableState.decoder=p,this._readableState.encoding=this._readableState.decoder.encoding;for(var I=this._readableState.buffer.head,A="";I!==null;)A+=p.write(I.data),I=I.next;return this._readableState.buffer.clear(),A!==""&&this._readableState.buffer.push(A),this._readableState.length=A.length,this};var Z=1073741824;function ne(f){return f>=Z?f=Z:(f--,f|=f>>>1,f|=f>>>2,f|=f>>>4,f|=f>>>8,f|=f>>>16,f++),f}function oe(f,p){return f<=0||p.length===0&&p.ended?0:p.objectMode?1:f!==f?p.flowing&&p.length?p.buffer.head.data.length:p.length:(f>p.highWaterMark&&(p.highWaterMark=ne(f)),f<=p.length?f:p.ended?p.length:(p.needReadable=!0,0))}M.prototype.read=function(f){c("read",f),f=parseInt(f,10);var p=this._readableState,I=f;if(f!==0&&(p.emittedReadable=!1),f===0&&p.needReadable&&((p.highWaterMark!==0?p.length>=p.highWaterMark:p.length>0)||p.ended))return c("read: emitReadable",p.length,p.ended),p.length===0&&p.ended?R(this):Ae(this),null;if(f=oe(f,p),f===0&&p.ended)return p.length===0&&R(this),null;var A=p.needReadable;c("need readable",A),(p.length===0||p.length-f<p.highWaterMark)&&(A=!0,c("length less than watermark",A)),p.ended||p.reading?(A=!1,c("reading or ended",A)):A&&(c("do read"),p.reading=!0,p.sync=!0,p.length===0&&(p.needReadable=!0),this._read(p.highWaterMark),p.sync=!1,p.reading||(f=oe(I,p)));var ie;return f>0?ie=_(f,p):ie=null,ie===null?(p.needReadable=p.length<=p.highWaterMark,f=0):(p.length-=f,p.awaitDrain=0),p.length===0&&(p.ended||(p.needReadable=!0),I!==f&&p.ended&&R(this)),ie!==null&&this.emit("data",ie),ie};function pe(f,p){if(c("onEofChunk"),!p.ended){if(p.decoder){var I=p.decoder.end();I&&I.length&&(p.buffer.push(I),p.length+=p.objectMode?1:I.length)}p.ended=!0,p.sync?Ae(f):(p.needReadable=!1,p.emittedReadable||(p.emittedReadable=!0,Ze(f)))}}function Ae(f){var p=f._readableState;c("emitReadable",p.needReadable,p.emittedReadable),p.needReadable=!1,p.emittedReadable||(c("emitReadable",p.flowing),p.emittedReadable=!0,process.nextTick(Ze,f))}function Ze(f){var p=f._readableState;c("emitReadable_",p.destroyed,p.length,p.ended),!p.destroyed&&(p.length||p.ended)&&(f.emit("readable"),p.emittedReadable=!1),p.needReadable=!p.flowing&&!p.ended&&p.length<=p.highWaterMark,g(f)}function Te(f,p){p.readingMore||(p.readingMore=!0,process.nextTick(Ge,f,p))}function Ge(f,p){for(;!p.reading&&!p.ended&&(p.length<p.highWaterMark||p.flowing&&p.length===0);){var I=p.length;if(c("maybeReadMore read 0"),f.read(0),I===p.length)break}p.readingMore=!1}M.prototype._read=function(f){x(this,new w("_read()"))},M.prototype.pipe=function(f,p){var I=this,A=this._readableState;switch(A.pipesCount){case 0:A.pipes=f;break;case 1:A.pipes=[A.pipes,f];break;default:A.pipes.push(f);break}A.pipesCount+=1,c("pipe count=%d opts=%j",A.pipesCount,p);var ie=(!p||p.end!==!1)&&f!==process.stdout&&f!==process.stderr,z=ie?Wt:It;A.endEmitted?process.nextTick(z):I.once("end",z),f.on("unpipe",X);function X(yt,nt){c("onunpipe"),yt===I&&nt&&nt.hasUnpiped===!1&&(nt.hasUnpiped=!0,Vr())}function Wt(){c("onend"),f.end()}var ln=Ct(I);f.on("drain",ln);var Yn=!1;function Vr(){c("cleanup"),f.removeListener("close",dn),f.removeListener("finish",fn),f.removeListener("drain",ln),f.removeListener("error",hn),f.removeListener("unpipe",X),I.removeListener("end",Wt),I.removeListener("end",It),I.removeListener("data",Kn),Yn=!0,A.awaitDrain&&(!f._writableState||f._writableState.needDrain)&&ln()}I.on("data",Kn);function Kn(yt){c("ondata");var nt=f.write(yt);c("dest.write",nt),nt===!1&&((A.pipesCount===1&&A.pipes===f||A.pipesCount>1&&q(A.pipes,f)!==-1)&&!Yn&&(c("false write response, pause",A.awaitDrain),A.awaitDrain++),I.pause())}function hn(yt){c("onerror",yt),It(),f.removeListener("error",hn),t(f,"error")===0&&x(f,yt)}L(f,"error",hn);function dn(){f.removeListener("finish",fn),It()}f.once("close",dn);function fn(){c("onfinish"),f.removeListener("close",dn),It()}f.once("finish",fn);function It(){c("unpipe"),I.unpipe(f)}return f.emit("pipe",I),A.flowing||(c("pipe resume"),I.resume()),f};function Ct(f){return function(){var p=f._readableState;c("pipeOnDrain",p.awaitDrain),p.awaitDrain&&p.awaitDrain--,p.awaitDrain===0&&t(f,"data")&&(p.flowing=!0,g(f))}}M.prototype.unpipe=function(f){var p=this._readableState,I={hasUnpiped:!1};if(p.pipesCount===0)return this;if(p.pipesCount===1)return f&&f!==p.pipes?this:(f||(f=p.pipes),p.pipes=null,p.pipesCount=0,p.flowing=!1,f&&f.emit("unpipe",this,I),this);if(!f){var A=p.pipes,ie=p.pipesCount;p.pipes=null,p.pipesCount=0,p.flowing=!1;for(var z=0;z<ie;z++)A[z].emit("unpipe",this,{hasUnpiped:!1});return this}var X=q(p.pipes,f);return X===-1?this:(p.pipes.splice(X,1),p.pipesCount-=1,p.pipesCount===1&&(p.pipes=p.pipes[0]),f.emit("unpipe",this,I),this)},M.prototype.on=function(f,p){var I=n.prototype.on.call(this,f,p),A=this._readableState;return f==="data"?(A.readableListening=this.listenerCount("readable")>0,A.flowing!==!1&&this.resume()):f==="readable"&&!A.endEmitted&&!A.readableListening&&(A.readableListening=A.needReadable=!0,A.flowing=!1,A.emittedReadable=!1,c("on readable",A.length,A.reading),A.length?Ae(this):A.reading||process.nextTick(Oe,this)),I},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(f,p){var I=n.prototype.removeListener.call(this,f,p);return f==="readable"&&process.nextTick(bt,this),I},M.prototype.removeAllListeners=function(f){var p=n.prototype.removeAllListeners.apply(this,arguments);return(f==="readable"||f===void 0)&&process.nextTick(bt,this),p};function bt(f){var p=f._readableState;p.readableListening=f.listenerCount("readable")>0,p.resumeScheduled&&!p.paused?p.flowing=!0:f.listenerCount("data")>0&&f.resume()}function Oe(f){c("readable nexttick read 0"),f.read(0)}M.prototype.resume=function(){var f=this._readableState;return f.flowing||(c("resume"),f.flowing=!f.readableListening,Mt(this,f)),f.paused=!1,this};function Mt(f,p){p.resumeScheduled||(p.resumeScheduled=!0,process.nextTick(gt,f,p))}function gt(f,p){c("resume",p.reading),p.reading||f.read(0),p.resumeScheduled=!1,f.emit("resume"),g(f),p.flowing&&!p.reading&&f.read(0)}M.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function g(f){var p=f._readableState;for(c("flow",p.flowing);p.flowing&&f.read()!==null;);}M.prototype.wrap=function(f){var p=this,I=this._readableState,A=!1;f.on("end",function(){if(c("wrapped end"),I.decoder&&!I.ended){var X=I.decoder.end();X&&X.length&&p.push(X)}p.push(null)}),f.on("data",function(X){if(c("wrapped data"),I.decoder&&(X=I.decoder.write(X)),!(I.objectMode&&X==null)&&!(!I.objectMode&&(!X||!X.length))){var Wt=p.push(X);Wt||(A=!0,f.pause())}});for(var ie in f)this[ie]===void 0&&typeof f[ie]=="function"&&(this[ie]=function(X){return function(){return f[X].apply(f,arguments)}}(ie));for(var z=0;z<N.length;z++)f.on(N[z],this.emit.bind(this,N[z]));return this._read=function(X){c("wrapped _read",X),A&&(A=!1,f.resume())},this},typeof Symbol=="function"&&(M.prototype[Symbol.asyncIterator]=function(){return S===void 0&&(S=Hb()),S(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(f){this._readableState&&(this._readableState.flowing=f)}}),M._fromList=_,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function _(f,p){if(p.length===0)return null;var I;return p.objectMode?I=p.buffer.shift():!f||f>=p.length?(p.decoder?I=p.buffer.join(""):p.buffer.length===1?I=p.buffer.first():I=p.buffer.concat(p.length),p.buffer.clear()):I=p.buffer.consume(f,p.decoder),I}function R(f){var p=f._readableState;c("endReadable",p.endEmitted),p.endEmitted||(p.ended=!0,process.nextTick(D,p,f))}function D(f,p){if(c("endReadableNT",f.endEmitted,f.length),!f.endEmitted&&f.length===0&&(f.endEmitted=!0,p.readable=!1,p.emit("end"),f.autoDestroy)){var I=p._writableState;(!I||I.autoDestroy&&I.finished)&&p.destroy()}}typeof Symbol=="function"&&(M.from=function(f,p){return k===void 0&&(k=Vb()),k(M,f,p)});function q(f,p){for(var I=0,A=f.length;I<A;I++)if(f[I]===p)return I;return-1}return xo}var Ul=St,Mi=an.codes,zb=Mi.ERR_METHOD_NOT_IMPLEMENTED,Wb=Mi.ERR_MULTIPLE_CALLBACK,Ub=Mi.ERR_TRANSFORM_ALREADY_TRANSFORMING,qb=Mi.ERR_TRANSFORM_WITH_LENGTH_0,Ii=Cn();tt(St,Ii);function Jb(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(r===null)return this.emit("error",new Wb);n.writechunk=null,n.writecb=null,t!=null&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function St(e){if(!(this instanceof St))return new St(e);Ii.call(this,e),this._transformState={afterTransform:Jb.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",$b)}function $b(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,n){Qc(e,t,n)}):Qc(this,null,null)}St.prototype.push=function(e,t){return this._transformState.needTransform=!1,Ii.prototype.push.call(this,e,t)};St.prototype._transform=function(e,t,n){n(new zb("_transform()"))};St.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};St.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};St.prototype._destroy=function(e,t){Ii.prototype._destroy.call(this,e,function(n){t(n)})};function Qc(e,t,n){if(t)return e.emit("error",t);if(n!=null&&e.push(n),e._writableState.length)throw new qb;if(e._transformState.transforming)throw new Ub;return e.push(null)}var Zb=dr,ql=Ul;tt(dr,ql);function dr(e){if(!(this instanceof dr))return new dr(e);ql.call(this,e)}dr.prototype._transform=function(e,t,n){n(null,e)};var Co;function Gb(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var Jl=an.codes,Qb=Jl.ERR_MISSING_ARGS,Yb=Jl.ERR_STREAM_DESTROYED;function Kb(e){if(e)throw e}function Xb(e){return e.setHeader&&typeof e.abort=="function"}function eg(e,t,n,r){r=Gb(r);var i=!1;e.on("close",function(){i=!0}),Co===void 0&&(Co=Ma),Co(e,{readable:t,writable:n},function(o){if(o)return r(o);i=!0,r()});var s=!1;return function(o){if(!i&&!s){if(s=!0,Xb(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();r(o||new Yb("pipe"))}}}function Yc(e){e()}function tg(e,t){return e.pipe(t)}function ng(e){return!e.length||typeof e[e.length-1]!="function"?Kb:e.pop()}function rg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=ng(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Qb("streams");var i,s=t.map(function(o,a){var c=a<t.length-1,u=a>0;return eg(o,c,u,function(h){i||(i=h),h&&s.forEach(Yc),!c&&(s.forEach(Yc),r(i))})});return t.reduce(tg)}var ig=rg;(function(e,t){t=e.exports=Wl(),t.Stream=t,t.Readable=t,t.Writable=Vl(),t.Duplex=Cn(),t.Transform=Ul,t.PassThrough=Zb,t.finished=Ma,t.pipeline=ig})(Qo,Qo.exports);var $l=Qo.exports;const{Transform:sg}=$l;var og=e=>class Zl extends sg{constructor(n,r,i,s,o){super(o),this._rate=n,this._capacity=r,this._delimitedSuffix=i,this._hashBitLength=s,this._options=o,this._state=new e,this._state.initialize(n,r),this._finalized=!1}_transform(n,r,i){let s=null;try{this.update(n,r)}catch(o){s=o}i(s)}_flush(n){let r=null;try{this.push(this.digest())}catch(i){r=i}n(r)}update(n,r){if(!Buffer.isBuffer(n)&&typeof n!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(n)||(n=Buffer.from(n,r)),this._state.absorb(n),this}digest(n){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let r=this._state.squeeze(this._hashBitLength/8);return n!==void 0&&(r=r.toString(n)),this._resetState(),r}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const n=new Zl(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(n._state),n._finalized=this._finalized,n}};const{Transform:ag}=$l;var cg=e=>class Gl extends ag{constructor(n,r,i,s){super(s),this._rate=n,this._capacity=r,this._delimitedSuffix=i,this._options=s,this._state=new e,this._state.initialize(n,r),this._finalized=!1}_transform(n,r,i){let s=null;try{this.update(n,r)}catch(o){s=o}i(s)}_flush(){}_read(n){this.push(this.squeeze(n))}update(n,r){if(!Buffer.isBuffer(n)&&typeof n!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(n)||(n=Buffer.from(n,r)),this._state.absorb(n),this}squeeze(n,r){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(n);return r!==void 0&&(i=i.toString(r)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const n=new Gl(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(n._state),n._finalized=this._finalized,n}};const ug=og,lg=cg;var hg=function(e){const t=ug(e),n=lg(e);return function(r,i){switch(typeof r=="string"?r.toLowerCase():r){case"keccak224":return new t(1152,448,null,224,i);case"keccak256":return new t(1088,512,null,256,i);case"keccak384":return new t(832,768,null,384,i);case"keccak512":return new t(576,1024,null,512,i);case"sha3-224":return new t(1152,448,6,224,i);case"sha3-256":return new t(1088,512,6,256,i);case"sha3-384":return new t(832,768,6,384,i);case"sha3-512":return new t(576,1024,6,512,i);case"shake128":return new n(1344,256,31,i);case"shake256":return new n(1088,512,31,i);default:throw new Error("Invald algorithm: "+r)}}},dg=hg(Eb);const fg=dg,pg=yi;function Ql(e){return Buffer.allocUnsafe(e).fill(0)}function Yl(e,t,n){const r=Ql(t);return e=Ri(e),n?e.length<t?(e.copy(r),r):e.slice(0,t):e.length<t?(e.copy(r,t-e.length),r):e.slice(-t)}function bg(e,t){return Yl(e,t,!0)}function Ri(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")Kl(e)?e=Buffer.from(mg(Xl(e)),"hex"):e=Buffer.from(e);else if(typeof e=="number")e=intToBuffer(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(pg.isBN(e))e=e.toArrayLike(Buffer);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e}function gg(e){return e=Ri(e),"0x"+e.toString("hex")}function yg(e,t){return e=Ri(e),t||(t=256),fg("keccak"+t).update(e).digest()}function mg(e){return e.length%2?"0"+e:e}function Kl(e){return typeof e=="string"&&e.match(/^0x[0-9A-Fa-f]*$/)}function Xl(e){return typeof e=="string"&&e.startsWith("0x")?e.slice(2):e}var eh={zeros:Ql,setLength:Yl,setLengthRight:bg,isHexString:Kl,stripHexPrefix:Xl,toBuffer:Ri,bufferToHex:gg,keccak:yg};const Kt=eh,Yt=yi;function th(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}function _n(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function Kc(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function nh(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}function Zt(e){var t=typeof e;if(t==="string")return Kt.isHexString(e)?new Yt(Kt.stripHexPrefix(e),16):new Yt(e,10);if(t==="number")return new Yt(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function ot(e,t){var n,r,i,s;if(e==="address")return ot("uint160",Zt(t));if(e==="bool")return ot("uint8",t?1:0);if(e==="string")return ot("bytes",new Buffer(t,"utf8"));if(_g(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(n=nh(e),n!=="dynamic"&&n!==0&&t.length>n)throw new Error("Elements exceed array size: "+n);i=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(s in t)i.push(ot(e,t[s]));if(n==="dynamic"){var o=ot("uint256",t.length);i.unshift(o)}return Buffer.concat(i)}else{if(e==="bytes")return t=new Buffer(t),i=Buffer.concat([ot("uint256",t.length),t]),t.length%32!==0&&(i=Buffer.concat([i,Kt.zeros(32-t.length%32)])),i;if(e.startsWith("bytes")){if(n=_n(e),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return Kt.setLengthRight(t,32)}else if(e.startsWith("uint")){if(n=_n(e),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if(r=Zt(t),r.bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+r.bitLength());if(r<0)throw new Error("Supplied uint is negative");return r.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(n=_n(e),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if(r=Zt(t),r.bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+r.bitLength());return r.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(n=Kc(e),r=Zt(t),r<0)throw new Error("Supplied ufixed is negative");return ot("uint256",r.mul(new Yt(2).pow(new Yt(n[1]))))}else if(e.startsWith("fixed"))return n=Kc(e),ot("int256",Zt(t).mul(new Yt(2).pow(new Yt(n[1]))))}throw new Error("Unsupported or invalid type: "+e)}function vg(e){return e==="string"||e==="bytes"||nh(e)==="dynamic"}function _g(e){return e.lastIndexOf("]")===e.length-1}function wg(e,t){var n=[],r=[],i=32*e.length;for(var s in e){var o=th(e[s]),a=t[s],c=ot(o,a);vg(o)?(n.push(ot("uint256",i)),r.push(c),i+=c.length):n.push(c)}return Buffer.concat(n.concat(r))}function rh(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var n,r,i=[],s=0;s<e.length;s++){var o=th(e[s]),a=t[s];if(o==="bytes")i.push(a);else if(o==="string")i.push(new Buffer(a,"utf8"));else if(o==="bool")i.push(new Buffer(a?"01":"00","hex"));else if(o==="address")i.push(Kt.setLength(a,20));else if(o.startsWith("bytes")){if(n=_n(o),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);i.push(Kt.setLengthRight(a,n))}else if(o.startsWith("uint")){if(n=_n(o),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if(r=Zt(a),r.bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+r.bitLength());i.push(r.toArrayLike(Buffer,"be",n/8))}else if(o.startsWith("int")){if(n=_n(o),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if(r=Zt(a),r.bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+r.bitLength());i.push(r.toTwos(n).toArrayLike(Buffer,"be",n/8))}else throw new Error("Unsupported or invalid type: "+o)}return Buffer.concat(i)}function Sg(e,t){return Kt.keccak(rh(e,t))}var Eg={rawEncode:wg,solidityPack:rh,soliditySHA3:Sg};const Ke=eh,ar=Eg,ih={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},Mo={encodeData(e,t,n,r=!0){const i=["bytes32"],s=[this.hashType(e,n)];if(r){const o=(a,c,u)=>{if(n[c]!==void 0)return["bytes32",u==null?"0x0000000000000000000000000000000000000000000000000000000000000000":Ke.keccak(this.encodeData(c,u,n,r))];if(u===void 0)throw new Error(`missing value for field ${a} of type ${c}`);if(c==="bytes")return["bytes32",Ke.keccak(u)];if(c==="string")return typeof u=="string"&&(u=Buffer.from(u,"utf8")),["bytes32",Ke.keccak(u)];if(c.lastIndexOf("]")===c.length-1){const h=c.slice(0,c.lastIndexOf("[")),l=u.map(d=>o(a,h,d));return["bytes32",Ke.keccak(ar.rawEncode(l.map(([d])=>d),l.map(([,d])=>d)))]}return[c,u]};for(const a of n[e]){const[c,u]=o(a.name,a.type,t[a.name]);i.push(c),s.push(u)}}else for(const o of n[e]){let a=t[o.name];if(a!==void 0)if(o.type==="bytes")i.push("bytes32"),a=Ke.keccak(a),s.push(a);else if(o.type==="string")i.push("bytes32"),typeof a=="string"&&(a=Buffer.from(a,"utf8")),a=Ke.keccak(a),s.push(a);else if(n[o.type]!==void 0)i.push("bytes32"),a=Ke.keccak(this.encodeData(o.type,a,n,r)),s.push(a);else{if(o.type.lastIndexOf("]")===o.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");i.push(o.type),s.push(a)}}return ar.rawEncode(i,s)},encodeType(e,t){let n="",r=this.findTypeDependencies(e,t).filter(i=>i!==e);r=[e].concat(r.sort());for(const i of r){if(!t[i])throw new Error("No type definition specified: "+i);n+=i+"("+t[i].map(({name:s,type:o})=>o+" "+s).join(",")+")"}return n},findTypeDependencies(e,t,n=[]){if(e=e.match(/^\w*/)[0],n.includes(e)||t[e]===void 0)return n;n.push(e);for(const r of t[e])for(const i of this.findTypeDependencies(r.type,t,n))!n.includes(i)&&n.push(i);return n},hashStruct(e,t,n,r=!0){return Ke.keccak(this.encodeData(e,t,n,r))},hashType(e,t){return Ke.keccak(this.encodeType(e,t))},sanitizeData(e){const t={};for(const n in ih.properties)e[n]&&(t[n]=e[n]);return t.types&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t},hash(e,t=!0){const n=this.sanitizeData(e),r=[Buffer.from("1901","hex")];return r.push(this.hashStruct("EIP712Domain",n.domain,n.types,t)),n.primaryType!=="EIP712Domain"&&r.push(this.hashStruct(n.primaryType,n.message,n.types,t)),Ke.keccak(Buffer.concat(r))}};var kg={TYPED_MESSAGE_SCHEMA:ih,TypedDataUtils:Mo,hashForSignTypedDataLegacy:function(e){return xg(e.data)},hashForSignTypedData_v3:function(e){return Mo.hash(e.data,!1)},hashForSignTypedData_v4:function(e){return Mo.hash(e.data)}};function xg(e){const t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!e.length)throw t;const n=e.map(function(s){return s.type==="bytes"?Ke.toBuffer(s.value):s.value}),r=e.map(function(s){return s.type}),i=e.map(function(s){if(!s.name)throw t;return s.type+" "+s.name});return ar.soliditySHA3(["bytes32","bytes32"],[ar.soliditySHA3(new Array(e.length).fill("string"),i),ar.soliditySHA3(r,n)])}var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.filterFromParam=Mn.FilterPolyfill=void 0;const yn=Er,Me=O,Cg=5*60*1e3,Gt={jsonrpc:"2.0",id:0};class Mg{constructor(t){this.logFilters=new Map,this.blockFilters=new Set,this.pendingTransactionFilters=new Set,this.cursors=new Map,this.timeouts=new Map,this.nextFilterId=(0,yn.IntNumber)(1),this.provider=t}async newFilter(t){const n=sh(t),r=this.makeFilterId(),i=await this.setInitialCursorPosition(r,n.fromBlock);return console.log(`Installing new log filter(${r}):`,n,"initial cursor position:",i),this.logFilters.set(r,n),this.setFilterTimeout(r),(0,Me.hexStringFromIntNumber)(r)}async newBlockFilter(){const t=this.makeFilterId(),n=await this.setInitialCursorPosition(t,"latest");return console.log(`Installing new block filter (${t}) with initial cursor position:`,n),this.blockFilters.add(t),this.setFilterTimeout(t),(0,Me.hexStringFromIntNumber)(t)}async newPendingTransactionFilter(){const t=this.makeFilterId(),n=await this.setInitialCursorPosition(t,"latest");return console.log(`Installing new block filter (${t}) with initial cursor position:`,n),this.pendingTransactionFilters.add(t),this.setFilterTimeout(t),(0,Me.hexStringFromIntNumber)(t)}uninstallFilter(t){const n=(0,Me.intNumberFromHexString)(t);return console.log(`Uninstalling filter (${n})`),this.deleteFilter(n),!0}getFilterChanges(t){const n=(0,Me.intNumberFromHexString)(t);return this.timeouts.has(n)&&this.setFilterTimeout(n),this.logFilters.has(n)?this.getLogFilterChanges(n):this.blockFilters.has(n)?this.getBlockFilterChanges(n):this.pendingTransactionFilters.has(n)?this.getPendingTransactionFilterChanges(n):Promise.resolve(qr())}async getFilterLogs(t){const n=(0,Me.intNumberFromHexString)(t),r=this.logFilters.get(n);return r?this.sendAsyncPromise(Object.assign(Object.assign({},Gt),{method:"eth_getLogs",params:[Xc(r)]})):qr()}makeFilterId(){return(0,yn.IntNumber)(++this.nextFilterId)}sendAsyncPromise(t){return new Promise((n,r)=>{this.provider.sendAsync(t,(i,s)=>{if(i)return r(i);if(Array.isArray(s)||s==null)return r(new Error(`unexpected response received: ${JSON.stringify(s)}`));n(s)})})}deleteFilter(t){console.log(`Deleting filter (${t})`),this.logFilters.delete(t),this.blockFilters.delete(t),this.pendingTransactionFilters.delete(t),this.cursors.delete(t),this.timeouts.delete(t)}async getLogFilterChanges(t){const n=this.logFilters.get(t),r=this.cursors.get(t);if(!r||!n)return qr();const i=await this.getCurrentBlockHeight(),s=n.toBlock==="latest"?i:n.toBlock;if(r>i||r>n.toBlock)return Io();console.log(`Fetching logs from ${r} to ${s} for filter ${t}`);const o=await this.sendAsyncPromise(Object.assign(Object.assign({},Gt),{method:"eth_getLogs",params:[Xc(Object.assign(Object.assign({},n),{fromBlock:r,toBlock:s}))]}));if(Array.isArray(o.result)){const a=o.result.map(u=>(0,Me.intNumberFromHexString)(u.blockNumber||"0x0")),c=Math.max(...a);if(c&&c>r){const u=(0,yn.IntNumber)(c+1);console.log(`Moving cursor position for filter (${t}) from ${r} to ${u}`),this.cursors.set(t,u)}}return o}async getBlockFilterChanges(t){const n=this.cursors.get(t);if(!n)return qr();const r=await this.getCurrentBlockHeight();if(n>r)return Io();console.log(`Fetching blocks from ${n} to ${r} for filter (${t})`);const i=(await Promise.all((0,Me.range)(n,r+1).map(o=>this.getBlockHashByNumber((0,yn.IntNumber)(o))))).filter(o=>!!o),s=(0,yn.IntNumber)(n+i.length);return console.log(`Moving cursor position for filter (${t}) from ${n} to ${s}`),this.cursors.set(t,s),Object.assign(Object.assign({},Gt),{result:i})}async getPendingTransactionFilterChanges(t){return Promise.resolve(Io())}async setInitialCursorPosition(t,n){const r=await this.getCurrentBlockHeight(),i=typeof n=="number"&&n>r?n:r;return this.cursors.set(t,i),i}setFilterTimeout(t){const n=this.timeouts.get(t);n&&window.clearTimeout(n);const r=window.setTimeout(()=>{console.log(`Filter (${t}) timed out`),this.deleteFilter(t)},Cg);this.timeouts.set(t,r)}async getCurrentBlockHeight(){const{result:t}=await this.sendAsyncPromise(Object.assign(Object.assign({},Gt),{method:"eth_blockNumber",params:[]}));return(0,Me.intNumberFromHexString)((0,Me.ensureHexString)(t))}async getBlockHashByNumber(t){const n=await this.sendAsyncPromise(Object.assign(Object.assign({},Gt),{method:"eth_getBlockByNumber",params:[(0,Me.hexStringFromIntNumber)(t),!1]}));return n.result&&typeof n.result.hash=="string"?(0,Me.ensureHexString)(n.result.hash):null}}Mn.FilterPolyfill=Mg;function sh(e){return{fromBlock:eu(e.fromBlock),toBlock:eu(e.toBlock),addresses:e.address===void 0?null:Array.isArray(e.address)?e.address:[e.address],topics:e.topics||[]}}Mn.filterFromParam=sh;function Xc(e){const t={fromBlock:tu(e.fromBlock),toBlock:tu(e.toBlock),topics:e.topics};return e.addresses!==null&&(t.address=e.addresses),t}function eu(e){if(e===void 0||e==="latest"||e==="pending")return"latest";if(e==="earliest")return(0,yn.IntNumber)(0);if((0,Me.isHexString)(e))return(0,Me.intNumberFromHexString)(e);throw new Error(`Invalid block option: ${String(e)}`)}function tu(e){return e==="latest"?e:(0,Me.hexStringFromIntNumber)(e)}function qr(){return Object.assign(Object.assign({},Gt),{error:{code:-32e3,message:"filter not found"}})}function Io(){return Object.assign(Object.assign({},Gt),{result:[]})}var oh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.JSONRPCMethod=void 0,function(t){t.eth_accounts="eth_accounts",t.eth_coinbase="eth_coinbase",t.net_version="net_version",t.eth_chainId="eth_chainId",t.eth_uninstallFilter="eth_uninstallFilter",t.eth_requestAccounts="eth_requestAccounts",t.eth_sign="eth_sign",t.eth_ecRecover="eth_ecRecover",t.personal_sign="personal_sign",t.personal_ecRecover="personal_ecRecover",t.eth_signTransaction="eth_signTransaction",t.eth_sendRawTransaction="eth_sendRawTransaction",t.eth_sendTransaction="eth_sendTransaction",t.eth_signTypedData_v1="eth_signTypedData_v1",t.eth_signTypedData_v2="eth_signTypedData_v2",t.eth_signTypedData_v3="eth_signTypedData_v3",t.eth_signTypedData_v4="eth_signTypedData_v4",t.eth_signTypedData="eth_signTypedData",t.cbWallet_arbitrary="walletlink_arbitrary",t.wallet_addEthereumChain="wallet_addEthereumChain",t.wallet_switchEthereumChain="wallet_switchEthereumChain",t.wallet_watchAsset="wallet_watchAsset",t.eth_subscribe="eth_subscribe",t.eth_unsubscribe="eth_unsubscribe",t.eth_newFilter="eth_newFilter",t.eth_newBlockFilter="eth_newBlockFilter",t.eth_newPendingTransactionFilter="eth_newPendingTransactionFilter",t.eth_getFilterChanges="eth_getFilterChanges",t.eth_getFilterLogs="eth_getFilterLogs"}(e.JSONRPCMethod||(e.JSONRPCMethod={}))})(oh);var Ni={},ah={},Ai={};const nu=(e,t)=>function(){const n=t.promiseModule,r=new Array(arguments.length);for(let i=0;i<arguments.length;i++)r[i]=arguments[i];return new n((i,s)=>{t.errorFirst?r.push(function(o,a){if(t.multiArgs){const c=new Array(arguments.length-1);for(let u=1;u<arguments.length;u++)c[u-1]=arguments[u];o?(c.unshift(o),s(c)):i(c)}else o?s(o):i(a)}):r.push(function(o){if(t.multiArgs){const a=new Array(arguments.length-1);for(let c=0;c<arguments.length;c++)a[c]=arguments[c];i(a)}else i(o)}),e.apply(this,r)})};var Ig=(e,t)=>{t=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},t);const n=i=>{const s=o=>typeof o=="string"?i===o:o.test(i);return t.include?t.include.some(s):!t.exclude.some(s)};let r;typeof e=="function"?r=function(){return t.excludeMain?e.apply(this,arguments):nu(e,t).apply(this,arguments)}:r=Object.create(Object.getPrototypeOf(e));for(const i in e){const s=e[i];r[i]=typeof s=="function"&&n(i)?nu(s,t):s}return r},Cr={},Rg=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.BaseBlockTracker=void 0;const Ng=Rg(rn),Ag=1e3,Tg=(e,t)=>e+t,ru=["sync","latest"];class jg extends Ng.default{constructor(t){super(),this._blockResetDuration=t.blockResetDuration||20*Ag,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}async destroy(){this._cancelBlockResetTimeout(),await this._maybeEnd(),super.removeAllListeners()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){return this._currentBlock?this._currentBlock:await new Promise(t=>this.once("latest",t))}removeAllListeners(t){return t?super.removeAllListeners(t):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener(),this}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(t){ru.includes(t)&&this._maybeStart()}_onRemoveListener(){this._getBlockTrackerEventCount()>0||this._maybeEnd()}async _maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),await this._start(),this.emit("_started"))}async _maybeEnd(){this._isRunning&&(this._isRunning=!1,this._setupBlockResetTimeout(),await this._end(),this.emit("_ended"))}_getBlockTrackerEventCount(){return ru.map(t=>this.listenerCount(t)).reduce(Tg)}_newPotentialLatest(t){const n=this._currentBlock;n&&iu(t)<=iu(n)||this._setCurrentBlock(t)}_setCurrentBlock(t){const n=this._currentBlock;this._currentBlock=t,this.emit("latest",t),this.emit("sync",{oldBlock:n,newBlock:t})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){this._blockResetTimeout&&clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}Cr.BaseBlockTracker=jg;function iu(e){return Number.parseInt(e,16)}var ch={},uh={},Se={};Object.defineProperty(Se,"__esModule",{value:!0});Se.assertExhaustive=Se.assertStruct=Se.assert=Se.AssertionError=void 0;const Og=nn;function Pg(e){return typeof e=="object"&&e!==null&&"message"in e}function Lg(e){var t,n;return typeof((n=(t=e==null?void 0:e.prototype)===null||t===void 0?void 0:t.constructor)===null||n===void 0?void 0:n.name)=="string"}function Dg(e){const t=Pg(e)?e.message:String(e);return t.endsWith(".")?t.slice(0,-1):t}function lh(e,t){return Lg(e)?new e({message:t}):e({message:t})}class Ia extends Error{constructor(t){super(t.message),this.code="ERR_ASSERTION"}}Se.AssertionError=Ia;function Bg(e,t="Assertion failed.",n=Ia){if(!e)throw t instanceof Error?t:lh(n,t)}Se.assert=Bg;function Fg(e,t,n="Assertion failed",r=Ia){try{(0,Og.assert)(e,t)}catch(i){throw lh(r,`${n}: ${Dg(i)}.`)}}Se.assertStruct=Fg;function Hg(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}Se.assertExhaustive=Hg;var Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.base64=void 0;const Vg=nn,zg=Se,Wg=(e,t={})=>{var n,r;const i=(n=t.paddingRequired)!==null&&n!==void 0?n:!1,s=(r=t.characterSet)!==null&&r!==void 0?r:"base64";let o;s==="base64"?o=String.raw`[A-Za-z0-9+\/]`:((0,zg.assert)(s==="base64url"),o=String.raw`[-_A-Za-z0-9]`);let a;return i?a=new RegExp(`^(?:${o}{4})*(?:${o}{3}=|${o}{2}==)?$`,"u"):a=new RegExp(`^(?:${o}{4})*(?:${o}{2,3}|${o}{3}=|${o}{2}==)?$`,"u"),(0,Vg.pattern)(e,a)};Mr.base64=Wg;var Q={},Ir={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.remove0x=e.add0x=e.assertIsStrictHexString=e.assertIsHexString=e.isStrictHexString=e.isHexString=e.StrictHexStruct=e.HexStruct=void 0;const t=nn,n=Se;e.HexStruct=(0,t.pattern)((0,t.string)(),/^(?:0x)?[0-9a-f]+$/iu),e.StrictHexStruct=(0,t.pattern)((0,t.string)(),/^0x[0-9a-f]+$/iu);function r(u){return(0,t.is)(u,e.HexStruct)}e.isHexString=r;function i(u){return(0,t.is)(u,e.StrictHexStruct)}e.isStrictHexString=i;function s(u){(0,n.assert)(r(u),"Value must be a hexadecimal string.")}e.assertIsHexString=s;function o(u){(0,n.assert)(i(u),'Value must be a hexadecimal string, starting with "0x".')}e.assertIsStrictHexString=o;function a(u){return u.startsWith("0x")?u:u.startsWith("0X")?`0x${u.substring(2)}`:`0x${u}`}e.add0x=a;function c(u){return u.startsWith("0x")||u.startsWith("0X")?u.substring(2):u}e.remove0x=c})(Ir);Object.defineProperty(Q,"__esModule",{value:!0});Q.createDataView=Q.concatBytes=Q.valueToBytes=Q.stringToBytes=Q.numberToBytes=Q.signedBigIntToBytes=Q.bigIntToBytes=Q.hexToBytes=Q.bytesToString=Q.bytesToNumber=Q.bytesToSignedBigInt=Q.bytesToBigInt=Q.bytesToHex=Q.assertIsBytes=Q.isBytes=void 0;const Le=Se,Ko=Ir,su=48,ou=58,au=87;function Ug(){const e=[];return()=>{if(e.length===0)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}const qg=Ug();function Ra(e){return e instanceof Uint8Array}Q.isBytes=Ra;function Jn(e){(0,Le.assert)(Ra(e),"Value must be a Uint8Array.")}Q.assertIsBytes=Jn;function hh(e){if(Jn(e),e.length===0)return"0x";const t=qg(),n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=t[e[r]];return(0,Ko.add0x)(n.join(""))}Q.bytesToHex=hh;function dh(e){Jn(e);const t=hh(e);return BigInt(t)}Q.bytesToBigInt=dh;function Jg(e){Jn(e);let t=BigInt(0);for(const n of e)t=(t<<BigInt(8))+BigInt(n);return BigInt.asIntN(e.length*8,t)}Q.bytesToSignedBigInt=Jg;function $g(e){Jn(e);const t=dh(e);return(0,Le.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)}Q.bytesToNumber=$g;function Zg(e){return Jn(e),new TextDecoder().decode(e)}Q.bytesToString=Zg;function Ti(e){var t;if(((t=e==null?void 0:e.toLowerCase)===null||t===void 0?void 0:t.call(e))==="0x")return new Uint8Array;(0,Ko.assertIsHexString)(e);const n=(0,Ko.remove0x)(e).toLowerCase(),r=n.length%2===0?n:`0${n}`,i=new Uint8Array(r.length/2);for(let s=0;s<i.length;s++){const o=r.charCodeAt(s*2),a=r.charCodeAt(s*2+1),c=o-(o<ou?su:au),u=a-(a<ou?su:au);i[s]=c*16+u}return i}Q.hexToBytes=Ti;function fh(e){(0,Le.assert)(typeof e=="bigint","Value must be a bigint."),(0,Le.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");const t=e.toString(16);return Ti(t)}Q.bigIntToBytes=fh;function Gg(e,t){(0,Le.assert)(t>0);const n=e>>BigInt(31);return!((~e&n)+(e&~n)>>BigInt(t*8+-1))}function Qg(e,t){(0,Le.assert)(typeof e=="bigint","Value must be a bigint."),(0,Le.assert)(typeof t=="number","Byte length must be a number."),(0,Le.assert)(t>0,"Byte length must be greater than 0."),(0,Le.assert)(Gg(e,t),"Byte length is too small to represent the given value.");let n=e;const r=new Uint8Array(t);for(let i=0;i<r.length;i++)r[i]=Number(BigInt.asUintN(8,n)),n>>=BigInt(8);return r.reverse()}Q.signedBigIntToBytes=Qg;function ph(e){(0,Le.assert)(typeof e=="number","Value must be a number."),(0,Le.assert)(e>=0,"Value must be a non-negative number."),(0,Le.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");const t=e.toString(16);return Ti(t)}Q.numberToBytes=ph;function bh(e){return(0,Le.assert)(typeof e=="string","Value must be a string."),new TextEncoder().encode(e)}Q.stringToBytes=bh;function gh(e){if(typeof e=="bigint")return fh(e);if(typeof e=="number")return ph(e);if(typeof e=="string")return e.startsWith("0x")?Ti(e):bh(e);if(Ra(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}Q.valueToBytes=gh;function Yg(e){const t=new Array(e.length);let n=0;for(let i=0;i<e.length;i++){const s=gh(e[i]);t[i]=s,n+=s.length}const r=new Uint8Array(n);for(let i=0,s=0;i<t.length;i++)r.set(t[i],s),s+=t[i].length;return r}Q.concatBytes=Yg;function Kg(e){if(typeof Buffer<"u"&&e instanceof Buffer){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}Q.createDataView=Kg;var ji={};Object.defineProperty(ji,"__esModule",{value:!0});ji.ChecksumStruct=void 0;const cu=nn,Xg=Mr;ji.ChecksumStruct=(0,cu.size)((0,Xg.base64)((0,cu.string)(),{paddingRequired:!0}),44,44);var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.createHex=lt.createBytes=lt.createBigInt=lt.createNumber=void 0;const ce=nn,e1=Se,yh=Q,Oi=Ir,mh=(0,ce.union)([(0,ce.number)(),(0,ce.bigint)(),(0,ce.string)(),Oi.StrictHexStruct]),t1=(0,ce.coerce)((0,ce.number)(),mh,Number),n1=(0,ce.coerce)((0,ce.bigint)(),mh,BigInt);(0,ce.union)([Oi.StrictHexStruct,(0,ce.instance)(Uint8Array)]);const r1=(0,ce.coerce)((0,ce.instance)(Uint8Array),(0,ce.union)([Oi.StrictHexStruct]),yh.hexToBytes),i1=(0,ce.coerce)(Oi.StrictHexStruct,(0,ce.instance)(Uint8Array),yh.bytesToHex);function s1(e){try{const t=(0,ce.create)(e,t1);return(0,e1.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){throw t instanceof ce.StructError?new Error(`Expected a number-like value, got "${e}".`):t}}lt.createNumber=s1;function o1(e){try{return(0,ce.create)(e,n1)}catch(t){throw t instanceof ce.StructError?new Error(`Expected a number-like value, got "${String(t.value)}".`):t}}lt.createBigInt=o1;function a1(e){if(typeof e=="string"&&e.toLowerCase()==="0x")return new Uint8Array;try{return(0,ce.create)(e,r1)}catch(t){throw t instanceof ce.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}}lt.createBytes=a1;function c1(e){if(e instanceof Uint8Array&&e.length===0||typeof e=="string"&&e.toLowerCase()==="0x")return"0x";try{return(0,ce.create)(e,i1)}catch(t){throw t instanceof ce.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}}lt.createHex=c1;var In={},vh=j&&j.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Ie=j&&j.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Qe,it;Object.defineProperty(In,"__esModule",{value:!0});In.FrozenSet=In.FrozenMap=void 0;class Na{constructor(t){Qe.set(this,void 0),vh(this,Qe,new Map(t),"f"),Object.freeze(this)}get size(){return Ie(this,Qe,"f").size}[(Qe=new WeakMap,Symbol.iterator)](){return Ie(this,Qe,"f")[Symbol.iterator]()}entries(){return Ie(this,Qe,"f").entries()}forEach(t,n){return Ie(this,Qe,"f").forEach((r,i,s)=>t.call(n,r,i,this))}get(t){return Ie(this,Qe,"f").get(t)}has(t){return Ie(this,Qe,"f").has(t)}keys(){return Ie(this,Qe,"f").keys()}values(){return Ie(this,Qe,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([t,n])=>`${String(t)} => ${String(n)}`).join(", ")} `:""}}`}}In.FrozenMap=Na;class Aa{constructor(t){it.set(this,void 0),vh(this,it,new Set(t),"f"),Object.freeze(this)}get size(){return Ie(this,it,"f").size}[(it=new WeakMap,Symbol.iterator)](){return Ie(this,it,"f")[Symbol.iterator]()}entries(){return Ie(this,it,"f").entries()}forEach(t,n){return Ie(this,it,"f").forEach((r,i,s)=>t.call(n,r,i,this))}has(t){return Ie(this,it,"f").has(t)}keys(){return Ie(this,it,"f").keys()}values(){return Ie(this,it,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(t=>String(t)).join(", ")} `:""}}`}}In.FrozenSet=Aa;Object.freeze(Na);Object.freeze(Na.prototype);Object.freeze(Aa);Object.freeze(Aa.prototype);var _h={},Ta={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.calculateNumberSize=e.calculateStringSize=e.isASCII=e.isPlainObject=e.ESCAPE_CHARACTERS_REGEXP=e.JsonSize=e.hasProperty=e.isObject=e.isNullOrUndefined=e.isNonEmptyArray=void 0;function t(u){return Array.isArray(u)&&u.length>0}e.isNonEmptyArray=t;function n(u){return u==null}e.isNullOrUndefined=n;function r(u){return!!u&&typeof u=="object"&&!Array.isArray(u)}e.isObject=r;const i=(u,h)=>Object.hasOwnProperty.call(u,h);e.hasProperty=i,function(u){u[u.Null=4]="Null",u[u.Comma=1]="Comma",u[u.Wrapper=1]="Wrapper",u[u.True=4]="True",u[u.False=5]="False",u[u.Quote=1]="Quote",u[u.Colon=1]="Colon",u[u.Date=24]="Date"}(e.JsonSize||(e.JsonSize={})),e.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function s(u){if(typeof u!="object"||u===null)return!1;try{let h=u;for(;Object.getPrototypeOf(h)!==null;)h=Object.getPrototypeOf(h);return Object.getPrototypeOf(u)===h}catch{return!1}}e.isPlainObject=s;function o(u){return u.charCodeAt(0)<=127}e.isASCII=o;function a(u){var h;return u.split("").reduce((l,d)=>o(d)?l+1:l+2,0)+((h=u.match(e.ESCAPE_CHARACTERS_REGEXP))!==null&&h!==void 0?h:[]).length}e.calculateStringSize=a;function c(u){return u.toString().length}e.calculateNumberSize=c})(Ta);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateJsonAndGetSize=e.getJsonRpcIdValidator=e.assertIsJsonRpcError=e.isJsonRpcError=e.assertIsJsonRpcFailure=e.isJsonRpcFailure=e.assertIsJsonRpcSuccess=e.isJsonRpcSuccess=e.assertIsJsonRpcResponse=e.isJsonRpcResponse=e.assertIsPendingJsonRpcResponse=e.isPendingJsonRpcResponse=e.JsonRpcResponseStruct=e.JsonRpcFailureStruct=e.JsonRpcSuccessStruct=e.PendingJsonRpcResponseStruct=e.assertIsJsonRpcRequest=e.isJsonRpcRequest=e.assertIsJsonRpcNotification=e.isJsonRpcNotification=e.JsonRpcNotificationStruct=e.JsonRpcRequestStruct=e.JsonRpcParamsStruct=e.JsonRpcErrorStruct=e.JsonRpcIdStruct=e.JsonRpcVersionStruct=e.jsonrpc2=e.isValidJson=e.JsonStruct=void 0;const t=nn,n=Se,r=Ta;e.JsonStruct=(0,t.define)("Json",x=>{const[N]=k(x,!0);return N?!0:"Expected a valid JSON-serializable value"});function i(x){return(0,t.is)(x,e.JsonStruct)}e.isValidJson=i,e.jsonrpc2="2.0",e.JsonRpcVersionStruct=(0,t.literal)(e.jsonrpc2),e.JsonRpcIdStruct=(0,t.nullable)((0,t.union)([(0,t.number)(),(0,t.string)()])),e.JsonRpcErrorStruct=(0,t.object)({code:(0,t.integer)(),message:(0,t.string)(),data:(0,t.optional)(e.JsonStruct),stack:(0,t.optional)((0,t.string)())}),e.JsonRpcParamsStruct=(0,t.optional)((0,t.union)([(0,t.record)((0,t.string)(),e.JsonStruct),(0,t.array)(e.JsonStruct)])),e.JsonRpcRequestStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,method:(0,t.string)(),params:e.JsonRpcParamsStruct}),e.JsonRpcNotificationStruct=(0,t.omit)(e.JsonRpcRequestStruct,["id"]);function s(x){return(0,t.is)(x,e.JsonRpcNotificationStruct)}e.isJsonRpcNotification=s;function o(x,N){(0,n.assertStruct)(x,e.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",N)}e.assertIsJsonRpcNotification=o;function a(x){return(0,t.is)(x,e.JsonRpcRequestStruct)}e.isJsonRpcRequest=a;function c(x,N){(0,n.assertStruct)(x,e.JsonRpcRequestStruct,"Invalid JSON-RPC request",N)}e.assertIsJsonRpcRequest=c,e.PendingJsonRpcResponseStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:(0,t.optional)((0,t.unknown)()),error:(0,t.optional)(e.JsonRpcErrorStruct)}),e.JsonRpcSuccessStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:e.JsonStruct}),e.JsonRpcFailureStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,error:e.JsonRpcErrorStruct}),e.JsonRpcResponseStruct=(0,t.union)([e.JsonRpcSuccessStruct,e.JsonRpcFailureStruct]);function u(x){return(0,t.is)(x,e.PendingJsonRpcResponseStruct)}e.isPendingJsonRpcResponse=u;function h(x,N){(0,n.assertStruct)(x,e.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",N)}e.assertIsPendingJsonRpcResponse=h;function l(x){return(0,t.is)(x,e.JsonRpcResponseStruct)}e.isJsonRpcResponse=l;function d(x,N){(0,n.assertStruct)(x,e.JsonRpcResponseStruct,"Invalid JSON-RPC response",N)}e.assertIsJsonRpcResponse=d;function b(x){return(0,t.is)(x,e.JsonRpcSuccessStruct)}e.isJsonRpcSuccess=b;function v(x,N){(0,n.assertStruct)(x,e.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",N)}e.assertIsJsonRpcSuccess=v;function m(x){return(0,t.is)(x,e.JsonRpcFailureStruct)}e.isJsonRpcFailure=m;function w(x,N){(0,n.assertStruct)(x,e.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",N)}e.assertIsJsonRpcFailure=w;function y(x){return(0,t.is)(x,e.JsonRpcErrorStruct)}e.isJsonRpcError=y;function E(x,N){(0,n.assertStruct)(x,e.JsonRpcErrorStruct,"Invalid JSON-RPC error",N)}e.assertIsJsonRpcError=E;function S(x){const{permitEmptyString:N,permitFractions:L,permitNull:T}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},x);return M=>!!(typeof M=="number"&&(L||Number.isInteger(M))||typeof M=="string"&&(N||M.length>0)||T&&M===null)}e.getJsonRpcIdValidator=S;function k(x,N=!1){const L=new Set;function T(M,$){if(M===void 0)return[!1,0];if(M===null)return[!0,$?0:r.JsonSize.Null];const K=typeof M;try{if(K==="function")return[!1,0];if(K==="string"||M instanceof String)return[!0,$?0:(0,r.calculateStringSize)(M)+r.JsonSize.Quote*2];if(K==="boolean"||M instanceof Boolean)return $?[!0,0]:[!0,M==!0?r.JsonSize.True:r.JsonSize.False];if(K==="number"||M instanceof Number)return $?[!0,0]:[!0,(0,r.calculateNumberSize)(M)];if(M instanceof Date)return $?[!0,0]:[!0,isNaN(M.getDate())?r.JsonSize.Null:r.JsonSize.Date+r.JsonSize.Quote*2]}catch{return[!1,0]}if(!(0,r.isPlainObject)(M)&&!Array.isArray(M))return[!1,0];if(L.has(M))return[!1,0];L.add(M);try{return[!0,Object.entries(M).reduce((V,[Z,ne],oe,pe)=>{let[Ae,Ze]=T(ne,$);if(!Ae)throw new Error("JSON validation did not pass. Validation process stopped.");if(L.delete(M),$)return 0;const Te=Array.isArray(M)?0:Z.length+r.JsonSize.Comma+r.JsonSize.Colon*2,Ge=oe<pe.length-1?r.JsonSize.Comma:0;return V+Te+Ze+Ge},$?0:r.JsonSize.Wrapper*2)]}catch{return[!1,0]}}return T(x,N)}e.validateJsonAndGetSize=k})(_h);var Rn={},u1=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.createModuleLogger=Rn.createProjectLogger=void 0;const l1=u1(_f),h1=(0,l1.default)("metamask");function d1(e){return h1.extend(e)}Rn.createProjectLogger=d1;function f1(e,t){return e.extend(t)}Rn.createModuleLogger=f1;var ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.hexToBigInt=ht.hexToNumber=ht.bigIntToHex=ht.numberToHex=void 0;const wn=Se,fr=Ir,p1=e=>((0,wn.assert)(typeof e=="number","Value must be a number."),(0,wn.assert)(e>=0,"Value must be a non-negative number."),(0,wn.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,fr.add0x)(e.toString(16)));ht.numberToHex=p1;const b1=e=>((0,wn.assert)(typeof e=="bigint","Value must be a bigint."),(0,wn.assert)(e>=0,"Value must be a non-negative bigint."),(0,fr.add0x)(e.toString(16)));ht.bigIntToHex=b1;const g1=e=>{(0,fr.assertIsHexString)(e);const t=parseInt(e,16);return(0,wn.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};ht.hexToNumber=g1;const y1=e=>((0,fr.assertIsHexString)(e),BigInt((0,fr.add0x)(e)));ht.hexToBigInt=y1;var wh={};Object.defineProperty(wh,"__esModule",{value:!0});var Sh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeSince=e.inMilliseconds=e.Duration=void 0,function(s){s[s.Millisecond=1]="Millisecond",s[s.Second=1e3]="Second",s[s.Minute=6e4]="Minute",s[s.Hour=36e5]="Hour",s[s.Day=864e5]="Day",s[s.Week=6048e5]="Week",s[s.Year=31536e6]="Year"}(e.Duration||(e.Duration={}));const t=s=>Number.isInteger(s)&&s>=0,n=(s,o)=>{if(!t(s))throw new Error(`"${o}" must be a non-negative integer. Received: "${s}".`)};function r(s,o){return n(s,"count"),s*o}e.inMilliseconds=r;function i(s){return n(s,"timestamp"),Date.now()-s}e.timeSince=i})(Sh);var Eh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.satisfiesVersionRange=e.gtRange=e.gtVersion=e.assertIsSemVerRange=e.assertIsSemVerVersion=e.isValidSemVerRange=e.isValidSemVerVersion=e.VersionRangeStruct=e.VersionStruct=void 0;const t=Sf,n=nn,r=Se;e.VersionStruct=(0,n.refine)((0,n.string)(),"Version",l=>(0,t.valid)(l)===null?`Expected SemVer version, got "${l}"`:!0),e.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",l=>(0,t.validRange)(l)===null?`Expected SemVer range, got "${l}"`:!0);function i(l){return(0,n.is)(l,e.VersionStruct)}e.isValidSemVerVersion=i;function s(l){return(0,n.is)(l,e.VersionRangeStruct)}e.isValidSemVerRange=s;function o(l){(0,r.assertStruct)(l,e.VersionStruct)}e.assertIsSemVerVersion=o;function a(l){(0,r.assertStruct)(l,e.VersionRangeStruct)}e.assertIsSemVerRange=a;function c(l,d){return(0,t.gt)(l,d)}e.gtVersion=c;function u(l,d){return(0,t.gtr)(l,d)}e.gtRange=u;function h(l,d){return(0,t.satisfies)(l,d,{includePrerelease:!0})}e.satisfiesVersionRange=h})(Eh);(function(e){var t=j&&j.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=j&&j.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&t(i,r,s)};Object.defineProperty(e,"__esModule",{value:!0}),n(Se,e),n(Mr,e),n(Q,e),n(ji,e),n(lt,e),n(In,e),n(Ir,e),n(_h,e),n(Rn,e),n(Ta,e),n(ht,e),n(wh,e),n(Sh,e),n(Eh,e)})(uh);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createModuleLogger=e.projectLogger=void 0;const t=uh;Object.defineProperty(e,"createModuleLogger",{enumerable:!0,get:function(){return t.createModuleLogger}}),e.projectLogger=(0,t.createProjectLogger)("eth-block-tracker")})(ch);var kh=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.PollingBlockTracker=void 0;const m1=kh(fa),v1=kh(Ig),_1=Cr,uu=ch,lu=(0,uu.createModuleLogger)(uu.projectLogger,"polling-block-tracker"),w1=(0,m1.default)(),S1=1e3;class E1 extends _1.BaseBlockTracker{constructor(t={}){var n;if(!t.provider)throw new Error("PollingBlockTracker - no provider specified.");super({blockResetDuration:(n=t.blockResetDuration)!==null&&n!==void 0?n:t.pollingInterval}),this._provider=t.provider,this._pollingInterval=t.pollingInterval||20*S1,this._retryTimeout=t.retryTimeout||this._pollingInterval/10,this._keepEventLoopActive=t.keepEventLoopActive===void 0?!0:t.keepEventLoopActive,this._setSkipCacheFlag=t.setSkipCacheFlag||!1}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}async _start(){this._synchronize()}async _end(){}async _synchronize(){for(var t;this._isRunning;)try{await this._updateLatestBlock();const n=hu(this._pollingInterval,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await n}catch(n){const r=new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:
${(t=n.stack)!==null&&t!==void 0?t:n}`);try{this.emit("error",r)}catch{console.error(r)}const i=hu(this._retryTimeout,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await i}}async _updateLatestBlock(){const t=await this._fetchLatestBlock();this._newPotentialLatest(t)}async _fetchLatestBlock(){const t={jsonrpc:"2.0",id:w1(),method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(t.skipCache=!0),lu("Making request",t);const n=await(0,v1.default)(r=>this._provider.sendAsync(t,r))();if(lu("Got response",n),n.error)throw new Error(`PollingBlockTracker - encountered error fetching block:
${n.error.message}`);return n.result}}Ai.PollingBlockTracker=E1;function hu(e,t){return new Promise(n=>{const r=setTimeout(n,e);r.unref&&t&&r.unref()})}var Pi={},k1=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.SubscribeBlockTracker=void 0;const x1=k1(fa),C1=Cr,M1=(0,x1.default)();class I1 extends C1.BaseBlockTracker{constructor(t={}){if(!t.provider)throw new Error("SubscribeBlockTracker - no provider specified.");super(t),this._provider=t.provider,this._subscriptionId=null}async checkForLatestBlock(){return await this.getLatestBlock()}async _start(){if(this._subscriptionId===void 0||this._subscriptionId===null)try{const t=await this._call("eth_blockNumber");this._subscriptionId=await this._call("eth_subscribe","newHeads"),this._provider.on("data",this._handleSubData.bind(this)),this._newPotentialLatest(t)}catch(t){this.emit("error",t)}}async _end(){if(this._subscriptionId!==null&&this._subscriptionId!==void 0)try{await this._call("eth_unsubscribe",this._subscriptionId),this._subscriptionId=null}catch(t){this.emit("error",t)}}_call(t,...n){return new Promise((r,i)=>{this._provider.sendAsync({id:M1(),method:t,params:n,jsonrpc:"2.0"},(s,o)=>{s?i(s):r(o.result)})})}_handleSubData(t,n){var r;n.method==="eth_subscription"&&((r=n.params)===null||r===void 0?void 0:r.subscription)===this._subscriptionId&&this._newPotentialLatest(n.params.result.number)}}Pi.SubscribeBlockTracker=I1;var xh={};Object.defineProperty(xh,"__esModule",{value:!0});(function(e){var t=j&&j.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s),Object.defineProperty(r,o,{enumerable:!0,get:function(){return i[s]}})}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=j&&j.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&t(i,r,s)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ai,e),n(Pi,e),n(xh,e)})(ah);var ja={},Li={},Rr={};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.getUniqueId=void 0;const Ch=4294967295;let Ro=Math.floor(Math.random()*Ch);function R1(){return Ro=(Ro+1)%Ch,Ro}Rr.getUniqueId=R1;Object.defineProperty(Li,"__esModule",{value:!0});Li.createIdRemapMiddleware=void 0;const N1=Rr;function A1(){return(e,t,n,r)=>{const i=e.id,s=N1.getUniqueId();e.id=s,t.id=s,n(o=>{e.id=i,t.id=i,o()})}}Li.createIdRemapMiddleware=A1;var Di={};Object.defineProperty(Di,"__esModule",{value:!0});Di.createAsyncMiddleware=void 0;function T1(e){return async(t,n,r,i)=>{let s;const o=new Promise(h=>{s=h});let a=null,c=!1;const u=async()=>{c=!0,r(h=>{a=h,s()}),await o};try{await e(t,n,u),c?(await o,a(null)):i(null)}catch(h){a?a(h):i(h)}}}Di.createAsyncMiddleware=T1;var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0});Bi.createScaffoldMiddleware=void 0;function j1(e){return(t,n,r,i)=>{const s=e[t.method];return s===void 0?r():typeof s=="function"?s(t,n,r,i):(n.result=s,i())}}Bi.createScaffoldMiddleware=j1;var Nr={},O1=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.JsonRpcEngine=void 0;const P1=O1(rn),He=ga;class mt extends P1.default{constructor(){super(),this._middleware=[]}push(t){this._middleware.push(t)}handle(t,n){if(n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(t)?n?this._handleBatch(t,n):this._handleBatch(t):n?this._handle(t,n):this._promiseHandle(t)}asMiddleware(){return async(t,n,r,i)=>{try{const[s,o,a]=await mt._runAllMiddleware(t,n,this._middleware);return o?(await mt._runReturnHandlers(a),i(s)):r(async c=>{try{await mt._runReturnHandlers(a)}catch(u){return c(u)}return c()})}catch(s){return i(s)}}}async _handleBatch(t,n){try{const r=await Promise.all(t.map(this._promiseHandle.bind(this)));return n?n(null,r):r}catch(r){if(n)return n(r);throw r}}_promiseHandle(t){return new Promise(n=>{this._handle(t,(r,i)=>{n(i)})})}async _handle(t,n){if(!t||Array.isArray(t)||typeof t!="object"){const o=new He.EthereumRpcError(He.errorCodes.rpc.invalidRequest,`Requests must be plain objects. Received: ${typeof t}`,{request:t});return n(o,{id:void 0,jsonrpc:"2.0",error:o})}if(typeof t.method!="string"){const o=new He.EthereumRpcError(He.errorCodes.rpc.invalidRequest,`Must specify a string method. Received: ${typeof t.method}`,{request:t});return n(o,{id:t.id,jsonrpc:"2.0",error:o})}const r=Object.assign({},t),i={id:r.id,jsonrpc:r.jsonrpc};let s=null;try{await this._processRequest(r,i)}catch(o){s=o}return s&&(delete i.result,i.error||(i.error=He.serializeError(s))),n(s,i)}async _processRequest(t,n){const[r,i,s]=await mt._runAllMiddleware(t,n,this._middleware);if(mt._checkForCompletion(t,n,i),await mt._runReturnHandlers(s),r)throw r}static async _runAllMiddleware(t,n,r){const i=[];let s=null,o=!1;for(const a of r)if([s,o]=await mt._runMiddleware(t,n,a,i),o)break;return[s,o,i.reverse()]}static _runMiddleware(t,n,r,i){return new Promise(s=>{const o=c=>{const u=c||n.error;u&&(n.error=He.serializeError(u)),s([u,!0])},a=c=>{n.error?o(n.error):(c&&(typeof c!="function"&&o(new He.EthereumRpcError(He.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof c}" for request:
${No(t)}`,{request:t})),i.push(c)),s([null,!1]))};try{r(t,n,a,o)}catch(c){o(c)}})}static async _runReturnHandlers(t){for(const n of t)await new Promise((r,i)=>{n(s=>s?i(s):r())})}static _checkForCompletion(t,n,r){if(!("result"in n)&&!("error"in n))throw new He.EthereumRpcError(He.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:
${No(t)}`,{request:t});if(!r)throw new He.EthereumRpcError(He.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:
${No(t)}`,{request:t})}}Nr.JsonRpcEngine=mt;function No(e){return JSON.stringify(e,null,2)}var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.mergeMiddleware=void 0;const L1=Nr;function D1(e){const t=new L1.JsonRpcEngine;return e.forEach(n=>t.push(n)),t.asMiddleware()}Fi.mergeMiddleware=D1;(function(e){var t=j&&j.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s),Object.defineProperty(r,o,{enumerable:!0,get:function(){return i[s]}})}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=j&&j.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&t(i,r,s)};Object.defineProperty(e,"__esModule",{value:!0}),n(Li,e),n(Di,e),n(Bi,e),n(Rr,e),n(Nr,e),n(Fi,e)})(ja);var Mh={},Oa={},Xo=function(e,t){return Xo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Xo(e,t)};function Ih(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Xo(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ci=function(){return ci=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ci.apply(this,arguments)};function Rh(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Nh(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function Ah(e,t){return function(n,r){t(n,r,e)}}function B1(e,t,n,r,i,s){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),l,d=!1,b=n.length-1;b>=0;b--){var v={};for(var m in r)v[m]=m==="access"?{}:r[m];for(var m in r.access)v.access[m]=r.access[m];v.addInitializer=function(y){if(d)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(y||null))};var w=(0,n[b])(a==="accessor"?{get:h.get,set:h.set}:h[c],v);if(a==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(l=o(w.get))&&(h.get=l),(l=o(w.set))&&(h.set=l),(l=o(w.init))&&i.unshift(l)}else(l=o(w))&&(a==="field"?i.unshift(l):h[c]=l)}u&&Object.defineProperty(u,r.name,h),d=!0}function F1(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function H1(e){return typeof e=="symbol"?e:"".concat(e)}function V1(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function Th(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function jh(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(l){o(l)}}function c(h){try{u(r.throw(h))}catch(l){o(l)}}function u(h){h.done?s(h.value):i(h.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function Oh(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(h){return c([u,h])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(h){u=[6,h],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Hi=Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]};function Ph(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Hi(t,e,n)}function ui(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pa(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function Lh(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Pa(arguments[t]));return e}function Dh(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function Bh(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Nn(e){return this instanceof Nn?(this.v=e,this):new Nn(e)}function Fh(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(b){return new Promise(function(v,m){s.push([d,b,v,m])>1||a(d,b)})})}function a(d,b){try{c(r[d](b))}catch(v){l(s[0][3],v)}}function c(d){d.value instanceof Nn?Promise.resolve(d.value.v).then(u,h):l(s[0][2],d)}function u(d){a("next",d)}function h(d){a("throw",d)}function l(d,b){d(b),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Hh(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Nn(e[i](o)),done:!1}:s?s(o):o}:s}}function Vh(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ui=="function"?ui(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,c){o=e[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}function zh(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var z1=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function Wh(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Hi(t,e,n);return z1(t,e),t}function Uh(e){return e&&e.__esModule?e:{default:e}}function qh(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function Jh(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function $h(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Zh(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var W1=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function Gh(e){function t(r){e.error=e.hasError?new W1(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}function n(){for(;e.stack.length;){var r=e.stack.pop();try{var i=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(i).then(n,function(s){return t(s),n()})}catch(s){t(s)}}if(e.hasError)throw e.error}return n()}const U1={__extends:Ih,__assign:ci,__rest:Rh,__decorate:Nh,__param:Ah,__metadata:Th,__awaiter:jh,__generator:Oh,__createBinding:Hi,__exportStar:Ph,__values:ui,__read:Pa,__spread:Lh,__spreadArrays:Dh,__spreadArray:Bh,__await:Nn,__asyncGenerator:Fh,__asyncDelegator:Hh,__asyncValues:Vh,__makeTemplateObject:zh,__importStar:Wh,__importDefault:Uh,__classPrivateFieldGet:qh,__classPrivateFieldSet:Jh,__classPrivateFieldIn:$h,__addDisposableResource:Zh,__disposeResources:Gh},q1=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Zh,get __assign(){return ci},__asyncDelegator:Hh,__asyncGenerator:Fh,__asyncValues:Vh,__await:Nn,__awaiter:jh,__classPrivateFieldGet:qh,__classPrivateFieldIn:$h,__classPrivateFieldSet:Jh,__createBinding:Hi,__decorate:Nh,__disposeResources:Gh,__esDecorate:B1,__exportStar:Ph,__extends:Ih,__generator:Oh,__importDefault:Uh,__importStar:Wh,__makeTemplateObject:zh,__metadata:Th,__param:Ah,__propKey:H1,__read:Pa,__rest:Rh,__runInitializers:F1,__setFunctionName:V1,__spread:Lh,__spreadArray:Bh,__spreadArrays:Dh,__values:ui,default:U1},Symbol.toStringTag,{value:"Module"})),La=Fn(q1);var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});var du=La,J1=function(){function e(t){if(this._maxConcurrency=t,this._queue=[],t<=0)throw new Error("semaphore must be initialized to a positive value");this._value=t}return e.prototype.acquire=function(){var t=this,n=this.isLocked(),r=new Promise(function(i){return t._queue.push(i)});return n||this._dispatch(),r},e.prototype.runExclusive=function(t){return du.__awaiter(this,void 0,void 0,function(){var n,r,i;return du.__generator(this,function(s){switch(s.label){case 0:return[4,this.acquire()];case 1:n=s.sent(),r=n[0],i=n[1],s.label=2;case 2:return s.trys.push([2,,4,5]),[4,t(r)];case 3:return[2,s.sent()];case 4:return i(),[7];case 5:return[2]}})})},e.prototype.isLocked=function(){return this._value<=0},e.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var t=this._currentReleaser;this._currentReleaser=void 0,t()}},e.prototype._dispatch=function(){var t=this,n=this._queue.shift();if(n){var r=!1;this._currentReleaser=function(){r||(r=!0,t._value++,t._dispatch())},n([this._value--,this._currentReleaser])}},e}();Vi.default=J1;Object.defineProperty(Oa,"__esModule",{value:!0});var fu=La,$1=Vi,Z1=function(){function e(){this._semaphore=new $1.default(1)}return e.prototype.acquire=function(){return fu.__awaiter(this,void 0,void 0,function(){var t,n;return fu.__generator(this,function(r){switch(r.label){case 0:return[4,this._semaphore.acquire()];case 1:return t=r.sent(),n=t[1],[2,n]}})})},e.prototype.runExclusive=function(t){return this._semaphore.runExclusive(function(){return t()})},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.release=function(){this._semaphore.release()},e}();Oa.default=Z1;var zi={};Object.defineProperty(zi,"__esModule",{value:!0});zi.withTimeout=void 0;var Jr=La;function G1(e,t,n){var r=this;return n===void 0&&(n=new Error("timeout")),{acquire:function(){return new Promise(function(i,s){return Jr.__awaiter(r,void 0,void 0,function(){var o,a,c;return Jr.__generator(this,function(u){switch(u.label){case 0:return o=!1,setTimeout(function(){o=!0,s(n)},t),[4,e.acquire()];case 1:return a=u.sent(),o?(c=Array.isArray(a)?a[1]:a,c()):i(a),[2]}})})})},runExclusive:function(i){return Jr.__awaiter(this,void 0,void 0,function(){var s,o;return Jr.__generator(this,function(a){switch(a.label){case 0:s=function(){},a.label=1;case 1:return a.trys.push([1,,7,8]),[4,this.acquire()];case 2:return o=a.sent(),Array.isArray(o)?(s=o[1],[4,i(o[0])]):[3,4];case 3:return[2,a.sent()];case 4:return s=o,[4,i()];case 5:return[2,a.sent()];case 6:return[3,8];case 7:return s(),[7];case 8:return[2]}})})},release:function(){e.release()},isLocked:function(){return e.isLocked()}}}zi.withTimeout=G1;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.withTimeout=e.Semaphore=e.Mutex=void 0;var t=Oa;Object.defineProperty(e,"Mutex",{enumerable:!0,get:function(){return t.default}});var n=Vi;Object.defineProperty(e,"Semaphore",{enumerable:!0,get:function(){return n.default}});var r=zi;Object.defineProperty(e,"withTimeout",{enumerable:!0,get:function(){return r.withTimeout}})})(Mh);var Q1=K1,Y1=Object.prototype.hasOwnProperty;function K1(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)Y1.call(n,r)&&(e[r]=n[r])}return e}const X1=Q1,ey=fa();var ty=H;function H(e){const t=this;t.currentProvider=e}H.prototype.getBalance=Ar(2,"eth_getBalance");H.prototype.getCode=Ar(2,"eth_getCode");H.prototype.getTransactionCount=Ar(2,"eth_getTransactionCount");H.prototype.getStorageAt=Ar(3,"eth_getStorageAt");H.prototype.call=Ar(2,"eth_call");H.prototype.protocolVersion=J("eth_protocolVersion");H.prototype.syncing=J("eth_syncing");H.prototype.coinbase=J("eth_coinbase");H.prototype.mining=J("eth_mining");H.prototype.hashrate=J("eth_hashrate");H.prototype.gasPrice=J("eth_gasPrice");H.prototype.accounts=J("eth_accounts");H.prototype.blockNumber=J("eth_blockNumber");H.prototype.getBlockTransactionCountByHash=J("eth_getBlockTransactionCountByHash");H.prototype.getBlockTransactionCountByNumber=J("eth_getBlockTransactionCountByNumber");H.prototype.getUncleCountByBlockHash=J("eth_getUncleCountByBlockHash");H.prototype.getUncleCountByBlockNumber=J("eth_getUncleCountByBlockNumber");H.prototype.sign=J("eth_sign");H.prototype.sendTransaction=J("eth_sendTransaction");H.prototype.sendRawTransaction=J("eth_sendRawTransaction");H.prototype.estimateGas=J("eth_estimateGas");H.prototype.getBlockByHash=J("eth_getBlockByHash");H.prototype.getBlockByNumber=J("eth_getBlockByNumber");H.prototype.getTransactionByHash=J("eth_getTransactionByHash");H.prototype.getTransactionByBlockHashAndIndex=J("eth_getTransactionByBlockHashAndIndex");H.prototype.getTransactionByBlockNumberAndIndex=J("eth_getTransactionByBlockNumberAndIndex");H.prototype.getTransactionReceipt=J("eth_getTransactionReceipt");H.prototype.getUncleByBlockHashAndIndex=J("eth_getUncleByBlockHashAndIndex");H.prototype.getUncleByBlockNumberAndIndex=J("eth_getUncleByBlockNumberAndIndex");H.prototype.getCompilers=J("eth_getCompilers");H.prototype.compileLLL=J("eth_compileLLL");H.prototype.compileSolidity=J("eth_compileSolidity");H.prototype.compileSerpent=J("eth_compileSerpent");H.prototype.newFilter=J("eth_newFilter");H.prototype.newBlockFilter=J("eth_newBlockFilter");H.prototype.newPendingTransactionFilter=J("eth_newPendingTransactionFilter");H.prototype.uninstallFilter=J("eth_uninstallFilter");H.prototype.getFilterChanges=J("eth_getFilterChanges");H.prototype.getFilterLogs=J("eth_getFilterLogs");H.prototype.getLogs=J("eth_getLogs");H.prototype.getWork=J("eth_getWork");H.prototype.submitWork=J("eth_submitWork");H.prototype.submitHashrate=J("eth_submitHashrate");H.prototype.sendAsync=function(e,t){this.currentProvider.sendAsync(ny(e),function(n,r){if(!n&&r.error&&(n=new Error("EthQuery - RPC Error - "+r.error.message)),n)return t(n);t(null,r.result)})};function J(e){return function(){const t=this;var n=[].slice.call(arguments),r=n.pop();t.sendAsync({method:e,params:n},r)}}function Ar(e,t){return function(){const n=this;var r=[].slice.call(arguments),i=r.pop();r.length<e&&r.push("latest"),n.sendAsync({method:t,params:r},i)}}function ny(e){return X1({id:ey(),jsonrpc:"2.0",params:[]},e)}const pu=(e,t,n,r)=>function(...i){const s=t.promiseModule;return new s((o,a)=>{t.multiArgs?i.push((...c)=>{t.errorFirst?c[0]?a(c):(c.shift(),o(c)):o(c)}):t.errorFirst?i.push((c,u)=>{c?a(c):o(u)}):i.push(o),Reflect.apply(e,this===n?r:this,i)})},bu=new WeakMap;var ry=(e,t)=>{t={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...t};const n=typeof e;if(!(e!==null&&(n==="object"||n==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${e===null?"null":n}\``);const r=(o,a)=>{let c=bu.get(o);if(c||(c={},bu.set(o,c)),a in c)return c[a];const u=b=>typeof b=="string"||typeof a=="symbol"?a===b:b.test(a),h=Reflect.getOwnPropertyDescriptor(o,a),l=h===void 0||h.writable||h.configurable,d=(t.include?t.include.some(u):!t.exclude.some(u))&&l;return c[a]=d,d},i=new WeakMap,s=new Proxy(e,{apply(o,a,c){const u=i.get(o);if(u)return Reflect.apply(u,a,c);const h=t.excludeMain?o:pu(o,t,s,o);return i.set(o,h),Reflect.apply(h,a,c)},get(o,a){const c=o[a];if(!r(o,a)||c===Function.prototype[a])return c;const u=i.get(c);if(u)return u;if(typeof c=="function"){const h=pu(c,t,s,o);return i.set(c,h),h}return c}});return s};const iy=rn.default;let sy=class extends iy{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach(t=>this.emit("update",t))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}};var Da=sy;const oy=Da;let ay=class extends oy{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}};var cy=ay,Tr={minBlockRef:uy,maxBlockRef:ly,sortBlockRefs:Ba,bnToHex:hy,blockRefIsNumber:dy,hexToInt:li,incrementHexInt:fy,intToHex:Qh,unsafeRandomBytes:py};function uy(...e){return Ba(e)[0]}function ly(...e){const t=Ba(e);return t[t.length-1]}function Ba(e){return e.sort((t,n)=>t==="latest"||n==="earliest"?1:n==="latest"||t==="earliest"?-1:li(t)-li(n))}function hy(e){return"0x"+e.toString(16)}function dy(e){return e&&!["earliest","latest","pending"].includes(e)}function li(e){return e==null?e:Number.parseInt(e,16)}function fy(e){if(e==null)return e;const t=li(e);return Qh(t+1)}function Qh(e){if(e==null)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function py(e){let t="0x";for(let n=0;n<e;n++)t+=gu(),t+=gu();return t}function gu(){return Math.floor(Math.random()*16).toString(16)}const by=ty,gy=ry,yy=cy,{bnToHex:L5,hexToInt:$r,incrementHexInt:my,minBlockRef:vy,blockRefIsNumber:_y}=Tr;let wy=class extends yy{constructor({provider:e,params:t}){super(),this.type="log",this.ethQuery=new by(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},t),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(n=>n.toLowerCase()))}async initialize({currentBlock:e}){let t=this.params.fromBlock;["latest","pending"].includes(t)&&(t=e),t==="earliest"&&(t="0x0"),this.params.fromBlock=t;const n=vy(this.params.toBlock,e),r=Object.assign({},this.params,{toBlock:n}),i=await this._fetchLogs(r);this.addInitialResults(i)}async update({oldBlock:e,newBlock:t}){const n=t;let r;e?r=my(e):r=t;const i=Object.assign({},this.params,{fromBlock:r,toBlock:n}),s=(await this._fetchLogs(i)).filter(o=>this.matchLog(o));this.addResults(s)}async _fetchLogs(e){return await gy(t=>this.ethQuery.getLogs(e,t))()}matchLog(e){if($r(this.params.fromBlock)>=$r(e.blockNumber)||_y(this.params.toBlock)&&$r(this.params.toBlock)<=$r(e.blockNumber))return!1;const t=e.address&&e.address.toLowerCase();return this.params.address&&t&&!this.params.address.includes(t)?!1:this.params.topics.every((n,r)=>{let i=e.topics[r];if(!i)return!1;i=i.toLowerCase();let s=Array.isArray(n)?n:[n];return s.includes(null)?!0:(s=s.map(o=>o.toLowerCase()),s.includes(i))})}};var Sy=wy,Fa=Ey;async function Ey({provider:e,fromBlock:t,toBlock:n}){t||(t=n);const r=yu(t),i=yu(n)-r+1,s=Array(i).fill().map((o,a)=>r+a).map(ky);return await Promise.all(s.map(o=>Cy(e,"eth_getBlockByNumber",[o,!1])))}function yu(e){return e==null?e:Number.parseInt(e,16)}function ky(e){return e==null?e:"0x"+e.toString(16)}function xy(e,t){return new Promise((n,r)=>{e.sendAsync(t,(i,s)=>{i?r(i):s.error?r(s.error):s.result?n(s.result):r(new Error("Result was empty"))})})}async function Cy(e,t,n){for(let r=0;r<3;r++)try{return await xy(e,{id:1,jsonrpc:"2.0",method:t,params:n})}catch(i){console.error(`provider.sendAsync failed: ${i.stack||i.message||i}`)}throw new Error(`Block not found for params: ${JSON.stringify(n)}`)}const My=Da,Iy=Fa,{incrementHexInt:Ry}=Tr;let Ny=class extends My{constructor({provider:e,params:t}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:t}){const n=t,r=Ry(e),i=(await Iy({provider:this.provider,fromBlock:r,toBlock:n})).map(s=>s.hash);this.addResults(i)}};var Ay=Ny;const Ty=Da,jy=Fa,{incrementHexInt:Oy}=Tr;let Py=class extends Ty{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const t=e,n=Oy(e),r=await jy({provider:this.provider,fromBlock:n,toBlock:t}),i=[];for(const s of r)i.push(...s.transactions);this.addResults(i)}};var Ly=Py;const Dy=Mh.Mutex,{createAsyncMiddleware:By,createScaffoldMiddleware:Fy}=ja,Hy=Sy,Vy=Ay,zy=Ly,{intToHex:Yh,hexToInt:Ao}=Tr;var Wy=Uy;function Uy({blockTracker:e,provider:t}){let n=0,r={};const i=new Dy,s=qy({mutex:i}),o=Fy({eth_newFilter:s(To(c)),eth_newBlockFilter:s(To(u)),eth_newPendingTransactionFilter:s(To(h)),eth_uninstallFilter:s(ti(b)),eth_getFilterChanges:s(ti(l)),eth_getFilterLogs:s(ti(d))}),a=async({oldBlock:E,newBlock:S})=>{if(r.length===0)return;const k=await i.acquire();try{await Promise.all(pn(r).map(async x=>{try{await x.update({oldBlock:E,newBlock:S})}catch(N){console.error(N)}}))}catch(x){console.error(x)}k()};return o.newLogFilter=c,o.newBlockFilter=u,o.newPendingTransactionFilter=h,o.uninstallFilter=b,o.getFilterChanges=l,o.getFilterLogs=d,o.destroy=()=>{w()},o;async function c(E){const S=new Hy({provider:t,params:E});return await v(S),S}async function u(){const E=new Vy({provider:t});return await v(E),E}async function h(){const E=new zy({provider:t});return await v(E),E}async function l(E){const S=Ao(E),k=r[S];if(!k)throw new Error(`No filter for index "${S}"`);return k.getChangesAndClear()}async function d(E){const S=Ao(E),k=r[S];if(!k)throw new Error(`No filter for index "${S}"`);let x=[];return k.type==="log"&&(x=k.getAllResults()),x}async function b(E){const S=Ao(E),k=!!r[S];return k&&await m(S),k}async function v(E){const S=pn(r).length,k=await e.getLatestBlock();await E.initialize({currentBlock:k}),n++,r[n]=E,E.id=n,E.idHex=Yh(n);const x=pn(r).length;return y({prevFilterCount:S,newFilterCount:x}),n}async function m(E){const S=pn(r).length;delete r[E];const k=pn(r).length;y({prevFilterCount:S,newFilterCount:k})}async function w(){const E=pn(r).length;r={},y({prevFilterCount:E,newFilterCount:0})}function y({prevFilterCount:E,newFilterCount:S}){if(E===0&&S>0){e.on("sync",a);return}if(E>0&&S===0){e.removeListener("sync",a);return}}}function To(e){return ti(async(...t)=>{const n=await e(...t);return Yh(n.id)})}function ti(e){return By(async(t,n)=>{const r=await e.apply(null,t.params);n.result=r})}function qy({mutex:e}){return t=>async(n,r,i,s)=>{(await e.acquire())(),t(n,r,i,s)}}function pn(e,t){const n=[];for(let r in e)n.push(e[r]);return n}const Jy=rn.default,{createAsyncMiddleware:mu,createScaffoldMiddleware:$y}=ja,Zy=Wy,{unsafeRandomBytes:Gy,incrementHexInt:Qy}=Tr,Yy=Fa;var Ky=Xy;function Xy({blockTracker:e,provider:t}){const n={},r=Zy({blockTracker:e,provider:t});let i=!1;const s=new Jy,o=$y({eth_subscribe:mu(a),eth_unsubscribe:mu(c)});return o.destroy=h,{events:s,middleware:o};async function a(l,d){if(i)throw new Error("SubscriptionManager - attempting to use after destroying");const b=l.params[0],v=Gy(16);let m;switch(b){case"newHeads":m=w({subId:v});break;case"logs":const E=l.params[1],S=await r.newLogFilter(E);m=y({subId:v,filter:S});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${b}"`)}n[v]=m,d.result=v;return;function w({subId:E}){const S={type:b,destroy:async()=>{e.removeListener("sync",S.update)},update:async({oldBlock:k,newBlock:x})=>{const N=x,L=Qy(k);(await Yy({provider:t,fromBlock:L,toBlock:N})).map(em).filter(T=>T!==null).forEach(T=>{u(E,T)})}};return e.on("sync",S.update),S}function y({subId:E,filter:S}){return S.on("update",k=>u(E,k)),{type:b,destroy:async()=>await r.uninstallFilter(S.idHex)}}}async function c(l,d){if(i)throw new Error("SubscriptionManager - attempting to use after destroying");const b=l.params[0],v=n[b];if(!v){d.result=!1;return}delete n[b],await v.destroy(),d.result=!0}function u(l,d){s.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:l,result:d}})}function h(){s.removeAllListeners();for(const l in n)n[l].destroy(),delete n[l];i=!0}}function em(e){return e==null?null:{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}Object.defineProperty(Ni,"__esModule",{value:!0});Ni.SubscriptionManager=void 0;const tm=ah,nm=Ky,vu=()=>{};class rm{constructor(t){const n=new tm.PollingBlockTracker({provider:t,pollingInterval:15e3,setSkipCacheFlag:!0}),{events:r,middleware:i}=nm({blockTracker:n,provider:t});this.events=r,this.subscriptionMiddleware=i}async handleRequest(t){const n={};return await this.subscriptionMiddleware(t,n,vu,vu),n}destroy(){this.subscriptionMiddleware.destroy()}}Ni.SubscriptionManager=rm;var Ha=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(En,"__esModule",{value:!0});En.CoinbaseWalletProvider=void 0;const im=Ha(rn),sm=Ha(yi),jo=Hn,ee=mr,_u=zn,wu=et,Oo=Si,om=re,W=O,Po=Ha(kg),am=Mn,Y=oh,cm=Ni,Su="DefaultChainId",Eu="DefaultJsonRpcUrl";class um extends im.default{constructor(t){var n,r;super(),this._filterPolyfill=new am.FilterPolyfill(this),this._subscriptionManager=new cm.SubscriptionManager(this),this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1,this.setProviderInfo=this.setProviderInfo.bind(this),this.updateProviderInfo=this.updateProviderInfo.bind(this),this.getChainId=this.getChainId.bind(this),this.setAppInfo=this.setAppInfo.bind(this),this.enable=this.enable.bind(this),this.close=this.close.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this.request=this.request.bind(this),this._setAddresses=this._setAddresses.bind(this),this.scanQRCode=this.scanQRCode.bind(this),this.genericRequest=this.genericRequest.bind(this),this._chainIdFromOpts=t.chainId,this._jsonRpcUrlFromOpts=t.jsonRpcUrl,this._overrideIsMetaMask=t.overrideIsMetaMask,this._relayProvider=t.relayProvider,this._storage=t.storage,this._relayEventManager=t.relayEventManager,this.diagnostic=t.diagnosticLogger,this.reloadOnDisconnect=!0,this.isCoinbaseWallet=(n=t.overrideIsCoinbaseWallet)!==null&&n!==void 0?n:!0,this.isCoinbaseBrowser=(r=t.overrideIsCoinbaseBrowser)!==null&&r!==void 0?r:!1,this.qrUrl=t.qrUrl;const i=this.getChainId(),s=(0,W.prepend0x)(i.toString(16));this.emit("connect",{chainIdStr:s});const o=this._storage.getItem(wu.LOCAL_STORAGE_ADDRESSES_KEY);if(o){const a=o.split(" ");a[0]!==""&&(this._addresses=a.map(c=>(0,W.ensureAddressString)(c)),this.emit("accountsChanged",a))}this._subscriptionManager.events.on("notification",a=>{this.emit("message",{type:a.method,data:a.params})}),this._isAuthorized()&&this.initializeRelay(),window.addEventListener("message",a=>{var c;if(!(a.origin!==location.origin||a.source!==window)&&a.data.type==="walletLinkMessage"){if(a.data.data.action==="dappChainSwitched"){const u=a.data.data.chainId,h=(c=a.data.data.jsonRpcUrl)!==null&&c!==void 0?c:this.jsonRpcUrl;this.updateProviderInfo(h,Number(u))}a.data.data.action==="addressChanged"&&this._setAddresses([a.data.data.address])}})}get selectedAddress(){return this._addresses[0]||void 0}get networkVersion(){return this.getChainId().toString(10)}get chainId(){return(0,W.prepend0x)(this.getChainId().toString(16))}get isWalletLink(){return!0}get isMetaMask(){return this._overrideIsMetaMask}get host(){return this.jsonRpcUrl}get connected(){return!0}isConnected(){return!0}get jsonRpcUrl(){var t;return(t=this._storage.getItem(Eu))!==null&&t!==void 0?t:this._jsonRpcUrlFromOpts}set jsonRpcUrl(t){this._storage.setItem(Eu,t)}disableReloadOnDisconnect(){this.reloadOnDisconnect=!1}setProviderInfo(t,n){this.isCoinbaseBrowser||(this._chainIdFromOpts=n,this._jsonRpcUrlFromOpts=t),this.updateProviderInfo(this.jsonRpcUrl,this.getChainId())}updateProviderInfo(t,n){this.jsonRpcUrl=t;const r=this.getChainId();this._storage.setItem(Su,n.toString(10)),((0,W.ensureIntNumber)(n)!==r||!this.hasMadeFirstChainChangedEmission)&&(this.emit("chainChanged",this.getChainId()),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(t,n,r,i,s,o){return!!(await(await this.initializeRelay()).watchAsset(t,n,r,i,s,o==null?void 0:o.toString()).promise).result}async addEthereumChain(t,n,r,i,s,o){var a,c;if((0,W.ensureIntNumber)(t)===this.getChainId())return!1;const u=await this.initializeRelay(),h=u.inlineAddEthereumChain(t.toString());!this._isAuthorized()&&!h&&await u.requestEthereumAccounts().promise;const l=await u.addEthereumChain(t.toString(),n,s,r,i,o).promise;return((a=l.result)===null||a===void 0?void 0:a.isApproved)===!0&&this.updateProviderInfo(n[0],t),((c=l.result)===null||c===void 0?void 0:c.isApproved)===!0}async switchEthereumChain(t){const n=await(await this.initializeRelay()).switchEthereumChain(t.toString(10),this.selectedAddress||void 0).promise;if((0,om.isErrorResponse)(n)&&n.errorCode)throw n.errorCode===ee.standardErrorCodes.provider.unsupportedChain?ee.standardErrors.provider.unsupportedChain(t):ee.standardErrors.provider.custom({message:n.errorMessage,code:n.errorCode});const r=n.result;r.isApproved&&r.rpcUrl.length>0&&this.updateProviderInfo(r.rpcUrl,t)}setAppInfo(t,n){this.initializeRelay().then(r=>r.setAppInfo(t,n))}async enable(){var t;return(t=this.diagnostic)===null||t===void 0||t.log(jo.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::enable",addresses_length:this._addresses.length,sessionIdHash:this._relay?_u.Session.hash(this._relay.session.id):void 0}),this._isAuthorized()?[...this._addresses]:await this.send(Y.JSONRPCMethod.eth_requestAccounts)}async close(){(await this.initializeRelay()).resetAndReload()}send(t,n){try{const r=this._send(t,n);if(r instanceof Promise)return r.catch(i=>{throw(0,ee.serializeError)(i,t)})}catch(r){throw(0,ee.serializeError)(r,t)}}_send(t,n){if(typeof t=="string"){const i=t,s=Array.isArray(n)?n:n!==void 0?[n]:[],o={jsonrpc:"2.0",id:0,method:i,params:s};return this._sendRequestAsync(o).then(a=>a.result)}if(typeof n=="function"){const i=t,s=n;return this._sendAsync(i,s)}if(Array.isArray(t))return t.map(i=>this._sendRequest(i));const r=t;return this._sendRequest(r)}async sendAsync(t,n){try{return this._sendAsync(t,n).catch(r=>{throw(0,ee.serializeError)(r,t)})}catch(r){return Promise.reject((0,ee.serializeError)(r,t))}}async _sendAsync(t,n){if(typeof n!="function")throw new Error("callback is required");if(Array.isArray(t)){const i=n;this._sendMultipleRequestsAsync(t).then(s=>i(null,s)).catch(s=>i(s,null));return}const r=n;return this._sendRequestAsync(t).then(i=>r(null,i)).catch(i=>r(i,null))}async request(t){try{return this._request(t).catch(n=>{throw(0,ee.serializeError)(n,t.method)})}catch(n){return Promise.reject((0,ee.serializeError)(n,t.method))}}async _request(t){if(!t||typeof t!="object"||Array.isArray(t))throw ee.standardErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:t});const{method:n,params:r}=t;if(typeof n!="string"||n.length===0)throw ee.standardErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:t});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw ee.standardErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:t});const i=r===void 0?[]:r,s=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:n,params:i,jsonrpc:"2.0",id:s})).result}async scanQRCode(t){var n;const r=await(await this.initializeRelay()).scanQRCode((0,W.ensureRegExpString)(t)).promise;if(typeof r.result!="string")throw(0,ee.serializeError)((n=r.errorMessage)!==null&&n!==void 0?n:"result was not a string",Oo.Web3Method.scanQRCode);return r.result}async genericRequest(t,n){var r;const i=await(await this.initializeRelay()).genericRequest(t,n).promise;if(typeof i.result!="string")throw(0,ee.serializeError)((r=i.errorMessage)!==null&&r!==void 0?r:"result was not a string",Oo.Web3Method.generic);return i.result}async selectProvider(t){var n;const r=await(await this.initializeRelay()).selectProvider(t).promise;if(typeof r.result!="string")throw(0,ee.serializeError)((n=r.errorMessage)!==null&&n!==void 0?n:"result was not a string",Oo.Web3Method.selectProvider);return r.result}supportsSubscriptions(){return!1}subscribe(){throw new Error("Subscriptions are not supported")}unsubscribe(){throw new Error("Subscriptions are not supported")}disconnect(){return!0}_sendRequest(t){const n={jsonrpc:"2.0",id:t.id},{method:r}=t;if(n.result=this._handleSynchronousMethods(t),n.result===void 0)throw new Error(`Coinbase Wallet does not support calling ${r} synchronously without a callback. Please provide a callback parameter to call ${r} asynchronously.`);return n}_setAddresses(t,n){if(!Array.isArray(t))throw new Error("addresses is not an array");const r=t.map(i=>(0,W.ensureAddressString)(i));JSON.stringify(r)!==JSON.stringify(this._addresses)&&(this._addresses=r,this.emit("accountsChanged",this._addresses),this._storage.setItem(wu.LOCAL_STORAGE_ADDRESSES_KEY,r.join(" ")))}_sendRequestAsync(t){return new Promise((n,r)=>{try{const i=this._handleSynchronousMethods(t);if(i!==void 0)return n({jsonrpc:"2.0",id:t.id,result:i});const s=this._handleAsynchronousFilterMethods(t);if(s!==void 0){s.then(a=>n(Object.assign(Object.assign({},a),{id:t.id}))).catch(a=>r(a));return}const o=this._handleSubscriptionMethods(t);if(o!==void 0){o.then(a=>n({jsonrpc:"2.0",id:t.id,result:a.result})).catch(a=>r(a));return}}catch(i){return r(i)}this._handleAsynchronousMethods(t).then(i=>i&&n(Object.assign(Object.assign({},i),{id:t.id}))).catch(i=>r(i))})}_sendMultipleRequestsAsync(t){return Promise.all(t.map(n=>this._sendRequestAsync(n)))}_handleSynchronousMethods(t){const{method:n}=t,r=t.params||[];switch(n){case Y.JSONRPCMethod.eth_accounts:return this._eth_accounts();case Y.JSONRPCMethod.eth_coinbase:return this._eth_coinbase();case Y.JSONRPCMethod.eth_uninstallFilter:return this._eth_uninstallFilter(r);case Y.JSONRPCMethod.net_version:return this._net_version();case Y.JSONRPCMethod.eth_chainId:return this._eth_chainId();default:return}}async _handleAsynchronousMethods(t){const{method:n}=t,r=t.params||[];switch(n){case Y.JSONRPCMethod.eth_requestAccounts:return this._eth_requestAccounts();case Y.JSONRPCMethod.eth_sign:return this._eth_sign(r);case Y.JSONRPCMethod.eth_ecRecover:return this._eth_ecRecover(r);case Y.JSONRPCMethod.personal_sign:return this._personal_sign(r);case Y.JSONRPCMethod.personal_ecRecover:return this._personal_ecRecover(r);case Y.JSONRPCMethod.eth_signTransaction:return this._eth_signTransaction(r);case Y.JSONRPCMethod.eth_sendRawTransaction:return this._eth_sendRawTransaction(r);case Y.JSONRPCMethod.eth_sendTransaction:return this._eth_sendTransaction(r);case Y.JSONRPCMethod.eth_signTypedData_v1:return this._eth_signTypedData_v1(r);case Y.JSONRPCMethod.eth_signTypedData_v2:return this._throwUnsupportedMethodError();case Y.JSONRPCMethod.eth_signTypedData_v3:return this._eth_signTypedData_v3(r);case Y.JSONRPCMethod.eth_signTypedData_v4:case Y.JSONRPCMethod.eth_signTypedData:return this._eth_signTypedData_v4(r);case Y.JSONRPCMethod.cbWallet_arbitrary:return this._cbwallet_arbitrary(r);case Y.JSONRPCMethod.wallet_addEthereumChain:return this._wallet_addEthereumChain(r);case Y.JSONRPCMethod.wallet_switchEthereumChain:return this._wallet_switchEthereumChain(r);case Y.JSONRPCMethod.wallet_watchAsset:return this._wallet_watchAsset(r)}return(await this.initializeRelay()).makeEthereumJSONRPCRequest(t,this.jsonRpcUrl)}_handleAsynchronousFilterMethods(t){const{method:n}=t,r=t.params||[];switch(n){case Y.JSONRPCMethod.eth_newFilter:return this._eth_newFilter(r);case Y.JSONRPCMethod.eth_newBlockFilter:return this._eth_newBlockFilter();case Y.JSONRPCMethod.eth_newPendingTransactionFilter:return this._eth_newPendingTransactionFilter();case Y.JSONRPCMethod.eth_getFilterChanges:return this._eth_getFilterChanges(r);case Y.JSONRPCMethod.eth_getFilterLogs:return this._eth_getFilterLogs(r)}}_handleSubscriptionMethods(t){switch(t.method){case Y.JSONRPCMethod.eth_subscribe:case Y.JSONRPCMethod.eth_unsubscribe:return this._subscriptionManager.handleRequest(t)}}_isKnownAddress(t){try{const n=(0,W.ensureAddressString)(t);return this._addresses.map(r=>(0,W.ensureAddressString)(r)).includes(n)}catch{}return!1}_ensureKnownAddress(t){var n;if(!this._isKnownAddress(t))throw(n=this.diagnostic)===null||n===void 0||n.log(jo.EVENTS.UNKNOWN_ADDRESS_ENCOUNTERED),new Error("Unknown Ethereum address")}_prepareTransactionParams(t){const n=t.from?(0,W.ensureAddressString)(t.from):this.selectedAddress;if(!n)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(n);const r=t.to?(0,W.ensureAddressString)(t.to):null,i=t.value!=null?(0,W.ensureBN)(t.value):new sm.default(0),s=t.data?(0,W.ensureBuffer)(t.data):Buffer.alloc(0),o=t.nonce!=null?(0,W.ensureIntNumber)(t.nonce):null,a=t.gasPrice!=null?(0,W.ensureBN)(t.gasPrice):null,c=t.maxFeePerGas!=null?(0,W.ensureBN)(t.maxFeePerGas):null,u=t.maxPriorityFeePerGas!=null?(0,W.ensureBN)(t.maxPriorityFeePerGas):null,h=t.gas!=null?(0,W.ensureBN)(t.gas):null,l=this.getChainId();return{fromAddress:n,toAddress:r,weiValue:i,data:s,nonce:o,gasPriceInWei:a,maxFeePerGas:c,maxPriorityFeePerGas:u,gasLimit:h,chainId:l}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw ee.standardErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw ee.standardErrors.provider.unsupportedMethod({})}async _signEthereumMessage(t,n,r,i){this._ensureKnownAddress(n);try{return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).signEthereumMessage(t,n,r,i).promise).result}}catch(s){throw typeof s.message=="string"&&s.message.match(/(denied|rejected)/i)?ee.standardErrors.provider.userRejectedRequest("User denied message signature"):s}}async _ethereumAddressFromSignedMessage(t,n,r){return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).ethereumAddressFromSignedMessage(t,n,r).promise).result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,W.hexStringFromIntNumber)(this.getChainId())}getChainId(){const t=this._storage.getItem(Su);if(!t)return(0,W.ensureIntNumber)(this._chainIdFromOpts);const n=parseInt(t,10);return(0,W.ensureIntNumber)(n)}async _eth_requestAccounts(){var t;if((t=this.diagnostic)===null||t===void 0||t.log(jo.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::_eth_requestAccounts",addresses_length:this._addresses.length,sessionIdHash:this._relay?_u.Session.hash(this._relay.session.id):void 0}),this._isAuthorized())return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});let n;try{n=await(await this.initializeRelay()).requestEthereumAccounts().promise}catch(r){throw typeof r.message=="string"&&r.message.match(/(denied|rejected)/i)?ee.standardErrors.provider.userRejectedRequest("User denied account authorization"):r}if(!n.result)throw new Error("accounts received is empty");return this._setAddresses(n.result),this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(t){this._requireAuthorization();const n=(0,W.ensureAddressString)(t[0]),r=(0,W.ensureBuffer)(t[1]);return this._signEthereumMessage(r,n,!1)}_eth_ecRecover(t){const n=(0,W.ensureBuffer)(t[0]),r=(0,W.ensureBuffer)(t[1]);return this._ethereumAddressFromSignedMessage(n,r,!1)}_personal_sign(t){this._requireAuthorization();const n=(0,W.ensureBuffer)(t[0]),r=(0,W.ensureAddressString)(t[1]);return this._signEthereumMessage(n,r,!0)}_personal_ecRecover(t){const n=(0,W.ensureBuffer)(t[0]),r=(0,W.ensureBuffer)(t[1]);return this._ethereumAddressFromSignedMessage(n,r,!0)}async _eth_signTransaction(t){this._requireAuthorization();const n=this._prepareTransactionParams(t[0]||{});try{return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).signEthereumTransaction(n).promise).result}}catch(r){throw typeof r.message=="string"&&r.message.match(/(denied|rejected)/i)?ee.standardErrors.provider.userRejectedRequest("User denied transaction signature"):r}}async _eth_sendRawTransaction(t){const n=(0,W.ensureBuffer)(t[0]);return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).submitEthereumTransaction(n,this.getChainId()).promise).result}}async _eth_sendTransaction(t){this._requireAuthorization();const n=this._prepareTransactionParams(t[0]||{});try{return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).signAndSubmitEthereumTransaction(n).promise).result}}catch(r){throw typeof r.message=="string"&&r.message.match(/(denied|rejected)/i)?ee.standardErrors.provider.userRejectedRequest("User denied transaction signature"):r}}async _eth_signTypedData_v1(t){this._requireAuthorization();const n=(0,W.ensureParsedJSONObject)(t[0]),r=(0,W.ensureAddressString)(t[1]);this._ensureKnownAddress(r);const i=Po.default.hashForSignTypedDataLegacy({data:n}),s=JSON.stringify(n,null,2);return this._signEthereumMessage(i,r,!1,s)}async _eth_signTypedData_v3(t){this._requireAuthorization();const n=(0,W.ensureAddressString)(t[0]),r=(0,W.ensureParsedJSONObject)(t[1]);this._ensureKnownAddress(n);const i=Po.default.hashForSignTypedData_v3({data:r}),s=JSON.stringify(r,null,2);return this._signEthereumMessage(i,n,!1,s)}async _eth_signTypedData_v4(t){this._requireAuthorization();const n=(0,W.ensureAddressString)(t[0]),r=(0,W.ensureParsedJSONObject)(t[1]);this._ensureKnownAddress(n);const i=Po.default.hashForSignTypedData_v4({data:r}),s=JSON.stringify(r,null,2);return this._signEthereumMessage(i,n,!1,s)}async _cbwallet_arbitrary(t){const n=t[0],r=t[1];if(typeof r!="string")throw new Error("parameter must be a string");if(typeof n!="object"||n===null)throw new Error("parameter must be an object");return{jsonrpc:"2.0",id:0,result:await this.genericRequest(n,r)}}async _wallet_addEthereumChain(t){var n,r,i,s;const o=t[0];if(((n=o.rpcUrls)===null||n===void 0?void 0:n.length)===0)return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!o.chainName||o.chainName.trim()==="")throw ee.standardErrors.rpc.invalidParams("chainName is a required field");if(!o.nativeCurrency)throw ee.standardErrors.rpc.invalidParams("nativeCurrency is a required field");const a=parseInt(o.chainId,16);return await this.addEthereumChain(a,(r=o.rpcUrls)!==null&&r!==void 0?r:[],(i=o.blockExplorerUrls)!==null&&i!==void 0?i:[],o.chainName,(s=o.iconUrls)!==null&&s!==void 0?s:[],o.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(t){const n=t[0];return await this.switchEthereumChain(parseInt(n.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(t){const n=Array.isArray(t)?t[0]:t;if(!n.type)throw ee.standardErrors.rpc.invalidParams("Type is required");if((n==null?void 0:n.type)!=="ERC20")throw ee.standardErrors.rpc.invalidParams(`Asset of type '${n.type}' is not supported`);if(!(n!=null&&n.options))throw ee.standardErrors.rpc.invalidParams("Options are required");if(!(n!=null&&n.options.address))throw ee.standardErrors.rpc.invalidParams("Address is required");const r=this.getChainId(),{address:i,symbol:s,image:o,decimals:a}=n.options;return{jsonrpc:"2.0",id:0,result:await this.watchAsset(n.type,i,s,a,o,r)}}_eth_uninstallFilter(t){const n=(0,W.ensureHexString)(t[0]);return this._filterPolyfill.uninstallFilter(n)}async _eth_newFilter(t){const n=t[0];return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newFilter(n)}}async _eth_newBlockFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newBlockFilter()}}async _eth_newPendingTransactionFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newPendingTransactionFilter()}}_eth_getFilterChanges(t){const n=(0,W.ensureHexString)(t[0]);return this._filterPolyfill.getFilterChanges(n)}_eth_getFilterLogs(t){const n=(0,W.ensureHexString)(t[0]);return this._filterPolyfill.getFilterLogs(n)}initializeRelay(){return this._relay?Promise.resolve(this._relay):this._relayProvider().then(t=>(t.setAccountsCallback((n,r)=>this._setAddresses(n,r)),t.setChainCallback((n,r)=>{this.updateProviderInfo(r,parseInt(n,10))}),t.setDappDefaultChainCallback(this._chainIdFromOpts),this._relay=t,t))}}En.CoinbaseWalletProvider=um;var Wi={},Ui={},jr,F,Kh,Xh,Qt,ku,ed,ea,td,pr={},nd=[],lm=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,qi=Array.isArray;function _t(e,t){for(var n in t)e[n]=t[n];return e}function rd(e){var t=e.parentNode;t&&t.removeChild(e)}function ta(e,t,n){var r,i,s,o={};for(s in t)s=="key"?r=t[s]:s=="ref"?i=t[s]:o[s]=t[s];if(arguments.length>2&&(o.children=arguments.length>3?jr.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)o[s]===void 0&&(o[s]=e.defaultProps[s]);return cr(e,o,r,i,null)}function cr(e,t,n,r,i){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++Kh,__i:-1,__u:0};return i==null&&F.vnode!=null&&F.vnode(s),s}function hm(){return{current:null}}function Or(e){return e.children}function ur(e,t){this.props=e,this.context=t}function An(e,t){if(t==null)return e.__?An(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?An(e):null}function id(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return id(e)}}function na(e){(!e.__d&&(e.__d=!0)&&Qt.push(e)&&!hi.__r++||ku!==F.debounceRendering)&&((ku=F.debounceRendering)||ed)(hi)}function hi(){var e,t,n,r,i,s,o,a,c;for(Qt.sort(ea);e=Qt.shift();)e.__d&&(t=Qt.length,r=void 0,s=(i=(n=e).__v).__e,a=[],c=[],(o=n.__P)&&((r=_t({},i)).__v=i.__v+1,F.vnode&&F.vnode(r),Va(o,r,i,n.__n,o.ownerSVGElement!==void 0,32&i.__u?[s]:null,a,s??An(i),!!(32&i.__u),c),r.__.__k[r.__i]=r,cd(a,r,c),r.__e!=s&&id(r)),Qt.length>t&&Qt.sort(ea));hi.__r=0}function sd(e,t,n,r,i,s,o,a,c,u,h){var l,d,b,v,m,w=r&&r.__k||nd,y=t.length;for(n.__d=c,dm(n,t,w),c=n.__d,l=0;l<y;l++)(b=n.__k[l])!=null&&typeof b!="boolean"&&typeof b!="function"&&(d=b.__i===-1?pr:w[b.__i]||pr,b.__i=l,Va(e,b,d,i,s,o,a,c,u,h),v=b.__e,b.ref&&d.ref!=b.ref&&(d.ref&&za(d.ref,null,b),h.push(b.ref,b.__c||v,b)),m==null&&v!=null&&(m=v),65536&b.__u||d.__k===b.__k?c=od(b,c,e):typeof b.type=="function"&&b.__d!==void 0?c=b.__d:v&&(c=v.nextSibling),b.__d=void 0,b.__u&=-196609);n.__d=c,n.__e=m}function dm(e,t,n){var r,i,s,o,a,c=t.length,u=n.length,h=u,l=0;for(e.__k=[],r=0;r<c;r++)(i=e.__k[r]=(i=t[r])==null||typeof i=="boolean"||typeof i=="function"?null:typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?cr(null,i,null,null,i):qi(i)?cr(Or,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?cr(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)!=null?(i.__=e,i.__b=e.__b+1,a=fm(i,n,o=r+l,h),i.__i=a,s=null,a!==-1&&(h--,(s=n[a])&&(s.__u|=131072)),s==null||s.__v===null?(a==-1&&l--,typeof i.type!="function"&&(i.__u|=65536)):a!==o&&(a===o+1?l++:a>o?h>c-o?l+=a-o:l--:l=a<o&&a==o-1?a-o:0,a!==r+l&&(i.__u|=65536))):(s=n[r])&&s.key==null&&s.__e&&(s.__e==e.__d&&(e.__d=An(s)),ra(s,s,!1),n[r]=null,h--);if(h)for(r=0;r<u;r++)(s=n[r])!=null&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=An(s)),ra(s,s))}function od(e,t,n){var r,i;if(typeof e.type=="function"){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=od(r[i],t,n));return t}return e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e),t&&t.nextSibling}function ad(e,t){return t=t||[],e==null||typeof e=="boolean"||(qi(e)?e.some(function(n){ad(n,t)}):t.push(e)),t}function fm(e,t,n,r){var i=e.key,s=e.type,o=n-1,a=n+1,c=t[n];if(c===null||c&&i==c.key&&s===c.type)return n;if(r>(c!=null&&!(131072&c.__u)?1:0))for(;o>=0||a<t.length;){if(o>=0){if((c=t[o])&&!(131072&c.__u)&&i==c.key&&s===c.type)return o;o--}if(a<t.length){if((c=t[a])&&!(131072&c.__u)&&i==c.key&&s===c.type)return a;a++}}return-1}function xu(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||lm.test(t)?n:n+"px"}function Zr(e,t,n,r,i){var s;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||xu(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||xu(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,s?Mu:Cu,s)):e.removeEventListener(t,s?Mu:Cu,s);else{if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function Cu(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(F.event?F.event(e):e)}function Mu(e){return this.l[e.type+!0](F.event?F.event(e):e)}function Va(e,t,n,r,i,s,o,a,c,u){var h,l,d,b,v,m,w,y,E,S,k,x,N,L,T,M=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),s=[a=t.__e=n.__e]),(h=F.__b)&&h(t);e:if(typeof M=="function")try{if(y=t.props,E=(h=M.contextType)&&r[h.__c],S=h?E?E.props.value:h.__:r,n.__c?w=(l=t.__c=n.__c).__=l.__E:("prototype"in M&&M.prototype.render?t.__c=l=new M(y,S):(t.__c=l=new ur(y,S),l.constructor=M,l.render=bm),E&&E.sub(l),l.props=y,l.state||(l.state={}),l.context=S,l.__n=r,d=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),M.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=_t({},l.__s)),_t(l.__s,M.getDerivedStateFromProps(y,l.__s))),b=l.props,v=l.state,l.__v=t,d)M.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(M.getDerivedStateFromProps==null&&y!==b&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(y,S),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(y,l.__s,S)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=y,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function($){$&&($.__=t)}),k=0;k<l._sb.length;k++)l.__h.push(l._sb[k]);l._sb=[],l.__h.length&&o.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(y,l.__s,S),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(b,v,m)})}if(l.context=S,l.props=y,l.__P=e,l.__e=!1,x=F.__r,N=0,"prototype"in M&&M.prototype.render){for(l.state=l.__s,l.__d=!1,x&&x(t),h=l.render(l.props,l.state,l.context),L=0;L<l._sb.length;L++)l.__h.push(l._sb[L]);l._sb=[]}else do l.__d=!1,x&&x(t),h=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++N<25);l.state=l.__s,l.getChildContext!=null&&(r=_t(_t({},r),l.getChildContext())),d||l.getSnapshotBeforeUpdate==null||(m=l.getSnapshotBeforeUpdate(b,v)),sd(e,qi(T=h!=null&&h.type===Or&&h.key==null?h.props.children:h)?T:[T],t,n,r,i,s,o,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&o.push(l),w&&(l.__E=l.__=null)}catch($){t.__v=null,c||s!=null?(t.__e=a,t.__u|=c?160:32,s[s.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),F.__e($,t,n)}else s==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=pm(n.__e,t,n,r,i,s,o,c,u);(h=F.diffed)&&h(t)}function cd(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)za(n[r],n[++r],n[++r]);F.__c&&F.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(s){s.call(i)})}catch(s){F.__e(s,i.__v)}})}function pm(e,t,n,r,i,s,o,a,c){var u,h,l,d,b,v,m,w=n.props,y=t.props,E=t.type;if(E==="svg"&&(i=!0),s!=null){for(u=0;u<s.length;u++)if((b=s[u])&&"setAttribute"in b==!!E&&(E?b.localName===E:b.nodeType===3)){e=b,s[u]=null;break}}if(e==null){if(E===null)return document.createTextNode(y);e=i?document.createElementNS("http://www.w3.org/2000/svg",E):document.createElement(E,y.is&&y),s=null,a=!1}if(E===null)w===y||a&&e.data===y||(e.data=y);else{if(s=s&&jr.call(e.childNodes),w=n.props||pr,!a&&s!=null)for(w={},u=0;u<e.attributes.length;u++)w[(b=e.attributes[u]).name]=b.value;for(u in w)b=w[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=b:u==="key"||u in y||Zr(e,u,null,b,i));for(u in y)b=y[u],u=="children"?d=b:u=="dangerouslySetInnerHTML"?h=b:u=="value"?v=b:u=="checked"?m=b:u==="key"||a&&typeof b!="function"||w[u]===b||Zr(e,u,b,w[u],i);if(h)a||l&&(h.__html===l.__html||h.__html===e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(l&&(e.innerHTML=""),sd(e,qi(d)?d:[d],t,n,r,i&&E!=="foreignObject",s,o,s?s[0]:n.__k&&An(n,0),a,c),s!=null)for(u=s.length;u--;)s[u]!=null&&rd(s[u]);a||(u="value",v!==void 0&&(v!==e[u]||E==="progress"&&!v||E==="option"&&v!==w[u])&&Zr(e,u,v,w[u],!1),u="checked",m!==void 0&&m!==e[u]&&Zr(e,u,m,w[u],!1))}return e}function za(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){F.__e(r,n)}}function ra(e,t,n){var r,i;if(F.unmount&&F.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||za(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){F.__e(s,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&ra(r[i],t,n||typeof e.type!="function");n||e.__e==null||rd(e.__e),e.__=e.__e=e.__d=void 0}function bm(e,t,n){return this.constructor(e,n)}function ud(e,t,n){var r,i,s,o;F.__&&F.__(e,t),i=(r=typeof n=="function")?null:n&&n.__k||t.__k,s=[],o=[],Va(t,e=(!r&&n||t).__k=ta(Or,null,[e]),i||pr,pr,t.ownerSVGElement!==void 0,!r&&n?[n]:i?null:t.firstChild?jr.call(t.childNodes):null,s,!r&&n?n:i?i.__e:t.firstChild,r,o),cd(s,e,o)}function ld(e,t){ud(e,t,ld)}function gm(e,t,n){var r,i,s,o,a=_t({},e.props);for(s in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),t)s=="key"?r=t[s]:s=="ref"?i=t[s]:a[s]=t[s]===void 0&&o!==void 0?o[s]:t[s];return arguments.length>2&&(a.children=arguments.length>3?jr.call(arguments,2):n),cr(e.type,a,r||e.key,i||e.ref,null)}function ym(e,t){var n={__c:t="__cC"+td++,__:e,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,s;return this.getChildContext||(i=[],(s={})[t]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.some(function(a){a.__e=!0,na(a)})},this.sub=function(o){i.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){i.splice(i.indexOf(o),1),a&&a.call(o)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}jr=nd.slice,F={__e:function(e,t,n,r){for(var i,s,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),o=i.__d),o)return i.__E=i}catch(a){e=a}throw e}},Kh=0,Xh=function(e){return e!=null&&e.constructor==null},ur.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=_t({},this.state),typeof e=="function"&&(e=e(_t({},n),this.props)),e&&_t(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),na(this))},ur.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),na(this))},ur.prototype.render=Or,Qt=[],ed=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ea=function(e,t){return e.__v.__b-t.__v.__b},hi.__r=0,td=0;const mm=Object.freeze(Object.defineProperty({__proto__:null,Component:ur,Fragment:Or,cloneElement:gm,createContext:ym,createElement:ta,createRef:hm,h:ta,hydrate:ld,get isValidElement(){return Xh},get options(){return F},render:ud,toChildArray:ad},Symbol.toStringTag,{value:"Module"})),Be=Fn(mm);function Tn(e){return typeof e=="function"}var Iu=!1,ze={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;""+t.stack}Iu=e},get useDeprecatedSynchronousErrorHandling(){return Iu}};function mn(e){setTimeout(function(){throw e},0)}var di={closed:!0,next:function(e){},error:function(e){if(ze.useDeprecatedSynchronousErrorHandling)throw e;mn(e)},complete:function(){}},Re=function(){return Array.isArray||function(e){return e&&typeof e.length=="number"}}();function Wa(e){return e!==null&&typeof e=="object"}var vm=function(){function e(t){return Error.call(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t,this}return e.prototype=Object.create(Error.prototype),e}(),lr=vm,ue=function(){function e(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,r=n._parentOrParents,i=n._ctorUnsubscribe,s=n._unsubscribe,o=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(r!==null)for(var a=0;a<r.length;++a){var c=r[a];c.remove(this)}if(Tn(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(l){t=l instanceof lr?Ru(l.errors):[l]}}if(Re(o))for(var a=-1,u=o.length;++a<u;){var h=o[a];if(Wa(h))try{h.unsubscribe()}catch(d){t=t||[],d instanceof lr?t=t.concat(Ru(d.errors)):t.push(d)}}if(t)throw new lr(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||typeof n.unsubscribe!="function")return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;n=new e,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(i===null)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return n;var s=this._subscriptions;return s===null?this._subscriptions=[n]:s.push(n),n},e.prototype.remove=function(t){var n=this._subscriptions;if(n){var r=n.indexOf(t);r!==-1&&n.splice(r,1)}},e.EMPTY=function(t){return t.closed=!0,t}(new e),e}();function Ru(e){return e.reduce(function(t,n){return t.concat(n instanceof lr?n.errors:n)},[])}var fi=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),P=function(e){C(t,e);function t(n,r,i){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=di;break;case 1:if(!n){s.destination=di;break}if(typeof n=="object"){n instanceof t?(s.syncErrorThrowable=n.syncErrorThrowable,s.destination=n,n.add(s)):(s.syncErrorThrowable=!0,s.destination=new Nu(s,n));break}default:s.syncErrorThrowable=!0,s.destination=new Nu(s,n,r,i);break}return s}return t.prototype[fi]=function(){return this},t.create=function(n,r,i){var s=new t(n,r,i);return s.syncErrorThrowable=!1,s},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){this.destination.error(n),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var n=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=n,this},t}(ue),Nu=function(e){C(t,e);function t(n,r,i,s){var o=e.call(this)||this;o._parentSubscriber=n;var a,c=o;return Tn(r)?a=r:r&&(a=r.next,i=r.error,s=r.complete,r!==di&&(c=Object.create(r),Tn(c.unsubscribe)&&o.add(c.unsubscribe.bind(c)),c.unsubscribe=o.unsubscribe.bind(o))),o._context=c,o._next=a,o._error=i,o._complete=s,o}return t.prototype.next=function(n){if(!this.isStopped&&this._next){var r=this._parentSubscriber;!ze.useDeprecatedSynchronousErrorHandling||!r.syncErrorThrowable?this.__tryOrUnsub(this._next,n):this.__tryOrSetError(r,this._next,n)&&this.unsubscribe()}},t.prototype.error=function(n){if(!this.isStopped){var r=this._parentSubscriber,i=ze.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!r.syncErrorThrowable?(this.__tryOrUnsub(this._error,n),this.unsubscribe()):(this.__tryOrSetError(r,this._error,n),this.unsubscribe());else if(r.syncErrorThrowable)i?(r.syncErrorValue=n,r.syncErrorThrown=!0):mn(n),this.unsubscribe();else{if(this.unsubscribe(),i)throw n;mn(n)}}},t.prototype.complete=function(){var n=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var i=function(){return n._complete.call(n._context)};!ze.useDeprecatedSynchronousErrorHandling||!r.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(r,i),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(n,r){try{n.call(this._context,r)}catch(i){if(this.unsubscribe(),ze.useDeprecatedSynchronousErrorHandling)throw i;mn(i)}},t.prototype.__tryOrSetError=function(n,r,i){if(!ze.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,i)}catch(s){return ze.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=s,n.syncErrorThrown=!0,!0):(mn(s),!0)}return!1},t.prototype._unsubscribe=function(){var n=this._parentSubscriber;this._context=null,this._parentSubscriber=null,n.unsubscribe()},t}(P);function Ua(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;r&&r instanceof P?e=r:e=null}return!0}function _m(e,t,n){if(e){if(e instanceof P)return e;if(e[fi])return e[fi]()}return!e&&!t&&!n?new P(di):new P(e,t,n)}var $n=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Ft(e){return e}function ia(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return hd(e)}function hd(e){return e.length===0?Ft:e.length===1?e[0]:function(t){return e.reduce(function(n,r){return r(n)},t)}}var U=function(){function e(t){this._isScalar=!1,t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this.operator,s=_m(t,n,r);if(i?s.add(i.call(s,this.source)):s.add(this.source||ze.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),ze.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){ze.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=n),Ua(t)?t.error(n):console.warn(n)}},e.prototype.forEach=function(t,n){var r=this;return n=Au(n),new n(function(i,s){var o;o=r.subscribe(function(a){try{t(a)}catch(c){s(c),o&&o.unsubscribe()}},s,i)})},e.prototype._subscribe=function(t){var n=this.source;return n&&n.subscribe(t)},e.prototype[$n]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.length===0?this:hd(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=Au(t),new t(function(r,i){var s;n.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},e.create=function(t){return new e(t)},e}();function Au(e){if(e||(e=ze.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var wm=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),Ot=wm,dd=function(e){C(t,e);function t(n,r){var i=e.call(this)||this;return i.subject=n,i.subscriber=r,i.closed=!1,i}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var n=this.subject,r=n.observers;if(this.subject=null,!(!r||r.length===0||n.isStopped||n.closed)){var i=r.indexOf(this.subscriber);i!==-1&&r.splice(i,1)}}},t}(ue),fd=function(e){C(t,e);function t(n){var r=e.call(this,n)||this;return r.destination=n,r}return t}(P),ve=function(e){C(t,e);function t(){var n=e.call(this)||this;return n.observers=[],n.closed=!1,n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype[fi]=function(){return new fd(this)},t.prototype.lift=function(n){var r=new Tu(this,this);return r.operator=n,r},t.prototype.next=function(n){if(this.closed)throw new Ot;if(!this.isStopped)for(var r=this.observers,i=r.length,s=r.slice(),o=0;o<i;o++)s[o].next(n)},t.prototype.error=function(n){if(this.closed)throw new Ot;this.hasError=!0,this.thrownError=n,this.isStopped=!0;for(var r=this.observers,i=r.length,s=r.slice(),o=0;o<i;o++)s[o].error(n);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Ot;this.isStopped=!0;for(var n=this.observers,r=n.length,i=n.slice(),s=0;s<r;s++)i[s].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(n){if(this.closed)throw new Ot;return e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){if(this.closed)throw new Ot;return this.hasError?(n.error(this.thrownError),ue.EMPTY):this.isStopped?(n.complete(),ue.EMPTY):(this.observers.push(n),new dd(this,n))},t.prototype.asObservable=function(){var n=new U;return n.source=this,n},t.create=function(n,r){return new Tu(n,r)},t}(U),Tu=function(e){C(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r=this.destination;r&&r.next&&r.next(n)},t.prototype.error=function(n){var r=this.destination;r&&r.error&&this.destination.error(n)},t.prototype.complete=function(){var n=this.destination;n&&n.complete&&this.destination.complete()},t.prototype._subscribe=function(n){var r=this.source;return r?this.source.subscribe(n):ue.EMPTY},t}(ve);function qa(){return function(e){return e.lift(new Sm(e))}}var Sm=function(){function e(t){this.connectable=t}return e.prototype.call=function(t,n){var r=this.connectable;r._refCount++;var i=new Em(t,r),s=n.subscribe(i);return i.closed||(i.connection=r.connect()),s},e}(),Em=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.connectable=r,i}return t.prototype._unsubscribe=function(){var n=this.connectable;if(!n){this.connection=null;return}this.connectable=null;var r=n._refCount;if(r<=0){this.connection=null;return}if(n._refCount=r-1,r>1){this.connection=null;return}var i=this.connection,s=n._connection;this.connection=null,s&&(!i||s===i)&&s.unsubscribe()},t}(P),pd=function(e){C(t,e);function t(n,r){var i=e.call(this)||this;return i.source=n,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return t.prototype._subscribe=function(n){return this.getSubject().subscribe(n)},t.prototype.getSubject=function(){var n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var n=this._connection;return n||(this._isComplete=!1,n=this._connection=new ue,n.add(this.source.subscribe(new xm(this.getSubject(),this))),n.closed&&(this._connection=null,n=ue.EMPTY)),n},t.prototype.refCount=function(){return qa()(this)},t}(U),km=function(){var e=pd.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),xm=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.connectable=r,i}return t.prototype._error=function(n){this._unsubscribe(),e.prototype._error.call(this,n)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var n=this.connectable;if(n){this.connectable=null;var r=n._connection;n._refCount=0,n._subject=null,n._connection=null,r&&r.unsubscribe()}},t}(fd);function Cm(e,t,n,r){return function(i){return i.lift(new Mm(e,t,n,r))}}var Mm=function(){function e(t,n,r,i){this.keySelector=t,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i}return e.prototype.call=function(t,n){return n.subscribe(new Im(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),Im=function(e){C(t,e);function t(n,r,i,s,o){var a=e.call(this,n)||this;return a.keySelector=r,a.elementSelector=i,a.durationSelector=s,a.subjectSelector=o,a.groups=null,a.attemptedToUnsubscribe=!1,a.count=0,a}return t.prototype._next=function(n){var r;try{r=this.keySelector(n)}catch(i){this.error(i);return}this._group(n,r)},t.prototype._group=function(n,r){var i=this.groups;i||(i=this.groups=new Map);var s=i.get(r),o;if(this.elementSelector)try{o=this.elementSelector(n)}catch(u){this.error(u)}else o=n;if(!s){s=this.subjectSelector?this.subjectSelector():new ve,i.set(r,s);var a=new sa(r,s,this);if(this.destination.next(a),this.durationSelector){var c=void 0;try{c=this.durationSelector(new sa(r,s))}catch(u){this.error(u);return}this.add(c.subscribe(new Rm(r,s,this)))}}s.closed||s.next(o)},t.prototype._error=function(n){var r=this.groups;r&&(r.forEach(function(i,s){i.error(n)}),r.clear()),this.destination.error(n)},t.prototype._complete=function(){var n=this.groups;n&&(n.forEach(function(r,i){r.complete()}),n.clear()),this.destination.complete()},t.prototype.removeGroup=function(n){this.groups.delete(n)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&e.prototype.unsubscribe.call(this))},t}(P),Rm=function(e){C(t,e);function t(n,r,i){var s=e.call(this,r)||this;return s.key=n,s.group=r,s.parent=i,s}return t.prototype._next=function(n){this.complete()},t.prototype._unsubscribe=function(){var n=this,r=n.parent,i=n.key;this.key=this.parent=null,r&&r.removeGroup(i)},t}(P),sa=function(e){C(t,e);function t(n,r,i){var s=e.call(this)||this;return s.key=n,s.groupSubject=r,s.refCountSubscription=i,s}return t.prototype._subscribe=function(n){var r=new ue,i=this,s=i.refCountSubscription,o=i.groupSubject;return s&&!s.closed&&r.add(new Nm(s)),r.add(o.subscribe(n)),r},t}(U),Nm=function(e){C(t,e);function t(n){var r=e.call(this)||this;return r.parent=n,n.count++,r}return t.prototype.unsubscribe=function(){var n=this.parent;!n.closed&&!this.closed&&(e.prototype.unsubscribe.call(this),n.count-=1,n.count===0&&n.attemptedToUnsubscribe&&n.unsubscribe())},t}(ue),bd=function(e){C(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return r&&!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ot;return this._value},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(ve),Am=function(e){C(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(ue),Pr=function(e){C(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){if(r===void 0&&(r=0),this.closed)return this;this.state=n;var i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,r)),this.pending=!0,this.delay=r,this.id=this.id||this.requestAsyncId(s,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return r;clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,s=void 0;try{this.work(n)}catch(o){i=!0,s=!!o&&o||new Error(o)}if(i)return this.unsubscribe(),s},t.prototype._unsubscribe=function(){var n=this.id,r=this.scheduler,i=r.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,s!==-1&&i.splice(s,1),n!=null&&(this.id=this.recycleAsyncId(r,n,null)),this.delay=null},t}(Am),Tm=function(e){C(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return t.prototype.schedule=function(n,r){return r===void 0&&(r=0),r>0?e.prototype.schedule.call(this,n,r):(this.delay=r,this.state=n,this.scheduler.flush(this),this)},t.prototype.execute=function(n,r){return r>0||this.closed?e.prototype.execute.call(this,n,r):this._execute(n,r)},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?e.prototype.requestAsyncId.call(this,n,r,i):n.flush(this)},t}(Pr),oa=function(){function e(t,n){n===void 0&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.SchedulerAction(this,t).schedule(r,n)},e.now=function(){return Date.now()},e}(),Lr=function(e){C(t,e);function t(n,r){r===void 0&&(r=oa.now);var i=e.call(this,n,function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return t.prototype.schedule=function(n,r,i){return r===void 0&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(n){var r=this.actions;if(this.active){r.push(n);return}var i;this.active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this.active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(oa),jm=function(e){C(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Lr),gd=new jm(Tm),yd=gd,jn=new U(function(e){return e.complete()});function Zn(e){return e?Om(e):jn}function Om(e){return new U(function(t){return e.schedule(function(){return t.complete()})})}function De(e){return e&&typeof e.schedule=="function"}var md=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};function Ja(e,t){return new U(function(n){var r=new ue,i=0;return r.add(t.schedule(function(){if(i===e.length){n.complete();return}n.next(e[i++]),n.closed||r.add(this.schedule())})),r})}function Dr(e,t){return t?Ja(e,t):new U(md(e))}function Ji(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return De(n)?(e.pop(),Ja(e,n)):Dr(e)}function $a(e,t){return t?new U(function(n){return t.schedule(Pm,0,{error:e,subscriber:n})}):new U(function(n){return n.error(e)})}function Pm(e){var t=e.error,n=e.subscriber;n.error(t)}var aa;aa||(aa={});var wt=function(){function e(t,n,r){this.kind=t,this.value=n,this.error=r,this.hasValue=t==="N"}return e.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},e.prototype.do=function(t,n,r){var i=this.kind;switch(i){case"N":return t&&t(this.value);case"E":return n&&n(this.error);case"C":return r&&r()}},e.prototype.accept=function(t,n,r){return t&&typeof t.next=="function"?this.observe(t):this.do(t,n,r)},e.prototype.toObservable=function(){var t=this.kind;switch(t){case"N":return Ji(this.value);case"E":return $a(this.error);case"C":return Zn()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return typeof t<"u"?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();function Lm(e,t){return t===void 0&&(t=0),function(n){return n.lift(new Dm(e,t))}}var Dm=function(){function e(t,n){n===void 0&&(n=0),this.scheduler=t,this.delay=n}return e.prototype.call=function(t,n){return n.subscribe(new vd(t,this.scheduler,this.delay))},e}(),vd=function(e){C(t,e);function t(n,r,i){i===void 0&&(i=0);var s=e.call(this,n)||this;return s.scheduler=r,s.delay=i,s}return t.dispatch=function(n){var r=n.notification,i=n.destination;r.observe(i),this.unsubscribe()},t.prototype.scheduleMessage=function(n){var r=this.destination;r.add(this.scheduler.schedule(t.dispatch,this.delay,new Bm(n,this.destination)))},t.prototype._next=function(n){this.scheduleMessage(wt.createNext(n))},t.prototype._error=function(n){this.scheduleMessage(wt.createError(n)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(wt.createComplete()),this.unsubscribe()},t}(P),Bm=function(){function e(t,n){this.notification=t,this.destination=n}return e}(),Za=function(e){C(t,e);function t(n,r,i){n===void 0&&(n=Number.POSITIVE_INFINITY),r===void 0&&(r=Number.POSITIVE_INFINITY);var s=e.call(this)||this;return s.scheduler=i,s._events=[],s._infiniteTimeWindow=!1,s._bufferSize=n<1?1:n,s._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(s._infiniteTimeWindow=!0,s.next=s.nextInfiniteTimeWindow):s.next=s.nextTimeWindow,s}return t.prototype.nextInfiniteTimeWindow=function(n){if(!this.isStopped){var r=this._events;r.push(n),r.length>this._bufferSize&&r.shift()}e.prototype.next.call(this,n)},t.prototype.nextTimeWindow=function(n){this.isStopped||(this._events.push(new Fm(this._getNow(),n)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,n)},t.prototype._subscribe=function(n){var r=this._infiniteTimeWindow,i=r?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,o=i.length,a;if(this.closed)throw new Ot;if(this.isStopped||this.hasError?a=ue.EMPTY:(this.observers.push(n),a=new dd(this,n)),s&&n.add(n=new vd(n,s)),r)for(var c=0;c<o&&!n.closed;c++)n.next(i[c]);else for(var c=0;c<o&&!n.closed;c++)n.next(i[c].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),a},t.prototype._getNow=function(){return(this.scheduler||yd).now()},t.prototype._trimBufferThenGetEvents=function(){for(var n=this._getNow(),r=this._bufferSize,i=this._windowTime,s=this._events,o=s.length,a=0;a<o&&!(n-s[a].time<i);)a++;return o>r&&(a=Math.max(a,o-r)),a>0&&s.splice(0,a),s},t}(ve),Fm=function(){function e(t,n){this.time=t,this.value=n}return e}(),Gn=function(e){C(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.value=null,n.hasNext=!1,n.hasCompleted=!1,n}return t.prototype._subscribe=function(n){return this.hasError?(n.error(this.thrownError),ue.EMPTY):this.hasCompleted&&this.hasNext?(n.next(this.value),n.complete(),ue.EMPTY):e.prototype._subscribe.call(this,n)},t.prototype.next=function(n){this.hasCompleted||(this.value=n,this.hasNext=!0)},t.prototype.error=function(n){this.hasCompleted||e.prototype.error.call(this,n)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(ve),Hm=1,Vm=function(){return Promise.resolve()}(),ca={};function ju(e){return e in ca?(delete ca[e],!0):!1}var Ou={setImmediate:function(e){var t=Hm++;return ca[t]=!0,Vm.then(function(){return ju(t)&&e()}),t},clearImmediate:function(e){ju(e)}},zm=function(e){C(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,n,r,i):(n.actions.push(this),n.scheduled||(n.scheduled=Ou.setImmediate(n.flush.bind(n,null))))},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return e.prototype.recycleAsyncId.call(this,n,r,i);n.actions.length===0&&(Ou.clearImmediate(r),n.scheduled=void 0)},t}(Pr),Wm=function(e){C(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.flush=function(n){this.active=!0,this.scheduled=void 0;var r=this.actions,i,s=-1,o=r.length;n=n||r.shift();do if(i=n.execute(n.state,n.delay))break;while(++s<o&&(n=r.shift()));if(this.active=!1,i){for(;++s<o&&(n=r.shift());)n.unsubscribe();throw i}},t}(Lr),_d=new Wm(zm),ni=_d,wd=new Lr(Pr),Ne=wd,Um=function(e){C(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,n,r,i):(n.actions.push(this),n.scheduled||(n.scheduled=requestAnimationFrame(function(){return n.flush(null)})))},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return e.prototype.recycleAsyncId.call(this,n,r,i);n.actions.length===0&&(cancelAnimationFrame(r),n.scheduled=void 0)},t}(Pr),qm=function(e){C(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.flush=function(n){this.active=!0,this.scheduled=void 0;var r=this.actions,i,s=-1,o=r.length;n=n||r.shift();do if(i=n.execute(n.state,n.delay))break;while(++s<o&&(n=r.shift()));if(this.active=!1,i){for(;++s<o&&(n=r.shift());)n.unsubscribe();throw i}},t}(Lr),Sd=new qm(Um),Jm=Sd,$m=function(e){C(t,e);function t(n,r){n===void 0&&(n=Ed),r===void 0&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,n,function(){return i.frame})||this;return i.maxFrames=r,i.frame=0,i.index=-1,i}return t.prototype.flush=function(){for(var n=this,r=n.actions,i=n.maxFrames,s,o;(o=r[0])&&o.delay<=i&&(r.shift(),this.frame=o.delay,!(s=o.execute(o.state,o.delay))););if(s){for(;o=r.shift();)o.unsubscribe();throw s}},t.frameTimeFactor=10,t}(Lr),Ed=function(e){C(t,e);function t(n,r,i){i===void 0&&(i=n.index+=1);var s=e.call(this,n,r)||this;return s.scheduler=n,s.work=r,s.index=i,s.active=!0,s.index=n.index=i,s}return t.prototype.schedule=function(n,r){if(r===void 0&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(n,r,i){i===void 0&&(i=0),this.delay=n.frame+i;var s=n.actions;return s.push(this),s.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(n,r,i){},t.prototype._execute=function(n,r){if(this.active===!0)return e.prototype._execute.call(this,n,r)},t.sortActions=function(n,r){return n.delay===r.delay?n.index===r.index?0:n.index>r.index?1:-1:n.delay>r.delay?1:-1},t}(Pr);function at(){}function Zm(e){return!!e&&(e instanceof U||typeof e.lift=="function"&&typeof e.subscribe=="function")}var Gm=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),On=Gm,Qm=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Br=Qm,Ym=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),kd=Ym;function $e(e,t){return function(n){if(typeof e!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Km(e,t))}}var Km=function(){function e(t,n){this.project=t,this.thisArg=n}return e.prototype.call=function(t,n){return n.subscribe(new Xm(t,this.project,this.thisArg))},e}(),Xm=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.project=r,s.count=0,s.thisArg=i||s,s}return t.prototype._next=function(n){var r;try{r=this.project.call(this.thisArg,n,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(r)},t}(P);function xd(e,t,n){if(t)if(De(t))n=t;else return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return xd(e,n).apply(void 0,r).pipe($e(function(s){return Re(s)?t.apply(void 0,s):t(s)}))};return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=this,o,a={context:s,subject:o,callbackFunc:e,scheduler:n};return new U(function(c){if(n){var u={args:r,subscriber:c,params:a};return n.schedule(ev,0,u)}else{if(!o){o=new Gn;var h=function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];o.next(l.length<=1?l[0]:l),o.complete()};try{e.apply(s,r.concat([h]))}catch(l){Ua(o)?o.error(l):console.warn(l)}}return o.subscribe(c)}})}}function ev(e){var t=this,n=e.args,r=e.subscriber,i=e.params,s=i.callbackFunc,o=i.context,a=i.scheduler,c=i.subject;if(!c){c=i.subject=new Gn;var u=function(){for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];var d=h.length<=1?h[0]:h;t.add(a.schedule(tv,0,{value:d,subject:c}))};try{s.apply(o,n.concat([u]))}catch(h){c.error(h)}}this.add(c.subscribe(r))}function tv(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function Cd(e,t,n){if(t)if(De(t))n=t;else return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Cd(e,n).apply(void 0,r).pipe($e(function(s){return Re(s)?t.apply(void 0,s):t(s)}))};return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s={subject:void 0,args:r,callbackFunc:e,scheduler:n,context:this};return new U(function(o){var a=s.context,c=s.subject;if(n)return n.schedule(nv,0,{params:s,subscriber:o,context:a});if(!c){c=s.subject=new Gn;var u=function(){for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];var d=h.shift();if(d){c.error(d);return}c.next(h.length<=1?h[0]:h),c.complete()};try{e.apply(a,r.concat([u]))}catch(h){Ua(c)?c.error(h):console.warn(h)}}return c.subscribe(o)})}}function nv(e){var t=this,n=e.params,r=e.subscriber,i=e.context,s=n.callbackFunc,o=n.args,a=n.scheduler,c=n.subject;if(!c){c=n.subject=new Gn;var u=function(){for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];var d=h.shift();if(d)t.add(a.schedule(Pu,0,{err:d,subject:c}));else{var b=h.length<=1?h[0]:h;t.add(a.schedule(rv,0,{value:b,subject:c}))}};try{s.apply(i,o.concat([u]))}catch(h){this.add(a.schedule(Pu,0,{err:h,subject:c}))}}this.add(c.subscribe(r))}function rv(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function Pu(e){var t=e.err,n=e.subject;n.error(t)}var cn=function(e){C(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.notifyNext=function(n,r,i,s,o){this.destination.next(r)},t.prototype.notifyError=function(n,r){this.destination.error(n)},t.prototype.notifyComplete=function(n){this.destination.complete()},t}(P),iv=function(e){C(t,e);function t(n,r,i){var s=e.call(this)||this;return s.parent=n,s.outerValue=r,s.outerIndex=i,s.index=0,s}return t.prototype._next=function(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)},t.prototype._error=function(n){this.parent.notifyError(n,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(P),sv=function(e){return function(t){return e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,mn),t}};function ov(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ht=ov(),av=function(e){return function(t){var n=e[Ht]();do{var r=void 0;try{r=n.next()}catch(i){return t.error(i),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}while(!0);return typeof n.return=="function"&&t.add(function(){n.return&&n.return()}),t}},cv=function(e){return function(t){var n=e[$n]();if(typeof n.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},Md=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Id(e){return!!e&&typeof e.subscribe!="function"&&typeof e.then=="function"}var br=function(e){if(e&&typeof e[$n]=="function")return cv(e);if(Md(e))return md(e);if(Id(e))return sv(e);if(e&&typeof e[Ht]=="function")return av(e);var t=Wa(e)?"an invalid object":"'"+e+"'",n="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(n)};function Et(e,t,n,r,i){if(i===void 0&&(i=new iv(e,n,r)),!i.closed)return t instanceof U?t.subscribe(i):br(t)(i)}var Lu={};function uv(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=void 0,r=void 0;return De(e[e.length-1])&&(r=e.pop()),typeof e[e.length-1]=="function"&&(n=e.pop()),e.length===1&&Re(e[0])&&(e=e[0]),Dr(e,r).lift(new Ga(n))}var Ga=function(){function e(t){this.resultSelector=t}return e.prototype.call=function(t,n){return n.subscribe(new lv(t,this.resultSelector))},e}(),lv=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return t.prototype._next=function(n){this.values.push(Lu),this.observables.push(n)},t.prototype._complete=function(){var n=this.observables,r=n.length;if(r===0)this.destination.complete();else{this.active=r,this.toRespond=r;for(var i=0;i<r;i++){var s=n[i];this.add(Et(this,s,void 0,i))}}},t.prototype.notifyComplete=function(n){(this.active-=1)===0&&this.destination.complete()},t.prototype.notifyNext=function(n,r,i){var s=this.values,o=s[i],a=this.toRespond?o===Lu?--this.toRespond:this.toRespond:0;s[i]=r,a===0&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))},t.prototype._tryResultSelector=function(n){var r;try{r=this.resultSelector.apply(this,n)}catch(i){this.destination.error(i);return}this.destination.next(r)},t}(cn);function hv(e,t){return new U(function(n){var r=new ue;return r.add(t.schedule(function(){var i=e[$n]();r.add(i.subscribe({next:function(s){r.add(t.schedule(function(){return n.next(s)}))},error:function(s){r.add(t.schedule(function(){return n.error(s)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r})}function dv(e,t){return new U(function(n){var r=new ue;return r.add(t.schedule(function(){return e.then(function(i){r.add(t.schedule(function(){n.next(i),r.add(t.schedule(function(){return n.complete()}))}))},function(i){r.add(t.schedule(function(){return n.error(i)}))})})),r})}function fv(e,t){if(!e)throw new Error("Iterable cannot be null");return new U(function(n){var r=new ue,i;return r.add(function(){i&&typeof i.return=="function"&&i.return()}),r.add(t.schedule(function(){i=e[Ht](),r.add(t.schedule(function(){if(!n.closed){var s,o;try{var a=i.next();s=a.value,o=a.done}catch(c){n.error(c);return}o?n.complete():(n.next(s),this.schedule())}}))})),r})}function pv(e){return e&&typeof e[$n]=="function"}function bv(e){return e&&typeof e[Ht]=="function"}function Rd(e,t){if(e!=null){if(pv(e))return hv(e,t);if(Id(e))return dv(e,t);if(Md(e))return Ja(e,t);if(bv(e)||typeof e=="string")return fv(e,t)}throw new TypeError((e!==null&&typeof e||e)+" is not observable")}function xt(e,t){return t?Rd(e,t):e instanceof U?e:new U(br(e))}var le=function(e){C(t,e);function t(n){var r=e.call(this)||this;return r.parent=n,r}return t.prototype._next=function(n){this.parent.notifyNext(n)},t.prototype._error=function(n){this.parent.notifyError(n),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(P),he=function(e){C(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.notifyNext=function(n){this.destination.next(n)},t.prototype.notifyError=function(n){this.destination.error(n)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(P);function de(e,t){if(!t.closed){if(e instanceof U)return e.subscribe(t);var n;try{n=br(e)(t)}catch(r){t.error(r)}return n}}function Xt(e,t,n){return n===void 0&&(n=Number.POSITIVE_INFINITY),typeof t=="function"?function(r){return r.pipe(Xt(function(i,s){return xt(e(i,s)).pipe($e(function(o,a){return t(i,o,s,a)}))},n))}:(typeof t=="number"&&(n=t),function(r){return r.lift(new gv(e,n))})}var gv=function(){function e(t,n){n===void 0&&(n=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=n}return e.prototype.call=function(t,n){return n.subscribe(new yv(t,this.project,this.concurrent))},e}(),yv=function(e){C(t,e);function t(n,r,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var s=e.call(this,n)||this;return s.project=r,s.concurrent=i,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return t.prototype._next=function(n){this.active<this.concurrent?this._tryNext(n):this.buffer.push(n)},t.prototype._tryNext=function(n){var r,i=this.index++;try{r=this.project(n,i)}catch(s){this.destination.error(s);return}this.active++,this._innerSub(r)},t.prototype._innerSub=function(n){var r=new le(this),i=this.destination;i.add(r);var s=de(n,r);s!==r&&i.add(s)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(n){this.destination.next(n)},t.prototype.notifyComplete=function(){var n=this.buffer;this.active--,n.length>0?this._next(n.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},t}(he),mv=Xt;function Qa(e){return e===void 0&&(e=Number.POSITIVE_INFINITY),Xt(Ft,e)}function Nd(){return Qa(1)}function gr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Nd()(Ji.apply(void 0,e))}function Ya(e){return new U(function(t){var n;try{n=e()}catch(i){t.error(i);return}var r=n?xt(n):Zn();return r.subscribe(t)})}function vv(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length===1){var n=e[0];if(Re(n))return Gr(n,null);if(Wa(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return Gr(r.map(function(s){return n[s]}),r)}}if(typeof e[e.length-1]=="function"){var i=e.pop();return e=e.length===1&&Re(e[0])?e[0]:e,Gr(e,null).pipe($e(function(s){return i.apply(void 0,s)}))}return Gr(e,null)}function Gr(e,t){return new U(function(n){var r=e.length;if(r===0){n.complete();return}for(var i=new Array(r),s=0,o=0,a=function(u){var h=xt(e[u]),l=!1;n.add(h.subscribe({next:function(d){l||(l=!0,o++),i[u]=d},error:function(d){return n.error(d)},complete:function(){s++,(s===r||!l)&&(o===r&&n.next(t?t.reduce(function(d,b,v){return d[b]=i[v],d},{}):i),n.complete())}}))},c=0;c<r;c++)a(c)})}function Ad(e,t,n,r){return Tn(n)&&(r=n,n=void 0),r?Ad(e,t,n).pipe($e(function(i){return Re(i)?r.apply(void 0,i):r(i)})):new U(function(i){function s(o){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(o)}Td(e,t,s,i,n)})}function Td(e,t,n,r,i){var s;if(Sv(e)){var o=e;e.addEventListener(t,n,i),s=function(){return o.removeEventListener(t,n,i)}}else if(wv(e)){var a=e;e.on(t,n),s=function(){return a.off(t,n)}}else if(_v(e)){var c=e;e.addListener(t,n),s=function(){return c.removeListener(t,n)}}else if(e&&e.length)for(var u=0,h=e.length;u<h;u++)Td(e[u],t,n,r,i);else throw new TypeError("Invalid event target");r.add(s)}function _v(e){return e&&typeof e.addListener=="function"&&typeof e.removeListener=="function"}function wv(e){return e&&typeof e.on=="function"&&typeof e.off=="function"}function Sv(e){return e&&typeof e.addEventListener=="function"&&typeof e.removeEventListener=="function"}function jd(e,t,n){return n?jd(e,t).pipe($e(function(r){return Re(r)?n.apply(void 0,r):n(r)})):new U(function(r){var i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return r.next(o.length===1?o[0]:o)},s;try{s=e(i)}catch(o){r.error(o);return}if(Tn(t))return function(){return t(i,s)}})}function Ev(e,t,n,r,i){var s,o;if(arguments.length==1){var a=e;o=a.initialState,t=a.condition,n=a.iterate,s=a.resultSelector||Ft,i=a.scheduler}else r===void 0||De(r)?(o=e,s=Ft,i=r):(o=e,s=r);return new U(function(c){var u=o;if(i)return i.schedule(kv,0,{subscriber:c,iterate:n,condition:t,resultSelector:s,state:u});do{if(t){var h=void 0;try{h=t(u)}catch(d){c.error(d);return}if(!h){c.complete();break}}var l=void 0;try{l=s(u)}catch(d){c.error(d);return}if(c.next(l),c.closed)break;try{u=n(u)}catch(d){c.error(d);return}}while(!0)})}function kv(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(s){t.error(s);return}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(s){t.error(s);return}if(!r){t.complete();return}if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(s){t.error(s);return}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function xv(e,t,n){return t===void 0&&(t=jn),n===void 0&&(n=jn),Ya(function(){return e()?t:n})}function Pn(e){return!Re(e)&&e-parseFloat(e)+1>=0}function Cv(e,t){return e===void 0&&(e=0),t===void 0&&(t=Ne),(!Pn(e)||e<0)&&(e=0),(!t||typeof t.schedule!="function")&&(t=Ne),new U(function(n){return n.add(t.schedule(Mv,e,{subscriber:n,counter:0,period:e})),n})}function Mv(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}function Od(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,i=e[e.length-1];return De(i)?(r=e.pop(),e.length>1&&typeof e[e.length-1]=="number"&&(n=e.pop())):typeof i=="number"&&(n=e.pop()),r===null&&e.length===1&&e[0]instanceof U?e[0]:Qa(n)(Dr(e,r))}var Pd=new U(at);function Iv(){return Pd}function ua(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length===0)return jn;var n=e[0],r=e.slice(1);return e.length===1&&Re(n)?ua.apply(void 0,n):new U(function(i){var s=function(){return i.add(ua.apply(void 0,r).subscribe(i))};return xt(n).subscribe({next:function(o){i.next(o)},error:s,complete:s})})}function Rv(e,t){return t?new U(function(n){var r=Object.keys(e),i=new ue;return i.add(t.schedule(Nv,0,{keys:r,index:0,subscriber:n,subscription:i,obj:e})),i}):new U(function(n){for(var r=Object.keys(e),i=0;i<r.length&&!n.closed;i++){var s=r[i];e.hasOwnProperty(s)&&n.next([s,e[s]])}n.complete()})}function Nv(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription,s=e.obj;if(!r.closed)if(n<t.length){var o=t[n];r.next([o,s[o]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:s}))}else r.complete()}function Ld(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}function Vt(e,t){return function(n){return n.lift(new Av(e,t))}}var Av=function(){function e(t,n){this.predicate=t,this.thisArg=n}return e.prototype.call=function(t,n){return n.subscribe(new Tv(t,this.predicate,this.thisArg))},e}(),Tv=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.predicate=r,s.thisArg=i,s.count=0,s}return t.prototype._next=function(n){var r;try{r=this.predicate.call(this.thisArg,n,this.count++)}catch(i){this.destination.error(i);return}r&&this.destination.next(n)},t}(P);function jv(e,t,n){return[Vt(t,n)(new U(br(e))),Vt(Ld(t,n))(new U(br(e)))]}function Dd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length===1)if(Re(e[0]))e=e[0];else return e[0];return Dr(e,void 0).lift(new Ov)}var Ov=function(){function e(){}return e.prototype.call=function(t,n){return n.subscribe(new Pv(t))},e}(),Pv=function(e){C(t,e);function t(n){var r=e.call(this,n)||this;return r.hasFirst=!1,r.observables=[],r.subscriptions=[],r}return t.prototype._next=function(n){this.observables.push(n)},t.prototype._complete=function(){var n=this.observables,r=n.length;if(r===0)this.destination.complete();else{for(var i=0;i<r&&!this.hasFirst;i++){var s=n[i],o=Et(this,s,void 0,i);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}},t.prototype.notifyNext=function(n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var s=0;s<this.subscriptions.length;s++)if(s!==i){var o=this.subscriptions[s];o.unsubscribe(),this.remove(o)}this.subscriptions=null}this.destination.next(r)},t}(cn);function Lv(e,t,n){return e===void 0&&(e=0),new U(function(r){t===void 0&&(t=e,e=0);var i=0,s=e;if(n)return n.schedule(Dv,0,{index:i,count:t,start:e,subscriber:r});do{if(i++>=t){r.complete();break}if(r.next(s++),r.closed)break}while(!0)})}function Dv(e){var t=e.start,n=e.index,r=e.count,i=e.subscriber;if(n>=r){i.complete();return}i.next(t),!i.closed&&(e.index=n+1,e.start=t+1,this.schedule(e))}function Bd(e,t,n){e===void 0&&(e=0);var r=-1;return Pn(t)?r=Number(t)<1&&1||Number(t):De(t)&&(n=t),De(n)||(n=Ne),new U(function(i){var s=Pn(e)?e:+e-n.now();return n.schedule(Bv,s,{index:0,period:r,subscriber:i})})}function Bv(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(n===-1)return r.complete();e.index=t+1,this.schedule(e,n)}}function Fv(e,t){return new U(function(n){var r;try{r=e()}catch(a){n.error(a);return}var i;try{i=t(r)}catch(a){n.error(a);return}var s=i?xt(i):jn,o=s.subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}})}function Fd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return typeof n=="function"&&e.pop(),Dr(e,void 0).lift(new Hd(n))}var Hd=function(){function e(t){this.resultSelector=t}return e.prototype.call=function(t,n){return n.subscribe(new Hv(t,this.resultSelector))},e}(),Hv=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.resultSelector=r,s.iterators=[],s.active=0,s.resultSelector=typeof r=="function"?r:void 0,s}return t.prototype._next=function(n){var r=this.iterators;Re(n)?r.push(new zv(n)):typeof n[Ht]=="function"?r.push(new Vv(n[Ht]())):r.push(new Wv(this.destination,this,n))},t.prototype._complete=function(){var n=this.iterators,r=n.length;if(this.unsubscribe(),r===0){this.destination.complete();return}this.active=r;for(var i=0;i<r;i++){var s=n[i];if(s.stillUnsubscribed){var o=this.destination;o.add(s.subscribe())}else this.active--}},t.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},t.prototype.checkIterators=function(){for(var n=this.iterators,r=n.length,i=this.destination,s=0;s<r;s++){var o=n[s];if(typeof o.hasValue=="function"&&!o.hasValue())return}for(var a=!1,c=[],s=0;s<r;s++){var o=n[s],u=o.next();if(o.hasCompleted()&&(a=!0),u.done){i.complete();return}c.push(u.value)}this.resultSelector?this._tryresultSelector(c):i.next(c),a&&i.complete()},t.prototype._tryresultSelector=function(n){var r;try{r=this.resultSelector.apply(this,n)}catch(i){this.destination.error(i);return}this.destination.next(r)},t}(P),Vv=function(){function e(t){this.iterator=t,this.nextResult=t.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},e.prototype.hasCompleted=function(){var t=this.nextResult;return!!(t&&t.done)},e}(),zv=function(){function e(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return e.prototype[Ht]=function(){return this},e.prototype.next=function(t){var n=this.index++,r=this.array;return n<this.length?{value:r[n],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),Wv=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.parent=r,s.observable=i,s.stillUnsubscribed=!0,s.buffer=[],s.isComplete=!1,s}return t.prototype[Ht]=function(){return this},t.prototype.next=function(){var n=this.buffer;return n.length===0&&this.isComplete?{value:null,done:!0}:{value:n.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(n){this.buffer.push(n),this.parent.checkIterators()},t.prototype.subscribe=function(){return de(this.observable,new le(this))},t}(he);const Uv=Object.freeze(Object.defineProperty({__proto__:null,ArgumentOutOfRangeError:On,AsyncSubject:Gn,BehaviorSubject:bd,ConnectableObservable:pd,EMPTY:jn,EmptyError:Br,GroupedObservable:sa,NEVER:Pd,Notification:wt,get NotificationKind(){return aa},ObjectUnsubscribedError:Ot,Observable:U,ReplaySubject:Za,Scheduler:oa,Subject:ve,Subscriber:P,Subscription:ue,TimeoutError:kd,UnsubscriptionError:lr,VirtualAction:Ed,VirtualTimeScheduler:$m,animationFrame:Jm,animationFrameScheduler:Sd,asap:ni,asapScheduler:_d,async:Ne,asyncScheduler:wd,bindCallback:xd,bindNodeCallback:Cd,combineLatest:uv,concat:gr,config:ze,defer:Ya,empty:Zn,forkJoin:vv,from:xt,fromEvent:Ad,fromEventPattern:jd,generate:Ev,identity:Ft,iif:xv,interval:Cv,isObservable:Zm,merge:Od,never:Iv,noop:at,observable:$n,of:Ji,onErrorResumeNext:ua,pairs:Rv,partition:jv,pipe:ia,queue:yd,queueScheduler:gd,race:Dd,range:Lv,scheduled:Rd,throwError:$a,timer:Bd,using:Fv,zip:Fd},Symbol.toStringTag,{value:"Module"})),$i=Fn(Uv);var Zi={};function Vd(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Vd(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Du(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Vd(e))&&(r&&(r+=" "),r+=t);return r}const qv=Object.freeze(Object.defineProperty({__proto__:null,clsx:Du,default:Du},Symbol.toStringTag,{value:"Module"})),Gi=Fn(qv);var kt,te,Lo,Bu,Ln=0,zd=[],ri=[],Fu=F.__b,Hu=F.__r,Vu=F.diffed,zu=F.__c,Wu=F.unmount;function un(e,t){F.__h&&F.__h(te,e,Ln||t),Ln=0;var n=te.__H||(te.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:ri}),n.__[e]}function Wd(e){return Ln=1,Ud(Jd,e)}function Ud(e,t,n){var r=un(kt++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Jd(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=te,!te.u)){var i=function(a,c,u){if(!r.__c.__H)return!0;var h=r.__c.__H.__.filter(function(d){return d.__c});if(h.every(function(d){return!d.__N}))return!s||s.call(this,a,c,u);var l=!1;return h.forEach(function(d){if(d.__N){var b=d.__[0];d.__=d.__N,d.__N=void 0,b!==d.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!s||s.call(this,a,c,u))};te.u=!0;var s=te.shouldComponentUpdate,o=te.componentWillUpdate;te.componentWillUpdate=function(a,c,u){if(this.__e){var h=s;s=void 0,i(a,c,u),s=h}o&&o.call(this,a,c,u)},te.shouldComponentUpdate=i}return r.__N||r.__}function Jv(e,t){var n=un(kt++,3);!F.__s&&Xa(n.__H,t)&&(n.__=e,n.i=t,te.__H.__h.push(n))}function qd(e,t){var n=un(kt++,4);!F.__s&&Xa(n.__H,t)&&(n.__=e,n.i=t,te.__h.push(n))}function $v(e){return Ln=5,Ka(function(){return{current:e}},[])}function Zv(e,t,n){Ln=6,qd(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function Ka(e,t){var n=un(kt++,7);return Xa(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Gv(e,t){return Ln=8,Ka(function(){return e},t)}function Qv(e){var t=te.context[e.__c],n=un(kt++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(te)),t.props.value):e.__}function Yv(e,t){F.useDebugValue&&F.useDebugValue(t?t(e):e)}function Kv(e){var t=un(kt++,10),n=Wd();return t.__=e,te.componentDidCatch||(te.componentDidCatch=function(r,i){t.__&&t.__(r,i),n[1](r)}),[n[0],function(){n[1](void 0)}]}function Xv(){var e=un(kt++,11);if(!e.__){for(var t=te.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function e_(){for(var e;e=zd.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ii),e.__H.__h.forEach(la),e.__H.__h=[]}catch(t){e.__H.__h=[],F.__e(t,e.__v)}}F.__b=function(e){te=null,Fu&&Fu(e)},F.__r=function(e){Hu&&Hu(e),kt=0;var t=(te=e.__c).__H;t&&(Lo===te?(t.__h=[],te.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=ri,n.__N=n.i=void 0})):(t.__h.forEach(ii),t.__h.forEach(la),t.__h=[],kt=0)),Lo=te},F.diffed=function(e){Vu&&Vu(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(zd.push(t)!==1&&Bu===F.requestAnimationFrame||((Bu=F.requestAnimationFrame)||t_)(e_)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==ri&&(n.__=n.__V),n.i=void 0,n.__V=ri})),Lo=te=null},F.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ii),n.__h=n.__h.filter(function(r){return!r.__||la(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],F.__e(r,n.__v)}}),zu&&zu(e,t)},F.unmount=function(e){Wu&&Wu(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ii(r)}catch(i){t=i}}),n.__H=void 0,t&&F.__e(t,n.__v))};var Uu=typeof requestAnimationFrame=="function";function t_(e){var t,n=function(){clearTimeout(r),Uu&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Uu&&(t=requestAnimationFrame(n))}function ii(e){var t=te,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),te=t}function la(e){var t=te;e.__c=e.__(),te=t}function Xa(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Jd(e,t){return typeof t=="function"?t(e):t}const n_=Object.freeze(Object.defineProperty({__proto__:null,useCallback:Gv,useContext:Qv,useDebugValue:Yv,useEffect:Jv,useErrorBoundary:Kv,useId:Xv,useImperativeHandle:Zv,useLayoutEffect:qd,useMemo:Ka,useReducer:Ud,useRef:$v,useState:Wd},Symbol.toStringTag,{value:"Module"})),Fr=Fn(n_);var dt={},Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.CloseIcon=void 0;const qu=Be;function r_(e){return(0,qu.h)("svg",Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),(0,qu.h)("path",{d:"M13.7677 13L12.3535 14.4142L18.3535 20.4142L12.3535 26.4142L13.7677 27.8284L19.7677 21.8284L25.7677 27.8284L27.1819 26.4142L21.1819 20.4142L27.1819 14.4142L25.7677 13L19.7677 19L13.7677 13Z"}))}Qi.CloseIcon=r_;var ec={};Object.defineProperty(ec,"__esModule",{value:!0});ec.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMTQiIGZpbGw9IiMwMDUyRkYiLz48cGF0aCBkPSJNMTQuMDM3IDE4LjkyNmMtMi43NSAwLTQuOTA3LTIuMjA1LTQuOTA3LTQuOTI2IDAtMi43MiAyLjIzLTQuOTI2IDQuOTA3LTQuOTI2YTQuODY2IDQuODY2IDAgMCAxIDQuODMzIDQuMTE4aDQuOTgyYy0uNDQ2LTUuMDczLTQuNjg0LTkuMDQ0LTkuODE1LTkuMDQ0QzguNjEgNC4xNDggNC4xNDkgOC41NiA0LjE0OSAxNHM0LjM4NyA5Ljg1MiA5Ljg5IDkuODUyYzUuMjA0IDAgOS4zNjgtMy45NyA5LjgxNC05LjA0M0gxOC44N2E0Ljg2NiA0Ljg2NiAwIDAgMS00LjgzMyA0LjExN1oiIGZpbGw9IiNmZmYiLz48L3N2Zz4=";var tc={};Object.defineProperty(tc,"__esModule",{value:!0});tc.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMTQiIGZpbGw9IiMwMDUyRkYiLz48cGF0aCBkPSJNMjMuODUyIDE0QTkuODM0IDkuODM0IDAgMCAxIDE0IDIzLjg1MiA5LjgzNCA5LjgzNCAwIDAgMSA0LjE0OCAxNCA5LjgzNCA5LjgzNCAwIDAgMSAxNCA0LjE0OCA5LjgzNCA5LjgzNCAwIDAgMSAyMy44NTIgMTRaIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTExLjE4NSAxMi41MDRjMC0uNDU2IDAtLjcxLjA5OC0uODYyLjA5OC0uMTUyLjE5Ni0uMzA0LjM0My0uMzU1LjE5Ni0uMTAyLjM5Mi0uMTAyLjg4MS0uMTAyaDIuOTg2Yy40OSAwIC42ODYgMCAuODgyLjEwMi4xNDYuMTAxLjI5My4yMDMuMzQyLjM1NS4wOTguMjAzLjA5OC40MDYuMDk4Ljg2MnYyLjk5MmMwIC40NTcgMCAuNzEtLjA5OC44NjMtLjA5OC4xNTItLjE5NS4zMDQtLjM0Mi4zNTUtLjE5Ni4xMDEtLjM5Mi4xMDEtLjg4Mi4xMDFoLTIuOTg2Yy0uNDkgMC0uNjg1IDAtLjg4LS4xMDEtLjE0OC0uMTAyLS4yOTUtLjIwMy0uMzQ0LS4zNTUtLjA5OC0uMjAzLS4wOTgtLjQwNi0uMDk4LS44NjN2LTIuOTkyWiIgZmlsbD0iIzAwNTJGRiIvPjwvc3ZnPg==";var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.QRCodeIcon=void 0;const st=Be;function i_(e){return(0,st.h)("svg",Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},e),(0,st.h)("path",{d:"M8.2271 1.77124L7.0271 1.77124V2.97124H8.2271V1.77124Z"}),(0,st.h)("path",{d:"M5.44922 0.199219L5.44922 4.54922L9.79922 4.54922V0.199219L5.44922 0.199219ZM8.89922 3.64922L6.34922 3.64922L6.34922 1.09922L8.89922 1.09922V3.64922Z"}),(0,st.h)("path",{d:"M2.97124 1.77124L1.77124 1.77124L1.77124 2.97124H2.97124V1.77124Z"}),(0,st.h)("path",{d:"M0.199219 4.54922L4.54922 4.54922L4.54922 0.199219L0.199219 0.199219L0.199219 4.54922ZM1.09922 1.09922L3.64922 1.09922L3.64922 3.64922L1.09922 3.64922L1.09922 1.09922Z"}),(0,st.h)("path",{d:"M2.97124 7.0271H1.77124L1.77124 8.2271H2.97124V7.0271Z"}),(0,st.h)("path",{d:"M0.199219 9.79922H4.54922L4.54922 5.44922L0.199219 5.44922L0.199219 9.79922ZM1.09922 6.34922L3.64922 6.34922L3.64922 8.89922H1.09922L1.09922 6.34922Z"}),(0,st.h)("path",{d:"M8.89922 7.39912H7.99922V5.40112H5.44922L5.44922 9.79912H6.34922L6.34922 6.30112H7.09922V8.29912H9.79922V5.40112H8.89922V7.39912Z"}),(0,st.h)("path",{d:"M7.99912 8.89917H7.09912V9.79917H7.99912V8.89917Z"}),(0,st.h)("path",{d:"M9.79917 8.89917H8.89917V9.79917H9.79917V8.89917Z"}))}Yi.QRCodeIcon=i_;var nc={};Object.defineProperty(nc,"__esModule",{value:!0});const s_=`
    <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M50 100C77.6142 100 100 77.6142 100 50C100 22.3858 77.6142 0 50 0C22.3858 0 0 22.3858 0 50C0 77.6142 22.3858 100 50 100Z" fill="white"/>
        <path d="M50.512 94C74.2907 94 93.5673 74.5244 93.5673 50.5C93.5673 26.4756 74.2907 7 50.512 7C26.7332 7 7.45667 26.4756 7.45667 50.5C7.45667 74.5244 26.7332 94 50.512 94Z" fill="#0052FF"/>
        <path d="M50.6248 65.4335C42.3697 65.4335 35.8996 58.7469 35.8996 50.5C35.8996 42.2531 42.5928 35.5664 50.6248 35.5664C57.9873 35.5664 64.0111 40.9157 65.1267 48.0481H80.0749C78.7363 32.6688 66.0191 20.6328 50.6248 20.6328C34.3379 20.6328 20.9514 34.0062 20.9514 50.5C20.9514 66.9936 34.1148 80.3671 50.6248 80.3671C66.2422 80.3671 78.7363 68.331 80.0749 52.9516H65.1267C64.0111 60.0841 57.9873 65.4335 50.6248 65.4335Z" fill="white"/>
    </svg>
`;nc.default=s_;var rc={};Object.defineProperty(rc,"__esModule",{value:!0});rc.default=`
    <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="50" fill="white"/>
        <circle cx="49.9996" cy="49.9996" r="43.6363" fill="#1B53E4"/>
        <circle cx="49.9996" cy="49.9996" r="43.6363" stroke="white"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M19.3379 49.9484C19.3379 66.8508 33.04 80.553 49.9425 80.553C66.8449 80.553 80.5471 66.8508 80.5471 49.9484C80.5471 33.0459 66.8449 19.3438 49.9425 19.3438C33.04 19.3438 19.3379 33.0459 19.3379 49.9484ZM44.0817 40.0799C41.8725 40.0799 40.0817 41.8708 40.0817 44.0799V55.8029C40.0817 58.012 41.8725 59.8029 44.0817 59.8029H55.8046C58.0138 59.8029 59.8046 58.012 59.8046 55.8029V44.0799C59.8046 41.8708 58.0138 40.0799 55.8046 40.0799H44.0817Z" fill="white"/>
    </svg>
`;var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.StatusDotIcon=void 0;const Ju=Be;function o_(e){return(0,Ju.h)("svg",Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},e),(0,Ju.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.29995 4.99995C2.29995 5.57985 1.82985 6.04995 1.24995 6.04995C0.670052 6.04995 0.199951 5.57985 0.199951 4.99995C0.199951 4.42005 0.670052 3.94995 1.24995 3.94995C1.82985 3.94995 2.29995 4.42005 2.29995 4.99995ZM4.99995 6.04995C5.57985 6.04995 6.04995 5.57985 6.04995 4.99995C6.04995 4.42005 5.57985 3.94995 4.99995 3.94995C4.42005 3.94995 3.94995 4.42005 3.94995 4.99995C3.94995 5.57985 4.42005 6.04995 4.99995 6.04995ZM8.74995 6.04995C9.32985 6.04995 9.79995 5.57985 9.79995 4.99995C9.79995 4.42005 9.32985 3.94995 8.74995 3.94995C8.17005 3.94995 7.69995 4.42005 7.69995 4.99995C7.69995 5.57985 8.17005 6.04995 8.74995 6.04995Z"}))}Ki.StatusDotIcon=o_;var Xi={};function $d(e){this.mode=Pe.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,n=this.data.length;t<n;t++){var r=[],i=this.data.charCodeAt(t);i>65536?(r[0]=240|(i&1835008)>>>18,r[1]=128|(i&258048)>>>12,r[2]=128|(i&4032)>>>6,r[3]=128|i&63):i>2048?(r[0]=224|(i&61440)>>>12,r[1]=128|(i&4032)>>>6,r[2]=128|i&63):i>128?(r[0]=192|(i&1984)>>>6,r[1]=128|i&63):r[0]=i,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}$d.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,n=this.parsedData.length;t<n;t++)e.put(this.parsedData[t],8)}};function ft(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}ft.prototype={addData:function(e){var t=new $d(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=ft.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(0<=n&&n<=6&&(r==0||r==6)||0<=r&&r<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=r&&r<=4?this.modules[e+n][t+r]=!0:this.modules[e+n][t+r]=!1)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=ae.getLostPoint(this);(n==0||e>r)&&(e=r,t=n)}return t},createMovieClip:function(e,t,n){var r=e.createEmptyMovieClip(t,n),i=1;this.make();for(var s=0;s<this.modules.length;s++)for(var o=s*i,a=0;a<this.modules[s].length;a++){var c=a*i,u=this.modules[s][a];u&&(r.beginFill(0,100),r.moveTo(c,o),r.lineTo(c+i,o),r.lineTo(c+i,o+i),r.lineTo(c,o+i),r.endFill())}return r},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=ae.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],i=e[n];if(this.modules[r][i]==null)for(var s=-2;s<=2;s++)for(var o=-2;o<=2;o++)s==-2||s==2||o==-2||o==2||s==0&&o==0?this.modules[r+s][i+o]=!0:this.modules[r+s][i+o]=!1}},setupTypeNumber:function(e){for(var t=ae.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!e&&(t>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var n=0;n<18;n++){var r=!e&&(t>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,r=ae.getBCHTypeInfo(n),i=0;i<15;i++){var s=!e&&(r>>i&1)==1;i<6?this.modules[i][8]=s:i<8?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(var i=0;i<15;i++){var s=!e&&(r>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=s:i<9?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,r=this.moduleCount-1,i=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var a=0;a<2;a++)if(this.modules[r][o-a]==null){var c=!1;s<e.length&&(c=(e[s]>>>i&1)==1);var u=ae.getMask(t,r,o-a);u&&(c=!c),this.modules[r][o-a]=c,i--,i==-1&&(s++,i=7)}if(r+=n,r<0||this.moduleCount<=r){r-=n,n=-n;break}}}};ft.PAD0=236;ft.PAD1=17;ft.createData=function(e,t,n){for(var r=ut.getRSBlocks(e,t),i=new Zd,s=0;s<n.length;s++){var o=n[s];i.put(o.mode,4),i.put(o.getLength(),ae.getLengthInBits(o.mode,e)),o.write(i)}for(var a=0,s=0;s<r.length;s++)a+=r[s].dataCount;if(i.getLengthInBits()>a*8)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+a*8+")");for(i.getLengthInBits()+4<=a*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=a*8||(i.put(ft.PAD0,8),i.getLengthInBits()>=a*8));)i.put(ft.PAD1,8);return ft.createBytes(i,r)};ft.createBytes=function(e,t){for(var n=0,r=0,i=0,s=new Array(t.length),o=new Array(t.length),a=0;a<t.length;a++){var c=t[a].dataCount,u=t[a].totalCount-c;r=Math.max(r,c),i=Math.max(i,u),s[a]=new Array(c);for(var h=0;h<s[a].length;h++)s[a][h]=255&e.buffer[h+n];n+=c;var l=ae.getErrorCorrectPolynomial(u),d=new Sn(s[a],l.getLength()-1),b=d.mod(l);o[a]=new Array(l.getLength()-1);for(var h=0;h<o[a].length;h++){var v=h+b.getLength()-o[a].length;o[a][h]=v>=0?b.get(v):0}}for(var m=0,h=0;h<t.length;h++)m+=t[h].totalCount;for(var w=new Array(m),y=0,h=0;h<r;h++)for(var a=0;a<t.length;a++)h<s[a].length&&(w[y++]=s[a][h]);for(var h=0;h<i;h++)for(var a=0;a<t.length;a++)h<o[a].length&&(w[y++]=o[a][h]);return w};var Pe={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Lt={L:1,M:0,Q:3,H:2},Rt={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},ae={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;ae.getBCHDigit(t)-ae.getBCHDigit(ae.G15)>=0;)t^=ae.G15<<ae.getBCHDigit(t)-ae.getBCHDigit(ae.G15);return(e<<10|t)^ae.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;ae.getBCHDigit(t)-ae.getBCHDigit(ae.G18)>=0;)t^=ae.G18<<ae.getBCHDigit(t)-ae.getBCHDigit(ae.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return ae.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case Rt.PATTERN000:return(t+n)%2==0;case Rt.PATTERN001:return t%2==0;case Rt.PATTERN010:return n%3==0;case Rt.PATTERN011:return(t+n)%3==0;case Rt.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case Rt.PATTERN101:return t*n%2+t*n%3==0;case Rt.PATTERN110:return(t*n%2+t*n%3)%2==0;case Rt.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new Sn([1],0),n=0;n<e;n++)t=t.multiply(new Sn([1,me.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Pe.MODE_NUMBER:return 10;case Pe.MODE_ALPHA_NUM:return 9;case Pe.MODE_8BIT_BYTE:return 8;case Pe.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Pe.MODE_NUMBER:return 12;case Pe.MODE_ALPHA_NUM:return 11;case Pe.MODE_8BIT_BYTE:return 16;case Pe.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case Pe.MODE_NUMBER:return 14;case Pe.MODE_ALPHA_NUM:return 13;case Pe.MODE_8BIT_BYTE:return 16;case Pe.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r++)for(var i=0;i<t;i++){for(var s=0,o=e.isDark(r,i),a=-1;a<=1;a++)if(!(r+a<0||t<=r+a))for(var c=-1;c<=1;c++)i+c<0||t<=i+c||a==0&&c==0||o==e.isDark(r+a,i+c)&&s++;s>5&&(n+=3+s-5)}for(var r=0;r<t-1;r++)for(var i=0;i<t-1;i++){var u=0;e.isDark(r,i)&&u++,e.isDark(r+1,i)&&u++,e.isDark(r,i+1)&&u++,e.isDark(r+1,i+1)&&u++,(u==0||u==4)&&(n+=3)}for(var r=0;r<t;r++)for(var i=0;i<t-6;i++)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(var i=0;i<t;i++)for(var r=0;r<t-6;r++)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);for(var h=0,i=0;i<t;i++)for(var r=0;r<t;r++)e.isDark(r,i)&&h++;var l=Math.abs(100*h/t/t-50)/5;return n+=l*10,n}},me={glog:function(e){if(e<1)throw new Error("glog("+e+")");return me.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return me.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var we=0;we<8;we++)me.EXP_TABLE[we]=1<<we;for(var we=8;we<256;we++)me.EXP_TABLE[we]=me.EXP_TABLE[we-4]^me.EXP_TABLE[we-5]^me.EXP_TABLE[we-6]^me.EXP_TABLE[we-8];for(var we=0;we<255;we++)me.LOG_TABLE[me.EXP_TABLE[we]]=we;function Sn(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&e[n]==0;)n++;this.num=new Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}Sn.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<e.getLength();r++)t[n+r]^=me.gexp(me.glog(this.get(n))+me.glog(e.get(r)));return new Sn(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=me.glog(this.get(0))-me.glog(e.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(var r=0;r<e.getLength();r++)n[r]^=me.gexp(me.glog(e.get(r))+t);return new Sn(n,0).mod(e)}};function ut(e,t){this.totalCount=e,this.dataCount=t}ut.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];ut.getRSBlocks=function(e,t){var n=ut.getRsBlockTable(e,t);if(n==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=n.length/3,i=[],s=0;s<r;s++)for(var o=n[s*3+0],a=n[s*3+1],c=n[s*3+2],u=0;u<o;u++)i.push(new ut(a,c));return i};ut.getRsBlockTable=function(e,t){switch(t){case Lt.L:return ut.RS_BLOCK_TABLE[(e-1)*4+0];case Lt.M:return ut.RS_BLOCK_TABLE[(e-1)*4+1];case Lt.Q:return ut.RS_BLOCK_TABLE[(e-1)*4+2];case Lt.H:return ut.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};function Zd(){this.buffer=[],this.length=0}Zd.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var n=0;n<t;n++)this.putBit((e>>>t-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Do=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function Gd(e){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M",image:{svg:"",width:0,height:0}},typeof e=="string"&&(e={content:e}),e)for(var t in e)this.options[t]=e[t];if(typeof this.options.content!="string")throw new Error("Expected 'content' as string!");if(this.options.content.length===0)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0)||!(this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");function n(c){switch(c){case"L":return Lt.L;case"M":return Lt.M;case"Q":return Lt.Q;case"H":return Lt.H;default:throw new Error("Unknwon error correction level: "+c)}}function r(c,u){for(var h=i(c),l=1,d=0,b=0,v=Do.length;b<=v;b++){var m=Do[b];if(!m)throw new Error("Content too long: expected "+d+" but got "+h);switch(u){case"L":d=m[0];break;case"M":d=m[1];break;case"Q":d=m[2];break;case"H":d=m[3];break;default:throw new Error("Unknwon error correction level: "+u)}if(h<=d)break;l++}if(l>Do.length)throw new Error("Content too long");return l}function i(c){var u=encodeURI(c).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return u.length+(u.length!=c?3:0)}var s=this.options.content,o=r(s,this.options.ecl),a=n(this.options.ecl);this.qrcode=new ft(o,a),this.qrcode.addData(s),this.qrcode.make()}Gd.prototype.svg=function(e){var t=this.options||{},n=this.qrcode.modules;typeof e>"u"&&(e={container:t.container||"svg"});for(var r=typeof t.pretty<"u"?!!t.pretty:!0,i=r?"  ":"",s=r?`\r
`:"",o=t.width,a=t.height,c=n.length,u=o/(c+2*t.padding),h=a/(c+2*t.padding),l=typeof t.join<"u"?!!t.join:!1,d=typeof t.swap<"u"?!!t.swap:!1,b=typeof t.xmlDeclaration<"u"?!!t.xmlDeclaration:!0,v=typeof t.predefined<"u"?!!t.predefined:!1,m=v?i+'<defs><path id="qrmodule" d="M0 0 h'+h+" v"+u+' H0 z" style="fill:'+t.color+';shape-rendering:crispEdges;" /></defs>'+s:"",w=i+'<rect x="0" y="0" width="'+o+'" height="'+a+'" style="fill:'+t.background+';shape-rendering:crispEdges;"/>'+s,y="",E="",S=0;S<c;S++)for(var k=0;k<c;k++){var x=n[k][S];if(x){var N=k*u+t.padding*u,L=S*h+t.padding*h;if(d){var T=N;N=L,L=T}if(l){var M=u+N,$=h+L;N=Number.isInteger(N)?Number(N):N.toFixed(2),L=Number.isInteger(L)?Number(L):L.toFixed(2),M=Number.isInteger(M)?Number(M):M.toFixed(2),$=Number.isInteger($)?Number($):$.toFixed(2),E+="M"+N+","+L+" V"+$+" H"+M+" V"+L+" H"+N+" Z "}else v?y+=i+'<use x="'+N.toString()+'" y="'+L.toString()+'" href="#qrmodule" />'+s:y+=i+'<rect x="'+N.toString()+'" y="'+L.toString()+'" width="'+u+'" height="'+h+'" style="fill:'+t.color+';shape-rendering:crispEdges;"/>'+s}}l&&(y=i+'<path x="0" y="0" style="fill:'+t.color+';shape-rendering:crispEdges;" d="'+E+'" />');let K="";if(this.options.image!==void 0&&this.options.image.svg){const Z=o*this.options.image.width/100,ne=a*this.options.image.height/100,oe=o/2-Z/2,pe=a/2-ne/2;K+=`<svg x="${oe}" y="${pe}" width="${Z}" height="${ne}" viewBox="0 0 100 100" preserveAspectRatio="xMinYMin meet">`,K+=this.options.image.svg+s,K+="</svg>"}var V="";switch(e.container){case"svg":b&&(V+='<?xml version="1.0" standalone="yes"?>'+s),V+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+o+'" height="'+a+'">'+s,V+=m+w+y,V+=K,V+="</svg>";break;case"svg-viewbox":b&&(V+='<?xml version="1.0" standalone="yes"?>'+s),V+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+o+" "+a+'">'+s,V+=m+w+y,V+=K,V+="</svg>";break;case"g":V+='<g width="'+o+'" height="'+a+'">'+s,V+=m+w+y,V+=K,V+="</g>";break;default:V+=(m+w+y+K).replace(/^\s+/,"");break}return V};var a_=Gd,c_=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.QRCode=void 0;const u_=Be,$u=Fr,l_=c_(a_),h_=e=>{const[t,n]=(0,$u.useState)("");return(0,$u.useEffect)(()=>{var r,i;const s=new l_.default({content:e.content,background:e.bgColor||"#ffffff",color:e.fgColor||"#000000",container:"svg",ecl:"M",width:(r=e.width)!==null&&r!==void 0?r:256,height:(i=e.height)!==null&&i!==void 0?i:256,padding:0,image:e.image}),o=Buffer.from(s.svg(),"utf8").toString("base64");n(`data:image/svg+xml;base64,${o}`)}),t?(0,u_.h)("img",{src:t,alt:"QR Code"}):null};Xi.QRCode=h_;var es={},ic={};Object.defineProperty(ic,"__esModule",{value:!0});ic.default=".-cbwsdk-css-reset .-cbwsdk-spinner{display:inline-block}.-cbwsdk-css-reset .-cbwsdk-spinner svg{display:inline-block;animation:2s linear infinite -cbwsdk-spinner-svg}.-cbwsdk-css-reset .-cbwsdk-spinner svg circle{animation:1.9s ease-in-out infinite both -cbwsdk-spinner-circle;display:block;fill:rgba(0,0,0,0);stroke-dasharray:283;stroke-dashoffset:280;stroke-linecap:round;stroke-width:10px;transform-origin:50% 50%}@keyframes -cbwsdk-spinner-svg{0%{transform:rotateZ(0deg)}100%{transform:rotateZ(360deg)}}@keyframes -cbwsdk-spinner-circle{0%,25%{stroke-dashoffset:280;transform:rotate(0)}50%,75%{stroke-dashoffset:75;transform:rotate(45deg)}100%{stroke-dashoffset:280;transform:rotate(360deg)}}";var d_=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(es,"__esModule",{value:!0});es.Spinner=void 0;const Qr=Be,f_=d_(ic),p_=e=>{var t;const n=(t=e.size)!==null&&t!==void 0?t:64,r=e.color||"#000";return(0,Qr.h)("div",{class:"-cbwsdk-spinner"},(0,Qr.h)("style",null,f_.default),(0,Qr.h)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{width:n,height:n}},(0,Qr.h)("circle",{style:{cx:50,cy:50,r:45,stroke:r}})))};es.Spinner=p_;var sc={};Object.defineProperty(sc,"__esModule",{value:!0});sc.default=".-cbwsdk-css-reset .-cbwsdk-connect-content{height:430px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-connect-content.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-header{display:flex;align-items:center;justify-content:space-between;margin:0 0 30px}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading{font-style:normal;font-weight:500;font-size:28px;line-height:36px;margin:0}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-layout{display:flex;flex-direction:row}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-left{margin-right:30px;display:flex;flex-direction:column;justify-content:space-between}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-right{flex:25%;margin-right:34px}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-wrapper{width:220px;height:220px;border-radius:12px;display:flex;justify-content:center;align-items:center;background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light{background-color:rgba(255,255,255,.95)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light>p{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark{background-color:rgba(10,11,13,.9)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark>p{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting>p{font-size:12px;font-weight:bold;margin-top:16px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app{border-radius:8px;font-size:14px;line-height:20px;padding:12px;width:339px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.light{background:#eef0f3;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.dark{background:#1e2025;color:#8a919e}.-cbwsdk-css-reset .-cbwsdk-cancel-button{-webkit-appearance:none;border:none;background:none;cursor:pointer;padding:0;margin:0}.-cbwsdk-css-reset .-cbwsdk-cancel-button-x{position:relative;display:block;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-wallet-steps{padding:0 0 0 16px;margin:0;width:100%;list-style:decimal}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item{list-style-type:decimal;display:list-item;font-style:normal;font-weight:400;font-size:16px;line-height:24px;margin-top:20px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item-wrapper{display:flex;align-items:center}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-pad-left{margin-left:6px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon{display:flex;border-radius:50%;height:24px;width:24px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.light{background:#0052ff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.dark{background:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item{align-items:center;display:flex;flex-direction:row;padding:16px 24px;gap:12px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-connect-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-item.light.selected{background:#f5f8ff;color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark.selected{background:#001033;color:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item.selected{border-radius:100px;font-weight:600}.-cbwsdk-css-reset .-cbwsdk-connect-item-copy-wrapper{margin:0 4px 0 8px}.-cbwsdk-css-reset .-cbwsdk-connect-item-title{margin:0 0 0;font-size:16px;line-height:24px;font-weight:500}.-cbwsdk-css-reset .-cbwsdk-connect-item-description{font-weight:400;font-size:14px;line-height:20px;margin:0}";var Qn=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dt,"__esModule",{value:!0});dt.CoinbaseAppSteps=dt.CoinbaseWalletSteps=dt.ConnectItem=dt.ConnectContent=void 0;const Ue=Qn(Gi),B=Be,Zu=Fr,b_=O,g_=Vn,y_=Qi,m_=Qn(ec),v_=Qn(tc),Qd=Yi,__=Qn(nc),w_=Qn(rc),S_=Ki,E_=Xi,k_=es,x_=Qn(sc),Gu={"coinbase-wallet-app":{title:"Coinbase Wallet app",description:"Connect with your self-custody wallet",icon:v_.default,steps:Kd},"coinbase-app":{title:"Coinbase app",description:"Connect with your Coinbase account",icon:m_.default,steps:Xd}},C_=e=>{switch(e){case"coinbase-app":return __.default;case"coinbase-wallet-app":default:return w_.default}},ha=e=>e==="light"?"#FFFFFF":"#0A0B0D";function M_(e){const{theme:t}=e,[n,r]=(0,Zu.useState)("coinbase-wallet-app"),i=(0,Zu.useCallback)(u=>{r(u)},[]),s=(0,b_.createQrUrl)(e.sessionId,e.sessionSecret,e.linkAPIUrl,e.isParentConnection,e.version,e.chainId),o=Gu[n];if(!n)return null;const a=o.steps,c=n==="coinbase-app";return(0,B.h)("div",{"data-testid":"connect-content",class:(0,Ue.default)("-cbwsdk-connect-content",t)},(0,B.h)("style",null,x_.default),(0,B.h)("div",{class:"-cbwsdk-connect-content-header"},(0,B.h)("h2",{class:(0,Ue.default)("-cbwsdk-connect-content-heading",t)},"Scan to connect with one of our mobile apps"),e.onCancel&&(0,B.h)("button",{type:"button",class:"-cbwsdk-cancel-button",onClick:e.onCancel},(0,B.h)(y_.CloseIcon,{fill:t==="light"?"#0A0B0D":"#FFFFFF"}))),(0,B.h)("div",{class:"-cbwsdk-connect-content-layout"},(0,B.h)("div",{class:"-cbwsdk-connect-content-column-left"},(0,B.h)("div",null,Object.entries(Gu).map(([u,h])=>(0,B.h)(Yd,{key:u,title:h.title,description:h.description,icon:h.icon,selected:n===u,onClick:()=>i(u),theme:t}))),c&&(0,B.h)("div",{class:(0,Ue.default)("-cbwsdk-connect-content-update-app",t)},"Dont see a ",(0,B.h)("strong",null,"Scan")," option? Update your Coinbase app to the latest version and try again.")),(0,B.h)("div",{class:"-cbwsdk-connect-content-column-right"},(0,B.h)("div",{class:"-cbwsdk-connect-content-qr-wrapper"},(0,B.h)(E_.QRCode,{content:s,width:200,height:200,fgColor:"#000",bgColor:"transparent",image:{svg:C_(n),width:25,height:25}}),(0,B.h)("input",{type:"hidden",name:"cbw-cbwsdk-version",value:g_.LIB_VERSION}),(0,B.h)("input",{type:"hidden",value:s})),(0,B.h)(a,{theme:t}),!e.isConnected&&(0,B.h)("div",{"data-testid":"connecting-spinner",class:(0,Ue.default)("-cbwsdk-connect-content-qr-connecting",t)},(0,B.h)(k_.Spinner,{size:36,color:t==="dark"?"#FFF":"#000"}),(0,B.h)("p",null,"Connecting...")))))}dt.ConnectContent=M_;function Yd({title:e,description:t,icon:n,selected:r,theme:i,onClick:s}){return(0,B.h)("div",{onClick:s,class:(0,Ue.default)("-cbwsdk-connect-item",i,{selected:r})},(0,B.h)("div",null,(0,B.h)("img",{src:n,alt:e})),(0,B.h)("div",{class:"-cbwsdk-connect-item-copy-wrapper"},(0,B.h)("h3",{class:"-cbwsdk-connect-item-title"},e),(0,B.h)("p",{class:"-cbwsdk-connect-item-description"},t)))}dt.ConnectItem=Yd;function Kd({theme:e}){return(0,B.h)("ol",{class:"-cbwsdk-wallet-steps"},(0,B.h)("li",{class:(0,Ue.default)("-cbwsdk-wallet-steps-item",e)},(0,B.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase Wallet app")),(0,B.h)("li",{class:(0,Ue.default)("-cbwsdk-wallet-steps-item",e)},(0,B.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},(0,B.h)("span",null,"Tap ",(0,B.h)("strong",null,"Scan")," "),(0,B.h)("span",{class:(0,Ue.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",e)},(0,B.h)(Qd.QRCodeIcon,{fill:ha(e)})))))}dt.CoinbaseWalletSteps=Kd;function Xd({theme:e}){return(0,B.h)("ol",{class:"-cbwsdk-wallet-steps"},(0,B.h)("li",{class:(0,Ue.default)("-cbwsdk-wallet-steps-item",e)},(0,B.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase app")),(0,B.h)("li",{class:(0,Ue.default)("-cbwsdk-wallet-steps-item",e)},(0,B.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},(0,B.h)("span",null,"Tap ",(0,B.h)("strong",null,"More")),(0,B.h)("span",{class:(0,Ue.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",e)},(0,B.h)(S_.StatusDotIcon,{fill:ha(e)})),(0,B.h)("span",{class:"-cbwsdk-wallet-steps-pad-left"},"then ",(0,B.h)("strong",null,"Scan")),(0,B.h)("span",{class:(0,Ue.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",e)},(0,B.h)(Qd.QRCodeIcon,{fill:ha(e)})))))}dt.CoinbaseAppSteps=Xd;var ts={},ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.ArrowLeftIcon=void 0;const Qu=Be;function I_(e){return(0,Qu.h)("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e),(0,Qu.h)("path",{d:"M8.60675 0.155884L7.37816 1.28209L12.7723 7.16662H0V8.83328H12.6548L6.82149 14.6666L8 15.8451L15.8201 8.02501L8.60675 0.155884Z"}))}ns.ArrowLeftIcon=I_;var rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.LaptopIcon=void 0;const Bo=Be;function R_(e){return(0,Bo.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},e),(0,Bo.h)("path",{d:"M1.8001 2.2002H12.2001V9.40019H1.8001V2.2002ZM3.4001 3.8002V7.80019H10.6001V3.8002H3.4001Z"}),(0,Bo.h)("path",{d:"M13.4001 10.2002H0.600098C0.600098 11.0838 1.31644 11.8002 2.2001 11.8002H11.8001C12.6838 11.8002 13.4001 11.0838 13.4001 10.2002Z"}))}rs.LaptopIcon=R_;var is={};Object.defineProperty(is,"__esModule",{value:!0});is.SafeIcon=void 0;const Yu=Be;function N_(e){return(0,Yu.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},e),(0,Yu.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.600098 0.600098V11.8001H13.4001V0.600098H0.600098ZM7.0001 9.2001C5.3441 9.2001 4.0001 7.8561 4.0001 6.2001C4.0001 4.5441 5.3441 3.2001 7.0001 3.2001C8.6561 3.2001 10.0001 4.5441 10.0001 6.2001C10.0001 7.8561 8.6561 9.2001 7.0001 9.2001ZM0.600098 12.6001H3.8001V13.4001H0.600098V12.6001ZM10.2001 12.6001H13.4001V13.4001H10.2001V12.6001ZM8.8001 6.2001C8.8001 7.19421 7.99421 8.0001 7.0001 8.0001C6.00598 8.0001 5.2001 7.19421 5.2001 6.2001C5.2001 5.20598 6.00598 4.4001 7.0001 4.4001C7.99421 4.4001 8.8001 5.20598 8.8001 6.2001Z"}))}is.SafeIcon=N_;var oc={};Object.defineProperty(oc,"__esModule",{value:!0});oc.default=".-cbwsdk-css-reset .-cbwsdk-try-extension{display:flex;margin-top:12px;height:202px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-try-extension.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-column-half{flex:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading{font-style:normal;font-weight:500;font-size:25px;line-height:32px;margin:0;max-width:204px}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta{appearance:none;border:none;background:none;color:#0052ff;cursor:pointer;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.light{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.dark{color:#588af5}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-wrapper{display:flex;align-items:center;margin-top:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-icon{display:block;margin-left:4px;height:14px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;padding:0;list-style:none;height:100%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item{display:flex;align-items:center;flex-flow:nowrap;margin-top:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item:first-of-type{margin-top:0}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon-wrapper{display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon{display:flex;height:32px;width:32px;border-radius:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.light{background:#eef0f3}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.dark{background:#1e2025}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy{display:block;font-weight:400;font-size:14px;line-height:20px;padding-left:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.light{color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.dark{color:#8a919e}";var ef=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ts,"__esModule",{value:!0});ts.TryExtensionContent=void 0;const Ut=ef(Gi),fe=Be,Fo=Fr,A_=ns,T_=rs,j_=is,O_=ef(oc);function P_({theme:e}){const[t,n]=(0,Fo.useState)(!1),r=(0,Fo.useCallback)(()=>{window.open("https://api.wallet.coinbase.com/rpc/v2/desktop/chrome","_blank")},[]),i=(0,Fo.useCallback)(()=>{t?window.location.reload():(r(),n(!0))},[r,t]);return(0,fe.h)("div",{class:(0,Ut.default)("-cbwsdk-try-extension",e)},(0,fe.h)("style",null,O_.default),(0,fe.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,fe.h)("h3",{class:(0,Ut.default)("-cbwsdk-try-extension-heading",e)},"Or try the Coinbase Wallet browser extension"),(0,fe.h)("div",{class:"-cbwsdk-try-extension-cta-wrapper"},(0,fe.h)("button",{class:(0,Ut.default)("-cbwsdk-try-extension-cta",e),onClick:i},t?"Refresh":"Install"),(0,fe.h)("div",null,!t&&(0,fe.h)(A_.ArrowLeftIcon,{class:"-cbwsdk-try-extension-cta-icon",fill:e==="light"?"#0052FF":"#588AF5"})))),(0,fe.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,fe.h)("ul",{class:"-cbwsdk-try-extension-list"},(0,fe.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,fe.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,fe.h)("span",{class:(0,Ut.default)("-cbwsdk-try-extension-list-item-icon",e)},(0,fe.h)(T_.LaptopIcon,{fill:e==="light"?"#0A0B0D":"#FFFFFF"}))),(0,fe.h)("div",{class:(0,Ut.default)("-cbwsdk-try-extension-list-item-copy",e)},"Connect with dapps with just one click on your desktop browser")),(0,fe.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,fe.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,fe.h)("span",{class:(0,Ut.default)("-cbwsdk-try-extension-list-item-icon",e)},(0,fe.h)(j_.SafeIcon,{fill:e==="light"?"#0A0B0D":"#FFFFFF"}))),(0,fe.h)("div",{class:(0,Ut.default)("-cbwsdk-try-extension-list-item-copy",e)},"Add an additional layer of security by using a supported Ledger hardware wallet")))))}ts.TryExtensionContent=P_;var ac={};Object.defineProperty(ac,"__esModule",{value:!0});ac.default=".-cbwsdk-css-reset .-cbwsdk-connect-dialog{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.light{background-color:rgba(0,0,0,.5)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.dark{background-color:rgba(50,53,61,.4)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box{display:flex;position:relative;flex-direction:column;transform:scale(1);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box-hidden{opacity:0;transform:scale(0.85)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container{display:block}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container-hidden{display:none}";var tf=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.ConnectDialog=void 0;const Ho=tf(Gi),qt=Be,Vo=Fr,L_=dt,D_=ts,B_=tf(ac),F_=e=>{const{isOpen:t,darkMode:n}=e,[r,i]=(0,Vo.useState)(!t),[s,o]=(0,Vo.useState)(!t);(0,Vo.useEffect)(()=>{const c=[window.setTimeout(()=>{o(!t)},10)];return t?i(!1):c.push(window.setTimeout(()=>{i(!0)},360)),()=>{c.forEach(window.clearTimeout)}},[e.isOpen]);const a=n?"dark":"light";return(0,qt.h)("div",{class:(0,Ho.default)("-cbwsdk-connect-dialog-container",r&&"-cbwsdk-connect-dialog-container-hidden")},(0,qt.h)("style",null,B_.default),(0,qt.h)("div",{class:(0,Ho.default)("-cbwsdk-connect-dialog-backdrop",a,s&&"-cbwsdk-connect-dialog-backdrop-hidden")}),(0,qt.h)("div",{class:"-cbwsdk-connect-dialog"},(0,qt.h)("div",{class:(0,Ho.default)("-cbwsdk-connect-dialog-box",s&&"-cbwsdk-connect-dialog-box-hidden")},e.connectDisabled?null:(0,qt.h)(L_.ConnectContent,{theme:a,version:e.version,sessionId:e.sessionId,sessionSecret:e.sessionSecret,linkAPIUrl:e.linkAPIUrl,isConnected:e.isConnected,isParentConnection:e.isParentConnection,chainId:e.chainId,onCancel:e.onCancel}),(0,qt.h)(D_.TryExtensionContent,{theme:a}))))};Zi.ConnectDialog=F_;Object.defineProperty(Ui,"__esModule",{value:!0});Ui.LinkFlow=void 0;const zo=Be,Ku=$i,H_=Zi;class V_{constructor(t){this.extensionUI$=new Ku.BehaviorSubject({}),this.subscriptions=new Ku.Subscription,this.isConnected=!1,this.chainId=1,this.isOpen=!1,this.onCancel=null,this.root=null,this.connectDisabled=!1,this.darkMode=t.darkMode,this.version=t.version,this.sessionId=t.sessionId,this.sessionSecret=t.sessionSecret,this.linkAPIUrl=t.linkAPIUrl,this.isParentConnection=t.isParentConnection,this.connected$=t.connected$,this.chainId$=t.chainId$}attach(t){this.root=document.createElement("div"),this.root.className="-cbwsdk-link-flow-root",t.appendChild(this.root),this.render(),this.subscriptions.add(this.connected$.subscribe(n=>{this.isConnected!==n&&(this.isConnected=n,this.render())})),this.subscriptions.add(this.chainId$.subscribe(n=>{this.chainId!==n&&(this.chainId=n,this.render())}))}detach(){var t;this.root&&(this.subscriptions.unsubscribe(),(0,zo.render)(null,this.root),(t=this.root.parentElement)===null||t===void 0||t.removeChild(this.root))}setConnectDisabled(t){this.connectDisabled=t}open(t){this.isOpen=!0,this.onCancel=t.onCancel,this.render()}close(){this.isOpen=!1,this.onCancel=null,this.render()}render(){if(!this.root)return;const t=this.extensionUI$.subscribe(()=>{this.root&&(0,zo.render)((0,zo.h)(H_.ConnectDialog,{darkMode:this.darkMode,version:this.version,sessionId:this.sessionId,sessionSecret:this.sessionSecret,linkAPIUrl:this.linkAPIUrl,isOpen:this.isOpen,isConnected:this.isConnected,isParentConnection:this.isParentConnection,chainId:this.chainId,onCancel:this.onCancel,connectDisabled:this.connectDisabled}),this.root)});this.subscriptions.add(t)}}Ui.LinkFlow=V_;var nf={},cc={};Object.defineProperty(cc,"__esModule",{value:!0});cc.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}";(function(e){var t=j&&j.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.SnackbarInstance=e.SnackbarContainer=e.Snackbar=void 0;const n=t(Gi),r=Be,i=Fr,s=t(cc),o="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";function a(l){switch(l){case"coinbase-app":return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE0LjY3NCAxOC44NThjLTIuMDQ1IDAtMy42NDgtMS43MjItMy42NDgtMy44NDVzMS42NTktMy44NDUgMy42NDgtMy44NDVjMS44MjQgMCAzLjMxNyAxLjM3NyAzLjU5MyAzLjIxNGgzLjcwM2MtLjMzMS0zLjk2LTMuNDgyLTcuMDU5LTcuMjk2LTcuMDU5LTQuMDM0IDAtNy4zNSAzLjQ0My03LjM1IDcuNjkgMCA0LjI0NiAzLjI2IDcuNjkgNy4zNSA3LjY5IDMuODcgMCA2Ljk2NS0zLjEgNy4yOTYtNy4wNTloLTMuNzAzYy0uMjc2IDEuODM2LTEuNzY5IDMuMjE0LTMuNTkzIDMuMjE0WiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0wIDEwLjY3OGMwLTMuNzExIDAtNS41OTYuNzQyLTcuMDIzQTYuNTMyIDYuNTMyIDAgMCAxIDMuNjU1Ljc0MkM1LjA4MiAwIDYuOTY3IDAgMTAuNjc4IDBoNy45MzhjMy43MTEgMCA1LjU5NiAwIDcuMDIzLjc0MmE2LjUzMSA2LjUzMSAwIDAgMSAyLjkxMyAyLjkxM2MuNzQyIDEuNDI3Ljc0MiAzLjMxMi43NDIgNy4wMjN2Ny45MzhjMCAzLjcxMSAwIDUuNTk2LS43NDIgNy4wMjNhNi41MzEgNi41MzEgMCAwIDEtMi45MTMgMi45MTNjLTEuNDI3Ljc0Mi0zLjMxMi43NDItNy4wMjMuNzQyaC03LjkzOGMtMy43MTEgMC01LjU5NiAwLTcuMDIzLS43NDJhNi41MzEgNi41MzEgMCAwIDEtMi45MTMtMi45MTNDMCAyNC4yMTIgMCAyMi4zODQgMCAxOC42MTZ2LTcuOTM4WiIgZmlsbD0iIzAwNTJGRiIvPjxwYXRoIGQ9Ik0xNC42ODQgMTkuNzczYy0yLjcyNyAwLTQuODY0LTIuMjk1LTQuODY0LTUuMTI2IDAtMi44MzEgMi4yMS01LjEyNyA0Ljg2NC01LjEyNyAyLjQzMiAwIDQuNDIyIDEuODM3IDQuNzkgNC4yODVoNC45MzhjLS40NDItNS4yOC00LjY0My05LjQxMS05LjcyOC05LjQxMS01LjM4IDAtOS44MDIgNC41OS05LjgwMiAxMC4yNTMgMCA1LjY2MiA0LjM0OCAxMC4yNTMgOS44MDIgMTAuMjUzIDUuMTU5IDAgOS4yODYtNC4xMzIgOS43MjgtOS40MTFoLTQuOTM4Yy0uMzY4IDIuNDQ4LTIuMzU4IDQuMjg0LTQuNzkgNC4yODRaIiBmaWxsPSIjZmZmIi8+PC9zdmc+";case"coinbase-wallet-app":default:return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+"}}class c{constructor(d){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=d.darkMode}attach(d){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",d.appendChild(this.root),this.render()}presentItem(d){const b=this.nextItemKey++;return this.items.set(b,d),this.render(),()=>{this.items.delete(b),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,r.render)((0,r.h)("div",null,(0,r.h)(e.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([d,b])=>(0,r.h)(e.SnackbarInstance,Object.assign({},b,{key:d}))))),this.root)}}e.Snackbar=c;const u=l=>(0,r.h)("div",{class:(0,n.default)("-cbwsdk-snackbar-container")},(0,r.h)("style",null,s.default),(0,r.h)("div",{class:"-cbwsdk-snackbar"},l.children));e.SnackbarContainer=u;const h=({autoExpand:l,message:d,menuItems:b,appSrc:v})=>{const[m,w]=(0,i.useState)(!0),[y,E]=(0,i.useState)(l??!1);(0,i.useEffect)(()=>{const k=[window.setTimeout(()=>{w(!1)},1),window.setTimeout(()=>{E(!0)},1e4)];return()=>{k.forEach(window.clearTimeout)}});const S=()=>{E(!y)};return(0,r.h)("div",{class:(0,n.default)("-cbwsdk-snackbar-instance",m&&"-cbwsdk-snackbar-instance-hidden",y&&"-cbwsdk-snackbar-instance-expanded")},(0,r.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:S},(0,r.h)("img",{src:a(v),class:"-cbwsdk-snackbar-instance-header-cblogo"}),(0,r.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},d),(0,r.h)("div",{class:"-gear-container"},!y&&(0,r.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,r.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,r.h)("img",{src:o,class:"-gear-icon",title:"Expand"}))),b&&b.length>0&&(0,r.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},b.map((k,x)=>(0,r.h)("div",{class:(0,n.default)("-cbwsdk-snackbar-instance-menu-item",k.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:k.onClick,key:x},(0,r.h)("svg",{width:k.svgWidth,height:k.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,r.h)("path",{"fill-rule":k.defaultFillRule,"clip-rule":k.defaultClipRule,d:k.path,fill:"#AAAAAA"})),(0,r.h)("span",{class:(0,n.default)("-cbwsdk-snackbar-instance-menu-item-info",k.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},k.info)))))};e.SnackbarInstance=h})(nf);var ss={},uc={};Object.defineProperty(uc,"__esModule",{value:!0});uc.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';var z_=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ss,"__esModule",{value:!0});ss.injectCssReset=void 0;const W_=z_(uc);function U_(){const e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(W_.default)),document.documentElement.appendChild(e)}ss.injectCssReset=U_;Object.defineProperty(Wi,"__esModule",{value:!0});Wi.WalletSDKUI=void 0;const q_=Ui,J_=nf,$_=ss;class Z_{constructor(t){this.standalone=null,this.attached=!1,this.appSrc=null,this.snackbar=new J_.Snackbar({darkMode:t.darkMode}),this.linkFlow=new q_.LinkFlow({darkMode:t.darkMode,version:t.version,sessionId:t.session.id,sessionSecret:t.session.secret,linkAPIUrl:t.linkAPIUrl,connected$:t.connected$,chainId$:t.chainId$,isParentConnection:!1})}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const t=document.documentElement,n=document.createElement("div");n.className="-cbwsdk-css-reset",t.appendChild(n),this.linkFlow.attach(n),this.snackbar.attach(n),this.attached=!0,(0,$_.injectCssReset)()}setConnectDisabled(t){this.linkFlow.setConnectDisabled(t)}addEthereumChain(t){}watchAsset(t){}switchEthereumChain(t){}requestEthereumAccounts(t){this.linkFlow.open({onCancel:t.onCancel})}hideRequestEthereumAccounts(){this.linkFlow.close()}signEthereumMessage(t){}signEthereumTransaction(t){}submitEthereumTransaction(t){}ethereumAddressFromSignedMessage(t){}showConnecting(t){let n;return t.isUnlinkedErrorState?n={autoExpand:!0,message:"Connection lost",appSrc:this.appSrc,menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:t.onResetConnection}]}:n={message:"Confirm on phone",appSrc:this.appSrc,menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:t.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:t.onResetConnection}]},this.snackbar.presentItem(n)}setAppSrc(t){this.appSrc=t}reloadUI(){document.location.reload()}inlineAccountsResponse(){return!1}inlineAddEthereumChain(t){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}setStandalone(t){this.standalone=t}isStandalone(){var t;return(t=this.standalone)!==null&&t!==void 0?t:!1}}Wi.WalletSDKUI=Z_;var os={},as={};Object.defineProperty(as,"__esModule",{value:!0});var vn;(function(e){e.typeOfFunction="function",e.boolTrue=!0})(vn||(vn={}));function rf(e,t,n){if(!n||typeof n.value!==vn.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+t+"> is not a method!");return{configurable:vn.boolTrue,get:function(){var r=n.value.bind(this);return Object.defineProperty(this,t,{value:r,configurable:vn.boolTrue,writable:vn.boolTrue}),r}}}as.bind=rf;as.default=rf;function sf(e){return function(t){return t.lift(new G_(e))}}var G_=function(){function e(t){this.durationSelector=t}return e.prototype.call=function(t,n){return n.subscribe(new Q_(t,this.durationSelector))},e}(),Q_=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.durationSelector=r,i.hasValue=!1,i}return t.prototype._next=function(n){if(this.value=n,this.hasValue=!0,!this.throttled){var r=void 0;try{var i=this.durationSelector;r=i(n)}catch(o){return this.destination.error(o)}var s=de(r,new le(this));!s||s.closed?this.clearThrottle():this.add(this.throttled=s)}},t.prototype.clearThrottle=function(){var n=this,r=n.value,i=n.hasValue,s=n.throttled;s&&(this.remove(s),this.throttled=void 0,s.unsubscribe()),i&&(this.value=void 0,this.hasValue=!1,this.destination.next(r))},t.prototype.notifyNext=function(){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(he);function Y_(e,t){return t===void 0&&(t=Ne),sf(function(){return Bd(e,t)})}function K_(e){return function(t){return t.lift(new X_(e))}}var X_=function(){function e(t){this.closingNotifier=t}return e.prototype.call=function(t,n){return n.subscribe(new ew(t,this.closingNotifier))},e}(),ew=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.buffer=[],i.add(de(r,new le(i))),i}return t.prototype._next=function(n){this.buffer.push(n)},t.prototype.notifyNext=function(){var n=this.buffer;this.buffer=[],this.destination.next(n)},t}(he);function tw(e,t){return t===void 0&&(t=null),function(n){return n.lift(new nw(e,t))}}var nw=function(){function e(t,n){this.bufferSize=t,this.startBufferEvery=n,!n||t===n?this.subscriberClass=rw:this.subscriberClass=iw}return e.prototype.call=function(t,n){return n.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},e}(),rw=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.bufferSize=r,i.buffer=[],i}return t.prototype._next=function(n){var r=this.buffer;r.push(n),r.length==this.bufferSize&&(this.destination.next(r),this.buffer=[])},t.prototype._complete=function(){var n=this.buffer;n.length>0&&this.destination.next(n),e.prototype._complete.call(this)},t}(P),iw=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.bufferSize=r,s.startBufferEvery=i,s.buffers=[],s.count=0,s}return t.prototype._next=function(n){var r=this,i=r.bufferSize,s=r.startBufferEvery,o=r.buffers,a=r.count;this.count++,a%s===0&&o.push([]);for(var c=o.length;c--;){var u=o[c];u.push(n),u.length===i&&(o.splice(c,1),this.destination.next(u))}},t.prototype._complete=function(){for(var n=this,r=n.buffers,i=n.destination;r.length>0;){var s=r.shift();s.length>0&&i.next(s)}e.prototype._complete.call(this)},t}(P);function sw(e){var t=arguments.length,n=Ne;De(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],t--);var r=null;t>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return t>=3&&(i=arguments[2]),function(s){return s.lift(new ow(e,r,i,n))}}var ow=function(){function e(t,n,r,i){this.bufferTimeSpan=t,this.bufferCreationInterval=n,this.maxBufferSize=r,this.scheduler=i}return e.prototype.call=function(t,n){return n.subscribe(new cw(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),aw=function(){function e(){this.buffer=[]}return e}(),cw=function(e){C(t,e);function t(n,r,i,s,o){var a=e.call(this,n)||this;a.bufferTimeSpan=r,a.bufferCreationInterval=i,a.maxBufferSize=s,a.scheduler=o,a.contexts=[];var c=a.openContext();if(a.timespanOnly=i==null||i<0,a.timespanOnly){var u={subscriber:a,context:c,bufferTimeSpan:r};a.add(c.closeAction=o.schedule(Xu,r,u))}else{var h={subscriber:a,context:c},l={bufferTimeSpan:r,bufferCreationInterval:i,subscriber:a,scheduler:o};a.add(c.closeAction=o.schedule(of,r,h)),a.add(o.schedule(uw,i,l))}return a}return t.prototype._next=function(n){for(var r=this.contexts,i=r.length,s,o=0;o<i;o++){var a=r[o],c=a.buffer;c.push(n),c.length==this.maxBufferSize&&(s=a)}s&&this.onBufferFull(s)},t.prototype._error=function(n){this.contexts.length=0,e.prototype._error.call(this,n)},t.prototype._complete=function(){for(var n=this,r=n.contexts,i=n.destination;r.length>0;){var s=r.shift();i.next(s.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(n){this.closeContext(n);var r=n.closeAction;if(r.unsubscribe(),this.remove(r),!this.closed&&this.timespanOnly){n=this.openContext();var i=this.bufferTimeSpan,s={subscriber:this,context:n,bufferTimeSpan:i};this.add(n.closeAction=this.scheduler.schedule(Xu,i,s))}},t.prototype.openContext=function(){var n=new aw;return this.contexts.push(n),n},t.prototype.closeContext=function(n){this.destination.next(n.buffer);var r=this.contexts,i=r?r.indexOf(n):-1;i>=0&&r.splice(r.indexOf(n),1)},t}(P);function Xu(e){var t=e.subscriber,n=e.context;n&&t.closeContext(n),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function uw(e){var t=e.bufferCreationInterval,n=e.bufferTimeSpan,r=e.subscriber,i=e.scheduler,s=r.openContext(),o=this;r.closed||(r.add(s.closeAction=i.schedule(of,n,{subscriber:r,context:s})),o.schedule(e,t))}function of(e){var t=e.subscriber,n=e.context;t.closeContext(n)}function lw(e,t){return function(n){return n.lift(new hw(e,t))}}var hw=function(){function e(t,n){this.openings=t,this.closingSelector=n}return e.prototype.call=function(t,n){return n.subscribe(new dw(t,this.openings,this.closingSelector))},e}(),dw=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.closingSelector=i,s.contexts=[],s.add(Et(s,r)),s}return t.prototype._next=function(n){for(var r=this.contexts,i=r.length,s=0;s<i;s++)r[s].buffer.push(n)},t.prototype._error=function(n){for(var r=this.contexts;r.length>0;){var i=r.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,e.prototype._error.call(this,n)},t.prototype._complete=function(){for(var n=this.contexts;n.length>0;){var r=n.shift();this.destination.next(r.buffer),r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(n,r){n?this.closeBuffer(n):this.openBuffer(r)},t.prototype.notifyComplete=function(n){this.closeBuffer(n.context)},t.prototype.openBuffer=function(n){try{var r=this.closingSelector,i=r.call(this,n);i&&this.trySubscribe(i)}catch(s){this._error(s)}},t.prototype.closeBuffer=function(n){var r=this.contexts;if(r&&n){var i=n.buffer,s=n.subscription;this.destination.next(i),r.splice(r.indexOf(n),1),this.remove(s),s.unsubscribe()}},t.prototype.trySubscribe=function(n){var r=this.contexts,i=[],s=new ue,o={buffer:i,subscription:s};r.push(o);var a=Et(this,n,o);!a||a.closed?this.closeBuffer(o):(a.context=o,this.add(a),s.add(a))},t}(cn);function fw(e){return function(t){return t.lift(new pw(e))}}var pw=function(){function e(t){this.closingSelector=t}return e.prototype.call=function(t,n){return n.subscribe(new bw(t,this.closingSelector))},e}(),bw=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.closingSelector=r,i.subscribing=!1,i.openBuffer(),i}return t.prototype._next=function(n){this.buffer.push(n)},t.prototype._complete=function(){var n=this.buffer;n&&this.destination.next(n),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},t.prototype.notifyNext=function(){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var n=this.closingSubscription;n&&(this.remove(n),n.unsubscribe());var r=this.buffer;this.buffer&&this.destination.next(r),this.buffer=[];var i;try{var s=this.closingSelector;i=s()}catch(o){return this.error(o)}n=new ue,this.closingSubscription=n,this.add(n),this.subscribing=!0,n.add(de(i,new le(this))),this.subscribing=!1},t}(he);function gw(e){return function(t){var n=new yw(e),r=t.lift(n);return n.caught=r}}var yw=function(){function e(t){this.selector=t}return e.prototype.call=function(t,n){return n.subscribe(new mw(t,this.selector,this.caught))},e}(),mw=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.selector=r,s.caught=i,s}return t.prototype.error=function(n){if(!this.isStopped){var r=void 0;try{r=this.selector(n,this.caught)}catch(o){e.prototype.error.call(this,o);return}this._unsubscribeAndRecycle();var i=new le(this);this.add(i);var s=de(r,i);s!==i&&this.add(s)}},t}(he);function vw(e){return function(t){return t.lift(new Ga(e))}}function _w(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null;return typeof e[e.length-1]=="function"&&(n=e.pop()),e.length===1&&Re(e[0])&&(e=e[0].slice()),function(r){return r.lift.call(xt([r].concat(e)),new Ga(n))}}function ww(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return n.lift.call(gr.apply(void 0,[n].concat(e)))}}function af(e,t){return Xt(e,t,1)}function Sw(e,t){return af(function(){return e},t)}function Ew(e){return function(t){return t.lift(new kw(e,t))}}var kw=function(){function e(t,n){this.predicate=t,this.source=n}return e.prototype.call=function(t,n){return n.subscribe(new xw(t,this.predicate,this.source))},e}(),xw=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.predicate=r,s.source=i,s.count=0,s.index=0,s}return t.prototype._next=function(n){this.predicate?this._tryPredicate(n):this.count++},t.prototype._tryPredicate=function(n){var r;try{r=this.predicate(n,this.index++,this.source)}catch(i){this.destination.error(i);return}r&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(P);function Cw(e){return function(t){return t.lift(new Mw(e))}}var Mw=function(){function e(t){this.durationSelector=t}return e.prototype.call=function(t,n){return n.subscribe(new Iw(t,this.durationSelector))},e}(),Iw=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.durationSelector=r,i.hasValue=!1,i}return t.prototype._next=function(n){try{var r=this.durationSelector.call(this,n);r&&this._tryNext(n,r)}catch(i){this.destination.error(i)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(n,r){var i=this.durationSubscription;this.value=n,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),i=de(r,new le(this)),i&&!i.closed&&this.add(this.durationSubscription=i)},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var n=this.value,r=this.durationSubscription;r&&(this.durationSubscription=void 0,r.unsubscribe(),this.remove(r)),this.value=void 0,this.hasValue=!1,e.prototype._next.call(this,n)}},t}(he);function Rw(e,t){return t===void 0&&(t=Ne),function(n){return n.lift(new Nw(e,t))}}var Nw=function(){function e(t,n){this.dueTime=t,this.scheduler=n}return e.prototype.call=function(t,n){return n.subscribe(new Aw(t,this.dueTime,this.scheduler))},e}(),Aw=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.dueTime=r,s.scheduler=i,s.debouncedSubscription=null,s.lastValue=null,s.hasValue=!1,s}return t.prototype._next=function(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Tw,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var n=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(n)}},t.prototype.clearDebounce=function(){var n=this.debouncedSubscription;n!==null&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)},t}(P);function Tw(e){e.debouncedNext()}function Hr(e){return e===void 0&&(e=null),function(t){return t.lift(new jw(e))}}var jw=function(){function e(t){this.defaultValue=t}return e.prototype.call=function(t,n){return n.subscribe(new Ow(t,this.defaultValue))},e}(),Ow=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.defaultValue=r,i.isEmpty=!0,i}return t.prototype._next=function(n){this.isEmpty=!1,this.destination.next(n)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(P);function cf(e){return e instanceof Date&&!isNaN(+e)}function Pw(e,t){t===void 0&&(t=Ne);var n=cf(e),r=n?+e-t.now():Math.abs(e);return function(i){return i.lift(new Lw(r,t))}}var Lw=function(){function e(t,n){this.delay=t,this.scheduler=n}return e.prototype.call=function(t,n){return n.subscribe(new Dw(t,this.delay,this.scheduler))},e}(),Dw=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.delay=r,s.scheduler=i,s.queue=[],s.active=!1,s.errored=!1,s}return t.dispatch=function(n){for(var r=n.source,i=r.queue,s=n.scheduler,o=n.destination;i.length>0&&i[0].time-s.now()<=0;)i.shift().notification.observe(o);if(i.length>0){var a=Math.max(0,i[0].time-s.now());this.schedule(n,a)}else this.unsubscribe(),r.active=!1},t.prototype._schedule=function(n){this.active=!0;var r=this.destination;r.add(n.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:n}))},t.prototype.scheduleNotification=function(n){if(this.errored!==!0){var r=this.scheduler,i=new Bw(r.now()+this.delay,n);this.queue.push(i),this.active===!1&&this._schedule(r)}},t.prototype._next=function(n){this.scheduleNotification(wt.createNext(n))},t.prototype._error=function(n){this.errored=!0,this.queue=[],this.destination.error(n),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(wt.createComplete()),this.unsubscribe()},t}(P),Bw=function(){function e(t,n){this.time=t,this.notification=n}return e}();function Fw(e,t){return t?function(n){return new Vw(n,t).lift(new el(e))}:function(n){return n.lift(new el(e))}}var el=function(){function e(t){this.delayDurationSelector=t}return e.prototype.call=function(t,n){return n.subscribe(new Hw(t,this.delayDurationSelector))},e}(),Hw=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.delayDurationSelector=r,i.completed=!1,i.delayNotifierSubscriptions=[],i.index=0,i}return t.prototype.notifyNext=function(n,r,i,s,o){this.destination.next(n),this.removeSubscription(o),this.tryComplete()},t.prototype.notifyError=function(n,r){this._error(n)},t.prototype.notifyComplete=function(n){var r=this.removeSubscription(n);r&&this.destination.next(r),this.tryComplete()},t.prototype._next=function(n){var r=this.index++;try{var i=this.delayDurationSelector(n,r);i&&this.tryDelay(i,n)}catch(s){this.destination.error(s)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},t.prototype.removeSubscription=function(n){n.unsubscribe();var r=this.delayNotifierSubscriptions.indexOf(n);return r!==-1&&this.delayNotifierSubscriptions.splice(r,1),n.outerValue},t.prototype.tryDelay=function(n,r){var i=Et(this,n,r);if(i&&!i.closed){var s=this.destination;s.add(i),this.delayNotifierSubscriptions.push(i)}},t.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},t}(cn),Vw=function(e){C(t,e);function t(n,r){var i=e.call(this)||this;return i.source=n,i.subscriptionDelay=r,i}return t.prototype._subscribe=function(n){this.subscriptionDelay.subscribe(new zw(n,this.source))},t}(U),zw=function(e){C(t,e);function t(n,r){var i=e.call(this)||this;return i.parent=n,i.source=r,i.sourceSubscribed=!1,i}return t.prototype._next=function(n){this.subscribeToSource()},t.prototype._error=function(n){this.unsubscribe(),this.parent.error(n)},t.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(P);function Ww(){return function(e){return e.lift(new Uw)}}var Uw=function(){function e(){}return e.prototype.call=function(t,n){return n.subscribe(new qw(t))},e}(),qw=function(e){C(t,e);function t(n){return e.call(this,n)||this}return t.prototype._next=function(n){n.observe(this.destination)},t}(P);function Jw(e,t){return function(n){return n.lift(new $w(e,t))}}var $w=function(){function e(t,n){this.keySelector=t,this.flushes=n}return e.prototype.call=function(t,n){return n.subscribe(new Zw(t,this.keySelector,this.flushes))},e}(),Zw=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.keySelector=r,s.values=new Set,i&&s.add(de(i,new le(s))),s}return t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(n){this._error(n)},t.prototype._next=function(n){this.keySelector?this._useKeySelector(n):this._finalizeNext(n,n)},t.prototype._useKeySelector=function(n){var r,i=this.destination;try{r=this.keySelector(n)}catch(s){i.error(s);return}this._finalizeNext(r,n)},t.prototype._finalizeNext=function(n,r){var i=this.values;i.has(n)||(i.add(n),this.destination.next(r))},t}(he);function uf(e,t){return function(n){return n.lift(new Gw(e,t))}}var Gw=function(){function e(t,n){this.compare=t,this.keySelector=n}return e.prototype.call=function(t,n){return n.subscribe(new Qw(t,this.compare,this.keySelector))},e}(),Qw=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.keySelector=i,s.hasKey=!1,typeof r=="function"&&(s.compare=r),s}return t.prototype.compare=function(n,r){return n===r},t.prototype._next=function(n){var r;try{var i=this.keySelector;r=i?i(n):n}catch(a){return this.destination.error(a)}var s=!1;if(this.hasKey)try{var o=this.compare;s=o(this.key,r)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=r,this.destination.next(n))},t}(P);function Yw(e,t){return uf(function(n,r){return t?t(n[e],r[e]):n[e]===r[e]})}function cs(e){return e===void 0&&(e=e2),function(t){return t.lift(new Kw(e))}}var Kw=function(){function e(t){this.errorFactory=t}return e.prototype.call=function(t,n){return n.subscribe(new Xw(t,this.errorFactory))},e}(),Xw=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.errorFactory=r,i.hasValue=!1,i}return t.prototype._next=function(n){this.hasValue=!0,this.destination.next(n)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var n=void 0;try{n=this.errorFactory()}catch(r){n=r}this.destination.error(n)},t}(P);function e2(){return new Br}function lc(e){return function(t){return e===0?Zn():t.lift(new t2(e))}}var t2=function(){function e(t){if(this.total=t,this.total<0)throw new On}return e.prototype.call=function(t,n){return n.subscribe(new n2(t,this.total))},e}(),n2=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.total=r,i.count=0,i}return t.prototype._next=function(n){var r=this.total,i=++this.count;i<=r&&(this.destination.next(n),i===r&&(this.destination.complete(),this.unsubscribe()))},t}(P);function r2(e,t){if(e<0)throw new On;var n=arguments.length>=2;return function(r){return r.pipe(Vt(function(i,s){return s===e}),lc(1),n?Hr(t):cs(function(){return new On}))}}function i2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return gr(n,Ji.apply(void 0,e))}}function s2(e,t){return function(n){return n.lift(new o2(e,t,n))}}var o2=function(){function e(t,n,r){this.predicate=t,this.thisArg=n,this.source=r}return e.prototype.call=function(t,n){return n.subscribe(new a2(t,this.predicate,this.thisArg,this.source))},e}(),a2=function(e){C(t,e);function t(n,r,i,s){var o=e.call(this,n)||this;return o.predicate=r,o.thisArg=i,o.source=s,o.index=0,o.thisArg=i||o,o}return t.prototype.notifyComplete=function(n){this.destination.next(n),this.destination.complete()},t.prototype._next=function(n){var r=!1;try{r=this.predicate.call(this.thisArg,n,this.index++,this.source)}catch(i){this.destination.error(i);return}r||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(P);function c2(){return function(e){return e.lift(new u2)}}var u2=function(){function e(){}return e.prototype.call=function(t,n){return n.subscribe(new l2(t))},e}(),l2=function(e){C(t,e);function t(n){var r=e.call(this,n)||this;return r.hasCompleted=!1,r.hasSubscription=!1,r}return t.prototype._next=function(n){this.hasSubscription||(this.hasSubscription=!0,this.add(de(n,new le(this))))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(he);function lf(e,t){return t?function(n){return n.pipe(lf(function(r,i){return xt(e(r,i)).pipe($e(function(s,o){return t(r,s,i,o)}))}))}:function(n){return n.lift(new h2(e))}}var h2=function(){function e(t){this.project=t}return e.prototype.call=function(t,n){return n.subscribe(new d2(t,this.project))},e}(),d2=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.project=r,i.hasSubscription=!1,i.hasCompleted=!1,i.index=0,i}return t.prototype._next=function(n){this.hasSubscription||this.tryNext(n)},t.prototype.tryNext=function(n){var r,i=this.index++;try{r=this.project(n,i)}catch(s){this.destination.error(s);return}this.hasSubscription=!0,this._innerSub(r)},t.prototype._innerSub=function(n){var r=new le(this),i=this.destination;i.add(r);var s=de(n,r);s!==r&&i.add(s)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(n){this.destination.next(n)},t.prototype.notifyError=function(n){this.destination.error(n)},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(he);function f2(e,t,n){return t===void 0&&(t=Number.POSITIVE_INFINITY),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(r){return r.lift(new p2(e,t,n))}}var p2=function(){function e(t,n,r){this.project=t,this.concurrent=n,this.scheduler=r}return e.prototype.call=function(t,n){return n.subscribe(new b2(t,this.project,this.concurrent,this.scheduler))},e}(),b2=function(e){C(t,e);function t(n,r,i,s){var o=e.call(this,n)||this;return o.project=r,o.concurrent=i,o.scheduler=s,o.index=0,o.active=0,o.hasCompleted=!1,i<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return t.dispatch=function(n){var r=n.subscriber,i=n.result,s=n.value,o=n.index;r.subscribeToProjection(i,s,o)},t.prototype._next=function(n){var r=this.destination;if(r.closed){this._complete();return}var i=this.index++;if(this.active<this.concurrent){r.next(n);try{var s=this.project,o=s(n,i);if(!this.scheduler)this.subscribeToProjection(o,n,i);else{var a={subscriber:this,result:o,value:n,index:i},c=this.destination;c.add(this.scheduler.schedule(t.dispatch,0,a))}}catch(u){r.error(u)}}else this.buffer.push(n)},t.prototype.subscribeToProjection=function(n,r,i){this.active++;var s=this.destination;s.add(de(n,new le(this)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(n){this._next(n)},t.prototype.notifyComplete=function(){var n=this.buffer;this.active--,n&&n.length>0&&this._next(n.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},t}(he);function g2(e){return function(t){return t.lift(new y2(e))}}var y2=function(){function e(t){this.callback=t}return e.prototype.call=function(t,n){return n.subscribe(new m2(t,this.callback))},e}(),m2=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.add(new ue(r)),i}return t}(P);function v2(e,t){if(typeof e!="function")throw new TypeError("predicate is not a function");return function(n){return n.lift(new hf(e,n,!1,t))}}var hf=function(){function e(t,n,r,i){this.predicate=t,this.source=n,this.yieldIndex=r,this.thisArg=i}return e.prototype.call=function(t,n){return n.subscribe(new _2(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}(),_2=function(e){C(t,e);function t(n,r,i,s,o){var a=e.call(this,n)||this;return a.predicate=r,a.source=i,a.yieldIndex=s,a.thisArg=o,a.index=0,a}return t.prototype.notifyComplete=function(n){var r=this.destination;r.next(n),r.complete(),this.unsubscribe()},t.prototype._next=function(n){var r=this,i=r.predicate,s=r.thisArg,o=this.index++;try{var a=i.call(s||this,n,o,this.source);a&&this.notifyComplete(this.yieldIndex?o:n)}catch(c){this.destination.error(c)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(P);function w2(e,t){return function(n){return n.lift(new hf(e,n,!0,t))}}function S2(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Vt(function(i,s){return e(i,s,r)}):Ft,lc(1),n?Hr(t):cs(function(){return new Br}))}}function E2(){return function(e){return e.lift(new k2)}}var k2=function(){function e(){}return e.prototype.call=function(t,n){return n.subscribe(new x2(t))},e}(),x2=function(e){C(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._next=function(n){},t}(P);function C2(){return function(e){return e.lift(new M2)}}var M2=function(){function e(){}return e.prototype.call=function(t,n){return n.subscribe(new I2(t))},e}(),I2=function(e){C(t,e);function t(n){return e.call(this,n)||this}return t.prototype.notifyComplete=function(n){var r=this.destination;r.next(n),r.complete()},t.prototype._next=function(n){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(P);function pi(e){return function(t){return e===0?Zn():t.lift(new R2(e))}}var R2=function(){function e(t){if(this.total=t,this.total<0)throw new On}return e.prototype.call=function(t,n){return n.subscribe(new N2(t,this.total))},e}(),N2=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.total=r,i.ring=new Array,i.count=0,i}return t.prototype._next=function(n){var r=this.ring,i=this.total,s=this.count++;if(r.length<i)r.push(n);else{var o=s%i;r[o]=n}},t.prototype._complete=function(){var n=this.destination,r=this.count;if(r>0)for(var i=this.count>=this.total?this.total:this.count,s=this.ring,o=0;o<i;o++){var a=r++%i;n.next(s[a])}n.complete()},t}(P);function A2(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Vt(function(i,s){return e(i,s,r)}):Ft,pi(1),n?Hr(t):cs(function(){return new Br}))}}function T2(e){return function(t){return t.lift(new j2(e))}}var j2=function(){function e(t){this.value=t}return e.prototype.call=function(t,n){return n.subscribe(new O2(t,this.value))},e}(),O2=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.value=r,i}return t.prototype._next=function(n){this.destination.next(this.value)},t}(P);function P2(){return function(e){return e.lift(new L2)}}var L2=function(){function e(){}return e.prototype.call=function(t,n){return n.subscribe(new D2(t))},e}(),D2=function(e){C(t,e);function t(n){return e.call(this,n)||this}return t.prototype._next=function(n){this.destination.next(wt.createNext(n))},t.prototype._error=function(n){var r=this.destination;r.next(wt.createError(n)),r.complete()},t.prototype._complete=function(){var n=this.destination;n.next(wt.createComplete()),n.complete()},t}(P);function bi(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new B2(e,t,n))}}var B2=function(){function e(t,n,r){r===void 0&&(r=!1),this.accumulator=t,this.seed=n,this.hasSeed=r}return e.prototype.call=function(t,n){return n.subscribe(new F2(t,this.accumulator,this.seed,this.hasSeed))},e}(),F2=function(e){C(t,e);function t(n,r,i,s){var o=e.call(this,n)||this;return o.accumulator=r,o._seed=i,o.hasSeed=s,o.index=0,o}return Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(n){this.hasSeed=!0,this._seed=n},enumerable:!0,configurable:!0}),t.prototype._next=function(n){if(!this.hasSeed)this.seed=n,this.destination.next(n);else return this._tryNext(n)},t.prototype._tryNext=function(n){var r=this.index++,i;try{i=this.accumulator(this.seed,n,r)}catch(s){this.destination.error(s)}this.seed=i,this.destination.next(i)},t}(P);function us(e,t){return arguments.length>=2?function(n){return ia(bi(e,t),pi(1),Hr(t))(n)}:function(n){return ia(bi(function(r,i,s){return e(r,i,s+1)}),pi(1))(n)}}function H2(e){var t=typeof e=="function"?function(n,r){return e(n,r)>0?n:r}:function(n,r){return n>r?n:r};return us(t)}function V2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return n.lift.call(Od.apply(void 0,[n].concat(e)))}}function z2(e,t,n){return n===void 0&&(n=Number.POSITIVE_INFINITY),typeof t=="function"?Xt(function(){return e},t,n):(typeof t=="number"&&(n=t),Xt(function(){return e},n))}function W2(e,t,n){return n===void 0&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new U2(e,t,n))}}var U2=function(){function e(t,n,r){this.accumulator=t,this.seed=n,this.concurrent=r}return e.prototype.call=function(t,n){return n.subscribe(new q2(t,this.accumulator,this.seed,this.concurrent))},e}(),q2=function(e){C(t,e);function t(n,r,i,s){var o=e.call(this,n)||this;return o.accumulator=r,o.acc=i,o.concurrent=s,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return t.prototype._next=function(n){if(this.active<this.concurrent){var r=this.index++,i=this.destination,s=void 0;try{var o=this.accumulator;s=o(this.acc,n,r)}catch(a){return i.error(a)}this.active++,this._innerSub(s)}else this.buffer.push(n)},t.prototype._innerSub=function(n){var r=new le(this),i=this.destination;i.add(r);var s=de(n,r);s!==r&&i.add(s)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},t.prototype.notifyNext=function(n){var r=this.destination;this.acc=n,this.hasValue=!0,r.next(n)},t.prototype.notifyComplete=function(){var n=this.buffer;this.active--,n.length>0?this._next(n.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},t}(he);function J2(e){var t=typeof e=="function"?function(n,r){return e(n,r)<0?n:r}:function(n,r){return n<r?n:r};return us(t)}function en(e,t){return function(n){var r;if(typeof e=="function"?r=e:r=function(){return e},typeof t=="function")return n.lift(new $2(r,t));var i=Object.create(n,km);return i.source=n,i.subjectFactory=r,i}}var $2=function(){function e(t,n){this.subjectFactory=t,this.selector=n}return e.prototype.call=function(t,n){var r=this.selector,i=this.subjectFactory(),s=r(i).subscribe(t);return s.add(n.subscribe(i)),s},e}();function Z2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===1&&Re(e[0])&&(e=e[0]),function(n){return n.lift(new G2(e))}}var G2=function(){function e(t){this.nextSources=t}return e.prototype.call=function(t,n){return n.subscribe(new Q2(t,this.nextSources))},e}(),Q2=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.destination=n,i.nextSources=r,i}return t.prototype.notifyError=function(){this.subscribeToNextSource()},t.prototype.notifyComplete=function(){this.subscribeToNextSource()},t.prototype._error=function(n){this.subscribeToNextSource(),this.unsubscribe()},t.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},t.prototype.subscribeToNextSource=function(){var n=this.nextSources.shift();if(n){var r=new le(this),i=this.destination;i.add(r);var s=de(n,r);s!==r&&i.add(s)}else this.destination.complete()},t}(he);function Y2(){return function(e){return e.lift(new K2)}}var K2=function(){function e(){}return e.prototype.call=function(t,n){return n.subscribe(new X2(t))},e}(),X2=function(e){C(t,e);function t(n){var r=e.call(this,n)||this;return r.hasPrev=!1,r}return t.prototype._next=function(n){var r;this.hasPrev?r=[this.prev,n]:this.hasPrev=!0,this.prev=n,r&&this.destination.next(r)},t}(P);function e4(e,t){return function(n){return[Vt(e,t)(n),Vt(Ld(e,t))(n)]}}function t4(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(n===0)throw new Error("list of properties cannot be empty.");return function(r){return $e(n4(e,n))(r)}}function n4(e,t){var n=function(r){for(var i=r,s=0;s<t;s++){var o=i!=null?i[e[s]]:void 0;if(o!==void 0)i=o;else return}return i};return n}function r4(e){return e?en(function(){return new ve},e):en(new ve)}function i4(e){return function(t){return en(new bd(e))(t)}}function s4(){return function(e){return en(new Gn)(e)}}function o4(e,t,n,r){n&&typeof n!="function"&&(r=n);var i=typeof n=="function"?n:void 0,s=new Za(e,t,r);return function(o){return en(function(){return s},i)(o)}}function a4(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.length===1&&Re(e[0])&&(e=e[0]),n.lift.call(Dd.apply(void 0,[n].concat(e)))}}function c4(e){return e===void 0&&(e=-1),function(t){return e===0?Zn():e<0?t.lift(new tl(-1,t)):t.lift(new tl(e-1,t))}}var tl=function(){function e(t,n){this.count=t,this.source=n}return e.prototype.call=function(t,n){return n.subscribe(new u4(t,this.count,this.source))},e}(),u4=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.count=r,s.source=i,s}return t.prototype.complete=function(){if(!this.isStopped){var n=this,r=n.source,i=n.count;if(i===0)return e.prototype.complete.call(this);i>-1&&(this.count=i-1),r.subscribe(this._unsubscribeAndRecycle())}},t}(P);function l4(e){return function(t){return t.lift(new h4(e))}}var h4=function(){function e(t){this.notifier=t}return e.prototype.call=function(t,n){return n.subscribe(new d4(t,this.notifier,n))},e}(),d4=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.notifier=r,s.source=i,s.sourceIsBeingSubscribedTo=!0,s}return t.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return e.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},t.prototype._unsubscribe=function(){var n=this,r=n.notifications,i=n.retriesSubscription;r&&(r.unsubscribe(),this.notifications=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype._unsubscribeAndRecycle=function(){var n=this._unsubscribe;return this._unsubscribe=null,e.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=n,this},t.prototype.subscribeToRetries=function(){this.notifications=new ve;var n;try{var r=this.notifier;n=r(this.notifications)}catch{return e.prototype.complete.call(this)}this.retries=n,this.retriesSubscription=de(n,new le(this))},t}(he);function f4(e){return e===void 0&&(e=-1),function(t){return t.lift(new p4(e,t))}}var p4=function(){function e(t,n){this.count=t,this.source=n}return e.prototype.call=function(t,n){return n.subscribe(new b4(t,this.count,this.source))},e}(),b4=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.count=r,s.source=i,s}return t.prototype.error=function(n){if(!this.isStopped){var r=this,i=r.source,s=r.count;if(s===0)return e.prototype.error.call(this,n);s>-1&&(this.count=s-1),i.subscribe(this._unsubscribeAndRecycle())}},t}(P);function g4(e){return function(t){return t.lift(new y4(e,t))}}var y4=function(){function e(t,n){this.notifier=t,this.source=n}return e.prototype.call=function(t,n){return n.subscribe(new m4(t,this.notifier,this.source))},e}(),m4=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.notifier=r,s.source=i,s}return t.prototype.error=function(n){if(!this.isStopped){var r=this.errors,i=this.retries,s=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{r=new ve;try{var o=this.notifier;i=o(r)}catch(a){return e.prototype.error.call(this,a)}s=de(i,new le(this))}this._unsubscribeAndRecycle(),this.errors=r,this.retries=i,this.retriesSubscription=s,r.next(n)}},t.prototype._unsubscribe=function(){var n=this,r=n.errors,i=n.retriesSubscription;r&&(r.unsubscribe(),this.errors=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var n=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=n,this.source.subscribe(this)},t}(he);function v4(e){return function(t){return t.lift(new _4(e))}}var _4=function(){function e(t){this.notifier=t}return e.prototype.call=function(t,n){var r=new w4(t),i=n.subscribe(r);return i.add(de(this.notifier,new le(r))),i},e}(),w4=function(e){C(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.hasValue=!1,n}return t.prototype._next=function(n){this.value=n,this.hasValue=!0},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(he);function S4(e,t){return t===void 0&&(t=Ne),function(n){return n.lift(new E4(e,t))}}var E4=function(){function e(t,n){this.period=t,this.scheduler=n}return e.prototype.call=function(t,n){return n.subscribe(new k4(t,this.period,this.scheduler))},e}(),k4=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.period=r,s.scheduler=i,s.hasValue=!1,s.add(i.schedule(x4,r,{subscriber:s,period:r})),s}return t.prototype._next=function(n){this.lastValue=n,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(P);function x4(e){var t=e.subscriber,n=e.period;t.notifyNext(),this.schedule(e,n)}function C4(e,t){return function(n){return n.lift(new M4(e,t))}}var M4=function(){function e(t,n){this.compareTo=t,this.comparator=n}return e.prototype.call=function(t,n){return n.subscribe(new I4(t,this.compareTo,this.comparator))},e}(),I4=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.compareTo=r,s.comparator=i,s._a=[],s._b=[],s._oneComplete=!1,s.destination.add(r.subscribe(new R4(n,s))),s}return t.prototype._next=function(n){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(n),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},t.prototype.checkValues=function(){for(var n=this,r=n._a,i=n._b,s=n.comparator;r.length>0&&i.length>0;){var o=r.shift(),a=i.shift(),c=!1;try{c=s?s(o,a):o===a}catch(u){this.destination.error(u)}c||this.emit(!1)}},t.prototype.emit=function(n){var r=this.destination;r.next(n),r.complete()},t.prototype.nextB=function(n){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(n),this.checkValues())},t.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},t}(P),R4=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.parent=r,i}return t.prototype._next=function(n){this.parent.nextB(n)},t.prototype._error=function(n){this.parent.error(n),this.unsubscribe()},t.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},t}(P);function N4(){return new ve}function A4(){return function(e){return qa()(en(N4)(e))}}function T4(e,t,n){var r;return e&&typeof e=="object"?r=e:r={bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(i){return i.lift(j4(r))}}function j4(e){var t=e.bufferSize,n=t===void 0?Number.POSITIVE_INFINITY:t,r=e.windowTime,i=r===void 0?Number.POSITIVE_INFINITY:r,s=e.refCount,o=e.scheduler,a,c=0,u,h=!1,l=!1;return function(d){c++;var b;!a||h?(h=!1,a=new Za(n,i,o),b=a.subscribe(this),u=d.subscribe({next:function(v){a.next(v)},error:function(v){h=!0,a.error(v)},complete:function(){l=!0,u=void 0,a.complete()}}),l&&(u=void 0)):b=a.subscribe(this),this.add(function(){c--,b.unsubscribe(),b=void 0,u&&!l&&s&&c===0&&(u.unsubscribe(),u=void 0,a=void 0)})}}function O4(e){return function(t){return t.lift(new P4(e,t))}}var P4=function(){function e(t,n){this.predicate=t,this.source=n}return e.prototype.call=function(t,n){return n.subscribe(new L4(t,this.predicate,this.source))},e}(),L4=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.predicate=r,s.source=i,s.seenValue=!1,s.index=0,s}return t.prototype.applySingleValue=function(n){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=n)},t.prototype._next=function(n){var r=this.index++;this.predicate?this.tryNext(n,r):this.applySingleValue(n)},t.prototype.tryNext=function(n,r){try{this.predicate(n,r,this.source)&&this.applySingleValue(n)}catch(i){this.destination.error(i)}},t.prototype._complete=function(){var n=this.destination;this.index>0?(n.next(this.seenValue?this.singleValue:void 0),n.complete()):n.error(new Br)},t}(P);function D4(e){return function(t){return t.lift(new B4(e))}}var B4=function(){function e(t){this.total=t}return e.prototype.call=function(t,n){return n.subscribe(new F4(t,this.total))},e}(),F4=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.total=r,i.count=0,i}return t.prototype._next=function(n){++this.count>this.total&&this.destination.next(n)},t}(P);function H4(e){return function(t){return t.lift(new V4(e))}}var V4=function(){function e(t){if(this._skipCount=t,this._skipCount<0)throw new On}return e.prototype.call=function(t,n){return this._skipCount===0?n.subscribe(new P(t)):n.subscribe(new z4(t,this._skipCount))},e}(),z4=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i._skipCount=r,i._count=0,i._ring=new Array(r),i}return t.prototype._next=function(n){var r=this._skipCount,i=this._count++;if(i<r)this._ring[i]=n;else{var s=i%r,o=this._ring,a=o[s];o[s]=n,this.destination.next(a)}},t}(P);function W4(e){return function(t){return t.lift(new U4(e))}}var U4=function(){function e(t){this.notifier=t}return e.prototype.call=function(t,n){return n.subscribe(new q4(t,this.notifier))},e}(),q4=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;i.hasValue=!1;var s=new le(i);i.add(s),i.innerSubscription=s;var o=de(r,s);return o!==s&&(i.add(o),i.innerSubscription=o),i}return t.prototype._next=function(n){this.hasValue&&e.prototype._next.call(this,n)},t.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}(he);function J4(e){return function(t){return t.lift(new $4(e))}}var $4=function(){function e(t){this.predicate=t}return e.prototype.call=function(t,n){return n.subscribe(new Z4(t,this.predicate))},e}(),Z4=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.predicate=r,i.skipping=!0,i.index=0,i}return t.prototype._next=function(n){var r=this.destination;this.skipping&&this.tryCallPredicate(n),this.skipping||r.next(n)},t.prototype.tryCallPredicate=function(n){try{var r=this.predicate(n,this.index++);this.skipping=!!r}catch(i){this.destination.error(i)}},t}(P);function G4(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return De(n)?(e.pop(),function(r){return gr(e,r,n)}):function(r){return gr(e,r)}}var Q4=function(e){C(t,e);function t(n,r,i){r===void 0&&(r=0),i===void 0&&(i=ni);var s=e.call(this)||this;return s.source=n,s.delayTime=r,s.scheduler=i,(!Pn(r)||r<0)&&(s.delayTime=0),(!i||typeof i.schedule!="function")&&(s.scheduler=ni),s}return t.create=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=ni),new t(n,r,i)},t.dispatch=function(n){var r=n.source,i=n.subscriber;return this.add(r.subscribe(i))},t.prototype._subscribe=function(n){var r=this.delayTime,i=this.source,s=this.scheduler;return s.schedule(t.dispatch,r,{source:i,subscriber:n})},t}(U);function Y4(e,t){return t===void 0&&(t=0),function(n){return n.lift(new K4(e,t))}}var K4=function(){function e(t,n){this.scheduler=t,this.delay=n}return e.prototype.call=function(t,n){return new Q4(n,this.delay,this.scheduler).subscribe(t)},e}();function yr(e,t){return typeof t=="function"?function(n){return n.pipe(yr(function(r,i){return xt(e(r,i)).pipe($e(function(s,o){return t(r,s,i,o)}))}))}:function(n){return n.lift(new X4(e))}}var X4=function(){function e(t){this.project=t}return e.prototype.call=function(t,n){return n.subscribe(new e3(t,this.project))},e}(),e3=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.project=r,i.index=0,i}return t.prototype._next=function(n){var r,i=this.index++;try{r=this.project(n,i)}catch(s){this.destination.error(s);return}this._innerSub(r)},t.prototype._innerSub=function(n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new le(this),s=this.destination;s.add(i),this.innerSubscription=de(n,i),this.innerSubscription!==i&&s.add(this.innerSubscription)},t.prototype._complete=function(){var n=this.innerSubscription;(!n||n.closed)&&e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(n){this.destination.next(n)},t}(he);function t3(){return yr(Ft)}function n3(e,t){return t?yr(function(){return e},t):yr(function(){return e})}function r3(e){return function(t){return t.lift(new i3(e))}}var i3=function(){function e(t){this.notifier=t}return e.prototype.call=function(t,n){var r=new s3(t),i=de(this.notifier,new le(r));return i&&!r.seenValue?(r.add(i),n.subscribe(r)):r},e}(),s3=function(e){C(t,e);function t(n){var r=e.call(this,n)||this;return r.seenValue=!1,r}return t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(he);function o3(e,t){return t===void 0&&(t=!1),function(n){return n.lift(new a3(e,t))}}var a3=function(){function e(t,n){this.predicate=t,this.inclusive=n}return e.prototype.call=function(t,n){return n.subscribe(new c3(t,this.predicate,this.inclusive))},e}(),c3=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.predicate=r,s.inclusive=i,s.index=0,s}return t.prototype._next=function(n){var r=this.destination,i;try{i=this.predicate(n,this.index++)}catch(s){r.error(s);return}this.nextOrComplete(n,i)},t.prototype.nextOrComplete=function(n,r){var i=this.destination;r?i.next(n):(this.inclusive&&i.next(n),i.complete())},t}(P);function u3(e,t,n){return function(r){return r.lift(new l3(e,t,n))}}var l3=function(){function e(t,n,r){this.nextOrObserver=t,this.error=n,this.complete=r}return e.prototype.call=function(t,n){return n.subscribe(new h3(t,this.nextOrObserver,this.error,this.complete))},e}(),h3=function(e){C(t,e);function t(n,r,i,s){var o=e.call(this,n)||this;return o._tapNext=at,o._tapError=at,o._tapComplete=at,o._tapError=i||at,o._tapComplete=s||at,Tn(r)?(o._context=o,o._tapNext=r):r&&(o._context=r,o._tapNext=r.next||at,o._tapError=r.error||at,o._tapComplete=r.complete||at),o}return t.prototype._next=function(n){try{this._tapNext.call(this._context,n)}catch(r){this.destination.error(r);return}this.destination.next(n)},t.prototype._error=function(n){try{this._tapError.call(this._context,n)}catch(r){this.destination.error(r);return}this.destination.error(n)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(n){this.destination.error(n);return}return this.destination.complete()},t}(P),df={leading:!0,trailing:!1};function d3(e,t){return t===void 0&&(t=df),function(n){return n.lift(new f3(e,!!t.leading,!!t.trailing))}}var f3=function(){function e(t,n,r){this.durationSelector=t,this.leading=n,this.trailing=r}return e.prototype.call=function(t,n){return n.subscribe(new p3(t,this.durationSelector,this.leading,this.trailing))},e}(),p3=function(e){C(t,e);function t(n,r,i,s){var o=e.call(this,n)||this;return o.destination=n,o.durationSelector=r,o._leading=i,o._trailing=s,o._hasValue=!1,o}return t.prototype._next=function(n){this._hasValue=!0,this._sendValue=n,this._throttled||(this._leading?this.send():this.throttle(n))},t.prototype.send=function(){var n=this,r=n._hasValue,i=n._sendValue;r&&(this.destination.next(i),this.throttle(i)),this._hasValue=!1,this._sendValue=void 0},t.prototype.throttle=function(n){var r=this.tryDurationSelector(n);r&&this.add(this._throttled=de(r,new le(this)))},t.prototype.tryDurationSelector=function(n){try{return this.durationSelector(n)}catch(r){return this.destination.error(r),null}},t.prototype.throttlingDone=function(){var n=this,r=n._throttled,i=n._trailing;r&&r.unsubscribe(),this._throttled=void 0,i&&this.send()},t.prototype.notifyNext=function(){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()},t}(he);function b3(e,t,n){return t===void 0&&(t=Ne),n===void 0&&(n=df),function(r){return r.lift(new g3(e,t,n.leading,n.trailing))}}var g3=function(){function e(t,n,r,i){this.duration=t,this.scheduler=n,this.leading=r,this.trailing=i}return e.prototype.call=function(t,n){return n.subscribe(new y3(t,this.duration,this.scheduler,this.leading,this.trailing))},e}(),y3=function(e){C(t,e);function t(n,r,i,s,o){var a=e.call(this,n)||this;return a.duration=r,a.scheduler=i,a.leading=s,a.trailing=o,a._hasTrailingValue=!1,a._trailingValue=null,a}return t.prototype._next=function(n){this.throttled?this.trailing&&(this._trailingValue=n,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(m3,this.duration,{subscriber:this})),this.leading?this.destination.next(n):this.trailing&&(this._trailingValue=n,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var n=this.throttled;n&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),n.unsubscribe(),this.remove(n),this.throttled=null)},t}(P);function m3(e){var t=e.subscriber;t.clearThrottle()}function v3(e){return e===void 0&&(e=Ne),function(t){return Ya(function(){return t.pipe(bi(function(n,r){var i=n.current;return{value:r,current:e.now(),last:i}},{current:e.now(),value:void 0,last:void 0}),$e(function(n){var r=n.current,i=n.last,s=n.value;return new _3(s,r-i)}))})}}var _3=function(){function e(t,n){this.value=t,this.interval=n}return e}();function ff(e,t,n){return n===void 0&&(n=Ne),function(r){var i=cf(e),s=i?+e-n.now():Math.abs(e);return r.lift(new w3(s,i,t,n))}}var w3=function(){function e(t,n,r,i){this.waitFor=t,this.absoluteTimeout=n,this.withObservable=r,this.scheduler=i}return e.prototype.call=function(t,n){return n.subscribe(new S3(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),S3=function(e){C(t,e);function t(n,r,i,s,o){var a=e.call(this,n)||this;return a.absoluteTimeout=r,a.waitFor=i,a.withObservable=s,a.scheduler=o,a.scheduleTimeout(),a}return t.dispatchTimeout=function(n){var r=n.withObservable;n._unsubscribeAndRecycle(),n.add(de(r,new le(n)))},t.prototype.scheduleTimeout=function(){var n=this.action;n?this.action=n.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(n){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,n)},t.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},t}(he);function E3(e,t){return t===void 0&&(t=Ne),ff(e,$a(new kd),t)}function k3(e){return e===void 0&&(e=Ne),$e(function(t){return new x3(t,e.now())})}var x3=function(){function e(t,n){this.value=t,this.timestamp=n}return e}();function C3(e,t,n){return n===0?[t]:(e.push(t),e)}function M3(){return us(C3,[])}function I3(e){return function(t){return t.lift(new R3(e))}}var R3=function(){function e(t){this.windowBoundaries=t}return e.prototype.call=function(t,n){var r=new N3(t),i=n.subscribe(r);return i.closed||r.add(de(this.windowBoundaries,new le(r))),i},e}(),N3=function(e){C(t,e);function t(n){var r=e.call(this,n)||this;return r.window=new ve,n.next(r.window),r}return t.prototype.notifyNext=function(){this.openWindow()},t.prototype.notifyError=function(n){this._error(n)},t.prototype.notifyComplete=function(){this._complete()},t.prototype._next=function(n){this.window.next(n)},t.prototype._error=function(n){this.window.error(n),this.destination.error(n)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var n=this.window;n&&n.complete();var r=this.destination,i=this.window=new ve;r.next(i)},t}(he);function A3(e,t){return t===void 0&&(t=0),function(n){return n.lift(new T3(e,t))}}var T3=function(){function e(t,n){this.windowSize=t,this.startWindowEvery=n}return e.prototype.call=function(t,n){return n.subscribe(new j3(t,this.windowSize,this.startWindowEvery))},e}(),j3=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.destination=n,s.windowSize=r,s.startWindowEvery=i,s.windows=[new ve],s.count=0,n.next(s.windows[0]),s}return t.prototype._next=function(n){for(var r=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,i=this.destination,s=this.windowSize,o=this.windows,a=o.length,c=0;c<a&&!this.closed;c++)o[c].next(n);var u=this.count-s+1;if(u>=0&&u%r===0&&!this.closed&&o.shift().complete(),++this.count%r===0&&!this.closed){var h=new ve;o.push(h),i.next(h)}},t.prototype._error=function(n){var r=this.windows;if(r)for(;r.length>0&&!this.closed;)r.shift().error(n);this.destination.error(n)},t.prototype._complete=function(){var n=this.windows;if(n)for(;n.length>0&&!this.closed;)n.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(P);function O3(e){var t=Ne,n=null,r=Number.POSITIVE_INFINITY;return De(arguments[3])&&(t=arguments[3]),De(arguments[2])?t=arguments[2]:Pn(arguments[2])&&(r=Number(arguments[2])),De(arguments[1])?t=arguments[1]:Pn(arguments[1])&&(n=Number(arguments[1])),function(i){return i.lift(new P3(e,n,r,t))}}var P3=function(){function e(t,n,r,i){this.windowTimeSpan=t,this.windowCreationInterval=n,this.maxWindowSize=r,this.scheduler=i}return e.prototype.call=function(t,n){return n.subscribe(new D3(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),L3=function(e){C(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._numberOfNextedValues=0,n}return t.prototype.next=function(n){this._numberOfNextedValues++,e.prototype.next.call(this,n)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(ve),D3=function(e){C(t,e);function t(n,r,i,s,o){var a=e.call(this,n)||this;a.destination=n,a.windowTimeSpan=r,a.windowCreationInterval=i,a.maxWindowSize=s,a.scheduler=o,a.windows=[];var c=a.openWindow();if(i!==null&&i>=0){var u={subscriber:a,window:c,context:null},h={windowTimeSpan:r,windowCreationInterval:i,subscriber:a,scheduler:o};a.add(o.schedule(pf,r,u)),a.add(o.schedule(F3,i,h))}else{var l={subscriber:a,window:c,windowTimeSpan:r};a.add(o.schedule(B3,r,l))}return a}return t.prototype._next=function(n){for(var r=this.windows,i=r.length,s=0;s<i;s++){var o=r[s];o.closed||(o.next(n),o.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(o))}},t.prototype._error=function(n){for(var r=this.windows;r.length>0;)r.shift().error(n);this.destination.error(n)},t.prototype._complete=function(){for(var n=this.windows;n.length>0;){var r=n.shift();r.closed||r.complete()}this.destination.complete()},t.prototype.openWindow=function(){var n=new L3;this.windows.push(n);var r=this.destination;return r.next(n),n},t.prototype.closeWindow=function(n){n.complete();var r=this.windows;r.splice(r.indexOf(n),1)},t}(P);function B3(e){var t=e.subscriber,n=e.windowTimeSpan,r=e.window;r&&t.closeWindow(r),e.window=t.openWindow(),this.schedule(e,n)}function F3(e){var t=e.windowTimeSpan,n=e.subscriber,r=e.scheduler,i=e.windowCreationInterval,s=n.openWindow(),o=this,a={action:o,subscription:null},c={subscriber:n,window:s,context:a};a.subscription=r.schedule(pf,t,c),o.add(a.subscription),o.schedule(e,i)}function pf(e){var t=e.subscriber,n=e.window,r=e.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),t.closeWindow(n)}function H3(e,t){return function(n){return n.lift(new V3(e,t))}}var V3=function(){function e(t,n){this.openings=t,this.closingSelector=n}return e.prototype.call=function(t,n){return n.subscribe(new z3(t,this.openings,this.closingSelector))},e}(),z3=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;return s.openings=r,s.closingSelector=i,s.contexts=[],s.add(s.openSubscription=Et(s,r,r)),s}return t.prototype._next=function(n){var r=this.contexts;if(r)for(var i=r.length,s=0;s<i;s++)r[s].window.next(n)},t.prototype._error=function(n){var r=this.contexts;if(this.contexts=null,r)for(var i=r.length,s=-1;++s<i;){var o=r[s];o.window.error(n),o.subscription.unsubscribe()}e.prototype._error.call(this,n)},t.prototype._complete=function(){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var s=n[i];s.window.complete(),s.subscription.unsubscribe()}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var s=n[i];s.window.unsubscribe(),s.subscription.unsubscribe()}},t.prototype.notifyNext=function(n,r,i,s,o){if(n===this.openings){var a=void 0;try{var c=this.closingSelector;a=c(r)}catch(b){return this.error(b)}var u=new ve,h=new ue,l={window:u,subscription:h};this.contexts.push(l);var d=Et(this,a,l);d.closed?this.closeWindow(this.contexts.length-1):(d.context=l,h.add(d)),this.destination.next(u)}else this.closeWindow(this.contexts.indexOf(n))},t.prototype.notifyError=function(n){this.error(n)},t.prototype.notifyComplete=function(n){n!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(n.context))},t.prototype.closeWindow=function(n){if(n!==-1){var r=this.contexts,i=r[n],s=i.window,o=i.subscription;r.splice(n,1),s.complete(),o.unsubscribe()}},t}(cn);function W3(e){return function(t){return t.lift(new U3(e))}}var U3=function(){function e(t){this.closingSelector=t}return e.prototype.call=function(t,n){return n.subscribe(new q3(t,this.closingSelector))},e}(),q3=function(e){C(t,e);function t(n,r){var i=e.call(this,n)||this;return i.destination=n,i.closingSelector=r,i.openWindow(),i}return t.prototype.notifyNext=function(n,r,i,s,o){this.openWindow(o)},t.prototype.notifyError=function(n){this._error(n)},t.prototype.notifyComplete=function(n){this.openWindow(n)},t.prototype._next=function(n){this.window.next(n)},t.prototype._error=function(n){this.window.error(n),this.destination.error(n),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(n){n===void 0&&(n=null),n&&(this.remove(n),n.unsubscribe());var r=this.window;r&&r.complete();var i=this.window=new ve;this.destination.next(i);var s;try{var o=this.closingSelector;s=o()}catch(a){this.destination.error(a),this.window.error(a);return}this.add(this.closingNotification=Et(this,s))},t}(cn);function J3(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){var r;typeof e[e.length-1]=="function"&&(r=e.pop());var i=e;return n.lift(new $3(i,r))}}var $3=function(){function e(t,n){this.observables=t,this.project=n}return e.prototype.call=function(t,n){return n.subscribe(new Z3(t,this.observables,this.project))},e}(),Z3=function(e){C(t,e);function t(n,r,i){var s=e.call(this,n)||this;s.observables=r,s.project=i,s.toRespond=[];var o=r.length;s.values=new Array(o);for(var a=0;a<o;a++)s.toRespond.push(a);for(var a=0;a<o;a++){var c=r[a];s.add(Et(s,c,void 0,a))}return s}return t.prototype.notifyNext=function(n,r,i){this.values[i]=r;var s=this.toRespond;if(s.length>0){var o=s.indexOf(i);o!==-1&&s.splice(o,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(n){if(this.toRespond.length===0){var r=[n].concat(this.values);this.project?this._tryProject(r):this.destination.next(r)}},t.prototype._tryProject=function(n){var r;try{r=this.project.apply(this,n)}catch(i){this.destination.error(i);return}this.destination.next(r)},t}(cn);function G3(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return n.lift.call(Fd.apply(void 0,[n].concat(e)))}}function Q3(e){return function(t){return t.lift(new Hd(e))}}const Y3=Object.freeze(Object.defineProperty({__proto__:null,audit:sf,auditTime:Y_,buffer:K_,bufferCount:tw,bufferTime:sw,bufferToggle:lw,bufferWhen:fw,catchError:gw,combineAll:vw,combineLatest:_w,concat:ww,concatAll:Nd,concatMap:af,concatMapTo:Sw,count:Ew,debounce:Cw,debounceTime:Rw,defaultIfEmpty:Hr,delay:Pw,delayWhen:Fw,dematerialize:Ww,distinct:Jw,distinctUntilChanged:uf,distinctUntilKeyChanged:Yw,elementAt:r2,endWith:i2,every:s2,exhaust:c2,exhaustMap:lf,expand:f2,filter:Vt,finalize:g2,find:v2,findIndex:w2,first:S2,flatMap:mv,groupBy:Cm,ignoreElements:E2,isEmpty:C2,last:A2,map:$e,mapTo:T2,materialize:P2,max:H2,merge:V2,mergeAll:Qa,mergeMap:Xt,mergeMapTo:z2,mergeScan:W2,min:J2,multicast:en,observeOn:Lm,onErrorResumeNext:Z2,pairwise:Y2,partition:e4,pluck:t4,publish:r4,publishBehavior:i4,publishLast:s4,publishReplay:o4,race:a4,reduce:us,refCount:qa,repeat:c4,repeatWhen:l4,retry:f4,retryWhen:g4,sample:v4,sampleTime:S4,scan:bi,sequenceEqual:C4,share:A4,shareReplay:T4,single:O4,skip:D4,skipLast:H4,skipUntil:W4,skipWhile:J4,startWith:G4,subscribeOn:Y4,switchAll:t3,switchMap:yr,switchMapTo:n3,take:lc,takeLast:pi,takeUntil:r3,takeWhile:o3,tap:u3,throttle:d3,throttleTime:b3,throwIfEmpty:cs,timeInterval:v3,timeout:E3,timeoutWith:ff,timestamp:k3,toArray:M3,window:I3,windowCount:A3,windowTime:O3,windowToggle:H3,windowWhen:W3,withLatestFrom:J3,zip:G3,zipAll:Q3},Symbol.toStringTag,{value:"Module"})),hc=Fn(Y3);var ls={},We={};Object.defineProperty(We,"__esModule",{value:!0});We.ClientMessagePublishEvent=We.ClientMessageSetSessionConfig=We.ClientMessageGetSessionConfig=We.ClientMessageIsLinked=We.ClientMessageHostSession=void 0;function K3(e){return Object.assign({type:"HostSession"},e)}We.ClientMessageHostSession=K3;function X3(e){return Object.assign({type:"IsLinked"},e)}We.ClientMessageIsLinked=X3;function e5(e){return Object.assign({type:"GetSessionConfig"},e)}We.ClientMessageGetSessionConfig=e5;function t5(e){return Object.assign({type:"SetSessionConfig"},e)}We.ClientMessageSetSessionConfig=t5;function n5(e){return Object.assign({type:"PublishEvent"},e)}We.ClientMessagePublishEvent=n5;var bf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RxWebSocket=e.ConnectionState=void 0;const t=$i,n=hc;var r;(function(s){s[s.DISCONNECTED=0]="DISCONNECTED",s[s.CONNECTING=1]="CONNECTING",s[s.CONNECTED=2]="CONNECTED"})(r=e.ConnectionState||(e.ConnectionState={}));class i{constructor(o,a=WebSocket){this.WebSocketClass=a,this.webSocket=null,this.connectionStateSubject=new t.BehaviorSubject(r.DISCONNECTED),this.incomingDataSubject=new t.Subject,this.url=o.replace(/^http/,"ws")}connect(){return this.webSocket?(0,t.throwError)(new Error("webSocket object is not null")):new t.Observable(o=>{let a;try{this.webSocket=a=new this.WebSocketClass(this.url)}catch(c){o.error(c);return}this.connectionStateSubject.next(r.CONNECTING),a.onclose=c=>{this.clearWebSocket(),o.error(new Error(`websocket error ${c.code}: ${c.reason}`)),this.connectionStateSubject.next(r.DISCONNECTED)},a.onopen=c=>{o.next(),o.complete(),this.connectionStateSubject.next(r.CONNECTED)},a.onmessage=c=>{this.incomingDataSubject.next(c.data)}}).pipe((0,n.take)(1))}disconnect(){const{webSocket:o}=this;if(o){this.clearWebSocket(),this.connectionStateSubject.next(r.DISCONNECTED);try{o.close()}catch{}}}get connectionState$(){return this.connectionStateSubject.asObservable()}get incomingData$(){return this.incomingDataSubject.asObservable()}get incomingJSONData$(){return this.incomingData$.pipe((0,n.flatMap)(o=>{let a;try{a=JSON.parse(o)}catch{return(0,t.empty)()}return(0,t.of)(a)}))}sendData(o){const{webSocket:a}=this;if(!a)throw new Error("websocket is not connected");a.send(o)}clearWebSocket(){const{webSocket:o}=this;o&&(this.webSocket=null,o.onclose=null,o.onerror=null,o.onmessage=null,o.onopen=null)}}e.RxWebSocket=i})(bf);var hs={};Object.defineProperty(hs,"__esModule",{value:!0});hs.isServerMessageFail=void 0;function r5(e){return e&&e.type==="Fail"&&typeof e.id=="number"&&typeof e.sessionId=="string"&&typeof e.error=="string"}hs.isServerMessageFail=r5;Object.defineProperty(ls,"__esModule",{value:!0});ls.WalletSDKConnection=void 0;const Ye=$i,G=hc,tr=zn,bn=Er,nr=We,rr=Hn,Yr=bf,Wo=hs,nl=1e4,i5=6e4;class s5{constructor(t,n,r,i,s=WebSocket){this.sessionId=t,this.sessionKey=n,this.diagnostic=i,this.subscriptions=new Ye.Subscription,this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,bn.IntNumber)(1),this.connectedSubject=new Ye.BehaviorSubject(!1),this.linkedSubject=new Ye.BehaviorSubject(!1),this.sessionConfigSubject=new Ye.ReplaySubject(1);const o=new Yr.RxWebSocket(r+"/rpc",s);this.ws=o,this.subscriptions.add(o.connectionState$.pipe((0,G.tap)(a=>{var c;return(c=this.diagnostic)===null||c===void 0?void 0:c.log(rr.EVENTS.CONNECTED_STATE_CHANGE,{state:a,sessionIdHash:tr.Session.hash(t)})}),(0,G.skip)(1),(0,G.filter)(a=>a===Yr.ConnectionState.DISCONNECTED&&!this.destroyed),(0,G.delay)(5e3),(0,G.filter)(a=>!this.destroyed),(0,G.flatMap)(a=>o.connect()),(0,G.retry)()).subscribe()),this.subscriptions.add(o.connectionState$.pipe((0,G.skip)(2),(0,G.switchMap)(a=>(0,Ye.iif)(()=>a===Yr.ConnectionState.CONNECTED,this.authenticate().pipe((0,G.tap)(c=>this.sendIsLinked()),(0,G.tap)(c=>this.sendGetSessionConfig()),(0,G.map)(c=>!0)),(0,Ye.of)(!1))),(0,G.distinctUntilChanged)(),(0,G.catchError)(a=>(0,Ye.of)(!1))).subscribe(a=>this.connectedSubject.next(a))),this.subscriptions.add(o.connectionState$.pipe((0,G.skip)(1),(0,G.switchMap)(a=>(0,Ye.iif)(()=>a===Yr.ConnectionState.CONNECTED,(0,Ye.timer)(0,nl)))).subscribe(a=>a===0?this.updateLastHeartbeat():this.heartbeat())),this.subscriptions.add(o.incomingData$.pipe((0,G.filter)(a=>a==="h")).subscribe(a=>this.updateLastHeartbeat())),this.subscriptions.add(o.incomingJSONData$.pipe((0,G.filter)(a=>["IsLinkedOK","Linked"].includes(a.type))).subscribe(a=>{var c;const u=a;(c=this.diagnostic)===null||c===void 0||c.log(rr.EVENTS.LINKED,{sessionIdHash:tr.Session.hash(t),linked:u.linked,type:a.type,onlineGuests:u.onlineGuests}),this.linkedSubject.next(u.linked||u.onlineGuests>0)})),this.subscriptions.add(o.incomingJSONData$.pipe((0,G.filter)(a=>["GetSessionConfigOK","SessionConfigUpdated"].includes(a.type))).subscribe(a=>{var c;const u=a;(c=this.diagnostic)===null||c===void 0||c.log(rr.EVENTS.SESSION_CONFIG_RECEIVED,{sessionIdHash:tr.Session.hash(t),metadata_keys:u&&u.metadata?Object.keys(u.metadata):void 0}),this.sessionConfigSubject.next({webhookId:u.webhookId,webhookUrl:u.webhookUrl,metadata:u.metadata})}))}connect(){var t;if(this.destroyed)throw new Error("instance is destroyed");(t=this.diagnostic)===null||t===void 0||t.log(rr.EVENTS.STARTED_CONNECTING,{sessionIdHash:tr.Session.hash(this.sessionId)}),this.ws.connect().subscribe()}destroy(){var t;this.subscriptions.unsubscribe(),this.ws.disconnect(),(t=this.diagnostic)===null||t===void 0||t.log(rr.EVENTS.DISCONNECTED,{sessionIdHash:tr.Session.hash(this.sessionId)}),this.destroyed=!0}get isDestroyed(){return this.destroyed}get connected$(){return this.connectedSubject.asObservable()}get onceConnected$(){return this.connected$.pipe((0,G.filter)(t=>t),(0,G.take)(1),(0,G.map)(()=>{}))}get linked$(){return this.linkedSubject.asObservable()}get onceLinked$(){return this.linked$.pipe((0,G.filter)(t=>t),(0,G.take)(1),(0,G.map)(()=>{}))}get sessionConfig$(){return this.sessionConfigSubject.asObservable()}get incomingEvent$(){return this.ws.incomingJSONData$.pipe((0,G.filter)(t=>{if(t.type!=="Event")return!1;const n=t;return typeof n.sessionId=="string"&&typeof n.eventId=="string"&&typeof n.event=="string"&&typeof n.data=="string"}),(0,G.map)(t=>t))}setSessionMetadata(t,n){const r=(0,nr.ClientMessageSetSessionConfig)({id:(0,bn.IntNumber)(this.nextReqId++),sessionId:this.sessionId,metadata:{[t]:n}});return this.onceConnected$.pipe((0,G.flatMap)(i=>this.makeRequest(r)),(0,G.map)(i=>{if((0,Wo.isServerMessageFail)(i))throw new Error(i.error||"failed to set session metadata")}))}publishEvent(t,n,r=!1){const i=(0,nr.ClientMessagePublishEvent)({id:(0,bn.IntNumber)(this.nextReqId++),sessionId:this.sessionId,event:t,data:n,callWebhook:r});return this.onceLinked$.pipe((0,G.flatMap)(s=>this.makeRequest(i)),(0,G.map)(s=>{if((0,Wo.isServerMessageFail)(s))throw new Error(s.error||"failed to publish event");return s.eventId}))}sendData(t){this.ws.sendData(JSON.stringify(t))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>nl*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}makeRequest(t,n=i5){const r=t.id;try{this.sendData(t)}catch(i){return(0,Ye.throwError)(i)}return this.ws.incomingJSONData$.pipe((0,G.timeoutWith)(n,(0,Ye.throwError)(new Error(`request ${r} timed out`))),(0,G.filter)(i=>i.id===r),(0,G.take)(1))}authenticate(){const t=(0,nr.ClientMessageHostSession)({id:(0,bn.IntNumber)(this.nextReqId++),sessionId:this.sessionId,sessionKey:this.sessionKey});return this.makeRequest(t).pipe((0,G.map)(n=>{if((0,Wo.isServerMessageFail)(n))throw new Error(n.error||"failed to authentcate")}))}sendIsLinked(){const t=(0,nr.ClientMessageIsLinked)({id:(0,bn.IntNumber)(this.nextReqId++),sessionId:this.sessionId});this.sendData(t)}sendGetSessionConfig(){const t=(0,nr.ClientMessageGetSessionConfig)({id:(0,bn.IntNumber)(this.nextReqId++),sessionId:this.sessionId});this.sendData(t)}}ls.WalletSDKConnection=s5;var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.decrypt=Dn.encrypt=void 0;const gi=O;async function o5(e,t){if(t.length!==64)throw Error("secret must be 256 bits");const n=crypto.getRandomValues(new Uint8Array(12)),r=await crypto.subtle.importKey("raw",(0,gi.hexStringToUint8Array)(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),i=new TextEncoder,s=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},r,i.encode(e)),o=16,a=s.slice(s.byteLength-o),c=s.slice(0,s.byteLength-o),u=new Uint8Array(a),h=new Uint8Array(c),l=new Uint8Array([...n,...u,...h]);return(0,gi.uint8ArrayToHex)(l)}Dn.encrypt=o5;function a5(e,t){if(t.length!==64)throw Error("secret must be 256 bits");return new Promise((n,r)=>{(async function(){const i=await crypto.subtle.importKey("raw",(0,gi.hexStringToUint8Array)(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),s=(0,gi.hexStringToUint8Array)(e),o=s.slice(0,12),a=s.slice(12,28),c=s.slice(28),u=new Uint8Array([...c,...a]),h={name:"AES-GCM",iv:new Uint8Array(o)};try{const l=await window.crypto.subtle.decrypt(h,i,u),d=new TextDecoder;n(d.decode(l))}catch(l){r(l)}})()})}Dn.decrypt=a5;var ds={},fs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RelayMessageType=void 0,function(t){t.SESSION_ID_REQUEST="SESSION_ID_REQUEST",t.SESSION_ID_RESPONSE="SESSION_ID_RESPONSE",t.LINKED="LINKED",t.UNLINKED="UNLINKED",t.WEB3_REQUEST="WEB3_REQUEST",t.WEB3_REQUEST_CANCELED="WEB3_REQUEST_CANCELED",t.WEB3_RESPONSE="WEB3_RESPONSE"}(e.RelayMessageType||(e.RelayMessageType={}))})(fs);Object.defineProperty(ds,"__esModule",{value:!0});ds.Web3RequestCanceledMessage=void 0;const c5=fs;function u5(e){return{type:c5.RelayMessageType.WEB3_REQUEST_CANCELED,id:e}}ds.Web3RequestCanceledMessage=u5;var ps={};Object.defineProperty(ps,"__esModule",{value:!0});ps.Web3RequestMessage=void 0;const l5=fs;function h5(e){return Object.assign({type:l5.RelayMessageType.WEB3_REQUEST},e)}ps.Web3RequestMessage=h5;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.isWeb3ResponseMessage=Bn.Web3ResponseMessage=void 0;const gf=fs;function d5(e){return Object.assign({type:gf.RelayMessageType.WEB3_RESPONSE},e)}Bn.Web3ResponseMessage=d5;function f5(e){return e&&e.type===gf.RelayMessageType.WEB3_RESPONSE}Bn.isWeb3ResponseMessage=f5;var p5=j&&j.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),b5=j&&j.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),yf=j&&j.__decorate||function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},g5=j&&j.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&p5(t,e,n);return b5(t,e),t},y5=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(os,"__esModule",{value:!0});os.WalletSDKRelay=void 0;const mf=y5(as),Jt=$i,be=hc,ke=Hn,m5=ls,gn=mr,v5=Er,se=O,Nt=g5(Dn),At=zn,Kr=et,_e=Si,_5=ds,w5=ps,Ve=re,je=Bn;class Xe extends Kr.WalletSDKRelayAbstract{constructor(t){var n;super(),this.accountsCallback=null,this.chainCallback=null,this.dappDefaultChainSubject=new Jt.BehaviorSubject(1),this.dappDefaultChain=1,this.appName="",this.appLogoUrl=null,this.subscriptions=new Jt.Subscription,this.linkAPIUrl=t.linkAPIUrl,this.storage=t.storage,this.options=t;const{session:r,ui:i,connection:s}=this.subscribe();if(this._session=r,this.connection=s,this.relayEventManager=t.relayEventManager,t.diagnosticLogger&&t.eventListener)throw new Error("Can't have both eventListener and diagnosticLogger options, use only diagnosticLogger");t.eventListener?this.diagnostic={log:t.eventListener.onEvent}:this.diagnostic=t.diagnosticLogger,this._reloadOnDisconnect=(n=t.reloadOnDisconnect)!==null&&n!==void 0?n:!0,this.ui=i}subscribe(){this.subscriptions.add(this.dappDefaultChainSubject.subscribe(i=>{this.dappDefaultChain!==i&&(this.dappDefaultChain=i)}));const t=At.Session.load(this.storage)||new At.Session(this.storage).save(),n=new m5.WalletSDKConnection(t.id,t.key,this.linkAPIUrl,this.diagnostic);this.subscriptions.add(n.sessionConfig$.subscribe({next:i=>{this.onSessionConfigChanged(i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ke.EVENTS.GENERAL_ERROR,{message:"error while invoking session config callback"})}})),this.subscriptions.add(n.incomingEvent$.pipe((0,be.filter)(i=>i.event==="Web3Response")).subscribe({next:this.handleIncomingEvent})),this.subscriptions.add(n.linked$.pipe((0,be.skip)(1),(0,be.tap)(i=>{var s;this.isLinked=i;const o=this.storage.getItem(Kr.LOCAL_STORAGE_ADDRESSES_KEY);if(i&&(this.session.linked=i),this.isUnlinkedErrorState=!1,o){const a=o.split(" "),c=this.storage.getItem("IsStandaloneSigning")==="true";if(a[0]!==""&&!i&&this.session.linked&&!c){this.isUnlinkedErrorState=!0;const u=this.getSessionIdHash();(s=this.diagnostic)===null||s===void 0||s.log(ke.EVENTS.UNLINKED_ERROR_STATE,{sessionIdHash:u})}}})).subscribe()),this.subscriptions.add(n.sessionConfig$.pipe((0,be.filter)(i=>!!i.metadata&&i.metadata.__destroyed==="1")).subscribe(()=>{var i;const s=n.isDestroyed;return(i=this.diagnostic)===null||i===void 0||i.log(ke.EVENTS.METADATA_DESTROYED,{alreadyDestroyed:s,sessionIdHash:this.getSessionIdHash()}),this.resetAndReload()})),this.subscriptions.add(n.sessionConfig$.pipe((0,be.filter)(i=>i.metadata&&i.metadata.WalletUsername!==void 0)).pipe((0,be.mergeMap)(i=>Nt.decrypt(i.metadata.WalletUsername,t.secret))).subscribe({next:i=>{this.storage.setItem(Kr.WALLET_USER_NAME_KEY,i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ke.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"username"})}})),this.subscriptions.add(n.sessionConfig$.pipe((0,be.filter)(i=>i.metadata&&i.metadata.AppVersion!==void 0)).pipe((0,be.mergeMap)(i=>Nt.decrypt(i.metadata.AppVersion,t.secret))).subscribe({next:i=>{this.storage.setItem(Kr.APP_VERSION_KEY,i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ke.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"appversion"})}})),this.subscriptions.add(n.sessionConfig$.pipe((0,be.filter)(i=>i.metadata&&i.metadata.ChainId!==void 0&&i.metadata.JsonRpcUrl!==void 0)).pipe((0,be.mergeMap)(i=>(0,Jt.zip)(Nt.decrypt(i.metadata.ChainId,t.secret),Nt.decrypt(i.metadata.JsonRpcUrl,t.secret)))).pipe((0,be.distinctUntilChanged)()).subscribe({next:([i,s])=>{this.chainCallback&&this.chainCallback(i,s)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ke.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"chainId|jsonRpcUrl"})}})),this.subscriptions.add(n.sessionConfig$.pipe((0,be.filter)(i=>i.metadata&&i.metadata.EthereumAddress!==void 0)).pipe((0,be.mergeMap)(i=>Nt.decrypt(i.metadata.EthereumAddress,t.secret))).subscribe({next:i=>{this.accountsCallback&&this.accountsCallback([i]),Xe.accountRequestCallbackIds.size>0&&(Array.from(Xe.accountRequestCallbackIds.values()).forEach(s=>{const o=(0,je.Web3ResponseMessage)({id:s,response:(0,Ve.RequestEthereumAccountsResponse)([i])});this.invokeCallback(Object.assign(Object.assign({},o),{id:s}))}),Xe.accountRequestCallbackIds.clear())},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ke.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"selectedAddress"})}})),this.subscriptions.add(n.sessionConfig$.pipe((0,be.filter)(i=>i.metadata&&i.metadata.AppSrc!==void 0)).pipe((0,be.mergeMap)(i=>Nt.decrypt(i.metadata.AppSrc,t.secret))).subscribe({next:i=>{this.ui.setAppSrc(i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ke.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"appSrc"})}}));const r=this.options.uiConstructor({linkAPIUrl:this.options.linkAPIUrl,version:this.options.version,darkMode:this.options.darkMode,session:t,connected$:n.connected$,chainId$:this.dappDefaultChainSubject});return n.connect(),{session:t,ui:r,connection:n}}attachUI(){this.ui.attach()}resetAndReload(){this.connection.setSessionMetadata("__destroyed","1").pipe((0,be.timeout)(1e3),(0,be.catchError)(t=>(0,Jt.of)(null))).subscribe(t=>{var n,r,i;const s=this.ui.isStandalone();try{this.subscriptions.unsubscribe()}catch{(n=this.diagnostic)===null||n===void 0||n.log(ke.EVENTS.GENERAL_ERROR,{message:"Had error unsubscribing"})}(r=this.diagnostic)===null||r===void 0||r.log(ke.EVENTS.SESSION_STATE_CHANGE,{method:"relay::resetAndReload",sessionMetadataChange:"__destroyed, 1",sessionIdHash:this.getSessionIdHash()}),this.connection.destroy();const o=At.Session.load(this.storage);if((o==null?void 0:o.id)===this._session.id?this.storage.clear():o&&((i=this.diagnostic)===null||i===void 0||i.log(ke.EVENTS.SKIPPED_CLEARING_SESSION,{sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:At.Session.hash(o.id)})),this._reloadOnDisconnect){this.ui.reloadUI();return}this.accountsCallback&&this.accountsCallback([],!0),this.subscriptions=new Jt.Subscription;const{session:a,ui:c,connection:u}=this.subscribe();this._session=a,this.connection=u,this.ui=c,s&&this.ui.setStandalone&&this.ui.setStandalone(!0),this.attachUI()},t=>{var n;(n=this.diagnostic)===null||n===void 0||n.log(ke.EVENTS.FAILURE,{method:"relay::resetAndReload",message:`failed to reset and reload with ${t}`,sessionIdHash:this.getSessionIdHash()})})}setAppInfo(t,n){this.appName=t,this.appLogoUrl=n}getStorageItem(t){return this.storage.getItem(t)}get session(){return this._session}setStorageItem(t,n){this.storage.setItem(t,n)}signEthereumMessage(t,n,r,i){return this.sendRequest({method:_e.Web3Method.signEthereumMessage,params:{message:(0,se.hexStringFromBuffer)(t,!0),address:n,addPrefix:r,typedDataJson:i||null}})}ethereumAddressFromSignedMessage(t,n,r){return this.sendRequest({method:_e.Web3Method.ethereumAddressFromSignedMessage,params:{message:(0,se.hexStringFromBuffer)(t,!0),signature:(0,se.hexStringFromBuffer)(n,!0),addPrefix:r}})}signEthereumTransaction(t){return this.sendRequest({method:_e.Web3Method.signEthereumTransaction,params:{fromAddress:t.fromAddress,toAddress:t.toAddress,weiValue:(0,se.bigIntStringFromBN)(t.weiValue),data:(0,se.hexStringFromBuffer)(t.data,!0),nonce:t.nonce,gasPriceInWei:t.gasPriceInWei?(0,se.bigIntStringFromBN)(t.gasPriceInWei):null,maxFeePerGas:t.gasPriceInWei?(0,se.bigIntStringFromBN)(t.gasPriceInWei):null,maxPriorityFeePerGas:t.gasPriceInWei?(0,se.bigIntStringFromBN)(t.gasPriceInWei):null,gasLimit:t.gasLimit?(0,se.bigIntStringFromBN)(t.gasLimit):null,chainId:t.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(t){return this.sendRequest({method:_e.Web3Method.signEthereumTransaction,params:{fromAddress:t.fromAddress,toAddress:t.toAddress,weiValue:(0,se.bigIntStringFromBN)(t.weiValue),data:(0,se.hexStringFromBuffer)(t.data,!0),nonce:t.nonce,gasPriceInWei:t.gasPriceInWei?(0,se.bigIntStringFromBN)(t.gasPriceInWei):null,maxFeePerGas:t.maxFeePerGas?(0,se.bigIntStringFromBN)(t.maxFeePerGas):null,maxPriorityFeePerGas:t.maxPriorityFeePerGas?(0,se.bigIntStringFromBN)(t.maxPriorityFeePerGas):null,gasLimit:t.gasLimit?(0,se.bigIntStringFromBN)(t.gasLimit):null,chainId:t.chainId,shouldSubmit:!0}})}submitEthereumTransaction(t,n){return this.sendRequest({method:_e.Web3Method.submitEthereumTransaction,params:{signedTransaction:(0,se.hexStringFromBuffer)(t,!0),chainId:n}})}scanQRCode(t){return this.sendRequest({method:_e.Web3Method.scanQRCode,params:{regExp:t}})}getQRCodeUrl(){return(0,se.createQrUrl)(this._session.id,this._session.secret,this.linkAPIUrl,!1,this.options.version,this.dappDefaultChain)}genericRequest(t,n){return this.sendRequest({method:_e.Web3Method.generic,params:{action:n,data:t}})}sendGenericMessage(t){return this.sendRequest(t)}sendRequest(t){let n=null;const r=(0,se.randomBytesHex)(8),i=s=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,t.method,s),n==null||n()};return{promise:new Promise((s,o)=>{this.ui.isStandalone()||(n=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:i,onResetConnection:this.resetAndReload})),this.relayEventManager.callbacks.set(r,a=>{if(n==null||n(),a.errorMessage)return o(new Error(a.errorMessage));s(a)}),this.ui.isStandalone()?this.sendRequestStandalone(r,t):this.publishWeb3RequestEvent(r,t)}),cancel:i}}setConnectDisabled(t){this.ui.setConnectDisabled(t)}setAccountsCallback(t){this.accountsCallback=t}setChainCallback(t){this.chainCallback=t}setDappDefaultChainCallback(t){this.dappDefaultChainSubject.next(t)}publishWeb3RequestEvent(t,n){var r;const i=(0,w5.Web3RequestMessage)({id:t,request:n}),s=At.Session.load(this.storage);(r=this.diagnostic)===null||r===void 0||r.log(ke.EVENTS.WEB3_REQUEST,{eventId:i.id,method:`relay::${i.request.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:s?At.Session.hash(s.id):"",isSessionMismatched:((s==null?void 0:s.id)!==this._session.id).toString()}),this.subscriptions.add(this.publishEvent("Web3Request",i,!0).subscribe({next:o=>{var a;(a=this.diagnostic)===null||a===void 0||a.log(ke.EVENTS.WEB3_REQUEST_PUBLISHED,{eventId:i.id,method:`relay::${i.request.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:s?At.Session.hash(s.id):"",isSessionMismatched:((s==null?void 0:s.id)!==this._session.id).toString()})},error:o=>{this.handleWeb3ResponseMessage((0,je.Web3ResponseMessage)({id:i.id,response:{method:i.request.method,errorMessage:o.message}}))}}))}publishWeb3RequestCanceledEvent(t){const n=(0,_5.Web3RequestCanceledMessage)(t);this.subscriptions.add(this.publishEvent("Web3RequestCanceled",n,!1).subscribe())}publishEvent(t,n,r){const i=this.session.secret;return new Jt.Observable(s=>{Nt.encrypt(JSON.stringify(Object.assign(Object.assign({},n),{origin:location.origin})),i).then(o=>{s.next(o),s.complete()})}).pipe((0,be.mergeMap)(s=>this.connection.publishEvent(t,s,r)))}handleIncomingEvent(t){try{this.subscriptions.add((0,Jt.from)(Nt.decrypt(t.data,this.session.secret)).pipe((0,be.map)(n=>JSON.parse(n))).subscribe({next:n=>{const r=(0,je.isWeb3ResponseMessage)(n)?n:null;r&&this.handleWeb3ResponseMessage(r)},error:()=>{var n;(n=this.diagnostic)===null||n===void 0||n.log(ke.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"incomingEvent"})}}))}catch{return}}handleWeb3ResponseMessage(t){var n;const{response:r}=t;if((n=this.diagnostic)===null||n===void 0||n.log(ke.EVENTS.WEB3_RESPONSE,{eventId:t.id,method:`relay::${r.method}`,sessionIdHash:this.getSessionIdHash()}),(0,Ve.isRequestEthereumAccountsResponse)(r)){Xe.accountRequestCallbackIds.forEach(i=>this.invokeCallback(Object.assign(Object.assign({},t),{id:i}))),Xe.accountRequestCallbackIds.clear();return}this.invokeCallback(t)}handleErrorResponse(t,n,r,i){var s;const o=(s=r==null?void 0:r.message)!==null&&s!==void 0?s:(0,gn.standardErrorMessage)(i);this.handleWeb3ResponseMessage((0,je.Web3ResponseMessage)({id:t,response:{method:n,errorMessage:o,errorCode:i}}))}invokeCallback(t){const n=this.relayEventManager.callbacks.get(t.id);n&&(n(t.response),this.relayEventManager.callbacks.delete(t.id))}requestEthereumAccounts(){const t={method:_e.Web3Method.requestEthereumAccounts,params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},n=(0,se.randomBytesHex)(8),r=i=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,t.method,i)};return{promise:new Promise((i,s)=>{var o;this.relayEventManager.callbacks.set(n,c=>{if(this.ui.hideRequestEthereumAccounts(),c.errorMessage)return s(new Error(c.errorMessage));i(c)});const a=((o=window==null?void 0:window.navigator)===null||o===void 0?void 0:o.userAgent)||null;if(a&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)){let c;try{(0,se.isInIFrame)()&&window.top?c=window.top.location:c=window.location}catch{c=window.location}c.href=`https://www.coinbase.com/connect-dapp?uri=${encodeURIComponent(c.href)}`;return}if(this.ui.inlineAccountsResponse()){const c=u=>{this.handleWeb3ResponseMessage((0,je.Web3ResponseMessage)({id:n,response:(0,Ve.RequestEthereumAccountsResponse)(u)}))};this.ui.requestEthereumAccounts({onCancel:r,onAccounts:c})}else{const c=gn.standardErrors.provider.userRejectedRequest("User denied account authorization");this.ui.requestEthereumAccounts({onCancel:()=>r(c)})}Xe.accountRequestCallbackIds.add(n),!this.ui.inlineAccountsResponse()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(n,t)}),cancel:r}}selectProvider(t){const n={method:_e.Web3Method.selectProvider,params:{providerOptions:t}},r=(0,se.randomBytesHex)(8),i=o=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,n.method,o)},s=new Promise((o,a)=>{this.relayEventManager.callbacks.set(r,h=>{if(h.errorMessage)return a(new Error(h.errorMessage));o(h)});const c=h=>{this.handleWeb3ResponseMessage((0,je.Web3ResponseMessage)({id:r,response:(0,Ve.SelectProviderResponse)(v5.ProviderType.Unselected)}))},u=h=>{this.handleWeb3ResponseMessage((0,je.Web3ResponseMessage)({id:r,response:(0,Ve.SelectProviderResponse)(h)}))};this.ui.selectProvider&&this.ui.selectProvider({onApprove:u,onCancel:c,providerOptions:t})});return{cancel:i,promise:s}}watchAsset(t,n,r,i,s,o){const a={method:_e.Web3Method.watchAsset,params:{type:t,options:{address:n,symbol:r,decimals:i,image:s},chainId:o}};let c=null;const u=(0,se.randomBytesHex)(8),h=d=>{this.publishWeb3RequestCanceledEvent(u),this.handleErrorResponse(u,a.method,d),c==null||c()};this.ui.inlineWatchAsset()||(c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:h,onResetConnection:this.resetAndReload}));const l=new Promise((d,b)=>{this.relayEventManager.callbacks.set(u,w=>{if(c==null||c(),w.errorMessage)return b(new Error(w.errorMessage));d(w)});const v=w=>{this.handleWeb3ResponseMessage((0,je.Web3ResponseMessage)({id:u,response:(0,Ve.WatchAssetReponse)(!1)}))},m=()=>{this.handleWeb3ResponseMessage((0,je.Web3ResponseMessage)({id:u,response:(0,Ve.WatchAssetReponse)(!0)}))};this.ui.inlineWatchAsset()&&this.ui.watchAsset({onApprove:m,onCancel:v,type:t,address:n,symbol:r,decimals:i,image:s,chainId:o}),!this.ui.inlineWatchAsset()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(u,a)});return{cancel:h,promise:l}}addEthereumChain(t,n,r,i,s,o){const a={method:_e.Web3Method.addEthereumChain,params:{chainId:t,rpcUrls:n,blockExplorerUrls:i,chainName:s,iconUrls:r,nativeCurrency:o}};let c=null;const u=(0,se.randomBytesHex)(8),h=l=>{this.publishWeb3RequestCanceledEvent(u),this.handleErrorResponse(u,a.method,l),c==null||c()};return this.ui.inlineAddEthereumChain(t)||(c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:h,onResetConnection:this.resetAndReload})),{promise:new Promise((l,d)=>{this.relayEventManager.callbacks.set(u,m=>{if(c==null||c(),m.errorMessage)return d(new Error(m.errorMessage));l(m)});const b=m=>{this.handleWeb3ResponseMessage((0,je.Web3ResponseMessage)({id:u,response:(0,Ve.AddEthereumChainResponse)({isApproved:!1,rpcUrl:""})}))},v=m=>{this.handleWeb3ResponseMessage((0,je.Web3ResponseMessage)({id:u,response:(0,Ve.AddEthereumChainResponse)({isApproved:!0,rpcUrl:m})}))};this.ui.inlineAddEthereumChain(t)&&this.ui.addEthereumChain({onCancel:b,onApprove:v,chainId:a.params.chainId,rpcUrls:a.params.rpcUrls,blockExplorerUrls:a.params.blockExplorerUrls,chainName:a.params.chainName,iconUrls:a.params.iconUrls,nativeCurrency:a.params.nativeCurrency}),!this.ui.inlineAddEthereumChain(t)&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(u,a)}),cancel:h}}switchEthereumChain(t,n){const r={method:_e.Web3Method.switchEthereumChain,params:Object.assign({chainId:t},{address:n})},i=(0,se.randomBytesHex)(8),s=o=>{this.publishWeb3RequestCanceledEvent(i),this.handleErrorResponse(i,r.method,o)};return{promise:new Promise((o,a)=>{this.relayEventManager.callbacks.set(i,h=>{if((0,Ve.isErrorResponse)(h)&&h.errorCode)return a(gn.standardErrors.provider.custom({code:h.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if(h.errorMessage)return a(new Error(h.errorMessage));o(h)});const c=h=>{var l;if(h){const d=(l=(0,gn.getErrorCode)(h))!==null&&l!==void 0?l:gn.standardErrorCodes.provider.unsupportedChain;this.handleErrorResponse(i,_e.Web3Method.switchEthereumChain,h instanceof Error?h:gn.standardErrors.provider.unsupportedChain(t),d)}else this.handleWeb3ResponseMessage((0,je.Web3ResponseMessage)({id:i,response:(0,Ve.SwitchEthereumChainResponse)({isApproved:!1,rpcUrl:""})}))},u=h=>{this.handleWeb3ResponseMessage((0,je.Web3ResponseMessage)({id:i,response:(0,Ve.SwitchEthereumChainResponse)({isApproved:!0,rpcUrl:h})}))};this.ui.switchEthereumChain({onCancel:c,onApprove:u,chainId:r.params.chainId,address:r.params.address}),!this.ui.inlineSwitchEthereumChain()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(i,r)}),cancel:s}}inlineAddEthereumChain(t){return this.ui.inlineAddEthereumChain(t)}getSessionIdHash(){return At.Session.hash(this._session.id)}sendRequestStandalone(t,n){const r=s=>{this.handleErrorResponse(t,n.method,s)},i=s=>{this.handleWeb3ResponseMessage((0,je.Web3ResponseMessage)({id:t,response:s}))};switch(n.method){case _e.Web3Method.signEthereumMessage:this.ui.signEthereumMessage({request:n,onSuccess:i,onCancel:r});break;case _e.Web3Method.signEthereumTransaction:this.ui.signEthereumTransaction({request:n,onSuccess:i,onCancel:r});break;case _e.Web3Method.submitEthereumTransaction:this.ui.submitEthereumTransaction({request:n,onSuccess:i,onCancel:r});break;case _e.Web3Method.ethereumAddressFromSignedMessage:this.ui.ethereumAddressFromSignedMessage({request:n,onSuccess:i});break;default:r();break}}onSessionConfigChanged(t){}}Xe.accountRequestCallbackIds=new Set;yf([mf.default],Xe.prototype,"resetAndReload",null);yf([mf.default],Xe.prototype,"handleIncomingEvent",null);os.WalletSDKRelay=Xe;var bs={};Object.defineProperty(bs,"__esModule",{value:!0});bs.WalletSDKRelayEventManager=void 0;const S5=O;class E5{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const t=this._nextRequestId,n=(0,S5.prepend0x)(t.toString(16));return this.callbacks.get(n)&&this.callbacks.delete(n),t}}bs.WalletSDKRelayEventManager=E5;Object.defineProperty(hr,"__esModule",{value:!0});hr.CoinbaseWalletSDK=void 0;const k5=mi,x5=vi,C5=_i,M5=En,I5=Wi,R5=os,N5=bs,A5=O,vf=Vn;class gs{constructor(t){var n,r,i;this._appName="",this._appLogoUrl=null,this._relay=null,this._relayEventManager=null;const s=t.linkAPIUrl||x5.LINK_API_URL;let o;if(t.uiConstructor?o=t.uiConstructor:o=u=>new I5.WalletSDKUI(u),typeof t.overrideIsMetaMask>"u"?this._overrideIsMetaMask=!1:this._overrideIsMetaMask=t.overrideIsMetaMask,this._overrideIsCoinbaseWallet=(n=t.overrideIsCoinbaseWallet)!==null&&n!==void 0?n:!0,this._overrideIsCoinbaseBrowser=(r=t.overrideIsCoinbaseBrowser)!==null&&r!==void 0?r:!1,t.diagnosticLogger&&t.eventListener)throw new Error("Can't have both eventListener and diagnosticLogger options, use only diagnosticLogger");t.eventListener?this._diagnosticLogger={log:t.eventListener.onEvent}:this._diagnosticLogger=t.diagnosticLogger,this._reloadOnDisconnect=(i=t.reloadOnDisconnect)!==null&&i!==void 0?i:!0;const a=new URL(s),c=`${a.protocol}//${a.host}`;this._storage=new C5.ScopedLocalStorage(`-walletlink:${c}`),this._storage.setItem("version",gs.VERSION),!(this.walletExtension||this.coinbaseBrowser)&&(this._relayEventManager=new N5.WalletSDKRelayEventManager,this._relay=new R5.WalletSDKRelay({linkAPIUrl:s,version:vf.LIB_VERSION,darkMode:!!t.darkMode,uiConstructor:o,storage:this._storage,relayEventManager:this._relayEventManager,diagnosticLogger:this._diagnosticLogger,reloadOnDisconnect:this._reloadOnDisconnect}),this.setAppInfo(t.appName,t.appLogoUrl),!t.headlessMode&&this._relay.attachUI())}makeWeb3Provider(t="",n=1){const r=this.walletExtension;if(r)return this.isCipherProvider(r)||r.setProviderInfo(t,n),this._reloadOnDisconnect===!1&&typeof r.disableReloadOnDisconnect=="function"&&r.disableReloadOnDisconnect(),r;const i=this.coinbaseBrowser;if(i)return i;const s=this._relay;if(!s||!this._relayEventManager||!this._storage)throw new Error("Relay not initialized, should never happen");return t||s.setConnectDisabled(!0),new M5.CoinbaseWalletProvider({relayProvider:()=>Promise.resolve(s),relayEventManager:this._relayEventManager,storage:this._storage,jsonRpcUrl:t,chainId:n,qrUrl:this.getQrUrl(),diagnosticLogger:this._diagnosticLogger,overrideIsMetaMask:this._overrideIsMetaMask,overrideIsCoinbaseWallet:this._overrideIsCoinbaseWallet,overrideIsCoinbaseBrowser:this._overrideIsCoinbaseBrowser})}setAppInfo(t,n){var r;this._appName=t||"DApp",this._appLogoUrl=n||(0,A5.getFavicon)();const i=this.walletExtension;i?this.isCipherProvider(i)||i.setAppInfo(this._appName,this._appLogoUrl):(r=this._relay)===null||r===void 0||r.setAppInfo(this._appName,this._appLogoUrl)}disconnect(){var t;const n=this.walletExtension;n?n.close():(t=this._relay)===null||t===void 0||t.resetAndReload()}getQrUrl(){var t,n;return(n=(t=this._relay)===null||t===void 0?void 0:t.getQRCodeUrl())!==null&&n!==void 0?n:null}getCoinbaseWalletLogo(t,n=240){return(0,k5.walletLogo)(t,n)}get walletExtension(){var t;return(t=window.coinbaseWalletExtension)!==null&&t!==void 0?t:window.walletLinkExtension}get coinbaseBrowser(){var t,n;try{const r=(t=window.ethereum)!==null&&t!==void 0?t:(n=window.top)===null||n===void 0?void 0:n.ethereum;return r&&"isCoinbaseBrowser"in r&&r.isCoinbaseBrowser?r:void 0}catch{return}}isCipherProvider(t){return typeof t.isCipher=="boolean"&&t.isCipher}}hr.CoinbaseWalletSDK=gs;gs.VERSION=vf.LIB_VERSION;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CoinbaseWalletProvider=e.CoinbaseWalletSDK=void 0;const t=hr,n=En;var r=hr;Object.defineProperty(e,"CoinbaseWalletSDK",{enumerable:!0,get:function(){return r.CoinbaseWalletSDK}});var i=En;Object.defineProperty(e,"CoinbaseWalletProvider",{enumerable:!0,get:function(){return i.CoinbaseWalletProvider}}),e.default=t.CoinbaseWalletSDK,typeof window<"u"&&(window.CoinbaseWalletSDK=t.CoinbaseWalletSDK,window.CoinbaseWalletProvider=n.CoinbaseWalletProvider,window.WalletLink=t.CoinbaseWalletSDK,window.WalletLinkProvider=n.CoinbaseWalletProvider)})(il);const T5=Ef(il),D5=Object.freeze(Object.defineProperty({__proto__:null,default:T5},Symbol.toStringTag,{value:"Module"}));export{D5 as i};
